<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes"><title>monaco-editor demo</title>
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript">(function () {
'use strict';

(()=>{'use strict';if(!window.customElements)return;const a=window.HTMLElement,b=window.customElements.define,c=window.customElements.get,d=new Map,e=new Map;let f=!1,g=!1;window.HTMLElement=function(){if(!f){const a=d.get(this.constructor),b=c.call(window.customElements,a);g=!0;const e=new b;return e}f=!1;},window.HTMLElement.prototype=a.prototype;Object.defineProperty(window,'customElements',{value:window.customElements,configurable:!0,writable:!0}),Object.defineProperty(window.customElements,'define',{value:(c,h)=>{const i=h.prototype,j=class extends a{constructor(){super(),Object.setPrototypeOf(this,i),g||(f=!0,h.call(this)),g=!1;}},k=j.prototype;j.observedAttributes=h.observedAttributes,k.connectedCallback=i.connectedCallback,k.disconnectedCallback=i.disconnectedCallback,k.attributeChangedCallback=i.attributeChangedCallback,k.adoptedCallback=i.adoptedCallback,d.set(h,c),e.set(c,h),b.call(window.customElements,c,j);},configurable:!0,writable:!0}),Object.defineProperty(window.customElements,'get',{value:(a)=>e.get(a),configurable:!0,writable:!0});})();

/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/

}());
</script>
    <!--! do not remove -->
<script>(function(){/*

 Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
'use strict';var N="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,Oa="function"==typeof Object.defineProperties?Object.defineProperty:function(g,r,R){g!=Array.prototype&&g!=Object.prototype&&(g[r]=R.value)};function Pb(){Pb=function(){};N.Symbol||(N.Symbol=Qb)}var Qb=function(){var g=0;return function(r){return"jscomp_symbol_"+(r||"")+g++}}();
function Pd(){Pb();var g=N.Symbol.iterator;g||(g=N.Symbol.iterator=N.Symbol("iterator"));"function"!=typeof Array.prototype[g]&&Oa(Array.prototype,g,{configurable:!0,writable:!0,value:function(){return Qd(this)}});Pd=function(){}}function Qd(g){var r=0;return Rd(function(){return r<g.length?{done:!1,value:g[r++]}:{done:!0}})}function Rd(g){Pd();g={next:g};g[N.Symbol.iterator]=function(){return this};return g}function Sd(g){Pd();var r=g[Symbol.iterator];return r?r.call(g):Qd(g)}
function Td(g){for(var r,R=[];!(r=g.next()).done;)R.push(r.value);return R}
(function(){function g(){var a=this;this.s={};this.g=document.documentElement;var b=new Pa;b.rules=[];this.h=w.set(this.g,new w(b));this.i=!1;this.b=this.a=null;Rb(function(){a.c()})}function r(){this.customStyles=[];this.enqueued=!1}function R(){}function ta(a){this.cache={};this.c=void 0===a?100:a}function n(){}function w(a,b,c,d,e){this.G=a||null;this.b=b||null;this.va=c||[];this.S=null;this.$=e||"";this.a=this.C=this.M=null}function u(){}function Pa(){this.end=this.start=0;this.rules=this.parent=
this.previous=null;this.cssText=this.parsedCssText="";this.atRule=!1;this.type=0;this.parsedSelector=this.selector=this.keyframesName=""}function Ud(a){function b(b,c){Object.defineProperty(b,"innerHTML",{enumerable:c.enumerable,configurable:!0,get:c.get,set:function(b){var d=this,e=void 0;t(this)&&(e=[],S(this,function(a){a!==d&&e.push(a)}));c.set.call(this,b);if(e)for(var f=0;f<e.length;f++){var h=e[f];1===h.__CE_state&&a.disconnectedCallback(h)}this.ownerDocument.__CE_hasRegistry?a.f(this):a.l(this);
return b}})}function c(b,c){x(b,"insertAdjacentElement",function(b,d){var e=t(d);b=c.call(this,b,d);e&&a.a(d);t(b)&&a.b(d);return b})}Sb&&x(Element.prototype,"attachShadow",function(a){return this.__CE_shadowRoot=a=Sb.call(this,a)});if(Qa&&Qa.get)b(Element.prototype,Qa);else if(Ra&&Ra.get)b(HTMLElement.prototype,Ra);else{var d=Sa.call(document,"div");a.v(function(a){b(a,{enumerable:!0,configurable:!0,get:function(){return Tb.call(this,!0).innerHTML},set:function(a){var b="template"===this.localName?
this.content:this;for(d.innerHTML=a;0<b.childNodes.length;)Ta.call(b,b.childNodes[0]);for(;0<d.childNodes.length;)ua.call(b,d.childNodes[0])}})})}x(Element.prototype,"setAttribute",function(b,c){if(1!==this.__CE_state)return Ub.call(this,b,c);var d=Ua.call(this,b);Ub.call(this,b,c);c=Ua.call(this,b);a.attributeChangedCallback(this,b,d,c,null)});x(Element.prototype,"setAttributeNS",function(b,c,d){if(1!==this.__CE_state)return Vb.call(this,b,c,d);var e=va.call(this,b,c);Vb.call(this,b,c,d);d=va.call(this,
b,c);a.attributeChangedCallback(this,c,e,d,b)});x(Element.prototype,"removeAttribute",function(b){if(1!==this.__CE_state)return Wb.call(this,b);var c=Ua.call(this,b);Wb.call(this,b);null!==c&&a.attributeChangedCallback(this,b,c,null,null)});x(Element.prototype,"removeAttributeNS",function(b,c){if(1!==this.__CE_state)return Xb.call(this,b,c);var d=va.call(this,b,c);Xb.call(this,b,c);var e=va.call(this,b,c);d!==e&&a.attributeChangedCallback(this,c,d,e,b)});Yb?c(HTMLElement.prototype,Yb):Zb?c(Element.prototype,
Zb):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched.");Va(a,Element.prototype,{fa:Vd,append:Wd});Xd(a,{sa:Yd,kb:Zd,replaceWith:$d,remove:ae})}function Xd(a,b){var c=Element.prototype;function d(b){return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];e=[];for(var f=[],m=0;m<d.length;m++){var g=d[m];g instanceof Element&&t(g)&&f.push(g);if(g instanceof DocumentFragment)for(g=g.firstChild;g;g=g.nextSibling)e.push(g);else e.push(g)}b.apply(this,
d);for(d=0;d<f.length;d++)a.a(f[d]);if(t(this))for(d=0;d<e.length;d++)f=e[d],f instanceof Element&&a.b(f)}}void 0!==b.sa&&(c.before=d(b.sa));void 0!==b.sa&&(c.after=d(b.kb));void 0!==b.replaceWith&&x(c,"replaceWith",function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];e=[];for(var k=[],v=0;v<d.length;v++){var g=d[v];g instanceof Element&&t(g)&&k.push(g);if(g instanceof DocumentFragment)for(g=g.firstChild;g;g=g.nextSibling)e.push(g);else e.push(g)}v=t(this);b.replaceWith.apply(this,
d);for(d=0;d<k.length;d++)a.a(k[d]);if(v)for(a.a(this),d=0;d<e.length;d++)k=e[d],k instanceof Element&&a.b(k)});void 0!==b.remove&&x(c,"remove",function(){var c=t(this);b.remove.call(this);c&&a.a(this)})}function be(a){function b(b,d){Object.defineProperty(b,"textContent",{enumerable:d.enumerable,configurable:!0,get:d.get,set:function(b){if(this.nodeType===Node.TEXT_NODE)d.set.call(this,b);else{var c=void 0;if(this.firstChild){var e=this.childNodes,k=e.length;if(0<k&&t(this)){c=Array(k);for(var v=
0;v<k;v++)c[v]=e[v]}}d.set.call(this,b);if(c)for(b=0;b<c.length;b++)a.a(c[b])}}})}x(Node.prototype,"insertBefore",function(b,d){if(b instanceof DocumentFragment){var c=Array.prototype.slice.apply(b.childNodes);b=$b.call(this,b,d);if(t(this))for(d=0;d<c.length;d++)a.b(c[d]);return b}c=t(b);d=$b.call(this,b,d);c&&a.a(b);t(this)&&a.b(b);return d});x(Node.prototype,"appendChild",function(b){if(b instanceof DocumentFragment){var c=Array.prototype.slice.apply(b.childNodes);b=ua.call(this,b);if(t(this))for(var e=
0;e<c.length;e++)a.b(c[e]);return b}c=t(b);e=ua.call(this,b);c&&a.a(b);t(this)&&a.b(b);return e});x(Node.prototype,"cloneNode",function(b){b=Tb.call(this,b);this.ownerDocument.__CE_hasRegistry?a.f(b):a.l(b);return b});x(Node.prototype,"removeChild",function(b){var c=t(b),e=Ta.call(this,b);c&&a.a(b);return e});x(Node.prototype,"replaceChild",function(b,d){if(b instanceof DocumentFragment){var c=Array.prototype.slice.apply(b.childNodes);b=ac.call(this,b,d);if(t(this))for(a.a(d),d=0;d<c.length;d++)a.b(c[d]);
return b}c=t(b);var f=ac.call(this,b,d),h=t(this);h&&a.a(d);c&&a.a(b);h&&a.b(b);return f});Wa&&Wa.get?b(Node.prototype,Wa):a.v(function(a){b(a,{enumerable:!0,configurable:!0,get:function(){for(var a=[],b=0;b<this.childNodes.length;b++)a.push(this.childNodes[b].textContent);return a.join("")},set:function(a){for(;this.firstChild;)Ta.call(this,this.firstChild);ua.call(this,document.createTextNode(a))}})})}function ce(a){x(Document.prototype,"createElement",function(b){if(this.__CE_hasRegistry){var c=
a.c(b);if(c)return new c.constructor}b=Sa.call(this,b);a.g(b);return b});x(Document.prototype,"importNode",function(b,c){b=de.call(this,b,c);this.__CE_hasRegistry?a.f(b):a.l(b);return b});x(Document.prototype,"createElementNS",function(b,c){if(this.__CE_hasRegistry&&(null===b||"http://www.w3.org/1999/xhtml"===b)){var d=a.c(c);if(d)return new d.constructor}b=ee.call(this,b,c);a.g(b);return b});Va(a,Document.prototype,{fa:fe,append:ge})}function Va(a,b,c){function d(b){return function(c){for(var d=
[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];e=[];for(var f=[],g=0;g<d.length;g++){var p=d[g];p instanceof Element&&t(p)&&f.push(p);if(p instanceof DocumentFragment)for(p=p.firstChild;p;p=p.nextSibling)e.push(p);else e.push(p)}b.apply(this,d);for(d=0;d<f.length;d++)a.a(f[d]);if(t(this))for(d=0;d<e.length;d++)f=e[d],f instanceof Element&&a.b(f)}}void 0!==c.fa&&(b.prepend=d(c.fa));void 0!==c.append&&(b.append=d(c.append))}function he(a){window.HTMLElement=function(){function b(){var b=this.constructor,
d=a.B(b);if(!d)throw Error("The custom element being constructed was not registered with `customElements`.");var e=d.constructionStack;if(0===e.length)return e=Sa.call(document,d.localName),Object.setPrototypeOf(e,b.prototype),e.__CE_state=1,e.__CE_definition=d,a.g(e),e;d=e.length-1;var f=e[d];if(f===bc)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");e[d]=bc;Object.setPrototypeOf(f,b.prototype);a.g(f);return f}b.prototype=ie.prototype;
return b}()}function y(a){this.c=!1;this.a=a;this.h=new Map;this.f=function(a){return a()};this.b=!1;this.g=[];this.i=new Xa(a,document)}function cc(){var a=this;this.b=this.a=void 0;this.c=new Promise(function(b){a.b=b;a.a&&b(a.a)})}function Xa(a,b){this.b=a;this.a=b;this.P=void 0;this.b.f(this.a);"loading"===this.a.readyState&&(this.P=new MutationObserver(this.f.bind(this)),this.P.observe(this.a,{childList:!0,subtree:!0}))}function B(){this.u=new Map;this.s=new Map;this.j=[];this.h=!1}function l(a,
b,c){if(a!==dc)throw new TypeError("Illegal constructor");a=document.createDocumentFragment();a.__proto__=l.prototype;a.H(b,c);return a}function wa(a){if(!a.__shady||void 0===a.__shady.firstChild){a.__shady=a.__shady||{};a.__shady.firstChild=Ya(a);a.__shady.lastChild=Za(a);ec(a);for(var b=a.__shady.childNodes=X(a),c=0,d;c<b.length&&(d=b[c]);c++)d.__shady=d.__shady||{},d.__shady.parentNode=a,d.__shady.nextSibling=b[c+1]||null,d.__shady.previousSibling=b[c-1]||null,fc(d)}}function je(a){var b=a&&a.P;
b&&(b.da.delete(a.bb),b.da.size||(a.gb.__shady.Y=null))}function ke(a,b){a.__shady=a.__shady||{};a.__shady.Y||(a.__shady.Y=new xa);a.__shady.Y.da.add(b);var c=a.__shady.Y;return{bb:b,P:c,gb:a,takeRecords:function(){return c.takeRecords()}}}function xa(){this.a=!1;this.addedNodes=[];this.removedNodes=[];this.da=new Set}function T(a,b){Y[Z]=a;Y[Z+1]=b;Z+=2;2===Z&&($a?$a(aa):le())}function me(){return function(){return process.Ib(aa)}}function ne(){return"undefined"!==typeof ab?function(){ab(aa)}:bb()}
function oe(){var a=0,b=new gc(aa),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function pe(){var a=new MessageChannel;a.port1.onmessage=aa;return function(){return a.port2.postMessage(0)}}function bb(){var a=setTimeout;return function(){return a(aa,1)}}function aa(){for(var a=0;a<Z;a+=2)(0,Y[a])(Y[a+1]),Y[a]=void 0,Y[a+1]=void 0;Z=0}function qe(){try{var a=require("vertx");ab=a.Kb||a.Jb;return ne()}catch(b){return bb()}}function cb(a,b){var c=this,
d=new this.constructor(ba);void 0===d[ya]&&hc(d);var e=c.o;if(e){var f=arguments[e-1];T(function(){return ic(e,d,f,c.m)})}else db(c,d,a,b);return d}function eb(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(ba);ja(b,a);return b}function ba(){}function jc(a){try{return a.then}catch(b){return ka.error=b,ka}}function re(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function se(a,b,c){T(function(a){var d=!1,f=re(c,b,function(c){d||(d=!0,b!==c?ja(a,c):L(a,c))},function(b){d||
(d=!0,C(a,b))});!d&&f&&(d=!0,C(a,f))},a)}function te(a,b){1===b.o?L(a,b.m):2===b.o?C(a,b.m):db(b,void 0,function(b){return ja(a,b)},function(b){return C(a,b)})}function kc(a,b,c){b.constructor===a.constructor&&c===cb&&b.constructor.resolve===eb?te(a,b):c===ka?(C(a,ka.error),ka.error=null):void 0===c?L(a,b):"function"===typeof c?se(a,b,c):L(a,b)}function ja(a,b){if(a===b)C(a,new TypeError("You cannot resolve a promise with itself"));else{var c=typeof b;null===b||"object"!==c&&"function"!==c?L(a,b):
kc(a,b,jc(b))}}function ue(a){a.Ea&&a.Ea(a.m);fb(a)}function L(a,b){void 0===a.o&&(a.m=b,a.o=1,0!==a.U.length&&T(fb,a))}function C(a,b){void 0===a.o&&(a.o=2,a.m=b,T(ue,a))}function db(a,b,c,d){var e=a.U,f=e.length;a.Ea=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a.o&&T(fb,a)}function fb(a){var b=a.U,c=a.o;if(0!==b.length){for(var d,e,f=a.m,h=0;h<b.length;h+=3)d=b[h],e=b[h+c],d?ic(c,d,e,f):e(f);a.U.length=0}}function lc(){this.error=null}function ic(a,b,c,d){var e="function"===typeof c;if(e){try{var f=c(d)}catch(m){gb.error=
m,f=gb}if(f===gb){var h=!0;var k=f.error;f.error=null}else var v=!0;if(b===f){C(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,v=!0;void 0===b.o&&(e&&v?ja(b,f):h?C(b,k):1===a?L(b,f):2===a&&C(b,f))}function ve(a,b){try{b(function(b){ja(a,b)},function(b){C(a,b)})}catch(c){C(a,c)}}function hc(a){a[ya]=mc++;a.o=void 0;a.m=void 0;a.U=[]}function la(a,b){this.fb=a;this.L=new a(ba);this.L[ya]||hc(this.L);nc(b)?(this.aa=this.length=b.length,this.m=Array(this.length),
0===this.length?L(this.L,this.m):(this.length=this.length||0,this.eb(b),0===this.aa&&L(this.L,this.m))):C(this.L,Error("Array Methods must be provided an Array"))}function D(a){this[ya]=mc++;this.m=this.o=void 0;this.U=[];if(ba!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof D)ve(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}function ca(a){return a.__shady&&void 0!==a.__shady.firstChild}function J(a){return"ShadyRoot"===a.Xa}function ma(a){a=a.getRootNode();if(J(a))return a}function hb(a,b){if(a&&b)for(var c=Object.getOwnPropertyNames(b),d=0,e;d<c.length&&(e=c[d]);d++){var f=Object.getOwnPropertyDescriptor(b,e);f&&Object.defineProperty(a,e,f)}}function ib(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(d=0;d<c.length;d++)hb(a,c[d]);return a}function we(a,b){for(var c in b)a[c]=b[c]}function oc(a){jb.push(a);
kb.textContent=pc++}function qc(a,b){for(;b;){if(b==a)return!0;b=b.parentNode}return!1}function rc(a){lb||(lb=!0,oc(za));na.push(a)}function za(){lb=!1;for(var a=!!na.length;na.length;)na.shift()();return a}function xe(a,b){var c=b.getRootNode();return a.map(function(a){var b=c===a.target.getRootNode();if(b&&a.addedNodes){if(b=Array.from(a.addedNodes).filter(function(a){return c===a.getRootNode()}),b.length)return a=Object.create(a),Object.defineProperty(a,"addedNodes",{value:b,configurable:!0}),
a}else if(b)return a}).filter(function(a){return a})}function sc(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";case "\u00a0":return"&nbsp;"}}function tc(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}function mb(a,b){"template"===a.localName&&(a=a.content);for(var c="",d=b?b(a):a.childNodes,e=0,f=d.length,h;e<f&&(h=d[e]);e++){a:{var k=h;var v=a;var g=b;switch(k.nodeType){case Node.ELEMENT_NODE:for(var p=k.localName,l="<"+p,r=k.attributes,
n=0;v=r[n];n++)l+=" "+v.name+'="'+v.value.replace(ye,sc)+'"';l+=">";k=ze[p]?l:l+mb(k,g)+"</"+p+">";break a;case Node.TEXT_NODE:k=k.data;k=v&&Ae[v.localName]?k:k.replace(Be,sc);break a;case Node.COMMENT_NODE:k="\x3c!--"+k.data+"--\x3e";break a;default:throw window.console.error(k),Error("not implemented");}}c+=k}return c}function da(a){E.currentNode=a;return E.parentNode()}function Ya(a){E.currentNode=a;return E.firstChild()}function Za(a){E.currentNode=a;return E.lastChild()}function uc(a){E.currentNode=
a;return E.previousSibling()}function vc(a){E.currentNode=a;return E.nextSibling()}function X(a){var b=[];E.currentNode=a;for(a=E.firstChild();a;)b.push(a),a=E.nextSibling();return b}function wc(a){F.currentNode=a;return F.parentNode()}function xc(a){F.currentNode=a;return F.firstChild()}function yc(a){F.currentNode=a;return F.lastChild()}function zc(a){F.currentNode=a;return F.previousSibling()}function Ac(a){F.currentNode=a;return F.nextSibling()}function Bc(a){var b=[];F.currentNode=a;for(a=F.firstChild();a;)b.push(a),
a=F.nextSibling();return b}function Cc(a){return mb(a,function(a){return X(a)})}function Dc(a){switch(a.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:a=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1);for(var b="",c;c=a.nextNode();)b+=c.nodeValue;return b;default:return a.nodeValue}}function O(a,b,c){for(var d in b){var e=Object.getOwnPropertyDescriptor(a,d);e&&e.configurable||!e&&c?Object.defineProperty(a,d,b[d]):c&&console.warn("Could not define",d,"on",a)}}function U(a){O(a,
Ec);O(a,nb);O(a,ob)}function Fc(a,b,c){fc(a);c=c||null;a.__shady=a.__shady||{};b.__shady=b.__shady||{};c&&(c.__shady=c.__shady||{});a.__shady.previousSibling=c?c.__shady.previousSibling:b.lastChild;var d=a.__shady.previousSibling;d&&d.__shady&&(d.__shady.nextSibling=a);(d=a.__shady.nextSibling=c)&&d.__shady&&(d.__shady.previousSibling=a);a.__shady.parentNode=b;c?c===b.__shady.firstChild&&(b.__shady.firstChild=a):(b.__shady.lastChild=a,b.__shady.firstChild||(b.__shady.firstChild=a));b.__shady.childNodes=
null}function pb(a,b,c){if(b===a)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(c){var d=c.__shady&&c.__shady.parentNode;if(void 0!==d&&d!==a||void 0===d&&da(c)!==a)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.");}if(c===b)return b;b.parentNode&&qb(b.parentNode,b);d=ma(a);var e;if(e=d)a:{if(!b.__noInsertionPoint){var f;"slot"===b.localName?f=[b]:b.querySelectorAll&&
(f=b.querySelectorAll("slot"));if(f&&f.length){e=f;break a}}e=void 0}(f=e)&&d.ab(f);d&&("slot"===a.localName||f)&&d.O();if(ca(a)){d=c;ec(a);a.__shady=a.__shady||{};void 0!==a.__shady.firstChild&&(a.__shady.childNodes=null);if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){f=b.childNodes;for(e=0;e<f.length;e++)Fc(f[e],a,d);b.__shady=b.__shady||{};d=void 0!==b.__shady.firstChild?null:void 0;b.__shady.firstChild=b.__shady.lastChild=d;b.__shady.childNodes=d}else Fc(b,a,d);if(rb(a)){a.__shady.root.O();var h=
!0}else a.__shady.root&&(h=!0)}h||(h=J(a)?a.host:a,c?(c=Gc(c),sb.call(h,b,c)):Hc.call(h,b));Ic(a,b);return b}function qb(a,b){if(b.parentNode!==a)throw Error("The node to be removed is not a child of this node: "+b);var c=ma(b);if(ca(a)){b.__shady=b.__shady||{};a.__shady=a.__shady||{};b===a.__shady.firstChild&&(a.__shady.firstChild=b.__shady.nextSibling);b===a.__shady.lastChild&&(a.__shady.lastChild=b.__shady.previousSibling);var d=b.__shady.previousSibling;var e=b.__shady.nextSibling;d&&(d.__shady=
d.__shady||{},d.__shady.nextSibling=e);e&&(e.__shady=e.__shady||{},e.__shady.previousSibling=d);b.__shady.parentNode=b.__shady.previousSibling=b.__shady.nextSibling=void 0;void 0!==a.__shady.childNodes&&(a.__shady.childNodes=null);if(rb(a)){a.__shady.root.O();var f=!0}}Jc(b);c&&((e=a&&"slot"===a.localName)&&(f=!0),((d=c.hb(b))||e)&&c.O());f||(f=J(a)?a.host:a,(!a.__shady.root&&"slot"!==b.localName||f===da(b))&&oa.call(f,b));Ic(a,null,b);return b}function Jc(a){if(a.__shady&&void 0!==a.__shady.wa)for(var b=
a.childNodes,c=0,d=b.length,e;c<d&&(e=b[c]);c++)Jc(e);a.__shady&&(a.__shady.wa=void 0)}function Gc(a){var b=a;a&&"slot"===a.localName&&(b=(b=a.__shady&&a.__shady.W)&&b.length?b[0]:Gc(a.nextSibling));return b}function rb(a){return(a=a&&a.__shady&&a.__shady.root)&&a.Da()}function Kc(a,b){"slot"===b?(a=a.parentNode,rb(a)&&a.__shady.root.O()):"slot"===a.localName&&"name"===b&&(b=ma(a))&&(b.jb(a),b.O())}function Ic(a,b,c){if(a=a.__shady&&a.__shady.Y)b&&a.addedNodes.push(b),c&&a.removedNodes.push(c),a.vb()}
function Lc(a){if(a&&a.nodeType){a.__shady=a.__shady||{};var b=a.__shady.wa;void 0===b&&(J(a)?b=a:b=(b=a.parentNode)?Lc(b):a,pa.call(document.documentElement,a)&&(a.__shady.wa=b));return b}}function Aa(a,b,c){var d=[];Mc(a.childNodes,b,c,d);return d}function Mc(a,b,c,d){for(var e=0,f=a.length,h;e<f&&(h=a[e]);e++){var k;if(k=h.nodeType===Node.ELEMENT_NODE){k=h;var v=b,g=c,p=d,l=v(k);l&&p.push(k);g&&g(l)?k=l:(Mc(k.childNodes,v,g,p),k=void 0)}if(k)break}}function Nc(a){a=a.getRootNode();J(a)&&a.Ga()}
function Oc(a,b,c){Ba||(Ba=window.ShadyCSS&&window.ShadyCSS.ScopingShim);Ba&&"class"===b?Ba.setElementClass(a,c):(Pc.call(a,b,c),Kc(a,b))}function Qc(a,b){if(a.ownerDocument!==document)return tb.call(document,a,b);var c=tb.call(document,a,!1);if(b){a=a.childNodes;b=0;for(var d;b<a.length;b++)d=Qc(a[b],!0),c.appendChild(d)}return c}function ub(a,b){var c=[],d=a;for(a=a===window?window:a.getRootNode();d;)c.push(d),d=d.assignedSlot?d.assignedSlot:d.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&d.host&&(b||
d!==a)?d.host:d.parentNode;c[c.length-1]===document&&c.push(window);return c}function Rc(a,b){if(!J)return a;a=ub(a,!0);for(var c=0,d,e,f,h;c<b.length;c++)if(d=b[c],f=d===window?window:d.getRootNode(),f!==e&&(h=a.indexOf(f),e=f),!J(f)||-1<h)return d}function vb(a){function b(b,d){b=new a(b,d);b.la=d&&!!d.composed;return b}we(b,a);b.prototype=a.prototype;return b}function Sc(a,b,c){if(c=b.__handlers&&b.__handlers[a.type]&&b.__handlers[a.type][c])for(var d=0,e;(e=c[d])&&a.target!==a.relatedTarget&&
(e.call(b,a),!a.Va);d++);}function Ce(a){var b=a.composedPath();Object.defineProperty(a,"currentTarget",{get:function(){return d},configurable:!0});for(var c=b.length-1;0<=c;c--){var d=b[c];Sc(a,d,"capture");if(a.ma)return}Object.defineProperty(a,"eventPhase",{get:function(){return Event.AT_TARGET}});var e;for(c=0;c<b.length;c++){d=b[c];var f=d.__shady&&d.__shady.root;if(0===c||f&&f===e)if(Sc(a,d,"bubble"),d!==window&&(e=d.getRootNode()),a.ma)break}}function Tc(a,b,c,d,e,f){for(var h=0;h<a.length;h++){var k=
a[h],v=k.type,g=k.capture,p=k.once,l=k.passive;if(b===k.node&&c===v&&d===g&&e===p&&f===l)return h}return-1}function Uc(a,b,c){if(b){if("object"===typeof c){var d=!!c.capture;var e=!!c.once;var f=!!c.passive}else d=!!c,f=e=!1;var h=c&&c.na||this,k=b[qa];if(k){if(-1<Tc(k,h,a,d,e,f))return}else b[qa]=[];k=function(d){e&&this.removeEventListener(a,b,c);d.__target||Vc(d);if(h!==this){var f=Object.getOwnPropertyDescriptor(d,"currentTarget");Object.defineProperty(d,"currentTarget",{get:function(){return h},
configurable:!0})}if(d.composed||-1<d.composedPath().indexOf(h))if(d.target===d.relatedTarget)d.eventPhase===Event.BUBBLING_PHASE&&d.stopImmediatePropagation();else if(d.eventPhase===Event.CAPTURING_PHASE||d.bubbles||d.target===h){var k="object"===typeof b&&b.handleEvent?b.handleEvent(d):b.call(h,d);h!==this&&(f?(Object.defineProperty(d,"currentTarget",f),f=null):delete d.currentTarget);return k}};b[qa].push({node:this,type:a,capture:d,once:e,passive:f,zb:k});wb[a]?(this.__handlers=this.__handlers||
{},this.__handlers[a]=this.__handlers[a]||{capture:[],bubble:[]},this.__handlers[a][d?"capture":"bubble"].push(k)):(this instanceof Window?Wc:Xc).call(this,a,k,c)}}function Yc(a,b,c){if(b){if("object"===typeof c){var d=!!c.capture;var e=!!c.once;var f=!!c.passive}else d=!!c,f=e=!1;var h=c&&c.na||this,k=void 0;var g=null;try{g=b[qa]}catch(m){}g&&(e=Tc(g,h,a,d,e,f),-1<e&&(k=g.splice(e,1)[0].zb,g.length||(b[qa]=void 0)));(this instanceof Window?Zc:$c).call(this,a,k||b,c);k&&wb[a]&&this.__handlers&&this.__handlers[a]&&
(a=this.__handlers[a][d?"capture":"bubble"],k=a.indexOf(k),-1<k&&a.splice(k,1))}}function De(){for(var a in wb)window.addEventListener(a,function(a){a.__target||(Vc(a),Ce(a))},!0)}function Vc(a){a.__target=a.target;a.Ba=a.relatedTarget;if(G.X){var b=ad,c=Object.getPrototypeOf(a);if(!c.hasOwnProperty("__patchProto")){var d=Object.create(c);d.Bb=c;hb(d,b);c.__patchProto=d}a.__proto__=c.__patchProto}else hb(a,ad)}function ra(a,b){return{index:a,Z:[],ca:b}}function Ee(a,b,c,d){var e=0,f=0,h=0,k=0,g=Math.min(b-
e,d-f);if(0==e&&0==f)a:{for(h=0;h<g;h++)if(a[h]!==c[h])break a;h=g}if(b==a.length&&d==c.length){k=a.length;for(var m=c.length,p=0;p<g-h&&Fe(a[--k],c[--m]);)p++;k=p}e+=h;f+=h;b-=k;d-=k;if(0==b-e&&0==d-f)return[];if(e==b){for(b=ra(e,0);f<d;)b.Z.push(c[f++]);return[b]}if(f==d)return[ra(e,b-e)];g=e;h=f;d=d-h+1;k=b-g+1;b=Array(d);for(m=0;m<d;m++)b[m]=Array(k),b[m][0]=m;for(m=0;m<k;m++)b[0][m]=m;for(m=1;m<d;m++)for(p=1;p<k;p++)if(a[g+p-1]===c[h+m-1])b[m][p]=b[m-1][p-1];else{var l=b[m-1][p]+1,n=b[m][p-1]+
1;b[m][p]=l<n?l:n}g=b.length-1;h=b[0].length-1;d=b[g][h];for(a=[];0<g||0<h;)0==g?(a.push(2),h--):0==h?(a.push(3),g--):(k=b[g-1][h-1],m=b[g-1][h],p=b[g][h-1],l=m<p?m<k?m:k:p<k?p:k,l==k?(k==d?a.push(0):(a.push(1),d=k),g--,h--):l==m?(a.push(3),g--,d=m):(a.push(2),h--,d=p));a.reverse();b=void 0;g=[];for(h=0;h<a.length;h++)switch(a[h]){case 0:b&&(g.push(b),b=void 0);e++;f++;break;case 1:b||(b=ra(e,0));b.ca++;e++;b.Z.push(c[f]);f++;break;case 2:b||(b=ra(e,0));b.ca++;e++;break;case 3:b||(b=ra(e,0)),b.Z.push(c[f]),
f++}b&&g.push(b);return g}function Fe(a,b){return a===b}function bd(a){var b=[];do b.unshift(a);while(a=a.parentNode);return b}function cd(a){Nc(a);return a.__shady&&a.__shady.assignedSlot||null}function P(a,b){for(var c=Object.getOwnPropertyNames(b),d=0;d<c.length;d++){var e=c[d],f=Object.getOwnPropertyDescriptor(b,e);f.value?a[e]=f.value:Object.defineProperty(a,e,f)}}function Ge(){var a=window.customElements&&window.customElements.nativeHTMLElement||HTMLElement;P(window.Node.prototype,He);P(window.Window.prototype,
Ie);P(window.Text.prototype,Je);P(window.DocumentFragment.prototype,xb);P(window.Element.prototype,dd);P(window.Document.prototype,ed);window.HTMLSlotElement&&P(window.HTMLSlotElement.prototype,fd);P(a.prototype,Ke);G.X&&(U(window.Node.prototype),U(window.Text.prototype),U(window.DocumentFragment.prototype),U(window.Element.prototype),U(a.prototype),U(window.Document.prototype),window.HTMLSlotElement&&U(window.HTMLSlotElement.prototype))}function gd(a){var b=Le.has(a);a=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(a);
return!b&&a}function t(a){var b=a.isConnected;if(void 0!==b)return b;for(;a&&!(a.__CE_isImportDocument||a instanceof Document);)a=a.parentNode||(window.ShadowRoot&&a instanceof ShadowRoot?a.host:void 0);return!(!a||!(a.__CE_isImportDocument||a instanceof Document))}function yb(a,b){for(;b&&b!==a&&!b.nextSibling;)b=b.parentNode;return b&&b!==a?b.nextSibling:null}function S(a,b,c){c=c?c:new Set;for(var d=a;d;){if(d.nodeType===Node.ELEMENT_NODE){var e=d;b(e);var f=e.localName;if("link"===f&&"import"===
e.getAttribute("rel")){d=e.import;if(d instanceof Node&&!c.has(d))for(c.add(d),d=d.firstChild;d;d=d.nextSibling)S(d,b,c);d=yb(a,e);continue}else if("template"===f){d=yb(a,e);continue}if(e=e.__CE_shadowRoot)for(e=e.firstChild;e;e=e.nextSibling)S(e,b,c)}d=d.firstChild?d.firstChild:yb(a,d)}}function x(a,b,c){a[b]=c}function zb(a){a=a.replace(I.mb,"").replace(I.port,"");var b=hd,c=a,d=new Pa;d.start=0;d.end=c.length;for(var e=d,f=0,h=c.length;f<h;f++)if("{"===c[f]){e.rules||(e.rules=[]);var k=e,g=k.rules[k.rules.length-
1]||null;e=new Pa;e.start=f+1;e.parent=k;e.previous=g;k.rules.push(e)}else"}"===c[f]&&(e.end=f+1,e=e.parent||d);return b(d,a)}function hd(a,b){var c=b.substring(a.start,a.end-1);a.parsedCssText=a.cssText=c.trim();a.parent&&(c=b.substring(a.previous?a.previous.end:a.parent.start,a.start-1),c=Me(c),c=c.replace(I.Ma," "),c=c.substring(c.lastIndexOf(";")+1),c=a.parsedSelector=a.selector=c.trim(),a.atRule=0===c.indexOf("@"),a.atRule?0===c.indexOf("@media")?a.type=M.MEDIA_RULE:c.match(I.rb)&&(a.type=M.ka,
a.keyframesName=a.selector.split(I.Ma).pop()):a.type=0===c.indexOf("--")?M.xa:M.STYLE_RULE);if(c=a.rules)for(var d=0,e=c.length,f;d<e&&(f=c[d]);d++)hd(f,b);return a}function Me(a){return a.replace(/\\([0-9a-f]{1,6})\s/gi,function(a,c){a=c;for(c=6-a.length;c--;)a="0"+a;return"\\"+a})}function id(a,b,c){c=void 0===c?"":c;var d="";if(a.cssText||a.rules){var e=a.rules,f;if(f=e)f=e[0],f=!(f&&f.selector&&0===f.selector.indexOf("--"));if(f){f=0;for(var h=e.length,k;f<h&&(k=e[f]);f++)d=id(k,b,d)}else b?b=
a.cssText:(b=a.cssText,b=b.replace(I.Ha,"").replace(I.La,""),b=b.replace(I.sb,"").replace(I.xb,"")),(d=b.trim())&&(d="  "+d+"\n")}d&&(a.selector&&(c+=a.selector+" {\n"),c+=d,a.selector&&(c+="}\n\n"));return c}function jd(a){A=a&&a.shimcssproperties?!1:z||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)"))}function ea(a,b){if(!a)return"";"string"===typeof a&&(a=zb(a));b&&fa(a,b);return id(a,A)}function Ca(a){!a.__cssRules&&
a.textContent&&(a.__cssRules=zb(a.textContent));return a.__cssRules||null}function kd(a){return!!a.parent&&a.parent.type===M.ka}function fa(a,b,c,d){if(a){var e=!1,f=a.type;if(d&&f===M.MEDIA_RULE){var h=a.selector.match(Ne);h&&(window.matchMedia(h[1]).matches||(e=!0))}f===M.STYLE_RULE?b(a):c&&f===M.ka?c(a):f===M.xa&&(e=!0);if((a=a.rules)&&!e){e=0;f=a.length;for(var k;e<f&&(k=a[e]);e++)fa(k,b,c,d)}}}function Ab(a,b,c,d){var e=document.createElement("style");b&&e.setAttribute("scope",b);e.textContent=
a;ld(e,c,d);return e}function ld(a,b,c){b=b||document.head;b.insertBefore(a,c&&c.nextSibling||b.firstChild);V?a.compareDocumentPosition(V)===Node.DOCUMENT_POSITION_PRECEDING&&(V=a):V=a}function md(a,b){var c=a.indexOf("var(");if(-1===c)return b(a,"","","");a:{var d=0;var e=c+3;for(var f=a.length;e<f;e++)if("("===a[e])d++;else if(")"===a[e]&&0===--d)break a;e=-1}d=a.substring(c+4,e);c=a.substring(0,c);a=md(a.substring(e+1),b);e=d.indexOf(",");return-1===e?b(c,d.trim(),"",a):b(c,d.substring(0,e).trim(),
d.substring(e+1).trim(),a)}function Da(a,b){z?a.setAttribute("class",b):window.ShadyDOM.nativeMethods.setAttribute.call(a,"class",b)}function W(a){var b=a.localName,c="";b?-1<b.indexOf("-")||(c=b,b=a.getAttribute&&a.getAttribute("is")||""):(b=a.is,c=a.extends);return{is:b,$:c}}function nd(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.target!==document.documentElement&&c.target!==document.head)for(var d=0;d<c.addedNodes.length;d++){var e=c.addedNodes[d];if(e.nodeType===Node.ELEMENT_NODE){var f=e.getRootNode();
var h=e;var k=[];h.classList?k=Array.from(h.classList):h instanceof window.SVGElement&&h.hasAttribute("class")&&(k=h.getAttribute("class").split(/\s+/));h=k;k=h.indexOf(q.a);if((h=-1<k?h[k+1]:"")&&f===e.ownerDocument)q.b(e,h,!0);else if(f.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(f=f.host))if(f=W(f).is,h===f)for(e=window.ShadyDOM.nativeMethods.querySelectorAll.call(e,":not(."+q.a+")"),f=0;f<e.length;f++)q.h(e[f],h);else h&&q.b(e,h,!0),q.b(e,f)}}}}function Oe(a){if(a=Ea[a])a._applyShimCurrentVersion=
a._applyShimCurrentVersion||0,a._applyShimValidatingVersion=a._applyShimValidatingVersion||0,a._applyShimNextVersion=(a._applyShimNextVersion||0)+1}function od(a){return a._applyShimCurrentVersion===a._applyShimNextVersion}function Pe(a){a._applyShimValidatingVersion=a._applyShimNextVersion;a.b||(a.b=!0,Qe.then(function(){a._applyShimCurrentVersion=a._applyShimNextVersion;a.b=!1}))}function Rb(a){requestAnimationFrame(function(){pd?pd(a):(Bb||(Bb=new Promise(function(a){Cb=a}),"complete"===document.readyState?
Cb():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&Cb()})),Bb.then(function(){a&&a()}))})}(function(){if(!function(){var a=document.createEvent("Event");a.initEvent("foo",!0,!0);a.preventDefault();return a.defaultPrevented}()){var a=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(a.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var b=/Trident/.test(navigator.userAgent);
if(!window.CustomEvent||b&&"function"!==typeof window.CustomEvent)window.CustomEvent=function(a,b){b=b||{};var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!!b.bubbles,!!b.cancelable,b.detail);return c},window.CustomEvent.prototype=window.Event.prototype;if(!window.Event||b&&"function"!==typeof window.Event){var c=window.Event;window.Event=function(a,b){b=b||{};var c=document.createEvent("Event");c.initEvent(a,!!b.bubbles,!!b.cancelable);return c};if(c)for(var d in c)window.Event[d]=
c[d];window.Event.prototype=c.prototype}if(!window.MouseEvent||b&&"function"!==typeof window.MouseEvent){b=window.MouseEvent;window.MouseEvent=function(a,b){b=b||{};var c=document.createEvent("MouseEvent");c.initMouseEvent(a,!!b.bubbles,!!b.cancelable,b.view||window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget);return c};if(b)for(d in b)window.MouseEvent[d]=b[d];window.MouseEvent.prototype=b.prototype}Array.from||(Array.from=function(a){return[].slice.call(a)});
Object.assign||(Object.assign=function(a,b){for(var c=[].slice.call(arguments,1),d=0,e;d<c.length;d++)if(e=c[d])for(var f=a,g=e,l=Object.getOwnPropertyNames(g),n=0;n<l.length;n++)e=l[n],f[e]=g[e];return a})})(window.WebComponents);(function(){function a(){}var b="undefined"===typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var a=Document.prototype.importNode;Document.prototype.importNode=function(){var b=a.apply(this,arguments);if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var c=
this.createDocumentFragment();c.appendChild(b);return c}return b}}();var c=Node.prototype.cloneNode,d=Document.prototype.createElement,e=Document.prototype.importNode,f=function(){if(!b){var a=document.createElement("template"),c=document.createElement("template");c.content.appendChild(document.createElement("div"));a.content.appendChild(c);a=a.cloneNode(!0);return 0===a.content.childNodes.length||0===a.content.firstChild.content.childNodes.length||!(document.createDocumentFragment().cloneNode()instanceof
DocumentFragment)}}();if(b){var h=document.implementation.createHTMLDocument("template"),k=!0,g=document.createElement("style");g.textContent="template{display:none;}";var m=document.head;m.insertBefore(g,m.firstElementChild);a.prototype=Object.create(HTMLElement.prototype);var l=!document.createElement("div").hasOwnProperty("innerHTML");a.R=function(b){if(!b.content){b.content=h.createDocumentFragment();for(var c;c=b.firstChild;)b.content.appendChild(c);if(l)b.__proto__=a.prototype;else if(b.cloneNode=
function(b){return a.a(this,b)},k)try{n(b),r(b)}catch(sf){k=!1}a.V(b.content)}};var n=function(b){Object.defineProperty(b,"innerHTML",{get:function(){for(var a="",b=this.content.firstChild;b;b=b.nextSibling)a+=b.outerHTML||b.data.replace(t,u);return a},set:function(b){h.body.innerHTML=b;for(a.V(h);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;h.body.firstChild;)this.content.appendChild(h.body.firstChild)},configurable:!0})},r=function(a){Object.defineProperty(a,"outerHTML",
{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(a){if(this.parentNode){h.body.innerHTML=a;for(a=document.createDocumentFragment();h.body.firstChild;)a.appendChild(h.body.firstChild);this.parentNode.replaceChild(a,this)}else throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");},configurable:!0})};n(a.prototype);r(a.prototype);a.V=function(b){b=b.querySelectorAll("template");for(var c=0,d=b.length,e;c<d&&(e=b[c]);c++)a.R(e)};
document.addEventListener("DOMContentLoaded",function(){a.V(document)});Document.prototype.createElement=function(){var b=d.apply(this,arguments);"template"===b.localName&&a.R(b);return b};var t=/[&\u00A0<>]/g,u=function(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case "\u00a0":return"&nbsp;"}}}if(b||f)a.a=function(a,b){var d=c.call(a,!1);this.R&&this.R(d);b&&(d.content.appendChild(c.call(a.content,!0)),this.ua(d.content,a.content));return d},a.prototype.cloneNode=
function(b){return a.a(this,b)},a.ua=function(a,b){if(b.querySelectorAll){b=b.querySelectorAll("template");a=a.querySelectorAll("template");for(var c=0,d=a.length,e,f;c<d;c++)f=b[c],e=a[c],this.R&&this.R(f),e.parentNode.replaceChild(f.cloneNode(!0),e)}},Node.prototype.cloneNode=function(b){if(this instanceof DocumentFragment)if(b)var d=this.ownerDocument.importNode(this,!0);else return this.ownerDocument.createDocumentFragment();else d=c.call(this,b);b&&a.ua(d,this);return d},Document.prototype.importNode=
function(b,c){if("template"===b.localName)return a.a(b,c);var d=e.call(this,b,c);c&&a.ua(d,b);return d},f&&(window.HTMLTemplateElement.prototype.cloneNode=function(b){return a.a(this,b)});b&&(window.HTMLTemplateElement=a)})();var Db;Array.isArray?Db=Array.isArray:Db=function(a){return"[object Array]"===Object.prototype.toString.call(a)};var nc=Db,Z=0,ab,$a,qd="undefined"!==typeof window?window:void 0,rd=qd||{},gc=rd.MutationObserver||rd.WebKitMutationObserver,Re="undefined"!==typeof Uint8ClampedArray&&
"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,Y=Array(1E3);var le="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process)?me():gc?oe():Re?pe():qd||"function"!==typeof require?bb():qe();var ya=Math.random().toString(36).substring(16),ka=new lc,gb=new lc,mc=0;la.prototype.eb=function(a){for(var b=0;void 0===this.o&&b<a.length;b++)this.cb(a[b],b)};la.prototype.cb=function(a,b){var c=this.fb,d=c.resolve;d===eb?(d=jc(a),d===cb&&
void 0!==a.o?this.qa(a.o,b,a.m):"function"!==typeof d?(this.aa--,this.m[b]=a):c===D?(c=new c(ba),kc(c,a,d),this.ra(c,b)):this.ra(new c(function(b){return b(a)}),b)):this.ra(d(a),b)};la.prototype.qa=function(a,b,c){var d=this.L;void 0===d.o&&(this.aa--,2===a?C(d,c):this.m[b]=c);0===this.aa&&L(d,this.m)};la.prototype.ra=function(a,b){var c=this;db(a,void 0,function(a){return c.qa(1,b,a)},function(a){return c.qa(2,b,a)})};D.all=function(a){return(new la(this,a)).L};D.race=function(a){var b=this;return nc(a)?
new b(function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};D.resolve=eb;D.reject=function(a){var b=new this(ba);C(b,a);return b};D.Gb=function(a){$a=a};D.Fb=function(a){T=a};D.Cb=T;D.prototype={constructor:D,then:cb,a:function(a){return this.then(null,a)}};window.Promise||(window.Promise=D,D.prototype["catch"]=D.prototype.a);(function(a){function b(a,b){if("function"===typeof window.CustomEvent)return new CustomEvent(a,
b);var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!!b.bubbles,!!b.cancelable,b.detail);return c}function c(a){if(l)return a.ownerDocument!==document?a.ownerDocument:null;var b=a.__importDoc;if(!b&&a.parentNode){b=a.parentNode;if("function"===typeof b.closest)b=b.closest("link[rel=import]");else for(;!k(b)&&(b=b.parentNode););a.__importDoc=b}return b}function d(a){var b=document.querySelectorAll("link[rel=import]:not([import-dependency])"),c=b.length;c?m(b,function(b){return h(b,function(){0===
--c&&a()})}):a()}function e(a){function b(){"loading"!==document.readyState&&document.body&&(document.removeEventListener("readystatechange",b),a())}document.addEventListener("readystatechange",b);b()}function f(a){e(function(){return d(function(){return a&&a()})})}function h(a,b){if(a.__loaded)b&&b();else if("script"===a.localName&&!a.src||"style"===a.localName&&!a.firstChild)a.__loaded=!0,b&&b();else{var c=function(d){a.removeEventListener(d.type,c);a.__loaded=!0;b&&b()};a.addEventListener("load",
c);z&&"style"===a.localName||a.addEventListener("error",c)}}function k(a){return a.nodeType===Node.ELEMENT_NODE&&"link"===a.localName&&"import"===a.rel}function g(){var a=this;this.a={};this.b=0;this.f=new MutationObserver(function(b){return a.l(b)});this.f.observe(document.head,{childList:!0,subtree:!0});this.c(document)}function m(a,b,c){var d=a?a.length:0,e=c?-1:1;for(c=c?d-1:0;c<d&&0<=c;c+=e)b(a[c],c)}var l="import"in document.createElement("link"),n=null;!1==="currentScript"in document&&Object.defineProperty(document,
"currentScript",{get:function(){return n||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null)},configurable:!0});var r=/(url\()([^)]*)(\))/g,t=/(@import[\s]+(?!url\())([^;]*)(;)/g,u=/(<link[^>]*)(rel=['|"]?stylesheet['|"]?[^>]*>)/g,q={nb:function(a,b){a.href&&a.setAttribute("href",q.ga(a.getAttribute("href"),b));a.src&&a.setAttribute("src",q.ga(a.getAttribute("src"),b));if("style"===a.localName){var c=q.Na(a.textContent,b,r);a.textContent=q.Na(c,b,t)}},Na:function(a,
b,c){return a.replace(c,function(a,c,d,e){a=d.replace(/["']/g,"");b&&(a=q.ga(a,b));return c+"'"+a+"'"+e})},ga:function(a,b){if(void 0===q.oa){q.oa=!1;try{var c=new URL("b","http://a");c.pathname="c%20d";q.oa="http://a/c%20d"===c.href}catch(tf){}}if(q.oa)return(new URL(a,b)).href;c=q.$a;c||(c=document.implementation.createHTMLDocument("temp"),q.$a=c,c.za=c.createElement("base"),c.head.appendChild(c.za),c.ya=c.createElement("a"));c.za.href=b;c.ya.href=a;return c.ya.href||a}},w={async:!0,load:function(a,
b,c){if(a)if(a.match(/^data:/)){a=a.split(",");var d=a[1];d=-1<a[0].indexOf(";base64")?atob(d):decodeURIComponent(d);b(d)}else{var e=new XMLHttpRequest;e.open("GET",a,w.async);e.onload=function(){var a=e.responseURL||e.getResponseHeader("Location");a&&0===a.indexOf("/")&&(a=(location.origin||location.protocol+"//"+location.host)+a);var d=e.response||e.responseText;304===e.status||0===e.status||200<=e.status&&300>e.status?b(d,a):c(d)};e.send()}else c("error: href must be specified")}},z=/Trident/.test(navigator.userAgent)||
/Edge\/\d./i.test(navigator.userAgent);g.prototype.c=function(a){var b=this;a=a.querySelectorAll("link[rel=import]");m(a,function(a){return b.h(a)})};g.prototype.h=function(a){var b=this,c=a.href;if(void 0!==this.a[c]){var d=this.a[c];d&&d.__loaded&&(a.import=d,this.g(a))}else this.b++,this.a[c]="pending",w.load(c,function(a,d){a=b.s(a,d||c);b.a[c]=a;b.b--;b.c(a);b.i()},function(){b.a[c]=null;b.b--;b.i()})};g.prototype.s=function(a,b){if(!a)return document.createDocumentFragment();z&&(a=a.replace(u,
function(a,b,c){return-1===a.indexOf("type=")?b+" type=import-disable "+c:a}));var c=document.createElement("template");c.innerHTML=a;if(c.content)a=c.content;else for(a=document.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);if(c=a.querySelector("base"))b=q.ga(c.getAttribute("href"),b),c.removeAttribute("href");c=a.querySelectorAll('link[rel=import], link[rel=stylesheet][href][type=import-disable],\n    style:not([type]), link[rel=stylesheet][href]:not([type]),\n    script:not([type]), script[type="application/javascript"],\n    script[type="text/javascript"]');
var d=0;m(c,function(a){h(a);q.nb(a,b);a.setAttribute("import-dependency","");"script"===a.localName&&!a.src&&a.textContent&&(a.setAttribute("src","data:text/javascript;charset=utf-8,"+encodeURIComponent(a.textContent+("\n//# sourceURL="+b+(d?"-"+d:"")+".js\n"))),a.textContent="",d++)});return a};g.prototype.i=function(){var a=this;if(!this.b){this.f.disconnect();this.flatten(document);var b=!1,c=!1,d=function(){c&&b&&(a.c(document),a.b||(a.f.observe(document.head,{childList:!0,subtree:!0}),a.j()))};
this.v(function(){c=!0;d()});this.u(function(){b=!0;d()})}};g.prototype.flatten=function(a){var b=this;a=a.querySelectorAll("link[rel=import]");m(a,function(a){var c=b.a[a.href];(a.import=c)&&c.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(b.a[a.href]=a,a.readyState="loading",a.import=a,b.flatten(c),a.appendChild(c))})};g.prototype.u=function(a){function b(e){if(e<d){var f=c[e],g=document.createElement("script");f.removeAttribute("import-dependency");m(f.attributes,function(a){return g.setAttribute(a.name,
a.value)});n=g;f.parentNode.replaceChild(g,f);h(g,function(){n=null;b(e+1)})}else a()}var c=document.querySelectorAll("script[import-dependency]"),d=c.length;b(0)};g.prototype.v=function(a){var b=document.querySelectorAll("style[import-dependency],\n    link[rel=stylesheet][import-dependency]"),d=b.length;if(d){var e=z&&!!document.querySelector("link[rel=stylesheet][href][type=import-disable]");m(b,function(b){h(b,function(){b.removeAttribute("import-dependency");0===--d&&a()});if(e&&b.parentNode!==
document.head){var f=document.createElement(b.localName);f.__appliedElement=b;f.setAttribute("type","import-placeholder");b.parentNode.insertBefore(f,b.nextSibling);for(f=c(b);f&&c(f);)f=c(f);f.parentNode!==document.head&&(f=null);document.head.insertBefore(b,f);b.removeAttribute("type")}})}else a()};g.prototype.j=function(){var a=this,b=document.querySelectorAll("link[rel=import]");m(b,function(b){return a.g(b)},!0)};g.prototype.g=function(a){a.__loaded||(a.__loaded=!0,a.import&&(a.import.readyState=
"complete"),a.dispatchEvent(b(a.import?"load":"error",{bubbles:!1,cancelable:!1,detail:void 0})))};g.prototype.l=function(a){var b=this;m(a,function(a){return m(a.addedNodes,function(a){a&&a.nodeType===Node.ELEMENT_NODE&&(k(a)?b.h(a):b.c(a))})})};if(l){var x=document.querySelectorAll("link[rel=import]");m(x,function(a){a.import&&"loading"===a.import.readyState||(a.__loaded=!0)});x=function(a){a=a.target;k(a)&&(a.__loaded=!0)};document.addEventListener("load",x,!0);document.addEventListener("error",
x,!0)}else{var y=Object.getOwnPropertyDescriptor(Node.prototype,"baseURI");Object.defineProperty((!y||y.configurable?Node:Element).prototype,"baseURI",{get:function(){var a=k(this)?this:c(this);return a?a.href:y&&y.get?y.get.call(this):(document.querySelector("base")||window.location).href},configurable:!0,enumerable:!0});e(function(){return new g})}f(function(){return document.dispatchEvent(b("HTMLImportsLoaded",{cancelable:!0,bubbles:!0,detail:void 0}))});a.useNative=l;a.whenReady=f;a.importForElement=
c})(window.HTMLImports=window.HTMLImports||{});window.WebComponents=window.WebComponents||{flags:{}};var sd=document.querySelector('script[src*="webcomponents-lite.js"]'),Se=/wc-(.+)/,H={};if(!H.noOpts){location.search.slice(1).split("&").forEach(function(a){a=a.split("=");var b;a[0]&&(b=a[0].match(Se))&&(H[b[1]]=a[1]||!0)});if(sd)for(var td=0,Fa;Fa=sd.attributes[td];td++)"src"!==Fa.name&&(H[Fa.name]=Fa.value||!0);if(H.log&&H.log.split){var Te=H.log.split(",");H.log={};Te.forEach(function(a){H.log[a]=
!0})}else H.log={}}window.WebComponents.flags=H;var ud=H.shadydom;ud&&(window.ShadyDOM=window.ShadyDOM||{},window.ShadyDOM.force=ud);var vd=H.register||H.ce;vd&&window.customElements&&(window.customElements.forcePolyfill=vd);var G=window.ShadyDOM||{};G.ob=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var Eb=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");G.X=!!(Eb&&Eb.configurable&&Eb.get);G.Ka=G.force||!G.ob;var ha=Element.prototype,wd=ha.matches||ha.matchesSelector||
ha.mozMatchesSelector||ha.msMatchesSelector||ha.oMatchesSelector||ha.webkitMatchesSelector,kb=document.createTextNode(""),pc=0,jb=[];(new MutationObserver(function(){for(;jb.length;)try{jb.shift()()}catch(a){throw kb.textContent=pc++,a;}})).observe(kb,{characterData:!0});var Ue=!!document.contains,na=[],lb;za.list=na;xa.prototype.vb=function(){var a=this;this.a||(this.a=!0,oc(function(){a.b()}))};xa.prototype.b=function(){if(this.a){this.a=!1;var a=this.takeRecords();a.length&&this.da.forEach(function(b){b(a)})}};
xa.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var a=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];this.addedNodes=[];this.removedNodes=[];return a}return[]};var Hc=Element.prototype.appendChild,sb=Element.prototype.insertBefore,oa=Element.prototype.removeChild,Pc=Element.prototype.setAttribute,xd=Element.prototype.removeAttribute,Fb=Element.prototype.cloneNode,tb=Document.prototype.importNode,Xc=Element.prototype.addEventListener,$c=Element.prototype.removeEventListener,
Wc=Window.prototype.addEventListener,Zc=Window.prototype.removeEventListener,Gb=Element.prototype.dispatchEvent,pa=Node.prototype.contains||HTMLElement.prototype.contains,Ve=Object.freeze({appendChild:Hc,insertBefore:sb,removeChild:oa,setAttribute:Pc,removeAttribute:xd,cloneNode:Fb,importNode:tb,addEventListener:Xc,removeEventListener:$c,Lb:Wc,Mb:Zc,dispatchEvent:Gb,querySelector:Element.prototype.querySelector,querySelectorAll:Element.prototype.querySelectorAll,contains:pa}),ye=/[&\u00A0"]/g,Be=
/[&\u00A0<>]/g,ze=tc("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),Ae=tc("style script xmp iframe noembed noframes plaintext noscript".split(" ")),E=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),F=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1),We=Object.freeze({parentNode:da,firstChild:Ya,lastChild:Za,previousSibling:uc,nextSibling:vc,childNodes:X,parentElement:wc,firstElementChild:xc,lastElementChild:yc,previousElementSibling:zc,
nextElementSibling:Ac,children:Bc,innerHTML:Cc,textContent:Dc}),Hb=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML")||Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML"),Ga=document.implementation.createHTMLDocument("inert").createElement("div"),Ib=Object.getOwnPropertyDescriptor(Document.prototype,"activeElement"),Ec={parentElement:{get:function(){var a=this.__shady&&this.__shady.parentNode;a&&a.nodeType!==Node.ELEMENT_NODE&&(a=null);return void 0!==a?a:wc(this)},configurable:!0},
parentNode:{get:function(){var a=this.__shady&&this.__shady.parentNode;return void 0!==a?a:da(this)},configurable:!0},nextSibling:{get:function(){var a=this.__shady&&this.__shady.nextSibling;return void 0!==a?a:vc(this)},configurable:!0},previousSibling:{get:function(){var a=this.__shady&&this.__shady.previousSibling;return void 0!==a?a:uc(this)},configurable:!0},className:{get:function(){return this.getAttribute("class")||""},set:function(a){this.setAttribute("class",a)},configurable:!0},nextElementSibling:{get:function(){if(this.__shady&&
void 0!==this.__shady.nextSibling){for(var a=this.nextSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return a}return Ac(this)},configurable:!0},previousElementSibling:{get:function(){if(this.__shady&&void 0!==this.__shady.previousSibling){for(var a=this.previousSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.previousSibling;return a}return zc(this)},configurable:!0}},nb={childNodes:{get:function(){if(ca(this)){if(!this.__shady.childNodes){this.__shady.childNodes=[];for(var a=this.firstChild;a;a=
a.nextSibling)this.__shady.childNodes.push(a)}var b=this.__shady.childNodes}else b=X(this);b.item=function(a){return b[a]};return b},configurable:!0},childElementCount:{get:function(){return this.children.length},configurable:!0},firstChild:{get:function(){var a=this.__shady&&this.__shady.firstChild;return void 0!==a?a:Ya(this)},configurable:!0},lastChild:{get:function(){var a=this.__shady&&this.__shady.lastChild;return void 0!==a?a:Za(this)},configurable:!0},textContent:{get:function(){if(ca(this)){for(var a=
[],b=0,c=this.childNodes,d;d=c[b];b++)d.nodeType!==Node.COMMENT_NODE&&a.push(d.textContent);return a.join("")}return Dc(this)},set:function(a){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(0<a.length||this.nodeType===Node.ELEMENT_NODE)&&this.appendChild(document.createTextNode(a));break;default:this.nodeValue=a}},configurable:!0},firstElementChild:{get:function(){if(this.__shady&&void 0!==this.__shady.firstChild){for(var a=
this.firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return a}return xc(this)},configurable:!0},lastElementChild:{get:function(){if(this.__shady&&void 0!==this.__shady.lastChild){for(var a=this.lastChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.previousSibling;return a}return yc(this)},configurable:!0},children:{get:function(){var a;ca(this)?a=Array.prototype.filter.call(this.childNodes,function(a){return a.nodeType===Node.ELEMENT_NODE}):a=Bc(this);a.item=function(b){return a[b]};return a},
configurable:!0},innerHTML:{get:function(){var a="template"===this.localName?this.content:this;return ca(this)?mb(a):Cc(a)},set:function(a){for(var b="template"===this.localName?this.content:this;b.firstChild;)b.removeChild(b.firstChild);for(Hb&&Hb.set?Hb.set.call(Ga,a):Ga.innerHTML=a;Ga.firstChild;)b.appendChild(Ga.firstChild)},configurable:!0}},yd={shadowRoot:{get:function(){return this.__shady&&this.__shady.tb||null},configurable:!0}},ob={activeElement:{get:function(){var a=Ib&&Ib.get?Ib.get.call(document):
G.X?void 0:document.activeElement;if(a&&a.nodeType){var b=!!J(this);if(this===document||b&&this.host!==a&&pa.call(this.host,a)){for(b=ma(a);b&&b!==this;)a=b.host,b=ma(a);a=this===document?b?null:a:b===this?a:null}else a=null}else a=null;return a},set:function(){},configurable:!0}},fc=G.X?function(){}:function(a){a.__shady&&a.__shady.Ya||(a.__shady=a.__shady||{},a.__shady.Ya=!0,O(a,Ec,!0))},ec=G.X?function(){}:function(a){a.__shady&&a.__shady.Wa||(a.__shady=a.__shady||{},a.__shady.Wa=!0,O(a,nb,!0),
O(a,yd,!0))},Ba=null,qa="__eventWrappers"+Date.now(),Xe={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,
lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},ad={get composed(){!1!==this.isTrusted&&void 0===this.la&&(this.la=Xe[this.type]);return this.la||!1},composedPath:function(){this.Aa||(this.Aa=ub(this.__target,this.composed));return this.Aa},get target(){return Rc(this.currentTarget,this.composedPath())},get relatedTarget(){if(!this.Ba)return null;this.Ca||(this.Ca=ub(this.Ba,!0));return Rc(this.currentTarget,
this.Ca)},stopPropagation:function(){Event.prototype.stopPropagation.call(this);this.ma=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this);this.ma=this.Va=!0}},wb={focus:!0,blur:!0},Ye=vb(window.Event),Ze=vb(window.CustomEvent),$e=vb(window.MouseEvent),dc={};l.prototype=Object.create(DocumentFragment.prototype);l.prototype.H=function(a,b){this.Xa="ShadyRoot";wa(a);wa(this);this.host=a;this.J=b&&b.mode;a.__shady=a.__shady||{};a.__shady.root=this;a.__shady.tb=
"closed"!==this.J?this:null;this.ba=!1;this.b=[];this.a={};this.c=[];b=X(a);for(var c=0,d=b.length;c<d;c++)oa.call(a,b[c])};l.prototype.O=function(){var a=this;this.ba||(this.ba=!0,rc(function(){return a.Ga()}))};l.prototype.N=function(){for(var a,b=this;b;)b.ba&&(a=b),b=b.ib();return a};l.prototype.ib=function(){var a=this.host.getRootNode();if(J(a))for(var b=this.host.childNodes,c=0,d;c<b.length;c++)if(d=b[c],this.j(d))return a};l.prototype.Ga=function(){var a=this.N();a&&a._renderRoot()};l.prototype._renderRoot=
function(){this.ba=!1;this.D();this.v()};l.prototype.D=function(){this.f();for(var a=0,b;a<this.b.length;a++)b=this.b[a],this.u(b);for(b=this.host.firstChild;b;b=b.nextSibling)this.h(b);for(a=0;a<this.b.length;a++){b=this.b[a];if(!b.__shady.assignedNodes.length)for(var c=b.firstChild;c;c=c.nextSibling)this.h(c,b);c=b.parentNode;(c=c.__shady&&c.__shady.root)&&c.Da()&&c._renderRoot();this.g(b.__shady.W,b.__shady.assignedNodes);if(c=b.__shady.Fa){for(var d=0;d<c.length;d++)c[d].__shady.pa=null;b.__shady.Fa=
null;c.length>b.__shady.assignedNodes.length&&(b.__shady.ta=!0)}b.__shady.ta&&(b.__shady.ta=!1,this.i(b))}};l.prototype.h=function(a,b){a.__shady=a.__shady||{};var c=a.__shady.pa;a.__shady.pa=null;b||(b=(b=this.a[a.slot||"__catchall"])&&b[0]);b?(b.__shady.assignedNodes.push(a),a.__shady.assignedSlot=b):a.__shady.assignedSlot=void 0;c!==a.__shady.assignedSlot&&a.__shady.assignedSlot&&(a.__shady.assignedSlot.__shady.ta=!0)};l.prototype.u=function(a){var b=a.__shady.assignedNodes;a.__shady.assignedNodes=
[];a.__shady.W=[];if(a.__shady.Fa=b)for(var c=0;c<b.length;c++){var d=b[c];d.__shady.pa=d.__shady.assignedSlot;d.__shady.assignedSlot===a&&(d.__shady.assignedSlot=null)}};l.prototype.g=function(a,b){for(var c=0,d;c<b.length&&(d=b[c]);c++)if("slot"==d.localName){var e=d.__shady.assignedNodes;e&&e.length&&this.g(a,e)}else a.push(b[c])};l.prototype.i=function(a){Gb.call(a,new Event("slotchange"));a.__shady.assignedSlot&&this.i(a.__shady.assignedSlot)};l.prototype.v=function(){for(var a=this.b,b=[],c=
0;c<a.length;c++){var d=a[c].parentNode;d.__shady&&d.__shady.root||!(0>b.indexOf(d))||b.push(d)}for(a=0;a<b.length;a++)c=b[a],this.T(c===this?this.host:c,this.B(c))};l.prototype.B=function(a){var b=[];a=a.childNodes;for(var c=0;c<a.length;c++){var d=a[c];if(this.j(d)){d=d.__shady.W;for(var e=0;e<d.length;e++)b.push(d[e])}else b.push(d)}return b};l.prototype.j=function(a){return"slot"==a.localName};l.prototype.T=function(a,b){for(var c=X(a),d=Ee(b,b.length,c,c.length),e=0,f=0,h;e<d.length&&(h=d[e]);e++){for(var g=
0,l;g<h.Z.length&&(l=h.Z[g]);g++)da(l)===a&&oa.call(a,l),c.splice(h.index+f,1);f-=h.ca}for(e=0;e<d.length&&(h=d[e]);e++)for(f=c[h.index],g=h.index;g<h.index+h.ca;g++)l=b[g],sb.call(a,l,f),c.splice(g,0,l)};l.prototype.ab=function(a){this.c.push.apply(this.c,[].concat(a instanceof Array?a:Td(Sd(a))))};l.prototype.f=function(){this.c.length&&(this.I(this.c),this.c=[])};l.prototype.I=function(a){for(var b,c=0;c<a.length;c++){var d=a[c];d.__shady=d.__shady||{};wa(d);wa(d.parentNode);var e=this.l(d);this.a[e]?
(b=b||{},b[e]=!0,this.a[e].push(d)):this.a[e]=[d];this.b.push(d)}if(b)for(var f in b)this.a[f]=this.s(this.a[f])};l.prototype.l=function(a){var b=a.name||a.getAttribute("name")||"__catchall";return a.Za=b};l.prototype.s=function(a){return a.sort(function(a,c){a=bd(a);for(var b=bd(c),e=0;e<a.length;e++){c=a[e];var f=b[e];if(c!==f)return a=Array.from(c.parentNode.childNodes),a.indexOf(c)-a.indexOf(f)}})};l.prototype.hb=function(a){this.f();var b=this.a,c;for(c in b)for(var d=b[c],e=0;e<d.length;e++){var f=
d[e];if(qc(a,f)){d.splice(e,1);var h=this.b.indexOf(f);0<=h&&this.b.splice(h,1);e--;this.K(f);h=!0}}return h};l.prototype.jb=function(a){var b=a.Za,c=this.l(a);if(c!==b){b=this.a[b];var d=b.indexOf(a);0<=d&&b.splice(d,1);b=this.a[c]||(this.a[c]=[]);b.push(a);1<b.length&&(this.a[c]=this.s(b))}};l.prototype.K=function(a){if(a=a.__shady.W)for(var b=0;b<a.length;b++){var c=a[b],d=da(c);d&&oa.call(d,c)}};l.prototype.Da=function(){this.f();return!!this.b.length};l.prototype.addEventListener=function(a,
b,c){"object"!==typeof c&&(c={capture:!!c});c.na=this;this.host.addEventListener(a,b,c)};l.prototype.removeEventListener=function(a,b,c){"object"!==typeof c&&(c={capture:!!c});c.na=this;this.host.removeEventListener(a,b,c)};l.prototype.getElementById=function(a){return Aa(this,function(b){return b.id==a},function(a){return!!a})[0]||null};(function(a){O(a,nb,!0);O(a,ob,!0)})(l.prototype);var Ie={addEventListener:Uc.bind(window),removeEventListener:Yc.bind(window)},He={addEventListener:Uc,removeEventListener:Yc,
appendChild:function(a){return pb(this,a)},insertBefore:function(a,b){return pb(this,a,b)},removeChild:function(a){return qb(this,a)},replaceChild:function(a,b){pb(this,a,b);qb(this,b);return a},cloneNode:function(a){if("template"==this.localName)var b=Fb.call(this,a);else if(b=Fb.call(this,!1),a){a=this.childNodes;for(var c=0,d;c<a.length;c++)d=a[c].cloneNode(!0),b.appendChild(d)}return b},getRootNode:function(){return Lc(this)},contains:function(a){return qc(this,a)},get isConnected(){var a=this.ownerDocument;
if(Ue&&pa.call(a,this)||a.documentElement&&pa.call(a.documentElement,this))return!0;for(a=this;a&&!(a instanceof Document);)a=a.parentNode||(a instanceof l?a.host:void 0);return!!(a&&a instanceof Document)},dispatchEvent:function(a){za();return Gb.call(this,a)}},Je={get assignedSlot(){return cd(this)}},xb={querySelector:function(a){return Aa(this,function(b){return wd.call(b,a)},function(a){return!!a})[0]||null},querySelectorAll:function(a){return Aa(this,function(b){return wd.call(b,a)})}},fd={assignedNodes:function(a){if("slot"===
this.localName)return Nc(this),this.__shady?(a&&a.flatten?this.__shady.W:this.__shady.assignedNodes)||[]:[]}},dd=ib({setAttribute:function(a,b){Oc(this,a,b)},removeAttribute:function(a){xd.call(this,a);Kc(this,a)},attachShadow:function(a){if(!this)throw"Must provide a host.";if(!a)throw"Not enough arguments.";return new l(dc,this,a)},get slot(){return this.getAttribute("slot")},set slot(a){Oc(this,"slot",a)},get assignedSlot(){return cd(this)}},xb,fd);Object.defineProperties(dd,yd);var ed=ib({importNode:function(a,
b){return Qc(a,b)},getElementById:function(a){return Aa(this,function(b){return b.id==a},function(a){return!!a})[0]||null}},xb);Object.defineProperties(ed,{_activeElement:ob.activeElement});var af=HTMLElement.prototype.blur,Ke=ib({blur:function(){var a=this.__shady&&this.__shady.root;(a=a&&a.activeElement)?a.blur():af.call(this)}});G.Ka&&(window.ShadyDOM={inUse:G.Ka,patch:function(a){return a},isShadyRoot:J,enqueue:rc,flush:za,settings:G,filterMutations:xe,observeChildren:ke,unobserveChildren:je,
nativeMethods:Ve,nativeTree:We},window.Event=Ye,window.CustomEvent=Ze,window.MouseEvent=$e,De(),Ge(),window.ShadowRoot=l);var Le=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));B.prototype.D=function(a,b){this.u.set(a,b);this.s.set(b.constructor,b)};B.prototype.c=function(a){return this.u.get(a)};B.prototype.B=function(a){return this.s.get(a)};B.prototype.v=function(a){this.h=!0;this.j.push(a)};B.prototype.l=function(a){var b=
this;this.h&&S(a,function(a){return b.g(a)})};B.prototype.g=function(a){if(this.h&&!a.__CE_patched){a.__CE_patched=!0;for(var b=0;b<this.j.length;b++)this.j[b](a)}};B.prototype.b=function(a){var b=[];S(a,function(a){return b.push(a)});for(a=0;a<b.length;a++){var c=b[a];1===c.__CE_state?this.connectedCallback(c):this.i(c)}};B.prototype.a=function(a){var b=[];S(a,function(a){return b.push(a)});for(a=0;a<b.length;a++){var c=b[a];1===c.__CE_state&&this.disconnectedCallback(c)}};B.prototype.f=function(a,
b){var c=this;b=b?b:{};var d=b.yb||new Set,e=b.Oa||function(a){return c.i(a)},f=[];S(a,function(a){if("link"===a.localName&&"import"===a.getAttribute("rel")){var b=a.import;b instanceof Node&&"complete"===b.readyState?(b.__CE_isImportDocument=!0,b.__CE_hasRegistry=!0):a.addEventListener("load",function(){var b=a.import;if(!b.__CE_documentLoadHandled){b.__CE_documentLoadHandled=!0;b.__CE_isImportDocument=!0;b.__CE_hasRegistry=!0;var f=new Set(d);f.delete(b);c.f(b,{yb:f,Oa:e})}})}else f.push(a)},d);
if(this.h)for(a=0;a<f.length;a++)this.g(f[a]);for(a=0;a<f.length;a++)e(f[a])};B.prototype.i=function(a){if(void 0===a.__CE_state){var b=this.c(a.localName);if(b){b.constructionStack.push(a);var c=b.constructor;try{try{if(new c!==a)throw Error("The custom element constructor did not produce the element being upgraded.");}finally{b.constructionStack.pop()}}catch(f){throw a.__CE_state=2,f;}a.__CE_state=1;a.__CE_definition=b;if(b.attributeChangedCallback)for(b=b.observedAttributes,c=0;c<b.length;c++){var d=
b[c],e=a.getAttribute(d);null!==e&&this.attributeChangedCallback(a,d,null,e,null)}t(a)&&this.connectedCallback(a)}}};B.prototype.connectedCallback=function(a){var b=a.__CE_definition;b.connectedCallback&&b.connectedCallback.call(a)};B.prototype.disconnectedCallback=function(a){var b=a.__CE_definition;b.disconnectedCallback&&b.disconnectedCallback.call(a)};B.prototype.attributeChangedCallback=function(a,b,c,d,e){var f=a.__CE_definition;f.attributeChangedCallback&&-1<f.observedAttributes.indexOf(b)&&
f.attributeChangedCallback.call(a,b,c,d,e)};Xa.prototype.c=function(){this.P&&this.P.disconnect()};Xa.prototype.f=function(a){var b=this.a.readyState;"interactive"!==b&&"complete"!==b||this.c();for(b=0;b<a.length;b++)for(var c=a[b].addedNodes,d=0;d<c.length;d++)this.b.f(c[d])};cc.prototype.resolve=function(a){if(this.a)throw Error("Already resolved.");this.a=a;this.b&&this.b(a)};y.prototype.define=function(a,b){var c=this;if(!(b instanceof Function))throw new TypeError("Custom element constructors must be functions.");
if(!gd(a))throw new SyntaxError("The element name '"+a+"' is not valid.");if(this.a.c(a))throw Error("A custom element with name '"+a+"' has already been defined.");if(this.c)throw Error("A custom element is already being defined.");this.c=!0;try{var d=function(a){var b=e[a];if(void 0!==b&&!(b instanceof Function))throw Error("The '"+a+"' callback must be a function.");return b},e=b.prototype;if(!(e instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");
var f=d("connectedCallback");var g=d("disconnectedCallback");var k=d("adoptedCallback");var l=d("attributeChangedCallback");var m=b.observedAttributes||[]}catch(p){return}finally{this.c=!1}b={localName:a,constructor:b,connectedCallback:f,disconnectedCallback:g,adoptedCallback:k,attributeChangedCallback:l,observedAttributes:m,constructionStack:[]};this.a.D(a,b);this.g.push(b);this.b||(this.b=!0,this.f(function(){return c.j()}))};y.prototype.j=function(){var a=this;if(!1!==this.b){this.b=!1;for(var b=
this.g,c=[],d=new Map,e=0;e<b.length;e++)d.set(b[e].localName,[]);this.a.f(document,{Oa:function(b){if(void 0===b.__CE_state){var e=b.localName,f=d.get(e);f?f.push(b):a.a.c(e)&&c.push(b)}}});for(e=0;e<c.length;e++)this.a.i(c[e]);for(;0<b.length;){var f=b.shift();e=f.localName;f=d.get(f.localName);for(var g=0;g<f.length;g++)this.a.i(f[g]);(e=this.h.get(e))&&e.resolve(void 0)}}};y.prototype.get=function(a){if(a=this.a.c(a))return a.constructor};y.prototype.whenDefined=function(a){if(!gd(a))return Promise.reject(new SyntaxError("'"+
a+"' is not a valid custom element name."));var b=this.h.get(a);if(b)return b.c;b=new cc;this.h.set(a,b);this.a.c(a)&&!this.g.some(function(b){return b.localName===a})&&b.resolve(void 0);return b.c};y.prototype.l=function(a){this.i.c();var b=this.f;this.f=function(c){return a(function(){return b(c)})}};window.CustomElementRegistry=y;y.prototype.define=y.prototype.define;y.prototype.get=y.prototype.get;y.prototype.whenDefined=y.prototype.whenDefined;y.prototype.polyfillWrapFlushCallback=y.prototype.l;
var Sa=window.Document.prototype.createElement,ee=window.Document.prototype.createElementNS,de=window.Document.prototype.importNode,fe=window.Document.prototype.prepend,ge=window.Document.prototype.append,bf=window.DocumentFragment.prototype.prepend,cf=window.DocumentFragment.prototype.append,Tb=window.Node.prototype.cloneNode,ua=window.Node.prototype.appendChild,$b=window.Node.prototype.insertBefore,Ta=window.Node.prototype.removeChild,ac=window.Node.prototype.replaceChild,Wa=Object.getOwnPropertyDescriptor(window.Node.prototype,
"textContent"),Sb=window.Element.prototype.attachShadow,Qa=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Ua=window.Element.prototype.getAttribute,Ub=window.Element.prototype.setAttribute,Wb=window.Element.prototype.removeAttribute,va=window.Element.prototype.getAttributeNS,Vb=window.Element.prototype.setAttributeNS,Xb=window.Element.prototype.removeAttributeNS,Zb=window.Element.prototype.insertAdjacentElement,Vd=window.Element.prototype.prepend,Wd=window.Element.prototype.append,
Yd=window.Element.prototype.before,Zd=window.Element.prototype.after,$d=window.Element.prototype.replaceWith,ae=window.Element.prototype.remove,ie=window.HTMLElement,Ra=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),Yb=window.HTMLElement.prototype.insertAdjacentElement,bc=new function(){},Ha=window.customElements;if(!Ha||Ha.forcePolyfill||"function"!=typeof Ha.define||"function"!=typeof Ha.get){var ia=new B;he(ia);ce(ia);Va(ia,DocumentFragment.prototype,{fa:bf,append:cf});
be(ia);Ud(ia);document.__CE_hasRegistry=!0;var df=new y(ia);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:df})}var M={STYLE_RULE:1,ka:7,MEDIA_RULE:4,xa:1E3},I={mb:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,Ha:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,La:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,sb:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,xb:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,rb:/^@[^\s]*keyframes/,Ma:/\s+/g},
z=!(window.ShadyDOM&&window.ShadyDOM.inUse);if(window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss)var A=window.ShadyCSS.nativeCss;else window.ShadyCSS?(jd(window.ShadyCSS),window.ShadyCSS=void 0):jd(window.WebComponents&&window.WebComponents.flags);var Ia=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Ja=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,ef=/(--[\w-]+)\s*([:,;)]|$)/gi,ff=/(animation\s*:)|(animation-name\s*:)/,Ne=/@media\s(.*)/,
gf=/\{[^}]*\}/g,V=null;u.prototype.b=function(a,b,c){a.__styleScoped?a.__styleScoped=null:this.j(a,b||"",c)};u.prototype.j=function(a,b,c){a.nodeType===Node.ELEMENT_NODE&&this.h(a,b,c);if(a="template"===a.localName?(a.content||a.Db).childNodes:a.children||a.childNodes)for(var d=0;d<a.length;d++)this.j(a[d],b,c)};u.prototype.h=function(a,b,c){if(b)if(a.classList)c?(a.classList.remove("style-scope"),a.classList.remove(b)):(a.classList.add("style-scope"),a.classList.add(b));else if(a.getAttribute){var d=
a.getAttribute(hf);c?d&&(b=d.replace("style-scope","").replace(b,""),Da(a,b)):Da(a,(d?d+" ":"")+"style-scope "+b)}};u.prototype.c=function(a,b,c){var d=a.__cssBuild;z||"shady"===d?b=ea(b,c):(a=W(a),b=this.I(b,a.is,a.$,c)+"\n\n");return b.trim()};u.prototype.I=function(a,b,c,d){var e=this.f(b,c);b=this.i(b);var f=this;return ea(a,function(a){a.c||(f.K(a,b,e),a.c=!0);d&&d(a,b,e)})};u.prototype.i=function(a){return a?jf+a:""};u.prototype.f=function(a,b){return b?"[is="+a+"]":a};u.prototype.K=function(a,
b,c){this.l(a,this.g,b,c)};u.prototype.l=function(a,b,c,d){a.selector=a.A=this.s(a,b,c,d)};u.prototype.s=function(a,b,c,d){var e=a.selector.split(zd);if(!kd(a)){a=0;for(var f=e.length,g;a<f&&(g=e[a]);a++)e[a]=b.call(this,g,c,d)}return e.join(zd)};u.prototype.v=function(a){return a.replace(Jb,function(a,c,d){-1<d.indexOf("+")?d=d.replace(/\+/g,"___"):-1<d.indexOf("___")&&(d=d.replace(/___/g,"+"));return":"+c+"("+d+")"})};u.prototype.g=function(a,b,c){var d=this,e=!1;a=a.trim();var f=Jb.test(a);f&&
(a=a.replace(Jb,function(a,b,c){return":"+b+"("+c.replace(/\s/g,"")+")"}),a=this.v(a));a=a.replace(kf,Kb+" $1");a=a.replace(lf,function(a,f,g){e||(a=d.D(g,f,b,c),e=e||a.stop,f=a.lb,g=a.value);return f+g});f&&(a=this.v(a));return a};u.prototype.D=function(a,b,c,d){var e=a.indexOf(Lb);0<=a.indexOf(Kb)?a=this.H(a,d):0!==e&&(a=c?this.u(a,c):a);c=!1;0<=e&&(b="",c=!0);if(c){var f=!0;c&&(a=a.replace(mf,function(a,b){return" > "+b}))}a=a.replace(nf,function(a,b,c){return'[dir="'+c+'"] '+b+", "+b+'[dir="'+
c+'"]'});return{value:a,lb:b,stop:f}};u.prototype.u=function(a,b){a=a.split(Ad);a[0]+=b;return a.join(Ad)};u.prototype.H=function(a,b){var c=a.match(Bd);return(c=c&&c[2].trim()||"")?c[0].match(Cd)?a.replace(Bd,function(a,c,f){return b+f}):c.split(Cd)[0]===b?c:of:a.replace(Kb,b)};u.prototype.J=function(a){a.selector=a.parsedSelector;this.B(a);this.l(a,this.N)};u.prototype.B=function(a){a.selector===pf&&(a.selector="html")};u.prototype.N=function(a){return a.match(Lb)?this.g(a,Dd):this.u(a.trim(),Dd)};
N.Object.defineProperties(u.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var Jb=/:(nth[-\w]+)\(([^)]+)\)/,Dd=":not(.style-scope)",zd=",",lf=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,Cd=/[[.:#*]/,Kb=":host",pf=":root",Lb="::slotted",kf=new RegExp("^("+Lb+")"),Bd=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,mf=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,nf=/(.*):dir\((?:(ltr|rtl))\)/,jf=".",Ad=":",hf="class",of="should_not_match",q=new u;w.get=function(a){return a?
a.__styleInfo:null};w.set=function(a,b){return a.__styleInfo=b};w.prototype.c=function(){return this.G};w.prototype._getStyleRules=w.prototype.c;var Ed=function(a){return a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}(window.Element.prototype),qf=navigator.userAgent.match("Trident");n.prototype.J=function(a){var b=this,c={},d=[],e=0;fa(a,function(a){b.c(a);a.index=e++;b.I(a.w.cssText,c)},function(a){d.push(a)});a.b=d;a=[];for(var f in c)a.push(f);
return a};n.prototype.c=function(a){if(!a.w){var b={},c={};this.b(a,c)&&(b.F=c,a.rules=null);b.cssText=this.H(a);a.w=b}};n.prototype.b=function(a,b){var c=a.w;if(c){if(c.F)return Object.assign(b,c.F),!0}else{c=a.parsedCssText;for(var d;a=Ia.exec(c);){d=(a[2]||a[3]).trim();if("inherit"!==d||"unset"!==d)b[a[1].trim()]=d;d=!0}return d}};n.prototype.H=function(a){return this.N(a.parsedCssText)};n.prototype.N=function(a){return a.replace(gf,"").replace(Ia,"")};n.prototype.I=function(a,b){for(var c;c=ef.exec(a);){var d=
c[1];":"!==c[2]&&(b[d]=!0)}};n.prototype.ha=function(a){for(var b=Object.getOwnPropertyNames(a),c=0,d;c<b.length;c++)d=b[c],a[d]=this.a(a[d],a)};n.prototype.a=function(a,b){if(a)if(0<=a.indexOf(";"))a=this.f(a,b);else{var c=this;a=md(a,function(a,e,f,g){if(!e)return a+g;(e=c.a(b[e],b))&&"initial"!==e?"apply-shim-inherit"===e&&(e="inherit"):e=c.a(b[f]||f,b)||f;return a+(e||"")+g})}return a&&a.trim()||""};n.prototype.f=function(a,b){a=a.split(";");for(var c=0,d,e;c<a.length;c++)if(d=a[c]){Ja.lastIndex=
0;if(e=Ja.exec(d))d=this.a(b[e[1]],b);else if(e=d.indexOf(":"),-1!==e){var f=d.substring(e);f=f.trim();f=this.a(f,b)||f;d=d.substring(0,e)+f}a[c]=d&&d.lastIndexOf(";")===d.length-1?d.slice(0,-1):d||""}return a.join(";")};n.prototype.D=function(a,b){var c="";a.w||this.c(a);a.w.cssText&&(c=this.f(a.w.cssText,b));a.cssText=c};n.prototype.B=function(a,b){var c=a.cssText,d=a.cssText;null==a.Ja&&(a.Ja=ff.test(c));if(a.Ja)if(null==a.ea){a.ea=[];for(var e in b)d=b[e],d=d(c),c!==d&&(c=d,a.ea.push(e))}else{for(e=
0;e<a.ea.length;++e)d=b[a.ea[e]],c=d(c);d=c}a.cssText=d};n.prototype.T=function(a,b){var c={},d=this,e=[];fa(a,function(a){a.w||d.c(a);var f=a.A||a.parsedSelector;b&&a.w.F&&f&&Ed.call(b,f)&&(d.b(a,c),a=a.index,f=parseInt(a/32,10),e[f]=(e[f]||0)|1<<a%32)},null,!0);return{F:c,key:e}};n.prototype.ja=function(a,b,c,d){b.w||this.c(b);if(b.w.F){var e=W(a);a=e.is;e=e.$;e=a?q.f(a,e):"html";var f=b.parsedSelector,g=":host > *"===f||"html"===f,k=0===f.indexOf(":host")&&!g;"shady"===c&&(g=f===e+" > *."+e||-1!==
f.indexOf("html"),k=!g&&0===f.indexOf(e));"shadow"===c&&(g=":host > *"===f||"html"===f,k=k&&!g);if(g||k)c=e,k&&(z&&!b.A&&(b.A=q.s(b,q.g,q.i(a),e)),c=b.A||e),d({wb:c,qb:k,Hb:g})}};n.prototype.K=function(a,b){var c={},d={},e=this,f=b&&b.__cssBuild;fa(b,function(b){e.ja(a,b,f,function(f){Ed.call(a.Eb||a,f.wb)&&(f.qb?e.b(b,c):e.b(b,d))})},null,!0);return{ub:d,pb:c}};n.prototype.ia=function(a,b,c){var d=this,e=W(a),f=q.f(e.is,e.$),g=new RegExp("(?:^|[^.#[:])"+(a.extends?"\\"+f.slice(0,-1)+"\\]":f)+"($|[.:[\\s>+~])");
e=w.get(a).G;var k=this.h(e,c);return q.c(a,e,function(a){d.D(a,b);z||kd(a)||!a.cssText||(d.B(a,k),d.l(a,g,f,c))})};n.prototype.h=function(a,b){a=a.b;var c={};if(!z&&a)for(var d=0,e=a[d];d<a.length;e=a[++d])this.j(e,b),c[e.keyframesName]=this.i(e);return c};n.prototype.i=function(a){return function(b){return b.replace(a.f,a.a)}};n.prototype.j=function(a,b){a.f=new RegExp(a.keyframesName,"g");a.a=a.keyframesName+"-"+b;a.A=a.A||a.selector;a.selector=a.A.replace(a.keyframesName,a.a)};n.prototype.l=function(a,
b,c,d){a.A=a.A||a.selector;d="."+d;for(var e=a.A.split(","),f=0,g=e.length,k;f<g&&(k=e[f]);f++)e[f]=k.match(b)?k.replace(c,d):d+" "+k;a.selector=e.join(",")};n.prototype.u=function(a,b,c){var d=a.getAttribute("class")||"",e=d;c&&(e=d.replace(new RegExp("\\s*x-scope\\s*"+c+"\\s*","g")," "));e+=(e?" ":"")+"x-scope "+b;d!==e&&Da(a,e)};n.prototype.v=function(a,b,c,d){b=d?d.textContent||"":this.ia(a,b,c);var e=w.get(a),f=e.a;f&&!z&&f!==d&&(f._useCount--,0>=f._useCount&&f.parentNode&&f.parentNode.removeChild(f));
z?e.a?(e.a.textContent=b,d=e.a):b&&(d=Ab(b,c,a.shadowRoot,e.b)):d?d.parentNode||(qf&&-1<b.indexOf("@media")&&(d.textContent=b),ld(d,null,e.b)):b&&(d=Ab(b,c,null,e.b));d&&(d._useCount=d._useCount||0,e.a!=d&&d._useCount++,e.a=d);return d};n.prototype.s=function(a,b){var c=Ca(a),d=this;a.textContent=ea(c,function(a){var c=a.cssText=a.parsedCssText;a.w&&a.w.cssText&&(c=c.replace(I.Ha,"").replace(I.La,""),a.cssText=d.f(c,b))})};N.Object.defineProperties(n.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});
var Q=new n,Mb={},Ka=window.customElements;if(Ka&&!z){var rf=Ka.define;Ka.define=function(a,b,c){var d=document.createComment(" Shady DOM styles for "+a+" "),e=document.head;e.insertBefore(d,(V?V.nextSibling:null)||e.firstChild);V=d;Mb[a]=d;return rf.call(Ka,a,b,c)}}ta.prototype.a=function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d];if(a.F[e]!==b[e])return!1}return!0};ta.prototype.b=function(a,b,c,d){var e=this.cache[a]||[];e.push({F:b,styleElement:c,C:d});e.length>this.c&&e.shift();this.cache[a]=
e};ta.prototype.fetch=function(a,b,c){if(a=this.cache[a])for(var d=a.length-1;0<=d;d--){var e=a[d];if(this.a(e,b,c))return e}};if(!z){var Fd=new MutationObserver(nd),Gd=function(a){Fd.observe(a,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)Gd(document);else{var Nb=function(){Gd(document.body)};window.HTMLImports?window.HTMLImports.whenReady(Nb):requestAnimationFrame(function(){if("loading"===document.readyState){var a=function(){Nb();document.removeEventListener("readystatechange",
a)};document.addEventListener("readystatechange",a)}else Nb()})}R=function(){nd(Fd.takeRecords())}}var Ea={},Qe=Promise.resolve(),Bb=null,pd=window.HTMLImports&&window.HTMLImports.whenReady||null,Cb,La=null,sa=null;r.prototype.Ia=function(){!this.enqueued&&sa&&(this.enqueued=!0,Rb(sa))};r.prototype.b=function(a){a.__seenByShadyCSS||(a.__seenByShadyCSS=!0,this.customStyles.push(a),this.Ia())};r.prototype.a=function(a){return a.__shadyCSSCachedStyle?a.__shadyCSSCachedStyle:a.getStyle?a.getStyle():a};
r.prototype.c=function(){for(var a=this.customStyles,b=0;b<a.length;b++){var c=a[b];if(!c.__shadyCSSCachedStyle){var d=this.a(c);d&&(d=d.__appliedElement||d,La&&La(d),c.__shadyCSSCachedStyle=d)}}return a};r.prototype.addCustomStyle=r.prototype.b;r.prototype.getStyleForCustomStyle=r.prototype.a;r.prototype.processStyles=r.prototype.c;Object.defineProperties(r.prototype,{transformCallback:{get:function(){return La},set:function(a){La=a}},validateCallback:{get:function(){return sa},set:function(a){var b=
!1;sa||(b=!0);sa=a;b&&this.Ia()}}});var Hd=new ta;g.prototype.B=function(){R()};g.prototype.K=function(a){var b=this.s[a]=(this.s[a]||0)+1;return a+"-"+b};g.prototype.Sa=function(a){return Ca(a)};g.prototype.Ua=function(a){return ea(a)};g.prototype.J=function(a){a=a.content.querySelectorAll("style");for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.textContent);d.parentNode.removeChild(d)}return b.join("").trim()};g.prototype.ha=function(a){return(a=a.content.querySelector("style"))?a.getAttribute("css-build")||
"":""};g.prototype.prepareTemplate=function(a,b,c){if(!a.f){a.f=!0;a.name=b;a.extends=c;Ea[b]=a;var d=this.ha(a),e=this.J(a);c={is:b,extends:c,Ab:d};z||q.b(a.content,b);this.c();var f=Ja.test(e)||Ia.test(e);Ja.lastIndex=0;Ia.lastIndex=0;e=zb(e);f&&A&&this.a&&this.a.transformRules(e,b);a._styleAst=e;a.g=d;d=[];A||(d=Q.J(a._styleAst));if(!d.length||A)b=this.T(c,a._styleAst,z?a.content:null,Mb[b]),a.a=b;a.c=d}};g.prototype.T=function(a,b,c,d){b=q.c(a,b);if(b.length)return Ab(b,a.is,c,d)};g.prototype.ja=
function(a){var b=W(a),c=b.is;b=b.$;var d=Mb[c];c=Ea[c];if(c){var e=c._styleAst;var f=c.c}return w.set(a,new w(e,d,f,0,b))};g.prototype.H=function(){!this.a&&window.ShadyCSS&&window.ShadyCSS.ApplyShim&&(this.a=window.ShadyCSS.ApplyShim,this.a.invalidCallback=Oe)};g.prototype.I=function(){var a=this;!this.b&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(this.b=window.ShadyCSS.CustomStyleInterface,this.b.transformCallback=function(b){a.v(b)},this.b.validateCallback=function(){requestAnimationFrame(function(){(a.b.enqueued||
a.i)&&a.f()})})};g.prototype.c=function(){this.H();this.I()};g.prototype.f=function(){this.c();if(this.b){var a=this.b.processStyles();this.b.enqueued&&(A?this.Qa(a):(this.u(this.g,this.h),this.D(a)),this.b.enqueued=!1,this.i&&!A&&this.styleDocument())}};g.prototype.styleElement=function(a,b){var c=W(a).is,d=w.get(a);d||(d=this.ja(a));this.j(a)||(this.i=!0);b&&(d.S=d.S||{},Object.assign(d.S,b));if(A){if(d.S){b=d.S;for(var e in b)null===e?a.style.removeProperty(e):a.style.setProperty(e,b[e])}if(((e=
Ea[c])||this.j(a))&&e&&e.a&&!od(e)){if(od(e)||e._applyShimValidatingVersion!==e._applyShimNextVersion)this.c(),this.a&&this.a.transformRules(e._styleAst,c),e.a.textContent=q.c(a,d.G),Pe(e);z&&(c=a.shadowRoot)&&(c.querySelector("style").textContent=q.c(a,d.G));d.G=e._styleAst}}else this.u(a,d),d.va&&d.va.length&&this.N(a,d)};g.prototype.l=function(a){return(a=a.getRootNode().host)?w.get(a)?a:this.l(a):this.g};g.prototype.j=function(a){return a===this.g};g.prototype.N=function(a,b){var c=W(a).is,d=
Hd.fetch(c,b.M,b.va),e=d?d.styleElement:null,f=b.C;b.C=d&&d.C||this.K(c);e=Q.v(a,b.M,b.C,e);z||Q.u(a,b.C,f);d||Hd.b(c,b.M,e,b.C)};g.prototype.u=function(a,b){var c=this.l(a),d=w.get(c);c=Object.create(d.M||null);var e=Q.K(a,b.G);a=Q.T(d.G,a).F;Object.assign(c,e.pb,a,e.ub);this.ia(c,b.S);Q.ha(c);b.M=c};g.prototype.ia=function(a,b){for(var c in b){var d=b[c];if(d||0===d)a[c]=d}};g.prototype.styleDocument=function(a){this.styleSubtree(this.g,a)};g.prototype.styleSubtree=function(a,b){var c=a.shadowRoot;
(c||this.j(a))&&this.styleElement(a,b);if(b=c&&(c.children||c.childNodes))for(a=0;a<b.length;a++)this.styleSubtree(b[a]);else if(a=a.children||a.childNodes)for(b=0;b<a.length;b++)this.styleSubtree(a[b])};g.prototype.Qa=function(a){for(var b=0;b<a.length;b++){var c=this.b.getStyleForCustomStyle(a[b]);c&&this.Pa(c)}};g.prototype.D=function(a){for(var b=0;b<a.length;b++){var c=this.b.getStyleForCustomStyle(a[b]);c&&Q.s(c,this.h.M)}};g.prototype.v=function(a){var b=this,c=Ca(a);fa(c,function(a){z?q.B(a):
q.J(a);A&&(b.c(),b.a&&b.a.transformRule(a))});A?a.textContent=ea(c):this.h.G.rules.push(c)};g.prototype.Pa=function(a){if(A&&this.a){var b=Ca(a);this.c();this.a.transformRules(b);a.textContent=ea(b)}};g.prototype.getComputedStyleValue=function(a,b){var c;A||(c=(w.get(a)||w.get(this.l(a))).M[b]);return(c=c||window.getComputedStyle(a).getPropertyValue(b))?c.trim():""};g.prototype.Ta=function(a,b){var c=a.getRootNode();b=b?b.split(/\s/):[];c=c.host&&c.host.localName;if(!c){var d=a.getAttribute("class");
if(d){d=d.split(/\s/);for(var e=0;e<d.length;e++)if(d[e]===q.a){c=d[e+1];break}}}c&&b.push(q.a,c);A||(c=w.get(a))&&c.C&&b.push(Q.g,c.C);Da(a,b.join(" "))};g.prototype.Ra=function(a){return w.get(a)};g.prototype.flush=g.prototype.B;g.prototype.prepareTemplate=g.prototype.prepareTemplate;g.prototype.styleElement=g.prototype.styleElement;g.prototype.styleDocument=g.prototype.styleDocument;g.prototype.styleSubtree=g.prototype.styleSubtree;g.prototype.getComputedStyleValue=g.prototype.getComputedStyleValue;
g.prototype.setElementClass=g.prototype.Ta;g.prototype._styleInfoForNode=g.prototype.Ra;g.prototype.transformCustomStyleForDocument=g.prototype.v;g.prototype.getStyleAst=g.prototype.Sa;g.prototype.styleAstToString=g.prototype.Ua;g.prototype.flushCustomStyles=g.prototype.f;Object.defineProperties(g.prototype,{nativeShadow:{get:function(){return z}},nativeCss:{get:function(){return A}}});var K=new g;if(window.ShadyCSS){var Id=window.ShadyCSS.ApplyShim;var Jd=window.ShadyCSS.CustomStyleInterface}window.ShadyCSS=
{ScopingShim:K,prepareTemplate:function(a,b,c){K.f();K.prepareTemplate(a,b,c)},styleSubtree:function(a,b){K.f();K.styleSubtree(a,b)},styleElement:function(a){K.f();K.styleElement(a)},styleDocument:function(a){K.f();K.styleDocument(a)},getComputedStyleValue:function(a,b){return K.getComputedStyleValue(a,b)},nativeCss:A,nativeShadow:z};Id&&(window.ShadyCSS.ApplyShim=Id);Jd&&(window.ShadyCSS.CustomStyleInterface=Jd);var Ob=window.customElements,Ma=window.HTMLImports,Kd=window.HTMLTemplateElement;window.WebComponents=
window.WebComponents||{};if(Ob&&Ob.polyfillWrapFlushCallback){var Na,Ld=function(){if(Na){Kd.V&&Kd.V(window.document);var a=Na;Na=null;a();return!0}},Md=Ma.whenReady;Ob.polyfillWrapFlushCallback(function(a){Na=a;Md(Ld)});Ma.whenReady=function(a){Md(function(){Ld()?Ma.whenReady(a):a()})}}Ma.whenReady(function(){requestAnimationFrame(function(){window.WebComponents.ready=!0;document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})});var Nd=document.createElement("style");Nd.textContent=
"body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var Od=document.querySelector("head");Od.insertBefore(Nd,Od.firstChild)})();}).call(this);

//# sourceMappingURL=webcomponents-lite.js.map
</script></head><body><div hidden="" by-polymer-bundler=""><dom-module id="iron-flex" assetpath="../../bower_components/iron-flex-layout/"><template><style>.layout.horizontal,
      .layout.vertical{display:-ms-flexbox;display:-webkit-flex;display:flex;}.layout.inline{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex;}.layout.horizontal{-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;}.layout.vertical{-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;}.layout.wrap{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;}.layout.no-wrap{-ms-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;}.layout.center,
      .layout.center-center{-ms-flex-align:center;-webkit-align-items:center;align-items:center;}.layout.center-justified,
      .layout.center-center{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.flex{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;}.flex-auto{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;}.flex-none{-ms-flex:none;-webkit-flex:none;flex:none;}</style></template></dom-module><dom-module id="iron-flex-reverse" assetpath="../../bower_components/iron-flex-layout/"><template><style>.layout.horizontal-reverse,
      .layout.vertical-reverse{display:-ms-flexbox;display:-webkit-flex;display:flex;}.layout.horizontal-reverse{-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse;}.layout.vertical-reverse{-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;}.layout.wrap-reverse{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;}</style></template></dom-module><dom-module id="iron-flex-alignment" assetpath="../../bower_components/iron-flex-layout/"><template><style>.layout.start{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start;}.layout.center,
      .layout.center-center{-ms-flex-align:center;-webkit-align-items:center;align-items:center;}.layout.end{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end;}.layout.baseline{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline;}.layout.start-justified{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.layout.center-justified,
      .layout.center-center{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.layout.end-justified{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}.layout.around-justified{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around;}.layout.justified{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}.self-start{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start;}.self-center{-ms-align-self:center;-webkit-align-self:center;align-self:center;}.self-end{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end;}.self-stretch{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch;}.self-baseline{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline;}.layout.start-aligned{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;}.layout.end-aligned{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end;}.layout.center-aligned{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center;}.layout.between-aligned{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between;}.layout.around-aligned{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around;}</style></template></dom-module><dom-module id="iron-flex-factors" assetpath="../../bower_components/iron-flex-layout/"><template><style>.flex,
      .flex-1{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;}.flex-2{-ms-flex:2;-webkit-flex:2;flex:2;}.flex-3{-ms-flex:3;-webkit-flex:3;flex:3;}.flex-4{-ms-flex:4;-webkit-flex:4;flex:4;}.flex-5{-ms-flex:5;-webkit-flex:5;flex:5;}.flex-6{-ms-flex:6;-webkit-flex:6;flex:6;}.flex-7{-ms-flex:7;-webkit-flex:7;flex:7;}.flex-8{-ms-flex:8;-webkit-flex:8;flex:8;}.flex-9{-ms-flex:9;-webkit-flex:9;flex:9;}.flex-10{-ms-flex:10;-webkit-flex:10;flex:10;}.flex-11{-ms-flex:11;-webkit-flex:11;flex:11;}.flex-12{-ms-flex:12;-webkit-flex:12;flex:12;}</style></template></dom-module><dom-module id="iron-positioning" assetpath="../../bower_components/iron-flex-layout/"><template><style>.block{display:block;}[hidden]{display:none !important;}.invisible{visibility:hidden !important;}.relative{position:relative;}.fit{position:absolute;top:0;right:0;bottom:0;left:0;}body.fullbleed{margin:0;height:100vh;}.scroll{-webkit-overflow-scrolling:touch;overflow:auto;}.fixed-bottom,
      .fixed-left,
      .fixed-right,
      .fixed-top{position:fixed;}.fixed-top{top:0;left:0;right:0;}.fixed-right{top:0;right:0;bottom:0;}.fixed-bottom{right:0;bottom:0;left:0;}.fixed-left{top:0;bottom:0;left:0;}</style></template></dom-module><script>(function(R,P){'object'===('undefined'===typeof exports?'undefined':babelHelpers.typeof(exports))&&'undefined'!==typeof module?P(exports):'function'===typeof define&&define.amd?define(['exports'],P):P(R.vega=R.vega||{})})(this,function(R){'use strict';function P(bB){var _B=bB.maxbins||20,xB=bB.base||10,vB=Math.log(xB),kB=bB.divide||[5,2],wB=bB.extent[0],SB=bB.extent[1],CB=SB-wB,zB,TB,RB,PB,AB,OB,MB,DB;if(bB.step)zB=bB.step;else if(bB.steps){for(AB=CB/_B,OB=0,MB=bB.steps.length;OB<MB&&bB.steps[OB]<AB;++OB);zB=bB.steps[Math.max(0,OB-1)]}else{for(TB=Math.ceil(Math.log(_B)/vB),RB=bB.minstep||0,zB=Math.max(RB,Math.pow(xB,Math.round(Math.log(CB)/vB)-TB));Math.ceil(CB/zB)>_B;)zB*=xB;for(OB=0,MB=kB.length;OB<MB;++OB)AB=zB/kB[OB],AB>=RB&&CB/AB<=_B&&(zB=AB)}return AB=Math.log(zB),PB=0<=AB?0:~~(-AB/vB)+1,DB=Math.pow(xB,-PB-1),(bB.nice||void 0===bB.nice)&&(wB=Math.min(wB,Math.floor(wB/zB+DB)*zB),SB=Math.ceil(SB/zB)*zB),{start:wB,stop:SB,step:zB}}function O(bB,_B){var xB=[],vB=bB.length,kB=-1,wB;if(null==_B)for(;++kB<vB;)isNaN(wB=M(bB[kB]))||xB.push(wB);else for(;++kB<vB;)isNaN(wB=M(_B(bB[kB],kB,bB)))||xB.push(wB);return xB}function M(bB){return null===bB?NaN:+bB}function U(bB,_B){return bB<_B?-1:bB>_B?1:bB>=_B?0:NaN}function F(bB){return 1===bB.length&&(bB=G(bB)),{left:function(xB,vB,kB,wB){for(null==kB&&(kB=0),null==wB&&(wB=xB.length);kB<wB;){var SB=kB+wB>>>1;0>bB(xB[SB],vB)?kB=SB+1:wB=SB}return kB},right:function(xB,vB,kB,wB){for(null==kB&&(kB=0),null==wB&&(wB=xB.length);kB<wB;){var SB=kB+wB>>>1;0<bB(xB[SB],vB)?wB=SB:kB=SB+1}return kB}}}function G(bB){return function(_B,xB){return U(bB(_B),xB)}}function W(bB){return null===bB?NaN:+bB}function H(bB,_B){var xB=bB.length,vB=0,kB=-1,wB=0,zB=0,SB,CB;if(null==_B)for(;++kB<xB;)isNaN(SB=W(bB[kB]))||(CB=SB-wB,wB+=CB/++vB,zB+=CB*(SB-wB));else for(;++kB<xB;)isNaN(SB=W(_B(bB[kB],kB,bB)))||(CB=SB-wB,wB+=CB/++vB,zB+=CB*(SB-wB));return 1<vB?zB/(vB-1):void 0}function V(bB,_B){var xB=bB.length,vB=-1,kB,wB,SB;if(null==_B){for(;++vB<xB;)if(null!=(kB=bB[vB])&&kB>=kB)for(wB=SB=kB;++vB<xB;)null!=(kB=bB[vB])&&(wB>kB&&(wB=kB),SB<kB&&(SB=kB));}else for(;++vB<xB;)if(null!=(kB=_B(bB[vB],vB,bB))&&kB>=kB)for(wB=SB=kB;++vB<xB;)null!=(kB=_B(bB[vB],vB,bB))&&(wB>kB&&(wB=kB),SB<kB&&(SB=kB));return[wB,SB]}function J(bB,_B,xB){bB=+bB,_B=+_B,xB=2>(kB=arguments.length)?(_B=bB,bB=0,1):3>kB?1:+xB;for(var vB=-1,kB=0|Math.max(0,Math.ceil((_B-bB)/xB)),wB=Array(kB);++vB<kB;)wB[vB]=bB+vB*xB;return wB}function K(bB,_B,xB){var vB=_B<bB,kB=-1,wB,SB,CB;if(vB&&(wB=bB,bB=_B,_B=wB),0===(CB=Q(bB,_B,xB))||!isFinite(CB))return[];if(0<CB)for(bB=Math.ceil(bB/CB),_B=Math.floor(_B/CB),SB=Array(wB=Math.ceil(_B-bB+1));++kB<wB;)SB[kB]=(bB+kB)*CB;else for(bB=Math.floor(bB*CB),_B=Math.ceil(_B*CB),SB=Array(wB=Math.ceil(bB-_B+1));++kB<wB;)SB[kB]=(bB-kB)/CB;return vB&&SB.reverse(),SB}function Q(bB,_B,xB){var vB=(_B-bB)/Math.max(0,xB),kB=Math.floor(Math.log(vB)/Math.LN10),wB=vB/Math.pow(10,kB);return 0<=kB?(wB>=Jz?10:wB>=Zz?5:wB>=Kz?2:1)*Math.pow(10,kB):-Math.pow(10,-kB)/(wB>=Jz?10:wB>=Zz?5:wB>=Kz?2:1)}function ee(bB,_B,xB){var vB=Math.abs(_B-bB)/Math.max(0,xB),kB=Math.pow(10,Math.floor(Math.log(vB)/Math.LN10)),wB=vB/kB;return wB>=Jz?kB*=10:wB>=Zz?kB*=5:wB>=Kz&&(kB*=2),_B<bB?-kB:kB}function te(bB){return Math.ceil(Math.log(bB.length)/Math.LN2)+1}function ne(bB,_B,xB){if(null==xB&&(xB=W),!!(vB=bB.length)){if(0>=(_B=+_B)||2>vB)return+xB(bB[0],0,bB);if(1<=_B)return+xB(bB[vB-1],vB-1,bB);var kB=(vB-1)*_B,wB=Math.floor(kB),SB=+xB(bB[wB],wB,bB),CB=+xB(bB[wB+1],wB+1,bB),vB;return SB+(CB-SB)*(kB-wB)}}function ae(bB,_B){var xB=bB.length,vB=-1,kB,wB;if(null==_B){for(;++vB<xB;)if(null!=(kB=bB[vB])&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=bB[vB])&&kB>wB&&(wB=kB);}else for(;++vB<xB;)if(null!=(kB=_B(bB[vB],vB,bB))&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=_B(bB[vB],vB,bB))&&kB>wB&&(wB=kB);return wB}function oe(bB){for(var _B=bB.length,vB=-1,kB=0,xB,wB,SB;++vB<_B;)kB+=bB[vB].length;for(wB=Array(kB);0<=--_B;)for(SB=bB[_B],xB=SB.length;0<=--xB;)wB[--kB]=SB[xB];return wB}function se(bB,_B){for(var xB=_B.length,vB=Array(xB);xB--;)vB[xB]=bB[_B[xB]];return vB}function fe(bB,_B){var xB=bB.length,vB=-1,wB=0,kB;if(null==_B)for(;++vB<xB;)(kB=+bB[vB])&&(wB+=kB);else for(;++vB<xB;)(kB=+_B(bB[vB],vB,bB))&&(wB+=kB);return wB}function ce(bB,_B,xB,vB){var kB=O(bB,vB),wB=kB.length,SB=_B,CB,zB,TB,RB;for(TB=0,RB=Array(SB);TB<SB;++TB){for(CB=0,zB=0;zB<wB;++zB)CB+=kB[~~(Math.random()*wB)];RB[TB]=CB/wB}return[ne(RB.sort(U),xB/2),ne(RB,1-xB/2)]}function pe(bB,_B){var kB=NaN,wB={},xB,vB;return wB.mean=function(SB){return arguments.length?(xB=SB||0,kB=NaN,wB):xB},wB.stdev=function(SB){return arguments.length?(vB=null==SB?1:SB,kB=NaN,wB):vB},wB.sample=function(){var SB=0,CB=0,zB,TB;if(kB===kB)return SB=kB,kB=NaN,SB;do SB=2*Math.random()-1,CB=2*Math.random()-1,zB=SB*SB+CB*CB;while(0===zB||1<zB);return TB=Math.sqrt(-2*Math.log(zB)/zB),kB=xB+CB*TB*vB,xB+SB*TB*vB},wB.pdf=function(SB){var CB=Math.exp(Math.pow(SB-xB,2)/(-2*Math.pow(vB,2)));return 1/(vB*Math.sqrt(2*Math.PI))*CB},wB.cdf=function(SB){var zB=(SB-xB)/vB,TB=Math.abs(zB),CB;if(37<TB)CB=0;else{var PB=Math.exp(-TB*TB/2),RB;7.07106781186547>TB?(RB=0.0352624965998911*TB+0.700383064443688,RB=RB*TB+6.37396220353165,RB=RB*TB+33.912866078383,RB=RB*TB+112.079291497871,RB=RB*TB+221.213596169931,RB=RB*TB+220.206867912376,CB=PB*RB,RB=0.0883883476483184*TB+1.75566716318264,RB=RB*TB+16.064177579207,RB=RB*TB+86.7807322029461,RB=RB*TB+296.564248779674,RB=RB*TB+637.333633378831,RB=RB*TB+793.826512519948,RB=RB*TB+440.413735824752,CB/=RB):(RB=TB+0.65,RB=TB+4/RB,RB=TB+3/RB,RB=TB+2/RB,RB=TB+1/RB,CB=PB/RB/2.506628274631)}return 0<zB?1-CB:CB},wB.icdf=function(SB){if(0>=SB||1<=SB)return NaN;var CB=2*SB-1,zB=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),TB=2/(Math.PI*zB)+Math.log(1-Math.pow(CB,2))/2,RB=Math.log(1-CB*CB)/zB,PB=(0<CB?1:-1)*Math.sqrt(Math.sqrt(TB*TB-RB)-TB);return xB+vB*Math.SQRT2*PB},wB.mean(bB).stdev(_B)}function ge(bB,_B){var xB=O(bB,_B);return[ne(xB.sort(U),0.25),ne(xB,0.5),ne(xB,0.75)]}function me(bB,_B){var xB=pe(),vB={},kB=0;return vB.data=function(wB){return arguments.length?(bB=wB,kB=wB?wB.length:0,vB.bandwidth(_B)):bB},vB.bandwidth=function(wB){return arguments.length?(_B=wB,!_B&&bB&&(_B=he(bB)),vB):_B},vB.sample=function(){return bB[~~(Math.random()*kB)]+_B*xB.sample()},vB.pdf=function(wB){for(var SB=0,CB=0;CB<kB;++CB)SB+=xB.pdf((wB-bB[CB])/_B);return SB/_B/kB},vB.cdf=function(wB){for(var SB=0,CB=0;CB<kB;++CB)SB+=xB.cdf((wB-bB[CB])/_B);return SB/kB},vB.icdf=function(){throw Error('KDE icdf not supported.')},vB.data(bB)}function he(bB){var _B=bB.length,xB=ge(bB),vB=(xB[2]-xB[0])/1.34;return 1.06*Math.min(Math.sqrt(H(bB)),vB)*Math.pow(_B,-0.2)}function ye(bB,_B){function xB(SB){var CB=[],zB=0,TB;for(TB=0;TB<kB;++TB)zB+=CB[TB]=null==SB[TB]?1:+SB[TB];for(TB=0;TB<kB;++TB)CB[TB]/=zB;return CB}var vB={},kB=0,wB;return vB.weights=function(SB){return arguments.length?(wB=xB(_B=SB||[]),vB):_B},vB.distributions=function(SB){return arguments.length?(SB?(kB=SB.length,bB=SB):(kB=0,bB=[]),vB.weights(_B)):bB},vB.sample=function(){for(var SB=Math.random(),CB=bB[kB-1],zB=wB[0],TB=0;TB<kB-1;zB+=wB[++TB])if(SB<zB){CB=bB[TB];break}return CB.sample()},vB.pdf=function(SB){for(var CB=0,zB=0;zB<kB;++zB)CB+=wB[zB]*bB[zB].pdf(SB);return CB},vB.cdf=function(SB){for(var CB=0,zB=0;zB<kB;++zB)CB+=wB[zB]*bB[zB].cdf(SB);return CB},vB.icdf=function(){throw Error('Mixture icdf not supported.')},vB.distributions(bB).weights(_B)}function be(bB,_B){null==_B&&(_B=null==bB?1:bB,bB=0);var xB={},vB,kB,wB;return xB.min=function(SB){return arguments.length?(vB=SB||0,wB=kB-vB,xB):vB},xB.max=function(SB){return arguments.length?(kB=SB||0,wB=kB-vB,xB):kB},xB.sample=function(){return vB+wB*Math.random()},xB.pdf=function(SB){return SB>=vB&&SB<=kB?1/wB:0},xB.cdf=function(SB){return SB<vB?0:SB>kB?1:(SB-vB)/wB},xB.icdf=function(SB){return 0<=SB&&1>=SB?vB+SB*wB:NaN},xB.min(bB).max(_B)}function _e(bB,_B,xB){return bB.fields=_B||[],bB.fname=xB,bB}function xe(bB){return null==bB?null:bB.fname}function ve(bB){return null==bB?null:bB.fields}function ke(bB){throw Error(bB)}function we(bB){function _B(){xB.push(SB+bB.substring(CB,zB)),SB='',CB=zB+1}var xB=[],vB=null,kB=0,wB=bB.length,SB='',CB,zB,TB;for(bB+='',CB=zB=0;zB<wB;++zB)if(TB=bB[zB],'\\'===TB)SB+=bB.substring(CB,zB),CB=++zB;else if(TB===vB)_B(),vB=null,kB=-1;else if(vB)continue;else CB===kB&&'"'===TB?(CB=zB+1,vB=TB):CB===kB&&'\''===TB?(CB=zB+1,vB=TB):'.'!==TB||kB?'['===TB?(zB>CB&&_B(),kB=CB=zB+1):']'===TB&&(kB||ke('Access path missing open bracket: '+bB),0<kB&&_B(),kB=0,CB=zB+1):zB>CB?_B():CB=zB+1;return kB&&ke('Access path missing closing bracket: '+bB),vB&&ke('Access path missing closing quote: '+bB),zB>CB&&(++zB,_B()),xB}function Ee(bB){return bB===Object(bB)}function Se(bB){return'string'===typeof bB}function Ce(bB){return Qz(bB)?'['+bB.map(Ce)+']':Ee(bB)||Se(bB)?JSON.stringify(bB).replace('\u2028','\\u2028').replace('\u2029','\\u2029'):bB}function ze(bB,_B){var xB=we(bB),vB='return _['+xB.map(Ce).join('][')+'];';return _e(Function('_',vB),[bB=1===xB.length?xB[0]:bB],_B||bB)}function Te(bB,_B,xB){var vB=[_B].concat([].slice.call(xB));console[bB].apply(console,vB)}function Re(bB){var _B=bB||oT;return{level:function(vB){return arguments.length?(_B=+vB,this):_B},warn:function(){return _B>=lT&&Te('warn','WARN',arguments),this},info:function(){return _B>=sT&&Te('log','INFO',arguments),this},debug:function(){return _B>=fT&&Te('log','DEBUG',arguments),this}}}function Pe(bB){return null==bB?[]:Qz(bB)?bB:[bB]}function Ae(bB,_B){var xB=[],vB=(bB=Pe(bB)).map(function(DB,qB){return null==DB?null:(xB.push(qB),we(DB).map(Ce).join(']['))}),kB=xB.length-1,wB=Pe(_B),SB='var u,v;return ',CB,zB,TB,RB,PB,AB,OB,MB;if(0>kB)return null;for(zB=0;zB<=kB;++zB)CB=xB[zB],TB=vB[CB],RB='(u=a['+TB+'])',PB='(v=b['+TB+'])',AB='((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))',OB='descending'===wB[CB]?(MB=-1,1):(MB=1,-1),SB+='('+RB+'<'+PB+'||u==null)&&v!=null?'+OB+':(u>v||v==null)&&u!=null?'+MB+':'+AB+'!==u&&v===v?'+OB+':v!==v&&u===u?'+MB+(CB<kB?':':':0');return _e(Function('a','b',SB+';'),bB.filter(function(DB){return null!=DB}))}function Oe(bB){return'function'===typeof bB}function Me(bB){return Oe(bB)?bB:function(){return bB}}function De(bB){for(var vB=1,kB=arguments.length,_B,xB;vB<kB;++vB)for(xB in _B=arguments[vB],_B)bB[xB]=_B[xB];return bB}function qe(bB,_B){var xB=-1,vB=bB.length,kB,wB,SB,CB,zB;if(null==_B){for(;++xB<vB;)if(null!=(wB=bB[xB])&&wB>=wB){kB=SB=wB;break}for(CB=zB=xB;++xB<vB;)null!=(wB=bB[xB])&&(kB>wB&&(kB=wB,CB=xB),SB<wB&&(SB=wB,zB=xB))}else{for(;++xB<vB;)if(null!=(wB=_B(bB[xB],xB,bB))&&wB>=wB){kB=SB=wB;break}for(CB=zB=xB;++xB<vB;)null!=(wB=_B(bB[xB],xB,bB))&&(kB>wB&&(kB=wB,CB=xB),SB<wB&&(SB=wB,zB=xB))}return[CB,zB]}function Le(bB){function _B(wB){return xB.hasOwnProperty(wB)&&xB[wB]!==cT}var xB={},vB,kB;return vB={size:0,empty:0,object:xB,has:_B,get:function(SB){return _B(SB)?xB[SB]:void 0},set:function(SB,CB){return _B(SB)||(++vB.size,xB[SB]===cT&&--vB.empty),xB[SB]=CB,this},delete:function(SB){return _B(SB)&&(--vB.size,++vB.empty,xB[SB]=cT),this},clear:function(){vB.size=vB.empty=0,vB.object=xB={}},test:function(SB){return arguments.length?(kB=SB,vB):kB},clean:function(){var SB={},CB=0,zB,TB;for(zB in xB)TB=xB[zB],TB===cT||kB&&kB(TB)||(SB[zB]=TB,++CB);vB.size=CB,vB.empty=0,vB.object=xB=SB}},bB&&Object.keys(bB).forEach(function(wB){vB.set(wB,bB[wB])}),vB}function Ue(bB,_B){var xB=bB.prototype=Object.create(_B.prototype);return xB.constructor=bB,xB}function Fe(bB){return'boolean'===typeof bB}function je(bB){return'[object Date]'===Object.prototype.toString.call(bB)}function Ie(bB){return'number'===typeof bB}function $e(bB){return'[object RegExp]'===Object.prototype.toString.call(bB)}function Ne(bB){bB=bB?Pe(bB):bB;var _B=bB&&bB.length?Function('_','return \'\'+'+bB.map(function(xB){return'_['+we(xB).map(Ce).join('][')+']'}).join('+\'|\'+')+';'):function(){return''};return _e(_B,bB,'key')}function Be(bB,_B,xB,vB){var kB=_B.length,wB=xB.length;if(!wB)return _B;if(!kB)return xB;for(var SB=vB||new _B.constructor(kB+wB),CB=0,zB=0,TB=0;CB<kB&&zB<wB;++TB)SB[TB]=0<bB(_B[CB],xB[zB])?xB[zB++]:_B[CB++];for(;CB<kB;++CB,++TB)SB[TB]=_B[CB];for(;zB<wB;++zB,++TB)SB[TB]=xB[zB];return SB}function Ye(bB,_B){for(var xB='';0<=--_B;)xB+=bB;return xB}function Ge(bB,_B,xB,vB){var kB=xB||' ',wB=bB+'',SB=_B-wB.length;return 0>=SB?wB:'left'===vB?Ye(kB,SB)+wB:'center'===vB?Ye(kB,~~(SB/2))+wB+Ye(kB,Math.ceil(SB/2)):wB+Ye(kB,SB)}function We(bB){return bB[bB.length-1]}function He(bB){return null==bB||''===bB?null:bB&&'false'!==bB&&!!bB}function Xe(bB,_B){return null==bB||''===bB?null:_B?_B(bB):Date.parse(bB)}function Ve(bB){return null==bB||''===bB?null:+bB}function Je(bB){return null==bB||''===bB?null:bB+''}function Ze(bB){for(var _B={},xB=0,vB=bB.length;xB<vB;++xB)_B[bB[xB]]=1;return _B}function Ke(bB,_B,xB,vB){var kB=null==vB?'\u2026':vB,wB=bB+'',SB=wB.length,CB=Math.max(0,_B-kB.length);return SB<=_B?wB:'left'===xB?kB+wB.slice(SB-CB):'center'===xB?wB.slice(0,Math.ceil(CB/2))+kB+wB.slice(SB-~~(CB/2)):wB.slice(0,CB)+kB}function Qe(bB,_B,xB){if(bB){var vB=0,kB=bB.length,wB;if(_B)for(;vB<kB;++vB)(wB=_B(bB[vB]))&&xB(wB,vB,bB);else bB.forEach(xB)}}function et(){}function tt(bB,_B){var xB=new et;if(bB instanceof et)bB.each(function(CB,zB){xB.set(zB,CB)});else if(Array.isArray(bB)){var vB=-1,kB=bB.length,wB;if(null==_B)for(;++vB<kB;)xB.set(vB,bB[vB]);else for(;++vB<kB;)xB.set(_B(wB=bB[vB],vB,bB),wB)}else if(bB)for(var SB in bB)xB.set(SB,bB[SB]);return xB}function nt(){function bB(CB,zB,TB,RB){if(zB>=xB.length)return null==wB?null==kB?CB:CB.sort(kB):wB(CB);for(var PB=-1,AB=CB.length,OB=xB[zB++],qB=tt(),UB=TB(),MB,DB,LB;++PB<AB;)(LB=qB.get(MB=OB(DB=CB[PB])+''))?LB.push(DB):qB.set(MB,[DB]);return qB.each(function(FB,jB){RB(UB,jB,bB(FB,zB,TB,RB))}),UB}function _B(CB,zB){if(++zB>xB.length)return CB;var RB=vB[zB-1],TB;return null!=wB&&zB>=xB.length?TB=CB.entries():(TB=[],CB.each(function(PB,AB){TB.push({key:AB,values:_B(PB,zB)})})),null==RB?TB:TB.sort(function(PB,AB){return RB(PB.key,AB.key)})}var xB=[],vB=[],kB,wB,SB;return SB={object:function(zB){return bB(zB,0,at,it)},map:function(zB){return bB(zB,0,rt,ot)},entries:function(zB){return _B(bB(zB,0,rt,ot),0)},key:function(zB){return xB.push(zB),SB},sortKeys:function(zB){return vB[xB.length-1]=zB,SB},sortValues:function(zB){return kB=zB,SB},rollup:function(zB){return wB=zB,SB}}}function at(){return{}}function it(bB,_B,xB){bB[_B]=xB}function rt(){return tt()}function ot(bB,_B,xB){bB.set(_B,xB)}function st(){for(var bB=0,_B=arguments.length,xB={},vB;bB<_B;++bB){if(!(vB=arguments[bB]+'')||vB in xB)throw new Error('illegal type: '+vB);xB[vB]=[]}return new ct(xB)}function ct(bB){this._=bB}function ut(bB,_B){return bB.trim().split(/^|\s+/).map(function(xB){var vB='',kB=xB.indexOf('.');if(0<=kB&&(vB=xB.slice(kB+1),xB=xB.slice(0,kB)),xB&&!_B.hasOwnProperty(xB))throw new Error('unknown type: '+xB);return{type:xB,name:vB}})}function pt(bB,_B){for(var xB=0,vB=bB.length,kB;xB<vB;++xB)if((kB=bB[xB]).name===_B)return kB.value}function mt(bB,_B,xB){for(var vB=0,kB=bB.length;vB<kB;++vB)if(bB[vB].name===_B){bB[vB]=gT,bB=bB.slice(0,vB).concat(bB.slice(vB+1));break}return null!=xB&&bB.push({name:_B,value:xB}),bB}function ht(bB,_B){function xB(OB){var MB=CB.status,DB;if(!MB&&_t(CB)||200<=MB&&300>MB||304===MB){if(RB)try{DB=RB.call(vB,CB)}catch(qB){return void kB.call('error',vB,qB)}else DB=CB;kB.call('load',vB,DB)}else kB.call('error',vB,OB)}var kB=st('beforesend','progress','load','error'),SB=tt(),CB=new XMLHttpRequest,zB=null,TB=null,AB=0,vB,wB,RB,PB;if('undefined'!==typeof XDomainRequest&&!('withCredentials'in CB)&&/^(http(s)?:)?\/\//.test(bB)&&(CB=new XDomainRequest),'onload'in CB?CB.onload=CB.onerror=CB.ontimeout=xB:CB.onreadystatechange=function(OB){3<CB.readyState&&xB(OB)},CB.onprogress=function(OB){kB.call('progress',vB,OB)},vB={header:function(MB,DB){return(MB=(MB+'').toLowerCase(),2>arguments.length)?SB.get(MB):(null==DB?SB.remove(MB):SB.set(MB,DB+''),vB)},mimeType:function(MB){return arguments.length?(wB=null==MB?null:MB+'',vB):wB},responseType:function(MB){return arguments.length?(PB=MB,vB):PB},timeout:function(MB){return arguments.length?(AB=+MB,vB):AB},user:function(MB){return 1>arguments.length?zB:(zB=null==MB?null:MB+'',vB)},password:function(MB){return 1>arguments.length?TB:(TB=null==MB?null:MB+'',vB)},response:function(MB){return RB=MB,vB},get:function(MB,DB){return vB.send('GET',MB,DB)},post:function(MB,DB){return vB.send('POST',MB,DB)},send:function(MB,DB,qB){return CB.open(MB,bB,!0,zB,TB),null==wB||SB.has('accept')||SB.set('accept',wB+',*/*'),CB.setRequestHeader&&SB.each(function(LB,UB){CB.setRequestHeader(UB,LB)}),null!=wB&&CB.overrideMimeType&&CB.overrideMimeType(wB),null!=PB&&(CB.responseType=PB),0<AB&&(CB.timeout=AB),null==qB&&'function'===typeof DB&&(qB=DB,DB=null),null!=qB&&1===qB.length&&(qB=bt(qB)),null!=qB&&vB.on('error',qB).on('load',function(LB){qB(null,LB)}),kB.call('beforesend',vB,CB),CB.send(null==DB?null:DB),vB},abort:function(){return CB.abort(),vB},on:function(){var MB=kB.on.apply(kB,arguments);return MB===kB?vB:MB}},null!=_B){if('function'!==typeof _B)throw new Error('invalid callback: '+_B);return vB.get(_B)}return vB}function bt(bB){return function(_B,xB){bB(null==_B?xB:null)}}function _t(bB){var _B=bB.responseType;return _B&&'text'!==_B?bB.response:bB.responseText}function vt(bB){return new Function('d','return {'+bB.map(function(_B,xB){return JSON.stringify(_B)+': d['+xB+']'}).join(',')+'}')}function kt(bB,_B){var xB=vt(bB);return function(vB,kB){return _B(xB(vB),kB,bB)}}function wt(bB){var _B=Object.create(null),xB=[];return bB.forEach(function(vB){for(var kB in vB)kB in _B||xB.push(_B[kB]=kB)}),xB}function Et(bB){function xB(TB,RB){function PB(){if(qB>=DB)return OB;if(FB)return FB=!1,AB;var IB=qB,$B;if(34===TB.charCodeAt(IB)){for(var NB=IB;NB++<DB;)if(34===TB.charCodeAt(NB)){if(34!==TB.charCodeAt(NB+1))break;++NB}return qB=NB+2,$B=TB.charCodeAt(NB+1),13===$B?(FB=!0,10===TB.charCodeAt(NB+2)&&++qB):10===$B&&(FB=!0),TB.slice(IB+1,NB).replace(/""/g,'"')}for(;qB<DB;){var BB=1;if($B=TB.charCodeAt(qB++),10===$B)FB=!0;else if(13===$B)FB=!0,10===TB.charCodeAt(qB)&&(++qB,++BB);else if($B!==zB)continue;return TB.slice(IB,qB-BB)}return TB.slice(IB)}for(var AB={},OB={},MB=[],DB=TB.length,qB=0,LB=0,UB,FB,jB;(UB=PB())!==OB;){for(jB=[];UB!==AB&&UB!==OB;)jB.push(UB),UB=PB();RB&&null==(jB=RB(jB,LB++))||MB.push(jB)}return MB}function wB(TB){return TB.map(SB).join(bB)}function SB(TB){return null==TB?'':CB.test(TB+='')?'"'+TB.replace(/\"/g,'""')+'"':TB}var CB=new RegExp('["'+bB+'\n\r]'),zB=bB.charCodeAt(0);return{parse:function(TB,RB){var OB=xB(TB,function(MB,DB){return PB?PB(MB,DB-1):void(AB=MB,PB=RB?kt(MB,RB):vt(MB))}),PB,AB;return OB.columns=AB,OB},parseRows:xB,format:function(TB,RB){return null==RB&&(RB=wt(TB)),[RB.map(SB).join(bB)].concat(TB.map(function(PB){return RB.map(function(AB){return SB(PB[AB])}).join(bB)})).join('\n')},formatRows:function(TB){return TB.map(wB).join('\n')}}}function St(bB){return{options:bB||{},sanitize:Tt,load:zt,file:Pt,http:Rt}}function Ct(bB,_B){return De({},bB.options,_B)}function zt(bB,_B){var xB=this;return xB.sanitize(bB,_B).then(function(vB){var kB=vB.href;return Ot(kB,bT)?xB.file(kB.slice(bT.length)):xB.http(kB,_B)})}function Tt(bB,_B){return _B=Ct(this,_B),new Promise(function(xB,vB){var kB,wB,SB,CB;return null==bB||'string'!==typeof bB?void vB('Sanitize failure, invalid URI: '+Ce(bB)):void(wB=yT.test(bB),(CB=_B.baseURL)&&!wB&&(!Ot(bB,'/')&&'/'!==CB[CB.length-1]&&(bB='/'+bB),bB=CB+bB),SB=(kB=Ot(bB,bT))||'file'===_B.mode||'http'!==_B.mode&&!wB&&At(),SB?bB=(kB?'':bT)+bB:Ot(bB,'//')&&(bB=(_B.defaultProtocol||'http')+':'+bB),xB({href:bB}))})}function Rt(bB,_B){return _B=Ct(this,_B),new Promise(function(xB,vB){var kB=ht(bB),wB;for(wB in _B.headers)kB.header(wB,_B.headers[wB]);_T.forEach(function(SB){_B[SB]&&kB[SB](_B[SB])}),kB.on('error',function(SB){vB(SB||'Error loading URL: '+bB)}).on('load',function(SB){var CB=SB&&SB.responseText;SB&&0!==SB.status?xB(CB):vB(CB||'Error')}).get()})}function Pt(bB){return new Promise(function(_B,xB){var vB=At();vB?vB.readFile(bB,function(kB,wB){kB?xB(kB):_B(wB)}):xB('No file system access for '+bB)})}function At(){var bB='function'===typeof require&&require('fs');return bB&&Oe(bB.readFile)?bB:null}function Ot(bB,_B){return null!=bB&&0===bB.lastIndexOf(_B,0)}function Mt(bB,_B){var xB=vT.slice(),vB,kB,wB,SB;for(kB=0,wB=bB.length;kB<wB;++kB){for(vB=_B?bB[kB][_B]:bB[kB],SB=0;SB<xB.length;++SB)qt(vB)&&!xB[SB](vB)&&(xB.splice(SB,1),--SB);if(0===xB.length)return'string'}return kT[vT.indexOf(xB[0])]}function Dt(bB,_B){return _B.reduce(function(xB,vB){return xB[vB]=Mt(bB,vB),xB},{})}function qt(bB){return null!=bB&&bB===bB}function Ft(bB){return!isNaN(+bB)&&!(bB instanceof Date)}function It(bB){return function(_B,xB){var vB={delimiter:bB};return $t(_B,xB?De(xB,vB):vB)}}function $t(bB,_B){return _B.header&&(bB=_B.header.map(Ce).join(_B.delimiter)+'\n'+bB),Et(_B.delimiter).parse(bB+'')}function Nt(bB){return'function'===typeof Buffer&&Oe(Buffer.isBuffer)&&Buffer.isBuffer(bB)}function Bt(bB,_B){var xB=_B&&_B.property?ze(_B.property):nT;return Ee(bB)&&!Nt(bB)?Yt(xB(bB)):xB(JSON.parse(bB))}function Yt(bB,_B){return _B&&_B.copy?JSON.parse(JSON.stringify(bB)):bB}function Gt(){}function Wt(bB){if(!bB)return Gt;var vB=bB.scale[0],kB=bB.scale[1],wB=bB.translate[0],SB=bB.translate[1],_B,xB;return function(CB,zB){zB||(_B=xB=0),CB[0]=(_B+=CB[0])*vB+wB,CB[1]=(xB+=CB[1])*kB+SB}}function Ht(bB,_B){for(var vB=bB.length,kB=vB-_B,xB;kB<--vB;)xB=bB[kB],bB[kB++]=bB[vB],bB[vB]=xB}function Xt(bB,_B){return'GeometryCollection'===_B.type?{type:'FeatureCollection',features:_B.geometries.map(function(xB){return Vt(bB,xB)})}:Vt(bB,_B)}function Vt(bB,_B){var xB={type:'Feature',id:_B.id,properties:_B.properties||{},geometry:Jt(bB,_B)};return null==_B.id&&delete xB.id,xB}function Jt(bB,_B){function xB(PB,AB){AB.length&&AB.pop();for(var OB=TB[0>PB?~PB:PB],MB=0,DB=OB.length,qB;MB<DB;++MB)AB.push(qB=OB[MB].slice()),zB(qB,MB);0>PB&&Ht(AB,DB)}function vB(PB){return PB=PB.slice(),zB(PB,0),PB}function kB(PB){for(var AB=[],OB=0,MB=PB.length;OB<MB;++OB)xB(PB[OB],AB);return 2>AB.length&&AB.push(AB[0].slice()),AB}function wB(PB){for(var AB=kB(PB);4>AB.length;)AB.push(AB[0].slice());return AB}function SB(PB){return PB.map(wB)}function CB(PB){var AB=PB.type;return'GeometryCollection'===AB?{type:AB,geometries:PB.geometries.map(CB)}:AB in RB?{type:AB,coordinates:RB[AB](PB)}:null}var zB=Wt(bB.transform),TB=bB.arcs,RB={Point:function(AB){return vB(AB.coordinates)},MultiPoint:function(AB){return AB.coordinates.map(vB)},LineString:function(AB){return kB(AB.arcs)},MultiLineString:function(AB){return AB.arcs.map(kB)},Polygon:function(AB){return SB(AB.arcs)},MultiPolygon:function(AB){return AB.arcs.map(SB)}};return CB(_B)}function Zt(bB,_B){function xB(TB){var RB=bB.arcs[0>TB?~TB:TB],PB=RB[0],AB;return bB.transform?(AB=[0,0],RB.forEach(function(OB){AB[0]+=OB[0],AB[1]+=OB[1]})):AB=RB[RB.length-1],0>TB?[AB,PB]:[PB,AB]}function vB(TB,RB){for(var PB in TB){var AB=TB[PB];delete RB[AB.start],delete AB.start,delete AB.end,AB.forEach(function(OB){kB[0>OB?~OB:OB]=1}),CB.push(AB)}}var kB={},wB={},SB={},CB=[],zB=-1;return _B.forEach(function(TB,RB){var PB=bB.arcs[0>TB?~TB:TB],AB;!(3>PB.length)||PB[1][0]||PB[1][1]||(AB=_B[++zB],_B[zB]=TB,_B[RB]=AB)}),_B.forEach(function(TB){var RB=xB(TB),PB=RB[0],AB=RB[1],OB,MB;if(OB=SB[PB]){if(delete SB[OB.end],OB.push(TB),OB.end=AB,MB=wB[AB]){delete wB[MB.start];var DB=MB===OB?OB:OB.concat(MB);wB[DB.start=OB.start]=SB[DB.end=MB.end]=DB}else wB[OB.start]=SB[OB.end]=OB;}else if(!(OB=wB[AB]))OB=[TB],wB[OB.start=PB]=SB[OB.end=AB]=OB;else if(delete wB[OB.start],OB.unshift(TB),OB.start=PB,MB=SB[PB]){delete SB[MB.end];var qB=MB===OB?OB:MB.concat(OB);wB[qB.start=MB.start]=SB[qB.end=OB.end]=qB}else wB[OB.start]=SB[OB.end]=OB}),vB(SB,wB),vB(wB,SB),_B.forEach(function(TB){kB[0>TB?~TB:TB]||CB.push([TB])}),CB}function Kt(bB){return Jt(bB,Qt.apply(this,arguments))}function Qt(bB,_B,xB){function vB(OB){var MB=0>OB?~OB:OB;(zB[MB]||(zB[MB]=[])).push({i:OB,g:TB})}function kB(OB){OB.forEach(vB)}function wB(OB){OB.forEach(kB)}function SB(OB){'GeometryCollection'===OB.type?OB.geometries.forEach(SB):OB.type in RB&&(TB=OB,RB[OB.type](OB.arcs))}var CB=[];if(1<arguments.length){var zB=[],TB,RB={LineString:kB,MultiLineString:wB,Polygon:wB,MultiPolygon:function(MB){MB.forEach(wB)}};SB(_B),zB.forEach(3>arguments.length?function(OB){CB.push(OB[0].i)}:function(OB){xB(OB[0].g,OB[OB.length-1].g)&&CB.push(OB[0].i)})}else for(var PB=0,AB=bB.arcs.length;PB<AB;++PB)CB.push(PB);return{type:'MultiLineString',arcs:Zt(bB,CB)}}function tn(bB,_B){return 1<arguments.length?(wT[bB]=_B,this):wT.hasOwnProperty(bB)?wT[bB]:null}function nn(bB,_B,xB,vB){function kB(wB){return bB(wB=new Date(+wB)),wB}return kB.floor=kB,kB.ceil=function(wB){return bB(wB=new Date(wB-1)),_B(wB,1),bB(wB),wB},kB.round=function(wB){var SB=kB(wB),CB=kB.ceil(wB);return wB-SB<CB-wB?SB:CB},kB.offset=function(wB,SB){return _B(wB=new Date(+wB),null==SB?1:Math.floor(SB)),wB},kB.range=function(wB,SB,CB){var zB=[];if(wB=kB.ceil(wB),CB=null==CB?1:Math.floor(CB),!(wB<SB)||!(0<CB))return zB;do zB.push(new Date(+wB));while((_B(wB,CB),bB(wB),wB<SB));return zB},kB.filter=function(wB){return nn(function(SB){if(SB>=SB)for(;bB(SB),!wB(SB);)SB.setTime(SB-1)},function(SB,CB){if(SB>=SB)for(;0<=--CB;)for(;_B(SB,1),!wB(SB););})},xB&&(kB.count=function(wB,SB){return ET.setTime(+wB),ST.setTime(+SB),bB(ET),bB(ST),Math.floor(xB(ET,ST))},kB.every=function(wB){return wB=Math.floor(wB),isFinite(wB)&&0<wB?1<wB?kB.filter(vB?function(SB){return 0===vB(SB)%wB}:function(SB){return 0===kB.count(0,SB)%wB}):kB:null}),kB}function an(bB){return nn(function(_B){_B.setDate(_B.getDate()-(_B.getDay()+7-bB)%7),_B.setHours(0,0,0,0)},function(_B,xB){_B.setDate(_B.getDate()+7*xB)},function(_B,xB){return(xB-_B-(xB.getTimezoneOffset()-_B.getTimezoneOffset())*TT)/AT})}function dn(bB){return nn(function(_B){_B.setUTCDate(_B.getUTCDate()-(_B.getUTCDay()+7-bB)%7),_B.setUTCHours(0,0,0,0)},function(_B,xB){_B.setUTCDate(_B.getUTCDate()+7*xB)},function(_B,xB){return(xB-_B)/AT})}function rn(bB){if(0<=bB.y&&100>bB.y){var _B=new Date(-1,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L);return _B.setFullYear(bB.y),_B}return new Date(bB.y,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L)}function ln(bB){if(0<=bB.y&&100>bB.y){var _B=new Date(Date.UTC(-1,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L));return _B.setUTCFullYear(bB.y),_B}return new Date(Date.UTC(bB.y,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L))}function sn(bB){return{y:bB,m:0,d:1,H:0,M:0,S:0,L:0}}function cn(bB){function _B(lY,sY){return function(fY){var cY=[],uY=-1,pY=0,gY=lY.length,mY,hY,yY;for(fY instanceof Date||(fY=new Date(+fY));++uY<gY;)37===lY.charCodeAt(uY)&&(cY.push(lY.slice(pY,uY)),null==(hY=XT[mY=lY.charAt(++uY)])?hY='e'===mY?' ':'0':mY=lY.charAt(++uY),(yY=sY[mY])&&(mY=yY(fY,hY)),cY.push(mY),pY=uY+1);return cY.push(lY.slice(pY,uY)),cY.join('')}}function xB(lY,sY){return function(fY){var cY=sn(1900),uY=vB(cY,lY,fY+='',0);if(uY!=fY.length)return null;if('p'in cY&&(cY.H=cY.H%12+12*cY.p),'W'in cY||'U'in cY){'w'in cY||(cY.w='W'in cY?1:0);var pY='Z'in cY?ln(sn(cY.y)).getUTCDay():sY(sn(cY.y)).getDay();cY.m=0,cY.d='W'in cY?(cY.w+6)%7+7*cY.W-(pY+5)%7:cY.w+7*cY.U-(pY+6)%7}return'Z'in cY?(cY.H+=0|cY.Z/100,cY.M+=cY.Z%100,ln(cY)):sY(cY)}}function vB(lY,sY,fY,cY){for(var uY=0,pY=sY.length,gY=fY.length,mY,hY;uY<pY;){if(cY>=gY)return-1;if(mY=sY.charCodeAt(uY++),37===mY){if(mY=sY.charAt(uY++),hY=oY[mY in XT?sY.charAt(uY++):mY],!hY||0>(cY=hY(lY,fY,cY)))return-1;}else if(mY!=fY.charCodeAt(cY++))return-1}return cY}var $B=bB.dateTime,NB=bB.date,BB=bB.time,YB=bB.periods,GB=bB.days,WB=bB.shortDays,HB=bB.months,XB=bB.shortMonths,VB=gn(YB),JB=mn(YB),ZB=gn(GB),KB=mn(GB),QB=gn(WB),eY=mn(WB),tY=gn(HB),nY=mn(HB),aY=gn(XB),iY=mn(XB),dY={a:function(lY){return WB[lY.getDay()]},A:function(lY){return GB[lY.getDay()]},b:function(lY){return XB[lY.getMonth()]},B:function(lY){return HB[lY.getMonth()]},c:null,d:Pn,e:Pn,H:An,I:On,j:Mn,L:Dn,m:qn,M:Ln,p:function(lY){return YB[+(12<=lY.getHours())]},S:Un,U:Fn,w:jn,W:In,x:null,X:null,y:$n,Y:Nn,Z:Bn,"%":Ea},rY={a:function(lY){return WB[lY.getUTCDay()]},A:function(lY){return GB[lY.getUTCDay()]},b:function(lY){return XB[lY.getUTCMonth()]},B:function(lY){return HB[lY.getUTCMonth()]},c:null,d:Gn,e:Gn,H:Wn,I:Hn,j:Vn,L:Jn,m:Qn,M:ia,p:function(lY){return YB[+(12<=lY.getUTCHours())]},S:la,U:fa,w:ua,W:ga,x:null,X:null,y:ma,Y:_a,Z:wa,"%":Ea},oY={a:function(lY,sY,fY){var cY=QB.exec(sY.slice(fY));return cY?(lY.w=eY[cY[0].toLowerCase()],fY+cY[0].length):-1},A:function(lY,sY,fY){var cY=ZB.exec(sY.slice(fY));return cY?(lY.w=KB[cY[0].toLowerCase()],fY+cY[0].length):-1},b:function(lY,sY,fY){var cY=aY.exec(sY.slice(fY));return cY?(lY.m=iY[cY[0].toLowerCase()],fY+cY[0].length):-1},B:function(lY,sY,fY){var cY=tY.exec(sY.slice(fY));return cY?(lY.m=nY[cY[0].toLowerCase()],fY+cY[0].length):-1},c:function(lY,sY,fY){return vB(lY,$B,sY,fY)},d:wn,e:wn,H:Sn,I:Sn,j:En,L:Tn,m:kn,M:Cn,p:function(lY,sY,fY){var cY=VB.exec(sY.slice(fY));return cY?(lY.p=JB[cY[0].toLowerCase()],fY+cY[0].length):-1},S:zn,U:yn,w:hn,W:bn,x:function(lY,sY,fY){return vB(lY,NB,sY,fY)},X:function(lY,sY,fY){return vB(lY,BB,sY,fY)},y:xn,Y:_n,Z:vn,"%":Rn};return dY.x=_B(NB,dY),dY.X=_B(BB,dY),dY.c=_B($B,dY),rY.x=_B(NB,rY),rY.X=_B(BB,rY),rY.c=_B($B,rY),{format:function(sY){var fY=_B(sY+='',dY);return fY.toString=function(){return sY},fY},parse:function(sY){var fY=xB(sY+='',rn);return fY.toString=function(){return sY},fY},utcFormat:function(sY){var fY=_B(sY+='',rY);return fY.toString=function(){return sY},fY},utcParse:function(sY){var fY=xB(sY,ln);return fY.toString=function(){return sY},fY}}}function un(bB,_B,xB){var vB=0>bB?'-':'',kB=(vB?-bB:bB)+'',wB=kB.length;return vB+(wB<xB?Array(xB-wB+1).join(_B)+kB:kB)}function pn(bB){return bB.replace(ZT,'\\$&')}function gn(bB){return new RegExp('^(?:'+bB.map(pn).join('|')+')','i')}function mn(bB){for(var _B={},xB=-1,vB=bB.length;++xB<vB;)_B[bB[xB].toLowerCase()]=xB;return _B}function hn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+1));return vB?(bB.w=+vB[0],xB+vB[0].length):-1}function yn(bB,_B,xB){var vB=VT.exec(_B.slice(xB));return vB?(bB.U=+vB[0],xB+vB[0].length):-1}function bn(bB,_B,xB){var vB=VT.exec(_B.slice(xB));return vB?(bB.W=+vB[0],xB+vB[0].length):-1}function _n(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+4));return vB?(bB.y=+vB[0],xB+vB[0].length):-1}function xn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.y=+vB[0]+(68<+vB[0]?1900:2e3),xB+vB[0].length):-1}function vn(bB,_B,xB){var vB=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(_B.slice(xB,xB+6));return vB?(bB.Z=vB[1]?0:-(vB[2]+(vB[3]||'00')),xB+vB[0].length):-1}function kn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.m=vB[0]-1,xB+vB[0].length):-1}function wn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.d=+vB[0],xB+vB[0].length):-1}function En(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+3));return vB?(bB.m=0,bB.d=+vB[0],xB+vB[0].length):-1}function Sn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.H=+vB[0],xB+vB[0].length):-1}function Cn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.M=+vB[0],xB+vB[0].length):-1}function zn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.S=+vB[0],xB+vB[0].length):-1}function Tn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+3));return vB?(bB.L=+vB[0],xB+vB[0].length):-1}function Rn(bB,_B,xB){var vB=JT.exec(_B.slice(xB,xB+1));return vB?xB+vB[0].length:-1}function Pn(bB,_B){return un(bB.getDate(),_B,2)}function An(bB,_B){return un(bB.getHours(),_B,2)}function On(bB,_B){return un(bB.getHours()%12||12,_B,2)}function Mn(bB,_B){return un(1+qT.count(jT(bB),bB),_B,3)}function Dn(bB,_B){return un(bB.getMilliseconds(),_B,3)}function qn(bB,_B){return un(bB.getMonth()+1,_B,2)}function Ln(bB,_B){return un(bB.getMinutes(),_B,2)}function Un(bB,_B){return un(bB.getSeconds(),_B,2)}function Fn(bB,_B){return un(LT.count(jT(bB),bB),_B,2)}function jn(bB){return bB.getDay()}function In(bB,_B){return un(UT.count(jT(bB),bB),_B,2)}function $n(bB,_B){return un(bB.getFullYear()%100,_B,2)}function Nn(bB,_B){return un(bB.getFullYear()%1e4,_B,4)}function Bn(bB){var _B=bB.getTimezoneOffset();return(0<_B?'-':(_B*=-1,'+'))+un(0|_B/60,'0',2)+un(_B%60,'0',2)}function Gn(bB,_B){return un(bB.getUTCDate(),_B,2)}function Wn(bB,_B){return un(bB.getUTCHours(),_B,2)}function Hn(bB,_B){return un(bB.getUTCHours()%12||12,_B,2)}function Vn(bB,_B){return un(1+NT.count(HT(bB),bB),_B,3)}function Jn(bB,_B){return un(bB.getUTCMilliseconds(),_B,3)}function Qn(bB,_B){return un(bB.getUTCMonth()+1,_B,2)}function ia(bB,_B){return un(bB.getUTCMinutes(),_B,2)}function la(bB,_B){return un(bB.getUTCSeconds(),_B,2)}function fa(bB,_B){return un(BT.count(HT(bB),bB),_B,2)}function ua(bB){return bB.getUTCDay()}function ga(bB,_B){return un(YT.count(HT(bB),bB),_B,2)}function ma(bB,_B){return un(bB.getUTCFullYear()%100,_B,2)}function _a(bB,_B){return un(bB.getUTCFullYear()%1e4,_B,4)}function wa(){return'+0000'}function Ea(){return'%'}function Sa(bB){return KT=cn(bB),QT=KT.format,eR=KT.parse,tR=KT.utcFormat,nR=KT.utcParse,KT}function Ta(bB,_B,xB){_B=_B||{};var vB=tn(_B.type||'json');return vB||ke('Unknown data format type: '+_B.type),bB=vB(bB,_B),_B.parse&&Ra(bB,_B.parse,xB),bB.hasOwnProperty('columns')&&delete bB.columns,bB}function Ra(bB,_B,xB){xB=xB||eR;var vB=bB.columns||Object.keys(bB[0]),kB,wB,SB,CB,zB,TB,RB;for('auto'===_B&&(_B=Dt(bB,vB)),vB=Object.keys(_B),kB=vB.map(function(PB){var AB=_B[PB],OB,MB;if(AB&&(0===AB.indexOf('date:')||0===AB.indexOf('utc:')))return OB=AB.split(/:(.+)?/,2),MB=OB[1],('\''===MB[0]&&'\''===MB[MB.length-1]||'"'===MB[0]&&'"'===MB[MB.length-1])&&(MB=MB.slice(1,-1)),'utc'===OB[0]?nR(MB):xB(MB);if(!xT[AB])throw Error('Illegal format pattern: '+PB+':'+AB);return xT[AB]}),(CB=0,TB=bB.length,RB=vB.length);CB<TB;++CB)for(wB=bB[CB],zB=0;zB<RB;++zB)SB=vB[zB],wB[SB]=kB[zB](wB[SB])}function Pa(bB){this.clear(),bB&&this.union(bB)}function Aa(bB,_B){var xB=[],vB;return vB={id:'gradient_'+oR++,x1:bB?bB[0]:0,y1:bB?bB[1]:0,x2:_B?_B[0]:1,y2:_B?_B[1]:0,stops:xB,stop:function(wB,SB){return xB.push({offset:wB,color:SB}),vB}}}function Oa(bB){this.mark=bB,this.bounds=this.bounds||new Pa,this.bounds_prev=this.bounds_prev||new Pa}function Ma(bB){Oa.call(this,bB),this.items=this.items||[]}function Da(bB,_B,xB){return!bB&&'undefined'!==typeof document&&document.createElement&&(bB=document),bB?xB?bB.createElementNS(xB,_B):bB.createElement(_B):null}function qa(bB,_B){_B=_B.toLowerCase();for(var xB=bB.childNodes,vB=0,kB=xB.length;vB<kB;++vB)if(xB[vB].tagName.toLowerCase()===_B)return xB[vB]}function La(bB,_B,xB,vB){var kB=bB.childNodes[_B],wB;return kB&&kB.tagName.toLowerCase()===xB.toLowerCase()||(wB=kB||null,kB=Da(bB.ownerDocument,xB,vB),bB.insertBefore(kB,wB)),kB}function Ua(bB,_B){for(var xB=bB.childNodes,vB=xB.length;vB>_B;)bB.removeChild(xB[--vB]);return bB}function Fa(bB){return'mark-'+bB.marktype+(bB.role?' role-'+bB.role:'')+(bB.name?' '+bB.name:'')}function ja(bB,_B){var xB=Da(null,'canvas');return xB?(xB.width=bB,xB.height=_B):lR&&(xB=new lR(bB,_B)),xB}function Ia(bB){this._pending=0,this._loader=bB||St()}function $a(bB){bB._pending+=1}function Na(bB){bB._pending-=1}function Ba(){this._x0=this._y0=this._x1=this._y1=null,this._=''}function Ya(){return new Ba}function Ga(bB){return function(){return bB}}function Wa(bB){return 1<bB?0:-1>bB?wR:Math.acos(bB)}function Ha(bB){return 1<=bB?ER:-1>=bB?-ER:Math.asin(bB)}function Xa(bB){return bB.innerRadius}function Va(bB){return bB.outerRadius}function Ja(bB){return bB.startAngle}function Za(bB){return bB.endAngle}function Ka(bB){return bB&&bB.padAngle}function Qa(bB,_B,xB,vB,kB,wB,SB,CB){var zB=xB-bB,TB=vB-_B,RB=SB-kB,PB=CB-wB,AB=(RB*(_B-wB)-PB*(bB-kB))/(PB*zB-RB*TB);return[bB+AB*zB,_B+AB*TB]}function ei(bB,_B,xB,vB,kB,wB,SB){var CB=bB-xB,zB=_B-vB,TB=(SB?wB:-wB)/vR(CB*CB+zB*zB),RB=TB*zB,PB=-TB*CB,AB=bB+RB,OB=_B+PB,MB=xB+RB,DB=vB+PB,qB=(AB+MB)/2,LB=(OB+DB)/2,UB=MB-AB,FB=DB-OB,jB=UB*UB+FB*FB,IB=kB-wB,$B=AB*DB-MB*OB,NB=(0>FB?-1:1)*vR(bR(0,IB*IB*jB-$B*$B)),BB=($B*FB-UB*NB)/jB,YB=(-$B*UB-FB*NB)/jB,GB=($B*FB+UB*NB)/jB,WB=(-$B*UB+FB*NB)/jB,HB=BB-qB,XB=YB-LB,VB=GB-qB,JB=WB-LB;return HB*HB+XB*XB>VB*VB+JB*JB&&(BB=GB,YB=WB),{cx:BB,cy:YB,x01:-RB,y01:-PB,x11:BB*(kB/IB-1),y11:YB*(kB/IB-1)}}function ni(bB){this._context=bB}function ai(bB){return new ni(bB)}function ii(bB){return bB[0]}function oi(bB){return bB[1]}function li(){function bB(CB){var TB=CB.length,PB=!1,zB,RB,AB;for(null==kB&&(SB=wB(AB=Ya())),zB=0;zB<=TB;++zB)!(zB<TB&&vB(RB=CB[zB],zB,CB))===PB&&((PB=!PB)?SB.lineStart():SB.lineEnd()),PB&&SB.point(+_B(RB,zB,CB),+xB(RB,zB,CB));if(AB)return SB=null,AB+''||null}var _B=ii,xB=oi,vB=Ga(!0),kB=null,wB=ai,SB=null;return bB.x=function(CB){return arguments.length?(_B='function'===typeof CB?CB:Ga(+CB),bB):_B},bB.y=function(CB){return arguments.length?(xB='function'===typeof CB?CB:Ga(+CB),bB):xB},bB.defined=function(CB){return arguments.length?(vB='function'===typeof CB?CB:Ga(!!CB),bB):vB},bB.curve=function(CB){return arguments.length?(wB=CB,null!=kB&&(SB=wB(kB)),bB):wB},bB.context=function(CB){return arguments.length?(null==CB?kB=SB=null:SB=wB(kB=CB),bB):kB},bB}function si(){function bB(RB){var MB=RB.length,qB=!1,UB=Array(MB),FB=Array(MB),PB,AB,OB,DB,LB;for(null==CB&&(TB=zB(LB=Ya())),PB=0;PB<=MB;++PB){if(!(PB<MB&&SB(DB=RB[PB],PB,RB))===qB)if(qB=!qB)AB=PB,TB.areaStart(),TB.lineStart();else{for(TB.lineEnd(),TB.lineStart(),OB=PB-1;OB>=AB;--OB)TB.point(UB[OB],FB[OB]);TB.lineEnd(),TB.areaEnd()}qB&&(UB[PB]=+xB(DB,PB,RB),FB[PB]=+kB(DB,PB,RB),TB.point(vB?+vB(DB,PB,RB):UB[PB],wB?+wB(DB,PB,RB):FB[PB]))}if(LB)return TB=null,LB+''||null}function _B(){return li().defined(SB).curve(zB).context(CB)}var xB=ii,vB=null,kB=Ga(0),wB=oi,SB=Ga(!0),CB=null,zB=ai,TB=null;return bB.x=function(RB){return arguments.length?(xB='function'===typeof RB?RB:Ga(+RB),vB=null,bB):xB},bB.x0=function(RB){return arguments.length?(xB='function'===typeof RB?RB:Ga(+RB),bB):xB},bB.x1=function(RB){return arguments.length?(vB=null==RB?null:'function'===typeof RB?RB:Ga(+RB),bB):vB},bB.y=function(RB){return arguments.length?(kB='function'===typeof RB?RB:Ga(+RB),wB=null,bB):kB},bB.y0=function(RB){return arguments.length?(kB='function'===typeof RB?RB:Ga(+RB),bB):kB},bB.y1=function(RB){return arguments.length?(wB=null==RB?null:'function'===typeof RB?RB:Ga(+RB),bB):wB},bB.lineX0=bB.lineY0=function(){return _B().x(xB).y(kB)},bB.lineY1=function(){return _B().x(xB).y(wB)},bB.lineX1=function(){return _B().x(vB).y(kB)},bB.defined=function(RB){return arguments.length?(SB='function'===typeof RB?RB:Ga(!!RB),bB):SB},bB.curve=function(RB){return arguments.length?(zB=RB,null!=CB&&(TB=zB(CB)),bB):zB},bB.context=function(RB){return arguments.length?(null==RB?CB=TB=null:TB=zB(CB=RB),bB):CB},bB}function ci(){}function ui(bB,_B,xB){bB._context.bezierCurveTo((2*bB._x0+bB._x1)/3,(2*bB._y0+bB._y1)/3,(bB._x0+2*bB._x1)/3,(bB._y0+2*bB._y1)/3,(bB._x0+4*bB._x1+_B)/6,(bB._y0+4*bB._y1+xB)/6)}function gi(bB){this._context=bB}function _i(bB){this._context=bB}function ki(bB){this._context=bB}function Ei(bB,_B){this._basis=new gi(bB),this._beta=_B}function Si(bB,_B,xB){bB._context.bezierCurveTo(bB._x1+bB._k*(bB._x2-bB._x0),bB._y1+bB._k*(bB._y2-bB._y0),bB._x2+bB._k*(bB._x1-_B),bB._y2+bB._k*(bB._y1-xB),bB._x2,bB._y2)}function Ci(bB,_B){this._context=bB,this._k=(1-_B)/6}function zi(bB,_B){this._context=bB,this._k=(1-_B)/6}function Ti(bB,_B){this._context=bB,this._k=(1-_B)/6}function Ri(bB,_B,xB){var vB=bB._x1,kB=bB._y1,wB=bB._x2,SB=bB._y2;if(bB._l01_a>kR){var CB=2*bB._l01_2a+3*bB._l01_a*bB._l12_a+bB._l12_2a,zB=3*bB._l01_a*(bB._l01_a+bB._l12_a);vB=(vB*CB-bB._x0*bB._l12_2a+bB._x2*bB._l01_2a)/zB,kB=(kB*CB-bB._y0*bB._l12_2a+bB._y2*bB._l01_2a)/zB}if(bB._l23_a>kR){var TB=2*bB._l23_2a+3*bB._l23_a*bB._l12_a+bB._l12_2a,RB=3*bB._l23_a*(bB._l23_a+bB._l12_a);wB=(wB*TB+bB._x1*bB._l23_2a-_B*bB._l12_2a)/RB,SB=(SB*TB+bB._y1*bB._l23_2a-xB*bB._l12_2a)/RB}bB._context.bezierCurveTo(vB,kB,wB,SB,bB._x2,bB._y2)}function Pi(bB,_B){this._context=bB,this._alpha=_B}function Ai(bB,_B){this._context=bB,this._alpha=_B}function Oi(bB,_B){this._context=bB,this._alpha=_B}function Mi(bB){this._context=bB}function qi(bB){return 0>bB?-1:1}function Li(bB,_B,xB){var vB=bB._x1-bB._x0,kB=_B-bB._x1,wB=(bB._y1-bB._y0)/(vB||0>kB&&-0),SB=(xB-bB._y1)/(kB||0>vB&&-0);return(qi(wB)+qi(SB))*Math.min(Math.abs(wB),Math.abs(SB),0.5*Math.abs((wB*kB+SB*vB)/(vB+kB)))||0}function Ui(bB,_B){var xB=bB._x1-bB._x0;return xB?(3*(bB._y1-bB._y0)/xB-_B)/2:_B}function Fi(bB,_B,xB){var vB=bB._x0,kB=bB._y0,wB=bB._x1,SB=bB._y1,CB=(wB-vB)/3;bB._context.bezierCurveTo(vB+CB,kB+CB*_B,wB-CB,SB-CB*xB,wB,SB)}function ji(bB){this._context=bB}function Ii(bB){this._context=new $i(bB)}function $i(bB){this._context=bB}function Yi(bB){this._context=bB}function Gi(bB){var xB=bB.length-1,kB=Array(xB),wB=Array(xB),SB=Array(xB),_B,vB;for(kB[0]=0,wB[0]=2,SB[0]=bB[0]+2*bB[1],_B=1;_B<xB-1;++_B)kB[_B]=1,wB[_B]=4,SB[_B]=4*bB[_B]+2*bB[_B+1];for(kB[xB-1]=2,wB[xB-1]=7,SB[xB-1]=8*bB[xB-1]+bB[xB],_B=1;_B<xB;++_B)vB=kB[_B]/wB[_B-1],wB[_B]-=vB,SB[_B]-=vB*SB[_B-1];for(kB[xB-1]=SB[xB-1]/wB[xB-1],_B=xB-2;0<=_B;--_B)kB[_B]=(SB[_B]-kB[_B+1])/wB[_B];for(wB[xB-1]=(bB[xB]+kB[xB-1])/2,_B=0;_B<xB-1;++_B)wB[_B]=2*bB[_B+1]-kB[_B+1];return[kB,wB]}function Hi(bB,_B){this._context=bB,this._t=_B}function Zi(bB,_B,xB){var vB=UR.hasOwnProperty(bB)&&UR[bB],kB=null;return vB&&(kB=vB.curve||vB[_B||'vertical'],vB.tension&&null!=xB&&(kB=kB[vB.tension](xB))),kB}function Ki(bB){var _B=[],xB,vB,kB,wB,SB,CB,zB,TB,RB,PB,AB;for(xB=bB.slice().replace(jR[0],'###$1').split(jR[1]).slice(1),TB=0,PB=xB.length;TB<PB;++TB){for(vB=xB[TB],kB=vB.slice(1).trim().replace(jR[2],'$1###$2').split(jR[3]),CB=vB.charAt(0),wB=[CB],(RB=0,AB=kB.length);RB<AB;++RB)(SB=+kB[RB])===SB&&wB.push(SB);if(zB=FR[CB.toLowerCase()],wB.length-1>zB)for(RB=1,AB=wB.length;RB<AB;RB+=zB)_B.push([CB].concat(wB.slice(RB,RB+zB)));else _B.push(wB)}return _B}function Qi(bB,_B,xB,vB,kB,wB,SB,CB,zB){var TB=NR.call(arguments);if(IR[TB])return IR[TB];var RB=SB*(Math.PI/180),PB=Math.sin(RB),AB=Math.cos(RB);xB=Math.abs(xB),vB=Math.abs(vB);var OB=0.5*(AB*(CB-bB))+0.5*(PB*(zB-_B)),MB=0.5*(AB*(zB-_B))-0.5*(PB*(CB-bB)),DB=OB*OB/(xB*xB)+MB*MB/(vB*vB);1<DB&&(DB=Math.sqrt(DB),xB*=DB,vB*=DB);var qB=AB/xB,LB=PB/xB,UB=-PB/vB,FB=AB/vB,jB=qB*CB+LB*zB,IB=UB*CB+FB*zB,$B=qB*bB+LB*_B,NB=UB*bB+FB*_B,YB=1/(($B-jB)*($B-jB)+(NB-IB)*(NB-IB))-0.25;0>YB&&(YB=0);var GB=Math.sqrt(YB);wB==kB&&(GB=-GB);var WB=0.5*(jB+$B)-GB*(NB-IB),HB=0.5*(IB+NB)+GB*($B-jB),XB=Math.atan2(IB-HB,jB-WB),VB=Math.atan2(NB-HB,$B-WB),JB=VB-XB;0>JB&&1===wB?JB+=2*Math.PI:0<JB&&0===wB&&(JB-=2*Math.PI);for(var ZB=Math.ceil(Math.abs(JB/(0.5*Math.PI+1e-3))),KB=[],QB=0;QB<ZB;++QB){var eY=XB+QB*JB/ZB,tY=XB+(QB+1)*JB/ZB;KB[QB]=[WB,HB,eY,tY,xB,vB,PB,AB]}return IR[TB]=KB}function ed(bB){var _B=NR.call(bB);if($R[_B])return $R[_B];var xB=bB[0],vB=bB[1],kB=bB[2],wB=bB[3],SB=bB[4],CB=bB[5],zB=bB[6],TB=bB[7],RB=TB*SB,PB=-zB*CB,AB=zB*SB,OB=TB*CB,MB=Math.cos(kB),DB=Math.sin(kB),qB=Math.cos(wB),LB=Math.sin(wB),UB=0.5*(wB-kB),FB=Math.sin(0.5*UB),jB=8/3*FB*FB/Math.sin(UB),IB=xB+MB-jB*DB,$B=vB+DB+jB*MB,NB=xB+qB,BB=vB+LB,YB=NB+jB*LB,GB=BB-jB*qB;return $R[_B]=[RB*IB+PB*$B,AB*IB+OB*$B,RB*YB+PB*GB,AB*YB+OB*GB,RB*NB+PB*BB,AB*NB+OB*BB]}function td(bB,_B){var xB=BR[0]=bB[0];if('a'===xB||'A'===xB)BR[1]=_B*bB[1],BR[2]=_B*bB[2],BR[6]=_B*bB[6],BR[7]=_B*bB[7];else for(var vB=1,kB=bB.length;vB<kB;++vB)BR[vB]=_B*bB[vB];return BR}function nd(bB,_B,xB,vB,kB){var SB=null,CB=0,zB=0,TB=0,RB=0,wB,PB,AB,OB,MB;null==xB&&(xB=0),null==vB&&(vB=0),null==kB&&(kB=1),bB.beginPath&&bB.beginPath();for(var DB=0,qB=_B.length;DB<qB;++DB){switch(wB=_B[DB],1!==kB&&(wB=td(wB,kB)),wB[0]){case'l':CB+=wB[1],zB+=wB[2],bB.lineTo(CB+xB,zB+vB);break;case'L':CB=wB[1],zB=wB[2],bB.lineTo(CB+xB,zB+vB);break;case'h':CB+=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'H':CB=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'v':zB+=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'V':zB=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'm':CB+=wB[1],zB+=wB[2],bB.moveTo(CB+xB,zB+vB);break;case'M':CB=wB[1],zB=wB[2],bB.moveTo(CB+xB,zB+vB);break;case'c':PB=CB+wB[5],AB=zB+wB[6],TB=CB+wB[3],RB=zB+wB[4],bB.bezierCurveTo(CB+wB[1]+xB,zB+wB[2]+vB,TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB;break;case'C':CB=wB[5],zB=wB[6],TB=wB[3],RB=wB[4],bB.bezierCurveTo(wB[1]+xB,wB[2]+vB,TB+xB,RB+vB,CB+xB,zB+vB);break;case's':PB=CB+wB[3],AB=zB+wB[4],TB=2*CB-TB,RB=2*zB-RB,bB.bezierCurveTo(TB+xB,RB+vB,CB+wB[1]+xB,zB+wB[2]+vB,PB+xB,AB+vB),TB=CB+wB[1],RB=zB+wB[2],CB=PB,zB=AB;break;case'S':PB=wB[3],AB=wB[4],TB=2*CB-TB,RB=2*zB-RB,bB.bezierCurveTo(TB+xB,RB+vB,wB[1]+xB,wB[2]+vB,PB+xB,AB+vB),CB=PB,zB=AB,TB=wB[1],RB=wB[2];break;case'q':PB=CB+wB[3],AB=zB+wB[4],TB=CB+wB[1],RB=zB+wB[2],bB.quadraticCurveTo(TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB;break;case'Q':PB=wB[3],AB=wB[4],bB.quadraticCurveTo(wB[1]+xB,wB[2]+vB,PB+xB,AB+vB),CB=PB,zB=AB,TB=wB[1],RB=wB[2];break;case't':PB=CB+wB[1],AB=zB+wB[2],null===SB[0].match(/[QqTt]/)?(TB=CB,RB=zB):'t'===SB[0]?(TB=2*CB-OB,RB=2*zB-MB):'q'===SB[0]&&(TB=2*CB-TB,RB=2*zB-RB),OB=TB,MB=RB,bB.quadraticCurveTo(TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB,TB=CB+wB[1],RB=zB+wB[2];break;case'T':PB=wB[1],AB=wB[2],TB=2*CB-TB,RB=2*zB-RB,bB.quadraticCurveTo(TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB;break;case'a':ad(bB,CB+xB,zB+vB,[wB[1],wB[2],wB[3],wB[4],wB[5],wB[6]+CB+xB,wB[7]+zB+vB]),CB+=wB[6],zB+=wB[7];break;case'A':ad(bB,CB+xB,zB+vB,[wB[1],wB[2],wB[3],wB[4],wB[5],wB[6]+xB,wB[7]+vB]),CB=wB[6],zB=wB[7];break;case'z':case'Z':bB.closePath();}SB=wB}}function ad(bB,_B,xB,vB){for(var kB=Qi(vB[5],vB[6],vB[0],vB[1],vB[3],vB[4],vB[2],_B,xB),wB=0,SB;wB<kB.length;++wB)SB=ed(kB[wB]),bB.bezierCurveTo(SB[0],SB[1],SB[2],SB[3],SB[4],SB[5])}function dd(bB){return WR.hasOwnProperty(bB)?WR[bB]:rd(bB)}function rd(bB){if(!HR.hasOwnProperty(bB)){var _B=Ki(bB);HR[bB]={draw:function(vB,kB){nd(vB,_B,0,0,Math.sqrt(kB)/2)}}}return HR[bB]}function od(bB){return bB.x}function ld(bB){return bB.y}function sd(bB){return bB.width}function fd(bB){return bB.height}function pd(bB){return function(){return bB}}function gd(){function bB(CB,zB,TB){var PB=null==zB?+_B.call(this,CB):zB,AB=null==TB?+xB.call(this,CB):TB,OB=+vB.call(this,CB),MB=+kB.call(this,CB),DB=+wB.call(this,CB),RB;if(SB||(SB=RB=Ya()),0>=DB)SB.rect(PB,AB,OB,MB);else{var qB=PB+OB,LB=AB+MB;SB.moveTo(PB+DB,AB),SB.lineTo(qB-DB,AB),SB.quadraticCurveTo(qB,AB,qB,AB+DB),SB.lineTo(qB,LB-DB),SB.quadraticCurveTo(qB,LB,qB-DB,LB),SB.lineTo(PB+DB,LB),SB.quadraticCurveTo(PB,LB,PB,LB-DB),SB.lineTo(PB,AB+DB),SB.quadraticCurveTo(PB,AB,PB+DB,AB),SB.closePath()}return RB?(SB=null,RB+''||null):void 0}var _B=od,xB=ld,vB=sd,kB=fd,wB=pd(0),SB=null;return bB.x=function(CB){return arguments.length?(_B='function'===typeof CB?CB:pd(+CB),bB):_B},bB.y=function(CB){return arguments.length?(xB='function'===typeof CB?CB:pd(+CB),bB):xB},bB.width=function(CB){return arguments.length?(vB='function'===typeof CB?CB:pd(+CB),bB):vB},bB.height=function(CB){return arguments.length?(kB='function'===typeof CB?CB:pd(+CB),bB):kB},bB.cornerRadius=function(CB){return arguments.length?(wB='function'===typeof CB?CB:pd(+CB),bB):wB},bB.context=function(CB){return arguments.length?(SB=null==CB?null:CB,bB):SB},bB}function md(){function bB(PB,AB,OB){var MB=OB/2;if(CB){var DB=TB-AB,qB=PB-zB;if(DB||qB){var LB=Math.sqrt(DB*DB+qB*qB),UB=(DB/=LB)*RB,FB=(qB/=LB)*RB,jB=Math.atan2(qB,DB);SB.moveTo(zB-UB,TB-FB),SB.lineTo(PB-DB*MB,AB-qB*MB),SB.arc(PB,AB,MB,jB-XR,jB),SB.lineTo(zB+UB,TB+FB),SB.arc(zB,TB,RB,jB,jB+XR)}else SB.arc(PB,AB,MB,0,2*XR);SB.closePath()}else CB=1;zB=PB,TB=AB,RB=MB}function _B(PB){var OB=PB.length,DB=!1,AB,MB,qB;for(null==SB&&(SB=qB=Ya()),AB=0;AB<=OB;++AB)!(AB<OB&&wB(MB=PB[AB],AB,PB))===DB&&(DB=!DB)&&(CB=0),DB&&bB(+xB(MB,AB,PB),+vB(MB,AB,PB),+kB(MB,AB,PB));if(qB)return SB=null,qB+''||null}var SB=null,xB,vB,kB,wB,CB,zB,TB,RB;return _B.x=function(PB){return arguments.length?(xB=PB,_B):xB},_B.y=function(PB){return arguments.length?(vB=PB,_B):vB},_B.size=function(PB){return arguments.length?(kB=PB,_B):kB},_B.defined=function(PB){return arguments.length?(wB=PB,_B):wB},_B.context=function(PB){return arguments.length?(SB=null==PB?null:PB,_B):SB},_B}function hd(bB){return bB.x||0}function yd(bB){return bB.y||0}function wd(bB){return bB.cornerRadius||0}function Sd(bB){return!1!==bB.defined}function Ad(bB,_B,xB,vB){return QR.context(bB)(_B,xB,vB)}function qd(bB,_B){return _B.stroke&&0!==_B.opacity&&0!==_B.strokeOpacity&&bB.expand(null==_B.strokeWidth?1:+_B.strokeWidth),bB}function Ld(bB){return nP=bB,Ld}function Ud(){}function Fd(bB,_B){nP.add(bB,_B)}function jd(bB,_B,xB){for(var vB=xB.width(),kB=xB.height(),wB=xB.x1+_B.x1*vB,SB=xB.y1+_B.y1*kB,CB=xB.x1+_B.x2*vB,zB=xB.y1+_B.y2*kB,TB=_B.stops,RB=0,PB=TB.length,AB=bB.createLinearGradient(wB,SB,CB,zB);RB<PB;++RB)AB.addColorStop(TB[RB].offset,TB[RB].color);return AB}function Id(bB,_B,xB){return xB.id?jd(bB,xB,_B.bounds):xB}function $d(bB,_B,xB){return xB*=null==_B.fillOpacity?1:_B.fillOpacity,!!(0<xB)&&(bB.globalAlpha=xB,bB.fillStyle=Id(bB,_B,_B.fill),!0)}function Nd(bB,_B,xB){var vB=null==(vB=_B.strokeWidth)?1:vB;return!(0>=vB)&&(xB*=null==_B.strokeOpacity?1:_B.strokeOpacity,!!(0<xB)&&(bB.globalAlpha=xB,bB.strokeStyle=Id(bB,_B,_B.stroke),bB.lineWidth=vB,bB.lineCap=_B.strokeCap||'butt',bB.lineJoin=_B.strokeJoin||'miter',bB.miterLimit=_B.strokeMiterLimit||10,bB.setLineDash&&(bB.setLineDash(_B.strokeDash||rP),bB.lineDashOffset=_B.strokeDashOffset||0),!0))}function Bd(bB,_B){return bB.zindex-_B.zindex||bB.index-_B.index}function Yd(bB){if(!bB.zdirty)return bB.zitems;var _B=bB.items,xB=[],vB,kB,wB;for(kB=0,wB=_B.length;kB<wB;++kB)vB=_B[kB],vB.index=kB,vB.zindex&&xB.push(vB);return bB.zdirty=!1,bB.zitems=xB.sort(Bd)}function Gd(bB,_B){var xB=bB.items,vB,kB;if(xB&&xB.length){var wB=Yd(bB);if(wB&&wB.length){for(vB=0,kB=xB.length;vB<kB;++vB)xB[vB].zindex||_B(xB[vB]);xB=wB}for(vB=0,kB=xB.length;vB<kB;++vB)_B(xB[vB])}}function Wd(bB,_B){var xB=bB.items,vB,kB;if(!xB||!xB.length)return null;var wB=Yd(bB);for(wB&&wB.length&&(xB=wB),kB=xB.length;0<=--kB;)if(vB=_B(xB[kB]))return vB;if(xB===wB)for(xB=bB.items,kB=xB.length;0<=--kB;)if(!xB[kB].zindex&&(vB=_B(xB[kB])))return vB;return null}function Hd(bB){return function(_B,xB,vB){Gd(xB,function(kB){(!vB||vB.intersects(kB.bounds))&&Vd(bB,_B,kB,kB)})}}function Xd(bB){return function(_B,xB,vB){xB.items.length&&(!vB||vB.intersects(xB.bounds))&&Vd(bB,_B,xB.items[0],xB.items)}}function Vd(bB,_B,xB,vB){var kB=null==xB.opacity?1:xB.opacity;0===kB||bB(_B,vB)||(xB.fill&&$d(_B,xB,kB)&&_B.fill(),xB.stroke&&Nd(_B,xB,kB)&&_B.stroke())}function Jd(bB){return bB||(bB=oP),function(_B,xB,vB,kB,wB,SB){return 1<_B.pixelRatio&&(vB*=_B.pixelRatio,kB*=_B.pixelRatio),Wd(xB,function(CB){var zB=CB.bounds;return(!zB||zB.contains(wB,SB))&&zB?bB(_B,CB,vB,kB,wB,SB)?CB:void 0:void 0})}}function Zd(bB,_B){return function(xB,vB,kB,wB){var SB=Array.isArray(vB)?vB[0]:vB,CB=null==_B?SB.fill:_B,zB=SB.stroke&&xB.isPointInStroke,TB,RB;return zB&&(TB=SB.strokeWidth,RB=SB.strokeCap,xB.lineWidth=null==TB?1:TB,xB.lineCap=null==RB?'butt':RB),!bB(xB,vB)&&(CB&&xB.isPointInPath(kB,wB)||zB&&xB.isPointInStroke(kB,wB))}}function Kd(bB){return Jd(Zd(bB))}function Qd(bB,_B){return'translate('+bB+','+_B+')'}function er(bB){return Qd(bB.x||0,bB.y||0)}function nr(bB,_B){function kB(wB,SB){var CB=SB.x||0,zB=SB.y||0;wB.translate(CB,zB),wB.beginPath(),_B(wB,SB),wB.translate(-CB,-zB)}return{type:bB,tag:'path',nested:!1,attr:function(wB,SB){wB('transform',er(SB)),wB('d',_B(null,SB))},bound:function(wB,SB){return _B(Ld(wB),SB),qd(wB,SB).translate(SB.x||0,SB.y||0)},draw:Hd(kB),pick:Kd(kB)}}function ar(bB,_B){function kB(CB,zB){CB.beginPath(),_B(CB,zB)}var SB=Zd(kB);return{type:bB,tag:'path',nested:!0,attr:function(CB,zB){var TB=zB.mark.items;TB.length&&CB('d',_B(null,TB))},bound:function(CB,zB){var TB=zB.items;return 0===TB.length?CB:(_B(Ld(CB),TB),qd(CB,TB[0]))},draw:Xd(kB),pick:function(CB,zB,TB,RB,PB,AB){var OB=zB.items,MB=zB.bounds;return OB&&OB.length&&(!MB||MB.contains(PB,AB))?(1<CB.pixelRatio&&(TB*=CB.pixelRatio,RB*=CB.pixelRatio),SB(CB,OB,TB,RB)?OB[0]:null):null}}}function ir(bB,_B,xB){var vB=bB._defs,kB=_B.clip_id||(_B.clip_id='clip'+vB.clip_id++),wB=vB.clipping[kB]||(vB.clipping[kB]={id:kB});return wB.width=xB.width||0,wB.height=xB.height||0,'url(#'+kB+')'}function yr(bB,_B,xB){return(!1!==bB.interactive||'group'===bB.marktype)&&bB.bounds&&bB.bounds.contains(_B,xB)}function br(bB,_B){var xB=bB.image;return xB&&xB.url===bB.url||(xB={loaded:!1,width:0,height:0},_B.loadImage(bB.url).then(function(vB){bB.image=vB,bB.image.url=bB.url})),xB}function _r(bB,_B){return'center'===bB?_B/2:'right'===bB?_B:0}function xr(bB,_B){return'middle'===bB?_B/2:'bottom'===bB?_B:0}function Cr(bB,_B){var xB=_B.path;if(null==xB)return!0;var vB=_B.pathCache;vB&&vB.path===xB||((_B.pathCache=vB=Ki(xB)).path=xB),nd(bB,vB,_B.x,_B.y)}function Pr(bB,_B){bB.beginPath(),Ad(bB,_B)}function Mr(bB,_B,xB){var vB,kB,wB,SB;return _B.stroke&&Nd(bB,_B,xB)&&(vB=_B.x||0,kB=_B.y||0,wB=null==_B.x2?vB:_B.x2,SB=null==_B.y2?kB:_B.y2,bB.beginPath(),bB.moveTo(vB,kB),bB.lineTo(wB,SB),!0)}function Lr(bB){return _P=Ir(bB),Ur(Nr(bB))}function Ur(bB){return~~(0.8*bB.length*_P)}function Fr(bB){return bP.font=Yr(bB),jr(Nr(bB))}function jr(bB){return bP.measureText(bB).width}function Ir(bB){return null==bB.fontSize?11:bB.fontSize}function $r(bB){bP=bB?(bP=ja(1,1))?bP.getContext('2d'):null:null,xP.width=bP?Fr:Lr}function Nr(bB){var _B=bB.text;return null==_B?'':0<bB.limit?Br(bB):_B+''}function Br(bB){var _B=+bB.limit,xB=bB.text+'',vB=bP?(bP.font=Yr(bB),jr):(_P=Ir(bB),Ur);if(vB(xB)<_B)return xB;var kB=bB.ellipsis||'\u2026',wB='rtl'===bB.dir,SB=0,CB=xB.length,zB;if(_B-=vB(kB),wB){for(;SB<CB;)zB=SB+CB>>>1,vB(xB.slice(zB))>_B?SB=zB+1:CB=zB;return kB+xB.slice(SB)}for(;SB<CB;)zB=1+(SB+CB>>>1),vB(xB.slice(0,zB))<_B?SB=zB:CB=zB-1;return xB.slice(0,SB)+kB}function Yr(bB,_B){var xB=bB.font;return _B&&xB&&(xB=(xB+'').replace(/\"/g,'\'')),''+(bB.fontStyle?bB.fontStyle+' ':'')+(bB.fontVariant?bB.fontVariant+' ':'')+(bB.fontWeight?bB.fontWeight+' ':'')+Ir(bB)+'px '+(xB||'sans-serif')}function Gr(bB){var _B=bB.baseline,xB=Ir(bB);return Math.round('top'===_B?0.93*xB:'middle'===_B?0.3*xB:'bottom'===_B?-0.21*xB:0)}function Hr(bB,_B,xB){var vB=xP.height(_B),kB=_B.align,wB=_B.radius||0,SB=_B.x||0,CB=_B.y||0,zB=_B.dx||0,TB=(_B.dy||0)+Gr(_B)-Math.round(0.8*vB),RB,PB;return wB&&(PB=(_B.theta||0)-Math.PI/2,SB+=wB*Math.cos(PB),CB+=wB*Math.sin(PB)),RB=xP.width(_B),'center'===kB?zB-=RB/2:'right'===kB&&(zB-=RB),bB.set(zB+=SB,TB+=CB,zB+RB,TB+vB),_B.angle&&!xB&&bB.rotate(_B.angle*Math.PI/180,SB,CB),bB.expand(xB?0:1)}function Jr(bB,_B,xB){var vB=SP[bB.mark.marktype],kB=_B||vB.bound;vB.nested&&(bB=bB.mark);var wB=bB.bounds,SB=bB.bounds_prev||(bB.bounds_prev=new Pa);return wB?(SB.clear().union(wB),wB.clear()):bB.bounds=new Pa,kB(bB.bounds,bB,xB),wB||SB.clear().union(bB.bounds),bB.bounds}function Zr(bB,_B,xB){var vB=SP[bB.marktype],kB=vB.bound,wB=bB.items,SB=wB&&wB.length,CB,zB,TB,RB;if(vB.nested)return TB=SB?wB[0]:(CP.mark=bB,CP),RB=Jr(TB,kB,xB),_B=_B&&_B.union(RB)||RB,_B;if(_B=_B||bB.bounds&&bB.bounds.clear()||new Pa,SB)for(CB=0,zB=wB.length;CB<zB;++CB)_B.union(Jr(wB[CB],kB,xB));return bB.bounds=_B}function Kr(bB,_B){return JSON.stringify(bB,zP,_B)}function Qr(bB){var _B='string'===typeof bB?JSON.parse(bB):bB;return eo(_B)}function eo(bB){var _B=bB.marktype,xB=bB.items,vB,kB,wB;if(xB)for(kB=0,wB=xB.length;kB<wB;++kB)vB=_B?'mark':'group',xB[kB][vB]=bB,xB[kB].zindex&&(xB[kB][vB].zdirty=!0),'group'===(_B||vB)&&eo(xB[kB]);return _B&&Zr(bB),bB}function no(bB){arguments.length?this.root=Qr(bB):(this.root=ao({marktype:'group',name:'root',role:'frame'}),this.root.items=[new Ma(this.root)])}function ao(bB,_B){return{bounds:new Pa,bounds_prev:new Pa,clip:!!bB.clip,group:_B,interactive:!1!==bB.interactive,items:[],marktype:bB.marktype,name:bB.name||void 0,role:bB.role||void 0,zindex:bB.zindex||0}}function io(bB){this._active=null,this._handlers={},this._loader=bB||St()}function ro(bB){this._el=null,this._bgcolor=null,this._loader=new Ia(bB)}function oo(bB,_B){var xB=_B.getBoundingClientRect();return[bB.clientX-xB.left-(_B.clientLeft||0),bB.clientY-xB.top-(_B.clientTop||0)]}function so(bB){io.call(this,bB),this._down=null,this._touch=null,this._first=!0}function fo(bB,_B,xB){return function(vB){var kB=this._active,wB=this.pickEvent(vB);wB===kB?this.fire(bB,vB):((!kB||!kB.exit)&&this.fire(xB,vB),this._active=wB,this.fire(_B,vB),this.fire(bB,vB))}}function co(bB){return function(_B){this.fire(bB,_B),this._active=null}}function uo(bB,_B){var xB=_B.group;bB.save(),bB.beginPath(),bB.rect(0,0,xB.width||0,xB.height||0),bB.clip()}function po(bB,_B,xB,vB){var kB='undefined'!==typeof HTMLElement&&bB instanceof HTMLElement&&null!=bB.parentNode,wB=bB.getContext('2d'),SB=kB?OP:1;return bB.width=_B*SB,bB.height=xB*SB,1!==SB&&(bB.style.width=_B+'px',bB.style.height=xB+'px'),wB.pixelRatio=SB,wB.setTransform(SB,0,0,SB,SB*vB[0],SB*vB[1]),bB}function go(bB){ro.call(this,bB),this._redraw=!1}function mo(bB,_B){var xB=new Pa,vB,kB,wB,SB,CB;for(vB=0,kB=_B.length;vB<kB;++vB)wB=_B[vB],SB=wB.mark,CB=SB.group,wB=SP[SB.marktype].nested?SB:wB,xB.union(ho(wB.bounds,CB)),wB.bounds_prev&&xB.union(ho(wB.bounds_prev,CB));return xB.expand(1).round(),bB.beginPath(),bB.rect(xB.x1,xB.y1,xB.width(),xB.height()),bB.clip(),xB}function ho(bB,_B){if(null==_B)return bB;for(var xB=qP.clear().union(bB);null!=_B;_B=_B.mark.group)xB.translate(_B.x||0,_B.y||0);return xB}function yo(bB){io.call(this,bB);var _B=this;_B._hrefHandler=bo(_B,function(xB,vB){vB&&vB.href&&_B.handleHref(xB,vB,vB.href)}),_B._tooltipHandler=bo(_B,function(xB,vB){vB&&vB.tooltip&&_B.handleTooltip(xB,vB,'mouseover'===xB.type?vB.tooltip:null)})}function bo(bB,_B){return function(xB){var vB=xB.target,kB=vB.__data__;xB.vegaType=xB.type,kB=Array.isArray(kB)?kB[0]:kB,_B.call(bB._obj,xB,kB)}}function _o(bB,_B,xB){var vB='<'+bB,kB,wB;if(_B)for(kB in _B)wB=_B[kB],null!=wB&&(vB+=' '+kB+'="'+wB+'"');return xB&&(vB+=' '+xB),vB+'>'}function xo(bB){return'</'+bB+'>'}function vo(bB){ro.call(this,bB),this._dirtyID=0,this._svg=null,this._root=null,this._defs=null}function ko(bB,_B,xB){var vB,kB,wB;for(bB=La(bB,xB,'linearGradient',IP),bB.setAttribute('id',_B.id),bB.setAttribute('x1',_B.x1),bB.setAttribute('x2',_B.x2),bB.setAttribute('y1',_B.y1),bB.setAttribute('y2',_B.y2),(vB=0,kB=_B.stops.length);vB<kB;++vB)wB=La(bB,vB,'stop',IP),wB.setAttribute('offset',_B.stops[vB].offset),wB.setAttribute('stop-color',_B.stops[vB].color);Ua(bB,vB)}function wo(bB,_B,xB){var vB;bB=La(bB,xB,'clipPath',IP),bB.setAttribute('id',_B.id),vB=La(bB,0,'rect',IP),vB.setAttribute('x',0),vB.setAttribute('y',0),vB.setAttribute('width',_B.width),vB.setAttribute('height',_B.height)}function Eo(bB,_B){for(;bB&&bB.dirty!==_B;bB=bB.mark.group)if(bB.dirty=_B,bB.mark&&bB.mark.dirty!==_B)bB.mark.dirty=_B;else return}function So(bB,_B,xB){_B=_B.lastChild;var kB=0,vB;Gd(xB,function(wB){vB=bB.draw(_B,wB,vB),++kB}),Ua(_B,1+kB)}function Co(bB,_B,xB,vB){var kB=bB._svg,wB;if(!kB&&(wB=_B.ownerDocument,kB=Da(wB,vB,IP),bB._svg=kB,bB.mark&&(kB.__data__=bB,kB.__values__={fill:'default'},'g'===vB))){var SB=Da(wB,'path',IP);SB.setAttribute('class','background'),kB.appendChild(SB),SB.__data__=bB;var CB=Da(wB,'g',IP);kB.appendChild(CB),CB.__data__=bB}return(wB||kB.previousSibling!==xB)&&_B.insertBefore(kB,xB?xB.nextSibling:_B.firstChild),kB}function zo(bB,_B,xB){_B===YP[bB]||(null==_B?xB?BP.removeAttributeNS(xB,bB):BP.removeAttribute(bB):xB?BP.setAttributeNS(xB,bB,_B):BP.setAttribute(bB,_B),YP[bB]=_B)}function To(){return'undefined'===typeof window?'':window.location.href}function Ro(bB){ro.call(this,bB),this._text={head:'',root:'',foot:'',defs:'',body:''},this._defs={clip_id:1,gradient:{},clipping:{}}}function Po(bB,_B,xB,vB){XP[vB||bB]=_B}function Ao(bB,_B,xB,vB){if(null==bB)return'';var TB='',kB,wB,SB,CB,zB;for('bgrect'===xB&&!1===_B.interactive&&(TB+='pointer-events: none;'),'text'===xB&&(TB+='font: '+Yr(bB)+';'),(kB=0,wB=jP.length);kB<wB;++kB)SB=jP[kB],CB=FP[SB],zB=bB[SB],null==zB?'fill'===CB&&(TB+=(TB.length?' ':'')+'fill: none;'):(zB.id&&(vB.gradient[zB.id]=zB,zB='url(#'+zB.id+')'),TB+=(TB.length?' ':'')+CB+': '+zB+';');return TB?'style="'+TB+'"':null}function Oo(bB){return bB.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}function Mo(bB,_B){return bB=((bB||'')+'').toLowerCase(),1<arguments.length?(eA[bB]=_B,this):eA[bB]}function Do(bB,_B,xB){return!(bB!==_B)||('path'===xB?qo(bB,_B):bB instanceof Date&&_B instanceof Date?+bB===+_B:Ie(bB)&&Ie(_B)?Math.abs(bB-_B)<=tA:bB&&_B&&(Ee(bB)||Ee(_B))?null==bB||null==_B?!1:Lo(bB,_B):bB==_B)}function qo(bB,_B){return Do(Ki(bB),Ki(_B))}function Lo(bB,_B){var xB=Object.keys(bB),vB=Object.keys(_B),kB,wB;if(xB.length!==vB.length)return!1;for(xB.sort(),vB.sort(),wB=xB.length-1;0<=wB;wB--)if(xB[wB]!=vB[wB])return!1;for(wB=xB.length-1;0<=wB;wB--)if(kB=xB[wB],!Do(bB[kB],_B[kB],kB))return!1;return('undefined'===typeof bB?'undefined':babelHelpers.typeof(bB))===('undefined'===typeof _B?'undefined':babelHelpers.typeof(_B))}function Uo(bB){var _B=bB||nT,xB=[],vB={};return xB.add=function(kB){var wB=_B(kB);return vB[wB]||(vB[wB]=1,xB.push(kB)),xB},xB.remove=function(kB){var wB=_B(kB),SB;return vB[wB]&&(vB[wB]=0,0<=(SB=xB.indexOf(kB))&&xB.splice(SB,1)),xB},xB}function Fo(bB){return bB._id}function jo(bB,_B){for(var xB in bB)'_id'!==xB&&(_B[xB]=bB[xB]);return _B}function Io(bB){var _B=bB===Object(bB)?bB:{data:bB};return _B._id||(_B._id=++nA),_B}function $o(bB){return Io(jo(bB,{}))}function No(bB,_B){return jo(bB,_B)}function Bo(bB,_B){return _B._id=bB._id,_B}function Yo(bB){return bB&&bB.constructor===Go}function Go(){var bB=[],_B=[],xB=[],vB=[],kB=[];return{constructor:Go,insert:function(SB){for(var CB=Pe(SB),zB=0,TB=CB.length;zB<TB;++zB)bB.push(CB[zB]);return this},remove:function(SB){for(var CB=Oe(SB)?vB:_B,zB=Pe(SB),TB=0,RB=zB.length;TB<RB;++TB)CB.push(zB[TB]);return this},modify:function(SB,CB,zB){var TB={field:CB,value:Me(zB)};return Oe(SB)?(TB.filter=SB,kB.push(TB)):(TB.tuple=SB,xB.push(TB)),this},encode:function(SB,CB){return xB.push({tuple:SB,field:CB}),this},pulse:function(SB,CB){function zB(qB,LB,UB){UB?qB[LB]=UB(qB):SB.encode=LB,TB[qB._id]=qB}var TB,RB,PB,AB,OB,MB,DB;for(RB=0,PB=bB.length;RB<PB;++RB)SB.add.push(Io(bB[RB]));for(TB={},RB=0,PB=_B.length;RB<PB;++RB)MB=_B[RB],TB[MB._id]=MB;for(RB=0,PB=vB.length;RB<PB;++RB)OB=vB[RB],CB.forEach(function(qB){OB(qB)&&(TB[qB._id]=qB)});for(DB in TB)SB.rem.push(TB[DB]);for(TB={},RB=0,PB=xB.length;RB<PB;++RB)AB=xB[RB],zB(AB.tuple,AB.field,AB.value),SB.modifies(AB.field);for(RB=0,PB=kB.length;RB<PB;++RB)AB=kB[RB],OB=AB.filter,CB.forEach(function(qB){OB(qB)&&zB(qB,AB.field,AB.value)}),SB.modifies(AB.field);for(DB in TB)SB.mod.push(TB[DB]);return SB}}}function Wo(){Object.defineProperty(this,aA,{writable:!0,value:{}})}function Ho(bB,_B,xB,vB){this.id=++dA,this.value=bB,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,_B&&(this._update=_B),xB&&this.parameters(xB,vB)}function Xo(bB){return function(_B){var xB=this.flags;return 0===arguments.length?!!(xB&bB):(this.flags=_B?xB|bB:xB&~bB,this)}}function Zo(bB,_B,xB){this.id=++cA,this.value=null,xB&&(this.receive=xB),bB&&(this._filter=bB),_B&&(this._apply=_B)}function Ko(bB,_B,xB){return new Zo(bB,_B,xB)}function nl(bB,_B,xB,vB,kB,wB){var SB=De({},wB,pA),CB,zB;Oe(xB)||(xB=Me(xB)),vB===void 0?CB=function(RB){bB.touch(xB(RB))}:Oe(vB)?(zB=new Ho(null,vB,kB,!1),CB=function(RB){var PB=xB(RB),AB=(zB.evaluate(RB),zB.value);Yo(AB)?bB.pulse(PB,AB,wB):bB.update(PB,AB,SB)}):CB=function(RB){bB.update(xB(RB),vB,SB)},_B.apply(CB)}function al(bB,_B,xB,vB,kB,wB){var SB,CB;vB===void 0?CB=xB:(SB=Oe(vB)?vB:Me(vB),vB=xB?function(zB,TB){var RB=SB(zB,TB);return xB.skip()?RB:xB.skip(!0).value=RB}:SB,CB=new Ho(null,vB,kB,!1),CB.modified(wB&&wB.force),CB.rank=0,xB&&(CB.skip(!0),CB.value=xB.value,CB.targets().add(xB))),_B.targets().add(CB)}function rl(bB,_B,xB){this.dataflow=bB,this.stamp=null==_B?-1:_B,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=xB||null}function ol(bB,_B){return bB?function(xB,vB){return bB(xB,vB)&&_B(xB,vB)}:_B}function ll(bB,_B){var xB={};return bB.visit(_B,function(vB){xB[vB._id]=1}),function(vB){return xB[vB._id]?null:vB}}function gl(bB){var vB=new Promise(function(kB,wB){_B=kB,xB=wB}),_B,xB;return vB.requests=0,vB.done=function(){0===--vB.requests&&bB.runAfter(function(){bB._pending=null;try{bB.run(),_B(bB)}catch(kB){xB(kB)}})},bB._pending=vB}function yl(bB,_B,xB,vB){var kB=this,wB=0,SB,CB,zB,TB,RB;for(this.dataflow=bB,this.stamp=_B,this.fields=null,this.encode=vB||null,this.pulses=xB,(zB=0,TB=xB.length);zB<TB;++zB)if(SB=xB[zB],SB.stamp===_B){if(SB.fields)for(RB in CB=kB.fields||(kB.fields={}),SB.fields)CB[RB]=1;SB.changed(kB.ADD)&&(wB|=kB.ADD),SB.changed(kB.REM)&&(wB|=kB.REM),SB.changed(kB.MOD)&&(wB|=kB.MOD)}this.changes=wB}function El(bB){this.cmp=bB,this.nodes=[]}function Sl(bB,_B,xB,vB){var kB,wB,SB;for(kB=bB[xB];xB>_B;){if(SB=xB-1>>1,wB=bB[SB],0>vB(kB,wB)){bB[xB]=wB,xB=SB;continue}break}return bB[xB]=kB}function Cl(bB,_B,xB){for(var vB=_B,kB=bB.length,wB=bB[_B],SB=2*_B+1,CB;SB<kB;)CB=SB+1,CB<kB&&0<=xB(bB[SB],bB[CB])&&(SB=CB),bB[_B]=bB[SB],_B=SB,SB=2*_B+1;return bB[_B]=wB,Sl(bB,vB,_B,xB)}function zl(){this._log=Re(),this._clock=0,this._rank=0,this._loader=St(),this._touched=Uo(tT),this._pulses={},this._pulse=null,this._heap=new El(function(bB,_B){return bB.qrank-_B.qrank}),this._postrun=[]}function Tl(bB){return function(){return this._log[bB].apply(this,arguments)}}function Rl(bB,_B){Ho.call(this,bB,null,_B)}function Pl(bB,_B){var xB=bB.type;Al(xB,bB),Ol(xB,_B)}function Al(bB,_B){return bB=bB&&bB.toLowerCase(),1<arguments.length?(OA[bB]=_B,this):OA.hasOwnProperty(bB)?OA[bB]:null}function Ol(bB,_B){return 1<arguments.length?(AA[bB]=_B,this):AA.hasOwnProperty(bB)?AA[bB]:null}function Ml(bB){this._key=bB||'_id',this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null}function Dl(bB,_B){return DA[bB](_B)}function ql(bB){return function(_B){var xB=De({init:'',add:'',rem:'',idx:0},bB);return xB.out=_B||bB.name,xB}}function Ll(bB,_B){return bB.idx-_B.idx}function Ul(bB,_B){function xB(SB,CB){function zB(TB){SB[TB]||xB(SB,SB[TB]=DA[TB]())}return CB.req&&CB.req.forEach(zB),_B&&CB.str&&CB.str.forEach(zB),SB}var vB=bB.reduce(xB,bB.reduce(function(SB,CB){return SB[CB.name]=CB,SB},{})),kB=[],wB;for(wB in vB)kB.push(vB[wB]);return kB.sort(Ll)}function Fl(bB,_B){var vB=Ul(bB,!0),kB='this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;',wB='if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;',SB='if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;',CB='var t = this.tuple; var cell = this.cell;';return vB.forEach(function(zB){0>zB.idx?(kB=zB.init+kB,wB=zB.add+wB,SB=zB.rem+SB):(kB+=zB.init,wB+=zB.add,SB+=zB.rem)}),bB.slice().sort(Ll).forEach(function(zB){CB+='t[\''+zB.out+'\']='+zB.set+';'}),CB+='return t;',kB=Function('cell','t',kB),kB.prototype.add=Function('v','t',wB),kB.prototype.rem=Function('v','t',SB),kB.prototype.set=Function(CB),kB.prototype.get=_B||nT,kB.fields=bB.map(function(zB){return zB.out}),kB}function jl(bB){Rl.call(this,null,bB),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Il(bB,_B,xB){return xB||bB+(_B?'_'+_B:'')}function $l(bB){var _B=this._dims,xB=_B.length,kB=_B[0](bB)+'',vB;for(vB=1;vB<xB;++vB)kB+='|'+_B[vB](bB);return kB}function Nl(bB){Rl.call(this,null,bB)}function Bl(bB){Rl.call(this,[],bB)}function Yl(bB){Ho.call(this,null,Gl,bB)}function Gl(bB){return this.value&&!bB.modified()?this.value:Ae(bB.fields,bB.orders)}function Wl(bB){Rl.call(this,null,bB)}function Hl(bB,_B,xB){return'upper'===_B?bB=bB.toUpperCase():'lower'===_B?bB=bB.toLowerCase():void 0,bB.match(xB)}function Xl(bB){Rl.call(this,null,bB)}function Vl(bB,_B,xB,vB){for(var kB=[],wB={},SB=bB.length,CB=0,zB,TB;CB<SB;++CB)for(wB[_B]=TB=bB[CB],zB=0;zB<SB;++zB)wB[xB]=bB[zB],vB(wB)&&(kB.push(Io(wB)),wB={},wB[_B]=TB);return kB}function Jl(bB,_B){var xB=bB[NA];IA.hasOwnProperty(xB)||ke('Unknown distribution function: '+xB);var vB=IA[xB]();for(var kB in bB)kB===BA?vB.data((bB.from||_B()).map(bB[kB])):kB===$A?vB[kB](bB[kB].map(function(wB){return Jl(wB,_B)})):babelHelpers.typeof(vB[kB])===NA&&vB[kB](bB[kB]);return vB}function Zl(bB){Rl.call(this,null,bB)}function Kl(bB){return function(){return bB.materialize(bB.SOURCE).source}}function Ql(bB){Rl.call(this,[+Infinity,-Infinity],bB)}function es(bB,_B){Ho.call(this,bB),this.parent=_B}function is(bB){Rl.call(this,{},bB),this._keys=Le();var _B=this._targets=[];_B.active=0,_B.forEach=function(xB){for(var vB=0,kB=_B.active;vB<kB;++vB)xB(_B[vB],vB,_B)}}function rs(bB){Ho.call(this,null,os,bB)}function os(bB){return this.value&&!bB.modified()?this.value:Qz(bB.name)?Pe(bB.name).map(function(_B){return ze(_B)}):ze(bB.name,bB.as)}function ls(bB){Rl.call(this,Le(),bB)}function cs(bB){Rl.call(this,{},bB)}function us(bB){return bB.fields.join('|')}function ps(bB){Rl.call(this,null,bB)}function gs(bB){Rl.call(this,[],bB)}function ms(bB){Rl.call(this,[],bB)}function hs(bB){var _B=bB.method||KA.value,xB;return null==KA[_B]?void ke('Unrecognized imputation method: '+_B):_B===KA.value?(xB=void 0===bB.value?0:bB.value,function(){return xB}):KA[_B]}function ys(bB){var _B=bB.field;return function(xB){return xB?_B(xB):NaN}}function _s(bB,_B,xB){var vB=function(UB){return UB(qB)},kB=[],wB=[],SB={},TB={},CB,zB,RB,PB,AB,OB,MB,DB,qB;for(OB=0,DB=bB.length;OB<DB;++OB)qB=bB[OB],zB=(CB=xB.map(vB))+'',MB=SB[zB]||(SB[zB]=wB.push(CB)),PB=(RB=_B?_B.map(vB):QA)+'',(AB=TB[PB])||(AB=TB[PB]=[],kB.push(AB),AB.values=RB),AB[MB-1]=qB;return kB.domain=wB,kB}function xs(bB){Ho.call(this,null,vs,bB)}function vs(bB){return this.value&&!bB.modified()?this.value:Ne(bB.fields)}function ks(bB){Rl.call(this,{},bB)}function ws(bB){Ho.call(this,null,Es,bB)}function Es(bB){if(this.value&&!bB.modified())return this.value;var _B=+Infinity,xB=-Infinity,vB=bB.extents,kB,wB,SB;for(kB=0,wB=vB.length;kB<wB;++kB)SB=vB[kB],SB[0]<_B&&(_B=SB[0]),SB[1]>xB&&(xB=SB[1]);return[_B,xB]}function Ss(bB){Ho.call(this,null,Cs,bB)}function Cs(bB){return this.value&&!bB.modified()?this.value:bB.values.reduce(function(_B,xB){return _B.concat(xB)},[])}function zs(bB){Rl.call(this,null,bB)}function Ts(bB){is.call(this,bB)}function Rs(bB){Rl.call(this,null,bB)}function Ps(bB){Rl.call(this,null,bB)}function As(bB){Rl.call(this,null,bB)}function Os(bB){Rl.call(this,[],bB),this.count=0}function Ms(bB){Rl.call(this,null,bB)}function Ds(bB){Rl.call(this,null,bB),this.modified(!0)}function qs(bB){Rl.call(this,Le(),bB)}function Ls(bB){Rl.call(this,null,bB)}function Us(bB){return function(_B){var xB=_B[0],vB=_B[1],kB;return vB<xB&&(kB=xB,xB=vB,vB=kB),[bB.invert(xB),bB.invert(vB)]}}function Fs(bB){return function(_B){var xB=bB.range(),vB=_B[0],kB=_B[1],wB=-1,SB,CB,zB,TB;for(kB<vB&&(CB=vB,vB=kB,kB=CB),zB=0,TB=xB.length;zB<TB;++zB)xB[zB]>=vB&&xB[zB]<=kB&&(0>wB&&(wB=zB),SB=zB);if(!(0>wB))return vB=bB.invertExtent(xB[wB]),kB=bB.invertExtent(xB[SB]),[void 0===vB[0]?vB[1]:vB[0],void 0===kB[1]?kB[0]:kB[1]]}}function js(bB,_B,xB){var vB=bB-_B+2*xB;return bB?0<vB?vB:1:0}function Is(bB){function _B(wB){var SB=wB+'',CB=xB.get(SB);if(!CB){if(kB!==AO)return kB;xB.set(SB,CB=vB.push(wB))}return bB[(CB-1)%bB.length]}var xB=tt(),vB=[],kB=AO;return bB=null==bB?[]:PO.call(bB),_B.domain=function(wB){if(!arguments.length)return vB.slice();vB=[],xB=tt();for(var SB=-1,CB=wB.length,zB,TB;++SB<CB;)xB.has(TB=(zB=wB[SB])+'')||xB.set(TB,vB.push(zB));return _B},_B.range=function(wB){return arguments.length?(bB=PO.call(wB),_B):bB.slice()},_B.unknown=function(wB){return arguments.length?(kB=wB,_B):kB},_B.copy=function(){return Is().domain(vB).range(bB).unknown(kB)},_B}function $s(bB,_B,xB){bB.prototype=_B.prototype=xB,xB.constructor=bB}function Ns(bB,_B){var xB=Object.create(bB.prototype);for(var vB in _B)xB[vB]=_B[vB];return xB}function Bs(){}function Ys(bB){var _B;return bB=(bB+'').trim().toLowerCase(),(_B=UO.exec(bB))?(_B=parseInt(_B[1],16),new Vs(15&_B>>8|240&_B>>4,15&_B>>4|240&_B,(15&_B)<<4|15&_B,1)):(_B=FO.exec(bB))?Gs(parseInt(_B[1],16)):(_B=jO.exec(bB))?new Vs(_B[1],_B[2],_B[3],1):(_B=IO.exec(bB))?new Vs(255*_B[1]/100,255*_B[2]/100,255*_B[3]/100,1):(_B=$O.exec(bB))?Ws(_B[1],_B[2],_B[3],_B[4]):(_B=NO.exec(bB))?Ws(255*_B[1]/100,255*_B[2]/100,255*_B[3]/100,_B[4]):(_B=BO.exec(bB))?Js(_B[1],_B[2]/100,_B[3]/100,1):(_B=YO.exec(bB))?Js(_B[1],_B[2]/100,_B[3]/100,_B[4]):GO.hasOwnProperty(bB)?Gs(GO[bB]):'transparent'===bB?new Vs(NaN,NaN,NaN,0):null}function Gs(bB){return new Vs(255&bB>>16,255&bB>>8,255&bB,1)}function Ws(bB,_B,xB,vB){return 0>=vB&&(bB=_B=xB=NaN),new Vs(bB,_B,xB,vB)}function Hs(bB){return(bB instanceof Bs||(bB=Ys(bB)),!bB)?new Vs:(bB=bB.rgb(),new Vs(bB.r,bB.g,bB.b,bB.opacity))}function Xs(bB,_B,xB,vB){return 1===arguments.length?Hs(bB):new Vs(bB,_B,xB,null==vB?1:vB)}function Vs(bB,_B,xB,vB){this.r=+bB,this.g=+_B,this.b=+xB,this.opacity=+vB}function Js(bB,_B,xB,vB){return 0>=vB?bB=_B=xB=NaN:0>=xB||1<=xB?bB=_B=NaN:0>=_B&&(bB=NaN),new Qs(bB,_B,xB,vB)}function Zs(bB){if(bB instanceof Qs)return new Qs(bB.h,bB.s,bB.l,bB.opacity);if(bB instanceof Bs||(bB=Ys(bB)),!bB)return new Qs;if(bB instanceof Qs)return bB;bB=bB.rgb();var _B=bB.r/255,xB=bB.g/255,vB=bB.b/255,kB=Math.min(_B,xB,vB),wB=Math.max(_B,xB,vB),SB=NaN,CB=wB-kB,zB=(wB+kB)/2;return CB?(SB=_B===wB?(xB-vB)/CB+6*(xB<vB):xB===wB?(vB-_B)/CB+2:(_B-xB)/CB+4,CB/=0.5>zB?wB+kB:2-wB-kB,SB*=60):CB=0<zB&&1>zB?0:SB,new Qs(SB,CB,zB,bB.opacity)}function Ks(bB,_B,xB,vB){return 1===arguments.length?Zs(bB):new Qs(bB,_B,xB,null==vB?1:vB)}function Qs(bB,_B,xB,vB){this.h=+bB,this.s=+_B,this.l=+xB,this.opacity=+vB}function ef(bB,_B,xB){return 255*(60>bB?_B+(xB-_B)*bB/60:180>bB?xB:240>bB?_B+(xB-_B)*(240-bB)/60:_B)}function tf(bB){if(bB instanceof af)return new af(bB.l,bB.a,bB.b,bB.opacity);if(bB instanceof pf){var _B=bB.h*WO;return new af(bB.l,Math.cos(_B)*bB.c,Math.sin(_B)*bB.c,bB.opacity)}bB instanceof Vs||(bB=Hs(bB));var xB=ff(bB.r),vB=ff(bB.g),kB=ff(bB.b),wB=rf((0.4124564*xB+0.3575761*vB+0.1804375*kB)/VO),SB=rf((0.2126729*xB+0.7151522*vB+0.072175*kB)/JO),CB=rf((0.0193339*xB+0.119192*vB+0.9503041*kB)/ZO);return new af(116*SB-16,500*(wB-SB),200*(SB-CB),bB.opacity)}function nf(bB,_B,xB,vB){return 1===arguments.length?tf(bB):new af(bB,_B,xB,null==vB?1:vB)}function af(bB,_B,xB,vB){this.l=+bB,this.a=+_B,this.b=+xB,this.opacity=+vB}function rf(bB){return bB>tM?Math.pow(bB,1/3):bB/eM+KO}function of(bB){return bB>QO?bB*bB*bB:eM*(bB-KO)}function lf(bB){return 255*(0.0031308>=bB?12.92*bB:1.055*Math.pow(bB,1/2.4)-0.055)}function ff(bB){return 0.04045>=(bB/=255)?bB/12.92:Math.pow((bB+0.055)/1.055,2.4)}function cf(bB){if(bB instanceof pf)return new pf(bB.h,bB.c,bB.l,bB.opacity);bB instanceof af||(bB=tf(bB));var _B=Math.atan2(bB.b,bB.a)*HO;return new pf(0>_B?_B+360:_B,Math.sqrt(bB.a*bB.a+bB.b*bB.b),bB.l,bB.opacity)}function uf(bB,_B,xB,vB){return 1===arguments.length?cf(bB):new pf(bB,_B,xB,null==vB?1:vB)}function pf(bB,_B,xB,vB){this.h=+bB,this.c=+_B,this.l=+xB,this.opacity=+vB}function mf(bB){if(bB instanceof yf)return new yf(bB.h,bB.s,bB.l,bB.opacity);bB instanceof Vs||(bB=Hs(bB));var _B=bB.r/255,xB=bB.g/255,vB=bB.b/255,kB=(sM*vB+oM*_B-lM*xB)/(sM+oM-lM),wB=vB-kB,SB=(rM*(xB-kB)-iM*wB)/dM,CB=Math.sqrt(SB*SB+wB*wB)/(rM*kB*(1-kB)),zB=CB?Math.atan2(SB,wB)*HO-120:NaN;return new yf(0>zB?zB+360:zB,CB,kB,bB.opacity)}function hf(bB,_B,xB,vB){return 1===arguments.length?mf(bB):new yf(bB,_B,xB,null==vB?1:vB)}function yf(bB,_B,xB,vB){this.h=+bB,this.s=+_B,this.l=+xB,this.opacity=+vB}function _f(bB,_B,xB,vB,kB){var wB=bB*bB,SB=wB*bB;return((1-3*bB+3*wB-SB)*_B+(4-6*wB+3*SB)*xB+(1+3*bB+3*wB-3*SB)*vB+SB*kB)/6}function xf(bB){var _B=bB.length-1;return function(xB){var vB=0>=xB?xB=0:1<=xB?(xB=1,_B-1):Math.floor(xB*_B),kB=bB[vB],wB=bB[vB+1],SB=0<vB?bB[vB-1]:2*kB-wB,CB=vB<_B-1?bB[vB+2]:2*wB-kB;return _f((xB-vB/_B)*_B,SB,kB,wB,CB)}}function vf(bB){var _B=bB.length;return function(xB){var vB=Math.floor((0>(xB%=1)?++xB:xB)*_B),kB=bB[(vB+_B-1)%_B],wB=bB[vB%_B],SB=bB[(vB+1)%_B],CB=bB[(vB+2)%_B];return _f((xB-vB/_B)*_B,kB,wB,SB,CB)}}function kf(bB){return function(){return bB}}function wf(bB,_B){return function(xB){return bB+xB*_B}}function Ef(bB,_B,xB){return bB=Math.pow(bB,xB),_B=Math.pow(_B,xB)-bB,xB=1/xB,function(vB){return Math.pow(bB+vB*_B,xB)}}function Sf(bB,_B){var xB=_B-bB;return xB?wf(bB,180<xB||-180>xB?xB-360*Math.round(xB/360):xB):kf(isNaN(bB)?_B:bB)}function Cf(bB){return 1===(bB=+bB)?zf:function(_B,xB){return xB-_B?Ef(_B,xB,bB):kf(isNaN(_B)?xB:_B)}}function zf(bB,_B){var xB=_B-bB;return xB?wf(bB,xB):kf(isNaN(bB)?_B:bB)}function Tf(bB){return function(_B){var xB=_B.length,vB=Array(xB),kB=Array(xB),wB=Array(xB),SB,CB;for(SB=0;SB<xB;++SB)CB=Xs(_B[SB]),vB[SB]=CB.r||0,kB[SB]=CB.g||0,wB[SB]=CB.b||0;return vB=bB(vB),kB=bB(kB),wB=bB(wB),CB.opacity=1,function(zB){return CB.r=vB(zB),CB.g=kB(zB),CB.b=wB(zB),CB+''}}}function Rf(bB,_B){var xB=_B?_B.length:0,vB=bB?Math.min(xB,bB.length):0,kB=Array(xB),wB=Array(xB),SB;for(SB=0;SB<vB;++SB)kB[SB]=Lf(bB[SB],_B[SB]);for(;SB<xB;++SB)wB[SB]=_B[SB];return function(CB){for(SB=0;SB<vB;++SB)wB[SB]=kB[SB](CB);return wB}}function Pf(bB,_B){var xB=new Date;return bB=+bB,_B-=bB,function(vB){return xB.setTime(bB+_B*vB),xB}}function Af(bB,_B){return bB=+bB,_B-=bB,function(xB){return bB+_B*xB}}function Of(bB,_B){var xB={},vB={},kB;for(kB in(null===bB||'object'!==('undefined'===typeof bB?'undefined':babelHelpers.typeof(bB)))&&(bB={}),(null===_B||'object'!==('undefined'===typeof _B?'undefined':babelHelpers.typeof(_B)))&&(_B={}),_B)kB in bB?xB[kB]=Lf(bB[kB],_B[kB]):vB[kB]=_B[kB];return function(wB){for(kB in xB)vB[kB]=xB[kB](wB);return vB}}function Mf(bB){return function(){return bB}}function Df(bB){return function(_B){return bB(_B)+''}}function qf(bB,_B){var xB=pM.lastIndex=gM.lastIndex=0,SB=-1,CB=[],zB=[],vB,kB,wB;for(bB+='',_B+='';(vB=pM.exec(bB))&&(kB=gM.exec(_B));)(wB=kB.index)>xB&&(wB=_B.slice(xB,wB),CB[SB]?CB[SB]+=wB:CB[++SB]=wB),(vB=vB[0])===(kB=kB[0])?CB[SB]?CB[SB]+=kB:CB[++SB]=kB:(CB[++SB]=null,zB.push({i:SB,x:Af(vB,kB)})),xB=gM.lastIndex;return xB<_B.length&&(wB=_B.slice(xB),CB[SB]?CB[SB]+=wB:CB[++SB]=wB),2>CB.length?zB[0]?Df(zB[0].x):Mf(_B):(_B=zB.length,function(TB){for(var RB=0,PB;RB<_B;++RB)CB[(PB=zB[RB]).i]=PB.x(TB);return CB.join('')})}function Lf(bB,_B){var xB='undefined'===typeof _B?'undefined':babelHelpers.typeof(_B),vB;return null==_B||'boolean'===xB?kf(_B):('number'===xB?Af:'string'===xB?(vB=Ys(_B))?(_B=vB,fM):qf:_B instanceof Ys?fM:_B instanceof Date?Pf:Array.isArray(_B)?Rf:isNaN(_B)?Of:Af)(bB,_B)}function Uf(bB,_B){return bB=+bB,_B-=bB,function(xB){return Math.round(bB+_B*xB)}}function Ff(bB,_B,xB,vB,kB,wB){var SB,CB,zB;return(SB=Math.sqrt(bB*bB+_B*_B))&&(bB/=SB,_B/=SB),(zB=bB*xB+_B*vB)&&(xB-=bB*zB,vB-=_B*zB),(CB=Math.sqrt(xB*xB+vB*vB))&&(xB/=CB,vB/=CB,zB/=CB),bB*vB<_B*xB&&(bB=-bB,_B=-_B,zB=-zB,SB=-SB),{translateX:kB,translateY:wB,rotate:Math.atan2(_B,bB)*mM,skewX:Math.atan(zB)*mM,scaleX:SB,scaleY:CB}}function $f(bB,_B,xB,vB){function kB(TB){return TB.length?TB.pop()+' ':''}function wB(TB,RB,PB,AB,OB,MB){if(TB!==PB||RB!==AB){var DB=OB.push('translate(',null,_B,null,xB);MB.push({i:DB-4,x:Af(TB,PB)},{i:DB-2,x:Af(RB,AB)})}else(PB||AB)&&OB.push('translate('+PB+_B+AB+xB)}function SB(TB,RB,PB,AB){TB===RB?RB&&PB.push(kB(PB)+'rotate('+RB+vB):(180<TB-RB?RB+=360:180<RB-TB&&(TB+=360),AB.push({i:PB.push(kB(PB)+'rotate(',null,vB)-2,x:Af(TB,RB)}))}function CB(TB,RB,PB,AB){TB===RB?RB&&PB.push(kB(PB)+'skewX('+RB+vB):AB.push({i:PB.push(kB(PB)+'skewX(',null,vB)-2,x:Af(TB,RB)})}function zB(TB,RB,PB,AB,OB,MB){if(TB!==PB||RB!==AB){var DB=OB.push(kB(OB)+'scale(',null,',',null,')');MB.push({i:DB-4,x:Af(TB,PB)},{i:DB-2,x:Af(RB,AB)})}else(1!==PB||1!==AB)&&OB.push(kB(OB)+'scale('+PB+','+AB+')')}return function(TB,RB){var PB=[],AB=[];return TB=bB(TB),RB=bB(RB),wB(TB.translateX,TB.translateY,RB.translateX,RB.translateY,PB,AB),SB(TB.rotate,RB.rotate,PB,AB),CB(TB.skewX,RB.skewX,PB,AB),zB(TB.scaleX,TB.scaleY,RB.scaleX,RB.scaleY,PB,AB),TB=RB=null,function(OB){for(var MB=-1,DB=AB.length,qB;++MB<DB;)PB[(qB=AB[MB]).i]=qB.x(OB);return PB.join('')}}}function Nf(bB){return((bB=Math.exp(bB))+1/bB)/2}function Bf(bB){return((bB=Math.exp(bB))-1/bB)/2}function Yf(bB){return((bB=Math.exp(2*bB))-1)/(bB+1)}function Wf(bB){return function(_B,xB){var vB=bB((_B=Ks(_B)).h,(xB=Ks(xB)).h),kB=zf(_B.s,xB.s),wB=zf(_B.l,xB.l),SB=zf(_B.opacity,xB.opacity);return function(CB){return _B.h=vB(CB),_B.s=kB(CB),_B.l=wB(CB),_B.opacity=SB(CB),_B+''}}}function Xf(bB){return function(_B,xB){var vB=bB((_B=uf(_B)).h,(xB=uf(xB)).h),kB=zf(_B.c,xB.c),wB=zf(_B.l,xB.l),SB=zf(_B.opacity,xB.opacity);return function(CB){return _B.h=vB(CB),_B.c=kB(CB),_B.l=wB(CB),_B.opacity=SB(CB),_B+''}}}function Vf(bB){return function _B(xB){function vB(kB,wB){var SB=bB((kB=hf(kB)).h,(wB=hf(wB)).h),CB=zf(kB.s,wB.s),zB=zf(kB.l,wB.l),TB=zf(kB.opacity,wB.opacity);return function(RB){return kB.h=SB(RB),kB.s=CB(RB),kB.l=zB(Math.pow(RB,xB)),kB.opacity=TB(RB),kB+''}}return xB=+xB,vB.gamma=_B,vB}(1)}function Zf(bB){return function(){return bB}}function Kf(bB){return+bB}function Qf(bB,_B){return(_B-=bB=+bB)?function(xB){return(xB-bB)/_B}:Zf(_B)}function ec(bB){return function(_B,xB){var vB=bB(_B=+_B,xB=+xB);return function(kB){return kB<=_B?0:kB>=xB?1:vB(kB)}}}function nc(bB){return function(_B,xB){var vB=bB(_B=+_B,xB=+xB);return function(kB){return 0>=kB?_B:1<=kB?xB:vB(kB)}}}function ac(bB,_B,xB,vB){var kB=bB[0],wB=bB[1],SB=_B[0],CB=_B[1];return wB<kB?(kB=xB(wB,kB),SB=vB(CB,SB)):(kB=xB(kB,wB),SB=vB(SB,CB)),function(zB){return SB(kB(zB))}}function ic(bB,_B,xB,vB){var kB=Math.min(bB.length,_B.length)-1,wB=Array(kB),SB=Array(kB),CB=-1;for(bB[kB]<bB[0]&&(bB=bB.slice().reverse(),_B=_B.slice().reverse());++CB<kB;)wB[CB]=xB(bB[CB],bB[CB+1]),SB[CB]=vB(_B[CB],_B[CB+1]);return function(zB){var TB=Xz(bB,zB,1,kB)-1;return SB[TB](wB[TB](zB))}}function fc(bB,_B){return _B.domain(bB.domain()).range(bB.range()).interpolate(bB.interpolate()).clamp(bB.clamp())}function uc(bB,_B){function xB(){return zB=2<Math.min(kB.length,wB.length)?ic:ac,TB=RB=null,vB}function vB(PB){return(TB||(TB=zB(kB,wB,CB?ec(bB):bB,SB)))(+PB)}var kB=DM,wB=DM,SB=Lf,CB=!1,zB,TB,RB;return vB.invert=function(PB){return(RB||(RB=zB(wB,kB,Qf,CB?nc(_B):_B)))(+PB)},vB.domain=function(PB){return arguments.length?(kB=RO.call(PB,Kf),xB()):kB.slice()},vB.range=function(PB){return arguments.length?(wB=PO.call(PB),xB()):wB.slice()},vB.rangeRound=function(PB){return wB=PO.call(PB),SB=Uf,xB()},vB.clamp=function(PB){return arguments.length?(CB=!!PB,xB()):CB},vB.interpolate=function(PB){return arguments.length?(SB=PB,xB()):SB},xB()}function pc(bB,_B){if(0>(xB=(bB=_B?bB.toExponential(_B-1):bB.toExponential()).indexOf('e')))return null;var vB=bB.slice(0,xB),xB;return[1<vB.length?vB[0]+vB.slice(2):vB,+bB.slice(xB+1)]}function gc(bB){return bB=pc(Math.abs(bB)),bB?bB[1]:NaN}function mc(bB,_B){return function(xB,vB){for(var kB=xB.length,wB=[],SB=0,CB=bB[0],zB=0;0<kB&&0<CB&&(zB+CB+1>vB&&(CB=Math.max(1,vB-zB)),wB.push(xB.substring(kB-=CB,kB+CB)),!((zB+=CB+1)>vB));)CB=bB[SB=(SB+1)%bB.length];return wB.reverse().join(_B)}}function bc(bB){return function(_B){return _B.replace(/[0-9]/g,function(xB){return bB[+xB]})}}function wc(bB,_B){var xB=pc(bB,_B);if(!xB)return bB+'';var vB=xB[0],kB=xB[1];return 0>kB?'0.'+Array(-kB).join('0')+vB:vB.length>kB+1?vB.slice(0,kB+1)+'.'+vB.slice(kB+1):vB+Array(kB-vB.length+2).join('0')}function Ec(bB){return new Sc(bB)}function Sc(bB){if(!(_B=UM.exec(bB)))throw new Error('invalid format: '+bB);var xB=_B[1]||' ',vB=_B[2]||'>',kB=_B[3]||'-',wB=_B[4]||'',SB=!!_B[5],CB=_B[6]&&+_B[6],zB=!!_B[7],TB=_B[8]&&+_B[8].slice(1),RB=_B[9]||'',_B;'n'===RB?(zB=!0,RB='g'):!LM[RB]&&(RB=''),(SB||'0'===xB&&'='===vB)&&(SB=!0,xB='0',vB='='),this.fill=xB,this.align=vB,this.sign=kB,this.symbol=wB,this.zero=SB,this.width=CB,this.comma=zB,this.precision=TB,this.type=RB}function Cc(bB){return bB}function zc(bB){function _B(zB){function TB(NB){var BB=FB,YB=jB,GB,WB,HB;if('c'===UB)YB=IB(NB)+YB,NB='';else{NB=+NB;var XB=0>NB;if(NB=IB(Math.abs(NB),LB),XB&&0===+NB&&(XB=!1),BB=(XB?'('===AB?AB:'-':'-'===AB||'('===AB?'':AB)+BB,YB=YB+('s'===UB?FM[8+qM/3]:'')+(XB&&'('===AB?')':''),$B)for(GB=-1,WB=NB.length;++GB<WB;)if(HB=NB.charCodeAt(GB),48>HB||57<HB){YB=(46===HB?wB+NB.slice(GB+1):NB.slice(GB))+YB,NB=NB.slice(0,GB);break}}qB&&!MB&&(NB=vB(NB,Infinity));var VB=BB.length+NB.length+YB.length,JB=VB<DB?Array(DB-VB+1).join(RB):'';switch(qB&&MB&&(NB=vB(JB+NB,JB.length?DB-YB.length:Infinity),JB=''),PB){case'<':NB=BB+NB+YB+JB;break;case'=':NB=BB+JB+NB+YB;break;case'^':NB=JB.slice(0,VB=JB.length>>1)+BB+NB+YB+JB.slice(VB);break;default:NB=JB+BB+NB+YB;}return SB(NB)}zB=Ec(zB);var RB=zB.fill,PB=zB.align,AB=zB.sign,OB=zB.symbol,MB=zB.zero,DB=zB.width,qB=zB.comma,LB=zB.precision,UB=zB.type,FB='$'===OB?kB[0]:'#'===OB&&/[boxX]/.test(UB)?'0'+UB.toLowerCase():'',jB='$'===OB?kB[1]:/[%p]/.test(UB)?CB:'',IB=LM[UB],$B=!UB||/[defgprs%]/.test(UB);return LB=null==LB?UB?6:12:/[gprs]/.test(UB)?Math.max(1,Math.min(21,LB)):Math.max(0,Math.min(20,LB)),TB.toString=function(){return zB+''},TB}var vB=bB.grouping&&bB.thousands?mc(bB.grouping,bB.thousands):Cc,kB=bB.currency,wB=bB.decimal,SB=bB.numerals?bc(bB.numerals):Cc,CB=bB.percent||'%';return{format:_B,formatPrefix:function(zB,TB){var RB=_B((zB=Ec(zB),zB.type='f',zB)),PB=3*Math.max(-8,Math.min(8,Math.floor(gc(TB)/3))),AB=Math.pow(10,-PB),OB=FM[8+PB/3];return function(MB){return RB(AB*MB)+OB}}}}function Tc(bB){return jM=zc(bB),IM=jM.format,$M=jM.formatPrefix,jM}function Rc(bB){return Math.max(0,-gc(Math.abs(bB)))}function Pc(bB,_B){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gc(_B)/3)))-gc(Math.abs(bB)))}function Ac(bB,_B){return bB=Math.abs(bB),_B=Math.abs(_B)-bB,Math.max(0,gc(_B)-gc(bB))+1}function Oc(bB,_B,xB){var vB=bB[0],kB=bB[bB.length-1],wB=ee(vB,kB,null==_B?10:_B),SB;switch(xB=Ec(null==xB?',f':xB),xB.type){case's':{var CB=Math.max(Math.abs(vB),Math.abs(kB));return null!=xB.precision||isNaN(SB=Pc(wB,CB))||(xB.precision=SB),$M(xB,CB)}case'':case'e':case'g':case'p':case'r':{null!=xB.precision||isNaN(SB=Ac(wB,Math.max(Math.abs(vB),Math.abs(kB))))||(xB.precision=SB-('e'===xB.type));break}case'f':case'%':{null!=xB.precision||isNaN(SB=Rc(wB))||(xB.precision=SB-2*('%'===xB.type));break}}return IM(xB)}function Mc(bB){var _B=bB.domain;return bB.ticks=function(xB){var vB=_B();return K(vB[0],vB[vB.length-1],null==xB?10:xB)},bB.tickFormat=function(xB,vB){return Oc(_B(),xB,vB)},bB.nice=function(xB){var vB=_B(),kB=vB.length-1,wB=null==xB?10:xB,SB=vB[0],CB=vB[kB],zB=ee(SB,CB,wB);return zB&&(zB=ee(Math.floor(SB/zB)*zB,Math.ceil(CB/zB)*zB,wB),vB[0]=Math.floor(SB/zB)*zB,vB[kB]=Math.ceil(CB/zB)*zB,_B(vB)),bB},bB}function Dc(){var bB=uc(Qf,Af);return bB.copy=function(){return fc(bB,Dc())},Mc(bB)}function qc(){function bB(xB){return+xB}var _B=[0,1];return bB.invert=bB,bB.domain=bB.range=function(xB){return arguments.length?(_B=RO.call(xB,Kf),bB):_B.slice()},bB.copy=function(){return qc().domain(_B)},Mc(bB)}function Lc(bB,_B){bB=bB.slice();var xB=0,vB=bB.length-1,kB=bB[xB],wB=bB[vB],SB;return wB<kB&&(SB=xB,xB=vB,vB=SB,SB=kB,kB=wB,wB=SB),bB[xB]=_B.floor(kB),bB[vB]=_B.ceil(wB),bB}function Uc(bB,_B){return(_B=Math.log(_B/bB))?function(xB){return Math.log(xB/bB)/_B}:Zf(_B)}function Fc(bB,_B){return 0>bB?function(xB){return-Math.pow(-_B,xB)*Math.pow(-bB,1-xB)}:function(xB){return Math.pow(_B,xB)*Math.pow(bB,1-xB)}}function jc(bB){return isFinite(bB)?+('1e'+bB):0>bB?0:bB}function Ic(bB){return 10===bB?jc:bB===Math.E?Math.exp:function(_B){return Math.pow(bB,_B)}}function $c(bB){return bB===Math.E?Math.log:10===bB&&Math.log10||2===bB&&Math.log2||(bB=Math.log(bB),function(_B){return Math.log(_B)/bB})}function Nc(bB){return function(_B){return-bB(-_B)}}function Bc(){function bB(){return kB=$c(vB),wB=Ic(vB),0>xB()[0]&&(kB=Nc(kB),wB=Nc(wB)),_B}var _B=uc(Uc,Fc).domain([1,10]),xB=_B.domain,vB=10,kB=$c(10),wB=Ic(10);return _B.base=function(SB){return arguments.length?(vB=+SB,bB()):vB},_B.domain=function(SB){return arguments.length?(xB(SB),bB()):xB()},_B.ticks=function(SB){var CB=xB(),zB=CB[0],TB=CB[CB.length-1],RB;(RB=TB<zB)&&(PB=zB,zB=TB,TB=PB);var PB=kB(zB),AB=kB(TB),qB=null==SB?10:+SB,LB=[],OB,MB,DB;if(vB%1||!(AB-PB<qB))LB=K(PB,AB,Math.min(AB-PB,qB)).map(wB);else if(PB=Math.round(PB)-1,AB=Math.round(AB)+1,0<zB){for(;PB<AB;++PB)for(MB=1,OB=wB(PB);MB<vB;++MB)if(DB=OB*MB,!(DB<zB)){if(DB>TB)break;LB.push(DB)}}else for(;PB<AB;++PB)for(MB=vB-1,OB=wB(PB);1<=MB;--MB)if(DB=OB*MB,!(DB<zB)){if(DB>TB)break;LB.push(DB)}return RB?LB.reverse():LB},_B.tickFormat=function(SB,CB){if(null==CB&&(CB=10===vB?'.0e':','),'function'!==typeof CB&&(CB=IM(CB)),SB===Infinity)return CB;null==SB&&(SB=10);var zB=Math.max(1,vB*SB/_B.ticks().length);return function(TB){var RB=TB/wB(Math.round(kB(TB)));return RB*vB<vB-0.5&&(RB*=vB),RB<=zB?CB(TB):''}},_B.nice=function(){return xB(Lc(xB(),{floor:function(CB){return wB(Math.floor(kB(CB)))},ceil:function(CB){return wB(Math.ceil(kB(CB)))}}))},_B.copy=function(){return fc(_B,Bc().base(vB))},_B}function Yc(bB,_B){return 0>bB?-Math.pow(-bB,_B):Math.pow(bB,_B)}function Gc(){var xB=1,vB=uc(function(wB,SB){return(SB=Yc(SB,xB)-(wB=Yc(wB,xB)))?function(CB){return(Yc(CB,xB)-wB)/SB}:Zf(SB)},function(wB,SB){return SB=Yc(SB,xB)-(wB=Yc(wB,xB)),function(CB){return Yc(wB+SB*CB,1/xB)}}),kB=vB.domain;return vB.exponent=function(wB){return arguments.length?(xB=+wB,kB(kB())):xB},vB.copy=function(){return fc(vB,Gc().exponent(xB))},Mc(vB)}function Hc(){function bB(){var wB=0,SB=Math.max(1,vB.length);for(kB=Array(SB-1);++wB<SB;)kB[wB-1]=ne(xB,wB/SB);return _B}function _B(wB){if(!isNaN(wB=+wB))return vB[Xz(kB,wB)]}var xB=[],vB=[],kB=[];return _B.invertExtent=function(wB){var SB=vB.indexOf(wB);return 0>SB?[NaN,NaN]:[0<SB?kB[SB-1]:xB[0],SB<kB.length?kB[SB]:xB[xB.length-1]]},_B.domain=function(wB){if(!arguments.length)return xB.slice();xB=[];for(var SB=0,CB=wB.length,zB;SB<CB;++SB)(zB=wB[SB],null!=zB&&!isNaN(zB=+zB))&&xB.push(zB);return xB.sort(U),bB()},_B.range=function(wB){return arguments.length?(vB=PO.call(wB),bB()):vB.slice()},_B.quantiles=function(){return kB.slice()},_B.copy=function(){return Hc().domain(xB).range(vB)},_B}function Xc(){function bB(CB){if(CB<=CB)return SB[Xz(wB,CB,0,kB)]}function _B(){var CB=-1;for(wB=Array(kB);++CB<kB;)wB[CB]=((CB+1)*vB-(CB-kB)*xB)/(kB+1);return bB}var xB=0,vB=1,kB=1,wB=[0.5],SB=[0,1];return bB.domain=function(CB){return arguments.length?(xB=+CB[0],vB=+CB[1],_B()):[xB,vB]},bB.range=function(CB){return arguments.length?(kB=(SB=PO.call(CB)).length-1,_B()):SB.slice()},bB.invertExtent=function(CB){var zB=SB.indexOf(CB);return 0>zB?[NaN,NaN]:1>zB?[xB,wB[0]]:zB>=kB?[wB[kB-1],vB]:[wB[zB-1],wB[zB]]},bB.copy=function(){return Xc().domain([xB,vB]).range(SB)},Mc(bB)}function Vc(){function bB(kB){if(kB<=kB)return xB[Xz(_B,kB,0,vB)]}var _B=[0.5],xB=[0,1],vB=1;return bB.domain=function(kB){return arguments.length?(_B=PO.call(kB),vB=Math.min(_B.length,xB.length-1),bB):_B.slice()},bB.range=function(kB){return arguments.length?(xB=PO.call(kB),vB=Math.min(_B.length,xB.length-1),bB):xB.slice()},bB.invertExtent=function(kB){var wB=xB.indexOf(kB);return[_B[wB-1],_B[wB]]},bB.copy=function(){return Vc().domain(_B).range(xB)},bB}function Jc(bB){return new Date(bB)}function Zc(bB){return bB instanceof Date?+bB:+new Date(+bB)}function Kc(bB,_B,xB,vB,kB,wB,SB,CB,zB){function TB(NB){return(SB(NB)<NB?MB:wB(NB)<NB?DB:kB(NB)<NB?qB:vB(NB)<NB?LB:_B(NB)<NB?xB(NB)<NB?UB:FB:bB(NB)<NB?jB:IB)(NB)}function RB(NB,BB,YB,GB){if(null==NB&&(NB=10),'number'===typeof NB){var WB=Math.abs(YB-BB)/NB,HB=F(function(XB){return XB[2]}).right($B,WB);HB===$B.length?(GB=ee(BB/XM,YB/XM,NB),NB=bB):HB?(HB=$B[WB/$B[HB-1][2]<$B[HB][2]/WB?HB-1:HB],GB=HB[1],NB=HB[0]):(GB=ee(BB,YB,NB),NB=CB)}return null==GB?NB:NB.every(GB)}var PB=uc(Qf,Af),AB=PB.invert,OB=PB.domain,MB=zB('.%L'),DB=zB(':%S'),qB=zB('%I:%M'),LB=zB('%I %p'),UB=zB('%a %d'),FB=zB('%b %d'),jB=zB('%B'),IB=zB('%Y'),$B=[[SB,1,NM],[SB,5,5*NM],[SB,15,15*NM],[SB,30,30*NM],[wB,1,BM],[wB,5,5*BM],[wB,15,15*BM],[wB,30,30*BM],[kB,1,YM],[kB,3,3*YM],[kB,6,6*YM],[kB,12,12*YM],[vB,1,GM],[vB,2,2*GM],[xB,1,WM],[_B,1,HM],[_B,3,3*HM],[bB,1,XM]];return PB.invert=function(NB){return new Date(AB(NB))},PB.domain=function(NB){return arguments.length?OB(RO.call(NB,Zc)):OB().map(Jc)},PB.ticks=function(NB,BB){var YB=OB(),GB=YB[0],WB=YB[YB.length-1],HB=WB<GB,XB;return HB&&(XB=GB,GB=WB,WB=XB),XB=RB(NB,GB,WB,BB),XB=XB?XB.range(GB,WB+1):[],HB?XB.reverse():XB},PB.tickFormat=function(NB,BB){return null==BB?TB:zB(BB)},PB.nice=function(NB,BB){var YB=OB();return(NB=RB(NB,YB[0],YB[YB.length-1],BB))?OB(Lc(YB,NB)):PB},PB.copy=function(){return fc(PB,Kc(bB,_B,xB,vB,kB,wB,SB,CB,zB))},PB}function tu(bB){return bB.match(/.{6}/g).map(function(_B){return'#'+_B})}function nu(bB){var _B=bB.length;return function(xB){return bB[Math.max(0,Math.min(_B-1,Math.floor(xB*_B)))]}}function au(){function bB(){var PB=xB().length,AB=kB[1]<kB[0],OB=kB[AB-0],MB=kB[1-AB],DB=js(PB,zB,TB);wB=(MB-OB)/(DB||1),CB&&(wB=Math.floor(wB)),OB+=(MB-OB-wB*(PB-zB))*RB,SB=wB*(1-zB),CB&&(OB=Math.round(OB),SB=Math.round(SB));var qB=J(PB).map(function(LB){return OB+wB*LB});return vB(AB?qB.reverse():qB)}var _B=Is().unknown(void 0),xB=_B.domain,vB=_B.range,kB=[0,1],CB=!1,zB=0,TB=0,RB=0.5,wB,SB;return delete _B.unknown,_B.domain=function(PB){return arguments.length?(xB(PB),bB()):xB()},_B.range=function(PB){return arguments.length?(kB=[+PB[0],+PB[1]],bB()):kB.slice()},_B.rangeRound=function(PB){return kB=[+PB[0],+PB[1]],CB=!0,bB()},_B.bandwidth=function(){return SB},_B.step=function(){return wB},_B.round=function(PB){return arguments.length?(CB=!!PB,bB()):CB},_B.padding=function(PB){return arguments.length?(zB=TB=Math.max(0,Math.min(1,PB)),bB()):zB},_B.paddingInner=function(PB){return arguments.length?(zB=Math.max(0,Math.min(1,PB)),bB()):zB},_B.paddingOuter=function(PB){return arguments.length?(TB=Math.max(0,Math.min(1,PB)),bB()):TB},_B.align=function(PB){return arguments.length?(RB=Math.max(0,Math.min(1,PB)),bB()):RB},_B.invertRange=function(PB){var AB=+PB[0],OB=+PB[1],MB=kB[1]<kB[0],DB=MB?vB().reverse():vB(),qB=DB.length-1,LB,UB,FB;if(OB<AB&&(FB=AB,AB=OB,OB=FB),!(OB<DB[0]||AB>kB[1-MB]))return LB=Math.max(0,Xz(DB,AB)-1),UB=AB===OB?LB:Xz(DB,OB)-1,AB-DB[LB]>SB+1e-10&&++LB,MB&&(FB=LB,LB=qB-UB,UB=qB-FB),LB>UB?void 0:xB().slice(LB,UB+1)},_B.invert=function(PB){var AB=_B.invertRange([PB,PB]);return AB?AB[0]:AB},_B.copy=function(){return au().domain(xB()).range(kB).round(CB).paddingInner(zB).paddingOuter(TB).align(RB)},bB()}function iu(bB){var _B=bB.copy;return bB.padding=bB.paddingOuter,delete bB.paddingInner,bB.copy=function(){return iu(_B())},bB}function ru(bB){return rD.call(bB,function(_B){return+_B})}function ou(){function bB(kB){return null==kB||kB!==kB?void 0:xB(vB[Math.max(Xz(vB,kB),1)-1])}function _B(kB){vB=ru(kB),xB.domain([vB[0],We(vB)])}var xB=Dc(),vB=[];return bB.domain=function(kB){return arguments.length?(_B(kB),bB):vB.slice()},bB.range=function(kB){return arguments.length?(xB.range(kB),bB):xB.range()},bB.rangeRound=function(kB){return arguments.length?(xB.rangeRound(kB),bB):xB.rangeRound()},bB.interpolate=function(kB){return arguments.length?(xB.interpolate(kB),bB):xB.interpolate()},bB.invert=function(kB){return xB.invert(kB)},bB.ticks=function(kB){var wB=vB.length,SB=~~(wB/(kB||wB));return 2>SB?bB.domain():vB.filter(function(CB,zB){return!(zB%SB)})},bB.tickFormat=function(){return xB.tickFormat.apply(xB,arguments)},bB.copy=function(){return ou().domain(bB.domain()).range(bB.range())},bB}function lu(){function bB(vB){return null==vB||vB!==vB?void 0:xB[(Xz(_B,vB)-1)%xB.length]}var _B=[],xB=[];return bB.domain=function(vB){return arguments.length?(_B=ru(vB),bB):_B.slice()},bB.range=function(vB){return arguments.length?(xB=oD.call(vB),bB):xB.slice()},bB.copy=function(){return lu().domain(bB.domain()).range(bB.range())},bB}function su(bB){function _B(){var CB=vB.domain();kB=CB[0],wB=We(CB)-kB}function xB(CB){var zB=(CB-kB)/wB;return bB(SB?Math.max(0,Math.min(1,zB)):zB)}var vB=Dc(),kB=0,wB=1,SB=!1;return xB.clamp=function(CB){return arguments.length?(SB=!!CB,xB):SB},xB.domain=function(CB){return arguments.length?(vB.domain(CB),_B(),xB):vB.domain()},xB.interpolator=function(CB){return arguments.length?(bB=CB,xB):bB},xB.copy=function(){return su().domain(vB.domain()).clamp(SB).interpolator(bB)},xB.ticks=function(CB){return vB.ticks(CB)},xB.tickFormat=function(CB,zB){return vB.tickFormat(CB,zB)},xB.nice=function(CB){return vB.nice(CB),_B(),xB},xB}function fu(bB,_B){return function(){var vB=_B();return vB.invertRange||(vB.invertRange=vB.invert?Us(vB):vB.invertExtent?Fs(vB):void 0),vB.type=bB,vB}}function cu(bB,_B){return 1<arguments.length?(lD[bB]=fu(bB,_B),this):lD.hasOwnProperty(bB)?lD[bB]:void 0}function pu(bB){for(var _B=0|bB.length/6,xB=Array(_B),vB=0;vB<_B;)xB[vB]='#'+bB.slice(6*vB,6*++vB);return xB}function gu(bB){for(var _B=0|bB.length/6,xB=Array(_B),vB=0;vB<_B;)xB[vB]='#'+bB.slice(6*vB,6*++vB);return xB}function hu(bB){return cM(bB[bB.length-1])}function yu(bB,_B){Eq[bB]=kq['interpolate'+_B],wq[bB]=kq['scheme'+_B]}function bu(bB,_B){if(1<arguments.length)return Eq[bB]=_B,this;var xB=bB.split('-');return bB=xB[0],xB=+xB[1]+1,xB&&wq.hasOwnProperty(bB)?wq[bB][xB-1]:!xB&&Eq.hasOwnProperty(bB)?Eq[bB]:void 0}function _u(bB,_B){var xB=_B[0],vB=We(_B)-xB;return function(kB){return bB(xB+kB*vB)}}function xu(bB,_B,xB){return'linear'===bB.type||'sequential'===bB.type?function(vB){return(vB-_B)/(xB-_B)}:bB.copy().domain([_B,xB]).range([0,1]).interpolate(vu)}function vu(bB,_B){return function(vB){return bB+vB*(_B-bB)}}function ku(bB,_B){var xB=MM[wu(bB)];return null!=_B&&xB&&xB.gamma?xB.gamma(_B):xB}function wu(bB){return'interpolate'+bB.toLowerCase().split('-').map(function(_B){return _B[0].toUpperCase()+_B.slice(1)}).join('')}function Eu(bB,_B){return bB-_B}function Su(bB){for(var _B=0,xB=bB.length,vB=bB[xB-1][1]*bB[0][0]-bB[xB-1][0]*bB[0][1];++_B<xB;)vB+=bB[_B-1][1]*bB[_B][0]-bB[_B-1][0]*bB[_B][1];return vB}function Cu(bB){return function(){return bB}}function zu(bB,_B){for(var xB=-1,vB=_B.length,kB;++xB<vB;)if(kB=Tu(bB,_B[xB]))return kB;return 0}function Tu(bB,_B){for(var xB=_B[0],vB=_B[1],kB=-1,wB=0,SB=bB.length,CB=SB-1;wB<SB;CB=wB++){var zB=bB[wB],TB=zB[0],RB=zB[1],PB=bB[CB],AB=PB[0],OB=PB[1];if(Ru(zB,PB,_B))return 0;RB>vB!==OB>vB&&xB<(AB-TB)*(vB-RB)/(OB-RB)+TB&&(kB=-kB)}return kB}function Ru(bB,_B,xB){var vB;return Pu(bB,_B,xB)&&Au(bB[vB=+(bB[0]===_B[0])],xB[vB],_B[vB])}function Pu(bB,_B,xB){return(_B[0]-bB[0])*(xB[1]-bB[1])===(xB[0]-bB[0])*(_B[1]-bB[1])}function Au(bB,_B,xB){return bB<=_B&&_B<=xB||xB<=_B&&_B<=bB}function Ou(){}function Mu(){function bB(zB){var TB=SB(zB);if(!Array.isArray(TB)){var RB=V(zB),PB=RB[0],AB=RB[1];TB=ee(PB,AB,TB),TB=J(Math.floor(PB/TB)*TB,Math.floor(AB/TB)*TB,TB)}else TB=TB.slice().sort(Eu);var OB=TB.map(function(MB){var DB=[],qB=[];return _B(zB,MB,function(LB){CB(LB,zB,MB),0<Su(LB)?DB.push([LB]):qB.push(LB)}),qB.forEach(function(LB){for(var UB=0,FB=DB.length,jB;UB<FB;++UB)if(zu((jB=DB[UB])[0],LB))return void jB.push(LB)}),DB});return OB.map(function(MB,DB){return{type:'MultiPolygon',value:TB[DB],coordinates:MB}})}function _B(zB,TB,RB){function PB(jB){var IB=[jB[0][0]+MB,jB[0][1]+DB],$B=[jB[1][0]+MB,jB[1][1]+DB],NB=xB(IB),BB=xB($B),YB,GB;(YB=OB[NB])?(GB=AB[BB])?(delete OB[YB.end],delete AB[GB.start],YB===GB?(YB.ring.push($B),RB(YB.ring)):AB[YB.start]=OB[GB.end]={start:YB.start,end:GB.end,ring:YB.ring.concat(GB.ring)}):(delete OB[YB.end],YB.ring.push($B),OB[YB.end=BB]=YB):(YB=AB[BB])?(GB=OB[NB])?(delete AB[YB.start],delete OB[GB.end],YB===GB?(YB.ring.push($B),RB(YB.ring)):AB[GB.start]=OB[YB.end]={start:GB.start,end:YB.end,ring:GB.ring.concat(YB.ring)}):(delete AB[YB.start],YB.ring.unshift(IB),AB[YB.start=NB]=YB):AB[NB]=OB[BB]={start:NB,end:BB,ring:[IB,$B]}}var AB=[],OB=[],MB,DB,qB,LB,UB,FB;for(MB=DB=-1,LB=zB[0]>=TB,zq[LB<<1].forEach(PB);++MB<kB-1;)qB=LB,LB=zB[MB+1]>=TB,zq[qB|LB<<1].forEach(PB);for(zq[LB<<0].forEach(PB);++DB<wB-1;){for(MB=-1,LB=zB[DB*kB+kB]>=TB,UB=zB[DB*kB]>=TB,zq[LB<<1|UB<<2].forEach(PB);++MB<kB-1;)qB=LB,LB=zB[DB*kB+kB+MB+1]>=TB,FB=UB,UB=zB[DB*kB+MB+1]>=TB,zq[qB|LB<<1|UB<<2|FB<<3].forEach(PB);zq[LB|UB<<3].forEach(PB)}for(MB=-1,UB=zB[DB*kB]>=TB,zq[UB<<2].forEach(PB);++MB<kB-1;)FB=UB,UB=zB[DB*kB+MB+1]>=TB,zq[UB<<2|FB<<3].forEach(PB);zq[UB<<3].forEach(PB)}function xB(zB){return 2*zB[0]+4*(zB[1]*(kB+1))}function vB(zB,TB,RB){zB.forEach(function(PB){var AB=PB[0],OB=PB[1],MB=0|AB,DB=0|OB,LB=TB[DB*kB+MB],qB;0<AB&&AB<kB&&MB===AB&&(qB=TB[DB*kB+MB-1],PB[0]=AB+(RB-qB)/(LB-qB)-0.5),0<OB&&OB<wB&&DB===OB&&(qB=TB[(DB-1)*kB+MB],PB[1]=OB+(RB-qB)/(LB-qB)-0.5)})}var kB=1,wB=1,SB=te,CB=vB;return bB.size=function(zB){if(!arguments.length)return[kB,wB];var TB=Math.ceil(zB[0]),RB=Math.ceil(zB[1]);if(!(0<TB)||!(0<RB))throw new Error('invalid size');return kB=TB,wB=RB,bB},bB.thresholds=function(zB){return arguments.length?(SB='function'===typeof zB?zB:Array.isArray(zB)?Cu(Cq.call(zB)):Cu(zB),bB):SB},bB.smooth=function(zB){return arguments.length?(CB=zB?vB:Ou,bB):CB===vB},bB}function Du(bB,_B,xB){for(var vB=bB.width,kB=bB.height,wB=(xB<<1)+1,SB=0;SB<kB;++SB)for(var CB=0,zB=0;CB<vB+xB;++CB)CB<vB&&(zB+=bB.data[CB+SB*vB]),CB>=xB&&(CB>=wB&&(zB-=bB.data[CB-wB+SB*vB]),_B.data[CB-xB+SB*vB]=zB/Math.min(CB+1,vB-1+wB-CB,wB))}function qu(bB,_B,xB){for(var vB=bB.width,kB=bB.height,wB=(xB<<1)+1,SB=0;SB<vB;++SB)for(var CB=0,zB=0;CB<kB+xB;++CB)CB<kB&&(zB+=bB.data[SB+CB*vB]),CB>=xB&&(CB>=wB&&(zB-=bB.data[SB+(CB-wB)*vB]),_B.data[SB+(CB-xB)*vB]=zB/Math.min(CB+1,kB-1+wB-CB,wB))}function Lu(bB){return bB[0]}function Uu(bB){return bB[1]}function Fu(){function bB(qB){var LB=new Float32Array(OB*MB),UB=new Float32Array(OB*MB);qB.forEach(function(IB,$B,NB){var BB=SB(IB,$B,NB)+AB>>PB,YB=CB(IB,$B,NB)+AB>>PB;0<=BB&&BB<OB&&0<=YB&&YB<MB&&++LB[BB+YB*OB]}),Du({width:OB,height:MB,data:LB},{width:OB,height:MB,data:UB},RB>>PB),qu({width:OB,height:MB,data:UB},{width:OB,height:MB,data:LB},RB>>PB),Du({width:OB,height:MB,data:LB},{width:OB,height:MB,data:UB},RB>>PB),qu({width:OB,height:MB,data:UB},{width:OB,height:MB,data:LB},RB>>PB),Du({width:OB,height:MB,data:LB},{width:OB,height:MB,data:UB},RB>>PB),qu({width:OB,height:MB,data:UB},{width:OB,height:MB,data:LB},RB>>PB);var FB=DB(LB);if(!Array.isArray(FB)){var jB=ae(LB);FB=ee(0,jB,FB),FB=J(0,Math.floor(jB/FB)*FB,FB),FB.shift()}return Mu().thresholds(FB).size([OB,MB])(LB).map(_B)}function _B(qB){return qB.value*=Math.pow(2,-2*PB),qB.coordinates.forEach(xB),qB}function xB(qB){qB.forEach(vB)}function vB(qB){qB.forEach(kB)}function kB(qB){qB[0]=qB[0]*Math.pow(2,PB)-AB,qB[1]=qB[1]*Math.pow(2,PB)-AB}function wB(){return AB=3*RB,OB=zB+2*AB>>PB,MB=TB+2*AB>>PB,bB}var SB=Lu,CB=Uu,zB=960,TB=500,RB=20,PB=2,AB=3*RB,OB=zB+2*AB>>PB,MB=TB+2*AB>>PB,DB=Cu(20);return bB.x=function(qB){return arguments.length?(SB='function'===typeof qB?qB:Cu(+qB),bB):SB},bB.y=function(qB){return arguments.length?(CB='function'===typeof qB?qB:Cu(+qB),bB):CB},bB.size=function(qB){if(!arguments.length)return[zB,TB];var LB=Math.ceil(qB[0]),UB=Math.ceil(qB[1]);if(!(0<=LB)&&!(0<=LB))throw new Error('invalid size');return zB=LB,TB=UB,wB()},bB.cellSize=function(qB){if(!arguments.length)return 1<<PB;if(!(1<=(qB=+qB)))throw new Error('invalid cell size');return PB=Math.floor(Math.log(qB)/Math.LN2),wB()},bB.thresholds=function(qB){return arguments.length?(DB='function'===typeof qB?qB:Array.isArray(qB)?Cu(Cq.call(qB)):Cu(qB),bB):DB},bB.bandwidth=function(qB){if(!arguments.length)return Math.sqrt(RB*(RB+1));if(!(0<=(qB=+qB)))throw new Error('invalid bandwidth');return RB=Math.round((Math.sqrt(4*qB*qB+1)-1)/2),wB()},bB}function ju(bB){Rl.call(this,null,bB)}function Iu(){return new $u}function $u(){this.reset()}function Nu(bB,_B,xB){var vB=bB.s=_B+xB,kB=vB-_B;bB.t=_B-(vB-kB)+(xB-kB)}function Bu(bB){return 1<bB?0:-1>bB?Mq:Math.acos(bB)}function Yu(bB){return 1<bB?Dq:-1>bB?-Dq:Math.asin(bB)}function Gu(){}function Wu(bB,_B){bB&&Kq.hasOwnProperty(bB.type)&&Kq[bB.type](bB,_B)}function Hu(bB,_B,xB){var vB=-1,kB=bB.length-xB,wB;for(_B.lineStart();++vB<kB;)wB=bB[vB],_B.point(wB[0],wB[1],wB[2]);_B.lineEnd()}function Xu(bB,_B){var xB=-1,vB=bB.length;for(_B.polygonStart();++xB<vB;)Hu(bB[xB],_B,1);_B.polygonEnd()}function Vu(bB,_B){bB&&Zq.hasOwnProperty(bB.type)?Zq[bB.type](bB,_B):Wu(bB,_B)}function Ju(){rL.point=Ku}function Zu(){Qu(tL,nL)}function Ku(bB,_B){rL.point=Qu,tL=bB,nL=_B,bB*=Fq,_B*=Fq,aL=bB,iL=Nq(_B=_B/2+qq),dL=Hq(_B)}function Qu(bB,_B){bB*=Fq,_B*=Fq,_B=_B/2+qq;var xB=bB-aL,vB=0<=xB?1:-1,kB=vB*xB,wB=Nq(_B),SB=Hq(_B),CB=dL*SB,zB=iL*wB+CB*Nq(kB),TB=CB*vB*Hq(kB);Qq.add($q(TB,zB)),aL=bB,iL=wB,dL=SB}function ep(bB){return[$q(bB[1],bB[0]),Yu(bB[2])]}function tp(bB){var _B=bB[0],xB=bB[1],vB=Nq(xB);return[vB*Nq(_B),vB*Hq(_B),Hq(xB)]}function np(bB,_B){return bB[0]*_B[0]+bB[1]*_B[1]+bB[2]*_B[2]}function ip(bB,_B){return[bB[1]*_B[2]-bB[2]*_B[1],bB[2]*_B[0]-bB[0]*_B[2],bB[0]*_B[1]-bB[1]*_B[0]]}function lp(bB,_B){bB[0]+=_B[0],bB[1]+=_B[1],bB[2]+=_B[2]}function sp(bB,_B){return[bB[0]*_B,bB[1]*_B,bB[2]*_B]}function fp(bB){var _B=Vq(bB[0]*bB[0]+bB[1]*bB[1]+bB[2]*bB[2]);bB[0]/=_B,bB[1]/=_B,bB[2]/=_B}function cp(bB,_B){hL.push(yL=[oL=bB,sL=bB]),_B<lL&&(lL=_B),_B>fL&&(fL=_B)}function up(bB,_B){var xB=tp([bB*Fq,_B*Fq]);if(gL){var vB=ip(gL,xB),kB=[vB[1],-vB[0],0],wB=ip(kB,vB);fp(wB),wB=ep(wB);var SB=bB-cL,CB=0<SB?1:-1,zB=wB[0]*Uq*CB,RB=180<jq(SB),TB;RB^(CB*cL<zB&&zB<CB*bB)?(TB=wB[1]*Uq,TB>fL&&(fL=TB)):(zB=(zB+360)%360-180,RB^(CB*cL<zB&&zB<CB*bB))?(TB=-wB[1]*Uq,TB<lL&&(lL=TB)):(_B<lL&&(lL=_B),_B>fL&&(fL=_B)),RB?bB<cL?vp(oL,bB)>vp(oL,sL)&&(sL=bB):vp(bB,sL)>vp(oL,sL)&&(oL=bB):sL>=oL?(bB<oL&&(oL=bB),bB>sL&&(sL=bB)):bB>cL?vp(oL,bB)>vp(oL,sL)&&(sL=bB):vp(bB,sL)>vp(oL,sL)&&(oL=bB)}else hL.push(yL=[oL=bB,sL=bB]);_B<lL&&(lL=_B),_B>fL&&(fL=_B),gL=xB,cL=bB}function pp(){bL.point=up}function gp(){yL[0]=oL,yL[1]=sL,bL.point=cp,gL=null}function mp(bB,_B){if(gL){var xB=bB-cL;mL.add(180<jq(xB)?xB+(0<xB?360:-360):xB)}else uL=bB,pL=_B;rL.point(bB,_B),up(bB,_B)}function hp(){rL.lineStart()}function bp(){mp(uL,pL),rL.lineEnd(),jq(mL)>Oq&&(oL=-(sL=180)),yL[0]=oL,yL[1]=sL,gL=null}function vp(bB,_B){return 0>(_B-=bB)?_B+360:_B}function kp(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B);Ep(xB*Nq(bB),xB*Hq(bB),Hq(_B))}function Ep(bB,_B,xB){++_L,vL+=(bB-vL)/_L,kL+=(_B-kL)/_L,wL+=(xB-wL)/_L}function Sp(){qL.point=Cp}function Cp(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B);OL=xB*Nq(bB),ML=xB*Hq(bB),DL=Hq(_B),qL.point=zp,Ep(OL,ML,DL)}function zp(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B),vB=xB*Nq(bB),kB=xB*Hq(bB),wB=Hq(_B),SB=$q(Vq((SB=ML*wB-DL*kB)*SB+(SB=DL*vB-OL*wB)*SB+(SB=OL*kB-ML*vB)*SB),OL*vB+ML*kB+DL*wB);xL+=SB,EL+=SB*(OL+(OL=vB)),SL+=SB*(ML+(ML=kB)),CL+=SB*(DL+(DL=wB)),Ep(OL,ML,DL)}function Tp(){qL.point=kp}function Rp(){qL.point=Ap}function Pp(){Op(PL,AL),qL.point=kp}function Ap(bB,_B){PL=bB,AL=_B,bB*=Fq,_B*=Fq,qL.point=Op;var xB=Nq(_B);OL=xB*Nq(bB),ML=xB*Hq(bB),DL=Hq(_B),Ep(OL,ML,DL)}function Op(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B),vB=xB*Nq(bB),kB=xB*Hq(bB),wB=Hq(_B),SB=ML*wB-DL*kB,CB=DL*vB-OL*wB,zB=OL*kB-ML*vB,TB=Vq(SB*SB+CB*CB+zB*zB),RB=Yu(TB),PB=TB&&-RB/TB;zL+=PB*SB,TL+=PB*CB,RL+=PB*zB,xL+=RB,EL+=RB*(OL+(OL=vB)),SL+=RB*(ML+(ML=kB)),CL+=RB*(DL+(DL=wB)),Ep(OL,ML,DL)}function Mp(bB,_B){function xB(vB,kB){return vB=bB(vB,kB),_B(vB[0],vB[1])}return bB.invert&&_B.invert&&(xB.invert=function(vB,kB){return vB=_B.invert(vB,kB),vB&&bB.invert(vB[0],vB[1])}),xB}function Dp(bB,_B){return[bB>Mq?bB-Lq:bB<-Mq?bB+Lq:bB,_B]}function qp(bB,_B,xB){return(bB%=Lq)?_B||xB?Mp(Up(bB),Fp(_B,xB)):Up(bB):_B||xB?Fp(_B,xB):Dp}function Lp(bB){return function(_B,xB){return _B+=bB,[_B>Mq?_B-Lq:_B<-Mq?_B+Lq:_B,xB]}}function Up(bB){var _B=Lp(bB);return _B.invert=Lp(-bB),_B}function Fp(bB,_B){function xB(CB,zB){var TB=Nq(zB),RB=Nq(CB)*TB,PB=Hq(CB)*TB,AB=Hq(zB),OB=AB*vB+RB*kB;return[$q(PB*wB-OB*SB,RB*vB-AB*kB),Yu(OB*wB+PB*SB)]}var vB=Nq(bB),kB=Hq(bB),wB=Nq(_B),SB=Hq(_B);return xB.invert=function(CB,zB){var TB=Nq(zB),RB=Nq(CB)*TB,PB=Hq(CB)*TB,AB=Hq(zB),OB=AB*wB-PB*SB;return[$q(PB*wB+AB*SB,RB*vB+OB*kB),Yu(OB*vB-RB*kB)]},xB}function jp(bB){function _B(xB){return xB=bB(xB[0]*Fq,xB[1]*Fq),xB[0]*=Uq,xB[1]*=Uq,xB}return bB=qp(bB[0]*Fq,bB[1]*Fq,2<bB.length?bB[2]*Fq:0),_B.invert=function(xB){return xB=bB.invert(xB[0]*Fq,xB[1]*Fq),xB[0]*=Uq,xB[1]*=Uq,xB},_B}function Ip(bB,_B,xB,vB,kB,wB){if(xB){var SB=Nq(_B),CB=Hq(_B),zB=vB*xB;null==kB?(kB=_B+vB*Lq,wB=_B-zB/2):(kB=$p(SB,kB),wB=$p(SB,wB),(0<vB?kB<wB:kB>wB)&&(kB+=vB*Lq));for(var RB=kB,TB;0<vB?RB>wB:RB<wB;RB-=zB)TB=ep([SB,-CB*Nq(RB),-CB*Hq(RB)]),bB.point(TB[0],TB[1])}}function $p(bB,_B){_B=tp(_B),_B[0]-=bB,fp(_B);var xB=Bu(-_B[1]);return((0>-_B[2]?-xB:xB)+Lq-Oq)%Lq}function Np(){var bB=[],_B;return{point:function(vB,kB){_B.push([vB,kB])},lineStart:function(){bB.push(_B=[])},lineEnd:Gu,rejoin:function(){1<bB.length&&bB.push(bB.pop().concat(bB.shift()))},result:function(){var xB=bB;return bB=[],_B=null,xB}}}function Bp(bB,_B,xB,vB,kB,wB){var SB=bB[0],CB=bB[1],zB=_B[0],TB=_B[1],RB=0,PB=1,AB=zB-SB,OB=TB-CB,MB;if(MB=xB-SB,AB||!(0<MB)){if(MB/=AB,0>AB){if(MB<RB)return;MB<PB&&(PB=MB)}else if(0<AB){if(MB>PB)return;MB>RB&&(RB=MB)}if(MB=kB-SB,AB||!(0>MB)){if(MB/=AB,0>AB){if(MB>PB)return;MB>RB&&(RB=MB)}else if(0<AB){if(MB<RB)return;MB<PB&&(PB=MB)}if(MB=vB-CB,OB||!(0<MB)){if(MB/=OB,0>OB){if(MB<RB)return;MB<PB&&(PB=MB)}else if(0<OB){if(MB>PB)return;MB>RB&&(RB=MB)}if(MB=wB-CB,OB||!(0>MB)){if(MB/=OB,0>OB){if(MB>PB)return;MB>RB&&(RB=MB)}else if(0<OB){if(MB<RB)return;MB<PB&&(PB=MB)}return 0<RB&&(bB[0]=SB+RB*AB,bB[1]=CB+RB*OB),1>PB&&(_B[0]=SB+PB*AB,_B[1]=CB+PB*OB),!0}}}}}function Yp(bB,_B){return jq(bB[0]-_B[0])<Oq&&jq(bB[1]-_B[1])<Oq}function Gp(bB,_B,xB,vB){this.x=bB,this.z=_B,this.o=xB,this.e=vB,this.v=!1,this.n=this.p=null}function Wp(bB,_B,xB,vB,kB){var wB=[],SB=[],CB,zB;if(bB.forEach(function(MB){if(!(0>=(DB=MB.length-1))){var qB=MB[0],LB=MB[DB],DB,UB;if(Yp(qB,LB)){for(kB.lineStart(),CB=0;CB<DB;++CB)kB.point((qB=MB[CB])[0],qB[1]);return void kB.lineEnd()}wB.push(UB=new Gp(qB,MB,null,!0)),SB.push(UB.o=new Gp(qB,null,UB,!1)),wB.push(UB=new Gp(LB,MB,null,!1)),SB.push(UB.o=new Gp(LB,null,UB,!0))}}),!!wB.length){for(SB.sort(_B),Hp(wB),Hp(SB),(CB=0,zB=SB.length);CB<zB;++CB)SB[CB].e=xB=!xB;for(var TB=wB[0],RB,PB;;){for(var AB=TB,OB=!0;AB.v;)if((AB=AB.n)===TB)return;RB=AB.z,kB.lineStart();do{if(AB.v=AB.o.v=!0,AB.e){if(OB)for(CB=0,zB=RB.length;CB<zB;++CB)kB.point((PB=RB[CB])[0],PB[1]);else vB(AB.x,AB.n.x,1,kB);AB=AB.n}else{if(OB)for(RB=AB.p.z,CB=RB.length-1;0<=CB;--CB)kB.point((PB=RB[CB])[0],PB[1]);else vB(AB.x,AB.p.x,-1,kB);AB=AB.p}AB=AB.o,RB=AB.z,OB=!OB}while(!AB.v);kB.lineEnd()}}}function Hp(bB){if(_B=bB.length){for(var xB=0,vB=bB[0],_B,kB;++xB<_B;)vB.n=kB=bB[xB],kB.p=vB,vB=kB;vB.n=kB=bB[0],kB.p=vB}}function Xp(bB,_B,xB,vB){function kB(TB,RB){return bB<=TB&&TB<=xB&&_B<=RB&&RB<=vB}function wB(TB,RB,PB,AB){var OB=0,MB=0;if(null==TB||(OB=SB(TB,PB))!==(MB=SB(RB,PB))||0>zB(TB,RB)^0<PB)do AB.point(0===OB||3===OB?bB:xB,1<OB?vB:_B);while((OB=(OB+PB+4)%4)!==MB);else AB.point(RB[0],RB[1])}function SB(TB,RB){return jq(TB[0]-bB)<Oq?0<RB?0:3:jq(TB[0]-xB)<Oq?0<RB?2:1:jq(TB[1]-_B)<Oq?0<RB?1:0:0<RB?3:2}function CB(TB,RB){return zB(TB.x,RB.x)}function zB(TB,RB){var PB=SB(TB,1),AB=SB(RB,1);return PB===AB?0===PB?RB[1]-TB[1]:1===PB?TB[0]-RB[0]:2===PB?TB[1]-RB[1]:RB[0]-TB[0]:PB-AB}return function(TB){function RB(JB,ZB){kB(JB,ZB)&&LB.point(JB,ZB)}function PB(){for(var JB=0,ZB=0,KB=jB.length;ZB<KB;++ZB)for(var QB=jB[ZB],eY=1,tY=QB.length,nY=QB[0],dY=nY[0],rY=nY[1],aY,iY;eY<tY;++eY)aY=dY,iY=rY,nY=QB[eY],dY=nY[0],rY=nY[1],iY<=vB?rY>vB&&(dY-aY)*(vB-iY)>(rY-iY)*(bB-aY)&&++JB:rY<=vB&&(dY-aY)*(vB-iY)<(rY-iY)*(bB-aY)&&--JB;return JB}function qB(JB,ZB){var KB=kB(JB,ZB);if(jB&&IB.push([JB,ZB]),HB)$B=JB,NB=ZB,BB=KB,HB=!1,KB&&(LB.lineStart(),LB.point(JB,ZB));else if(KB&&WB)LB.point(JB,ZB);else{var QB=[YB=Math.max(UL,Math.min(LL,YB)),GB=Math.max(UL,Math.min(LL,GB))],eY=[JB=Math.max(UL,Math.min(LL,JB)),ZB=Math.max(UL,Math.min(LL,ZB))];Bp(QB,eY,bB,_B,xB,vB)?(!WB&&(LB.lineStart(),LB.point(QB[0],QB[1])),LB.point(eY[0],eY[1]),!KB&&LB.lineEnd(),XB=!1):KB&&(LB.lineStart(),LB.point(JB,ZB),XB=!1)}YB=JB,GB=ZB,WB=KB}var LB=TB,UB=Np(),FB,jB,IB,$B,NB,BB,YB,GB,WB,HB,XB,VB={point:RB,lineStart:function(){VB.point=qB,jB&&jB.push(IB=[]),HB=!0,WB=!1,YB=GB=NaN},lineEnd:function(){FB&&(qB($B,NB),BB&&WB&&UB.rejoin(),FB.push(UB.result())),VB.point=RB,WB&&LB.lineEnd()},polygonStart:function(){LB=UB,FB=[],jB=[],XB=!0},polygonEnd:function(){var JB=PB(),ZB=XB&&JB,KB=(FB=oe(FB)).length;(ZB||KB)&&(TB.polygonStart(),ZB&&(TB.lineStart(),wB(null,null,1,TB),TB.lineEnd()),KB&&Wp(FB,CB,JB,wB,TB),TB.polygonEnd()),LB=TB,FB=jB=IB=null}};return VB}}function Vp(bB,_B){var xB=_B[0],vB=_B[1],kB=[Hq(xB),-Nq(xB),0],wB=0,SB=0;FL.reset();for(var CB=0,zB=bB.length;CB<zB;++CB)if(RB=(TB=bB[CB]).length)for(var PB=TB[RB-1],AB=PB[0],OB=PB[1]/2+qq,MB=Hq(OB),DB=Nq(OB),qB=0,TB,RB;qB<RB;++qB,AB=UB,MB=jB,DB=IB,PB=LB){var LB=TB[qB],UB=LB[0],FB=LB[1]/2+qq,jB=Hq(FB),IB=Nq(FB),$B=UB-AB,NB=0<=$B?1:-1,BB=NB*$B,YB=BB>Mq,GB=MB*jB;if(FL.add($q(GB*NB*Hq(BB),DB*IB+GB*Nq(BB))),wB+=YB?$B+NB*Lq:$B,YB^AB>=xB^UB>=xB){var WB=ip(tp(PB),tp(LB));fp(WB);var HB=ip(kB,WB);fp(HB);var XB=(YB^0<=$B?-1:1)*Yu(HB[2]);(vB>XB||vB===XB&&(WB[0]||WB[1]))&&(SB+=YB^0<=$B?1:-1)}}return(wB<-Oq||wB<Oq&&FL<-Oq)^1&SB}function Zp(){BL.point=BL.lineEnd=Gu}function Kp(bB,_B){bB*=Fq,_B*=Fq,IL=bB,$L=Hq(_B),NL=Nq(_B),BL.point=Qp}function Qp(bB,_B){bB*=Fq,_B*=Fq;var xB=Hq(_B),vB=Nq(_B),kB=jq(bB-IL),wB=Nq(kB),SB=Hq(kB),CB=vB*SB,zB=NL*xB-$L*vB*wB,TB=$L*xB+NL*vB*wB;jL.add($q(Vq(CB*CB+zB*zB),TB)),IL=bB,$L=xB,NL=vB}function eg(bB,_B,xB){var vB=J(bB,_B-Oq,xB).concat(_B);return function(kB){return vB.map(function(wB){return[kB,wB]})}}function tg(bB,_B,xB){var vB=J(bB,_B-Oq,xB).concat(_B);return function(kB){return vB.map(function(wB){return[wB,kB]})}}function ng(){function bB(){return{type:'MultiLineString',coordinates:_B()}}function _B(){return J(Bq(wB/AB)*AB,kB,AB).map(qB).concat(J(Bq(TB/OB)*OB,zB,OB).map(LB)).concat(J(Bq(vB/RB)*RB,xB,RB).filter(function(FB){return jq(FB%AB)>Oq}).map(MB)).concat(J(Bq(CB/PB)*PB,SB,PB).filter(function(FB){return jq(FB%OB)>Oq}).map(DB))}var RB=10,PB=RB,AB=90,OB=360,UB=2.5,xB,vB,kB,wB,SB,CB,zB,TB,MB,DB,qB,LB;return bB.lines=function(){return _B().map(function(FB){return{type:'LineString',coordinates:FB}})},bB.outline=function(){return{type:'Polygon',coordinates:[qB(wB).concat(LB(zB).slice(1),qB(kB).reverse().slice(1),LB(TB).reverse().slice(1))]}},bB.extent=function(FB){return arguments.length?bB.extentMajor(FB).extentMinor(FB):bB.extentMinor()},bB.extentMajor=function(FB){return arguments.length?(wB=+FB[0][0],kB=+FB[1][0],TB=+FB[0][1],zB=+FB[1][1],wB>kB&&(FB=wB,wB=kB,kB=FB),TB>zB&&(FB=TB,TB=zB,zB=FB),bB.precision(UB)):[[wB,TB],[kB,zB]]},bB.extentMinor=function(FB){return arguments.length?(vB=+FB[0][0],xB=+FB[1][0],CB=+FB[0][1],SB=+FB[1][1],vB>xB&&(FB=vB,vB=xB,xB=FB),CB>SB&&(FB=CB,CB=SB,SB=FB),bB.precision(UB)):[[vB,CB],[xB,SB]]},bB.step=function(FB){return arguments.length?bB.stepMajor(FB).stepMinor(FB):bB.stepMinor()},bB.stepMajor=function(FB){return arguments.length?(AB=+FB[0],OB=+FB[1],bB):[AB,OB]},bB.stepMinor=function(FB){return arguments.length?(RB=+FB[0],PB=+FB[1],bB):[RB,PB]},bB.precision=function(FB){return arguments.length?(UB=+FB,MB=eg(CB,SB,90),DB=tg(vB,xB,UB),qB=eg(TB,zB,90),LB=tg(wB,kB,UB),bB):UB},bB.extentMajor([[-180,-90+Oq],[180,90-Oq]]).extentMinor([[-180,-80-Oq],[180,80+Oq]])}function ag(bB){return bB}function ig(){JL.point=dg}function dg(bB,_B){JL.point=rg,WL=XL=bB,HL=VL=_B}function rg(bB,_B){GL.add(VL*bB-XL*_B),XL=bB,VL=_B}function og(){rg(WL,HL)}function sg(bB,_B){nU+=bB,aU+=_B,++iU}function cg(){mU.point=ug}function ug(bB,_B){mU.point=pg,sg(pU=bB,gU=_B)}function pg(bB,_B){var xB=bB-pU,vB=_B-gU,kB=Vq(xB*xB+vB*vB);dU+=kB*(pU+bB)/2,rU+=kB*(gU+_B)/2,oU+=kB,sg(pU=bB,gU=_B)}function gg(){mU.point=sg}function mg(){mU.point=yg}function hg(){_g(cU,uU)}function yg(bB,_B){mU.point=_g,sg(cU=pU=bB,uU=gU=_B)}function _g(bB,_B){var xB=bB-pU,vB=_B-gU,kB=Vq(xB*xB+vB*vB);dU+=kB*(pU+bB)/2,rU+=kB*(gU+_B)/2,oU+=kB,kB=gU*bB-pU*_B,lU+=kB*(pU+bB),sU+=kB*(gU+_B),fU+=3*kB,sg(pU=bB,gU=_B)}function xg(bB){this._context=bB}function vg(bB,_B){kU.point=kg,bU=xU=bB,_U=vU=_B}function kg(bB,_B){xU-=bB,vU-=_B,hU.add(Vq(xU*xU+vU*vU)),xU=bB,vU=_B}function wg(){this._string=[]}function Eg(bB){return'm0,'+bB+'a'+bB+','+bB+' 0 1,1 0,'+-2*bB+'a'+bB+','+bB+' 0 1,1 0,'+2*bB+'z'}function Sg(bB,_B){function xB(SB){return SB&&('function'===typeof vB&&wB.pointRadius(+vB.apply(this,arguments)),Vu(SB,kB(wB))),wB.result()}var vB=4.5,kB,wB;return xB.area=function(SB){return Vu(SB,kB(JL)),JL.result()},xB.measure=function(SB){return Vu(SB,kB(kU)),kU.result()},xB.bounds=function(SB){return Vu(SB,kB(tU)),tU.result()},xB.centroid=function(SB){return Vu(SB,kB(mU)),mU.result()},xB.projection=function(SB){return arguments.length?(kB=null==SB?(bB=null,ag):(bB=SB).stream,xB):bB},xB.context=function(SB){return arguments.length?(wB=null==SB?(_B=null,new wg):new xg(_B=SB),'function'!==typeof vB&&wB.pointRadius(vB),xB):_B},xB.pointRadius=function(SB){return arguments.length?(vB='function'===typeof SB?SB:(wB.pointRadius(+SB),+SB),xB):vB},xB.projection(bB).context(_B)}function Cg(bB,_B,xB,vB){return function(kB,wB){function SB($B,NB){var BB=kB($B,NB);bB($B=BB[0],NB=BB[1])&&wB.point($B,NB)}function CB($B,NB){var BB=kB($B,NB);OB.point(BB[0],BB[1])}function zB(){IB.point=CB,OB.lineStart()}function TB(){IB.point=SB,OB.lineEnd()}function RB($B,NB){jB.push([$B,NB]);var BB=kB($B,NB);qB.point(BB[0],BB[1])}function PB(){qB.lineStart(),jB=[]}function AB(){RB(jB[0][0],jB[0][1]),qB.lineEnd();var $B=qB.clean(),NB=DB.result(),YB=NB.length,BB,GB,WB,HB;if(jB.pop(),UB.push(jB),jB=null,!!YB){if(1&$B){if(WB=NB[0],0<(GB=WB.length-1)){for(LB||(wB.polygonStart(),LB=!0),wB.lineStart(),BB=0;BB<GB;++BB)wB.point((HB=WB[BB])[0],HB[1]);wB.lineEnd()}return}1<YB&&2&$B&&NB.push(NB.pop().concat(NB.shift())),FB.push(NB.filter(zg))}}var OB=_B(wB),MB=kB.invert(vB[0],vB[1]),DB=Np(),qB=_B(DB),LB=!1,UB,FB,jB,IB={point:SB,lineStart:zB,lineEnd:TB,polygonStart:function(){IB.point=RB,IB.lineStart=PB,IB.lineEnd=AB,FB=[],UB=[]},polygonEnd:function(){IB.point=SB,IB.lineStart=zB,IB.lineEnd=TB,FB=oe(FB);var NB=Vp(UB,MB);FB.length?(!LB&&(wB.polygonStart(),LB=!0),Wp(FB,Tg,NB,xB,wB)):NB&&(!LB&&(wB.polygonStart(),LB=!0),wB.lineStart(),xB(null,null,1,wB),wB.lineEnd()),LB&&(wB.polygonEnd(),LB=!1),FB=UB=null},sphere:function(){wB.polygonStart(),wB.lineStart(),xB(null,null,1,wB),wB.lineEnd(),wB.polygonEnd()}};return IB}}function zg(bB){return 1<bB.length}function Tg(bB,_B){return(0>(bB=bB.x)[0]?bB[1]-Dq-Oq:Dq-bB[1])-(0>(_B=_B.x)[0]?_B[1]-Dq-Oq:Dq-_B[1])}function Pg(bB,_B,xB,vB){var SB=Hq(bB-xB),kB,wB;return jq(SB)>Oq?Iq((Hq(_B)*(wB=Nq(vB))*Hq(xB)-Hq(vB)*(kB=Nq(_B))*Hq(bB))/(kB*wB*SB)):(_B+vB)/2}function Og(bB,_B){function vB(RB,PB){return Nq(RB)*Nq(PB)>CB}function wB(RB,PB,AB){var OB=tp(RB),MB=tp(PB),DB=[1,0,0],qB=ip(OB,MB),LB=np(qB,qB),UB=qB[0],FB=LB-UB*UB;if(!FB)return!AB&&RB;var $B=ip(DB,qB),NB=sp(DB,CB*LB/FB),BB=sp(qB,-CB*UB/FB);lp(NB,BB);var YB=$B,GB=np(NB,YB),WB=np(YB,YB),HB=GB*GB-WB*(np(NB,NB)-1);if(!(0>HB)){var XB=Vq(HB),VB=sp(YB,(-GB-XB)/WB);if(lp(VB,NB),VB=ep(VB),!AB)return VB;var JB=RB[0],ZB=PB[0],KB=RB[1],QB=PB[1],eY;ZB<JB&&(eY=JB,JB=ZB,ZB=eY);var tY=ZB-JB,nY=jq(tY-Mq)<Oq;if(!nY&&QB<KB&&(eY=KB,KB=QB,QB=eY),nY||tY<Oq?nY?0<KB+QB^VB[1]<(jq(VB[0]-JB)<Oq?KB:QB):KB<=VB[1]&&VB[1]<=QB:tY>Mq^(JB<=VB[0]&&VB[0]<=ZB)){var iY=sp(YB,(-GB+XB)/WB);return lp(iY,NB),[VB,ep(iY)]}}}function SB(RB,PB){var AB=zB?bB:Mq-bB,OB=0;return RB<-AB?OB|=1:RB>AB&&(OB|=2),PB<-AB?OB|=4:PB>AB&&(OB|=8),OB}var CB=Nq(bB),zB=0<CB,TB=jq(CB)>Oq;return Cg(vB,function(RB){var PB,AB,OB,MB,DB;return{lineStart:function(){MB=OB=!1,DB=1},point:function(LB,UB){var FB=[LB,UB],IB=vB(LB,UB),$B=zB?IB?0:SB(LB,UB):IB?SB(LB+(0>LB?Mq:-Mq),UB):0,jB;if(!PB&&(MB=OB=IB)&&RB.lineStart(),IB!==OB&&(jB=wB(PB,FB),(Yp(PB,jB)||Yp(FB,jB))&&(FB[0]+=Oq,FB[1]+=Oq,IB=vB(FB[0],FB[1]))),IB!==OB)DB=0,IB?(RB.lineStart(),jB=wB(FB,PB),RB.point(jB[0],jB[1])):(jB=wB(PB,FB),RB.point(jB[0],jB[1]),RB.lineEnd()),PB=jB;else if(TB&&PB&&zB^IB){var NB;!($B&AB)&&(NB=wB(FB,PB,!0))&&(DB=0,zB?(RB.lineStart(),RB.point(NB[0][0],NB[0][1]),RB.point(NB[1][0],NB[1][1]),RB.lineEnd()):(RB.point(NB[1][0],NB[1][1]),RB.lineEnd(),RB.lineStart(),RB.point(NB[0][0],NB[0][1])))}!IB||PB&&Yp(PB,FB)||RB.point(FB[0],FB[1]),PB=FB,OB=IB,AB=$B},lineEnd:function(){OB&&RB.lineEnd(),PB=null},clean:function(){return DB|(MB&&OB)<<1}}},function(RB,PB,AB,OB){Ip(OB,bB,_B,AB,RB,PB)},zB?[0,-bB]:[-Mq,bB-Mq])}function Mg(bB){return function(_B){var xB=new Dg;for(var vB in bB)xB[vB]=bB[vB];return xB.stream=_B,xB}}function Dg(){}function qg(bB,_B,xB){var vB=_B[1][0]-_B[0][0],kB=_B[1][1]-_B[0][1],wB=bB.clipExtent&&bB.clipExtent();bB.scale(150).translate([0,0]),null!=wB&&bB.clipExtent(null),Vu(xB,bB.stream(tU));var SB=tU.result(),CB=Math.min(vB/(SB[1][0]-SB[0][0]),kB/(SB[1][1]-SB[0][1])),zB=+_B[0][0]+(vB-CB*(SB[1][0]+SB[0][0]))/2,TB=+_B[0][1]+(kB-CB*(SB[1][1]+SB[0][1]))/2;return null!=wB&&bB.clipExtent(wB),bB.scale(150*CB).translate([zB,TB])}function Lg(bB,_B,xB){return qg(bB,[[0,0],_B],xB)}function Ug(bB,_B){return+_B?jg(bB,_B):Fg(bB)}function Fg(bB){return Mg({point:function(xB,vB){xB=bB(xB,vB),this.stream.point(xB[0],xB[1])}})}function jg(bB,_B){function xB(vB,kB,wB,SB,CB,zB,TB,RB,PB,AB,OB,MB,DB,qB){var LB=TB-vB,UB=RB-kB,FB=LB*LB+UB*UB;if(FB>4*_B&&DB--){var jB=SB+AB,IB=CB+OB,$B=zB+MB,NB=Vq(jB*jB+IB*IB+$B*$B),BB=Yu($B/=NB),YB=jq(jq($B)-1)<Oq||jq(wB-PB)<Oq?(wB+PB)/2:$q(IB,jB),GB=bB(YB,BB),WB=GB[0],HB=GB[1],XB=WB-vB,VB=HB-kB,JB=UB*XB-LB*VB;(JB*JB/FB>_B||0.3<jq((LB*XB+UB*VB)/FB-0.5)||SB*AB+CB*OB+zB*MB<SU)&&(xB(vB,kB,wB,SB,CB,zB,WB,HB,YB,jB/=NB,IB/=NB,$B,DB,qB),qB.point(WB,HB),xB(WB,HB,YB,jB,IB,$B,TB,RB,PB,AB,OB,MB,DB,qB))}}return function(vB){function kB(BB,YB){BB=bB(BB,YB),vB.point(BB[0],BB[1])}function wB(){UB=NaN,NB.point=SB,vB.lineStart()}function SB(BB,YB){var GB=tp([BB,YB]),WB=bB(BB,YB);xB(UB,FB,LB,jB,IB,$B,UB=WB[0],FB=WB[1],LB=BB,jB=GB[0],IB=GB[1],$B=GB[2],EU,vB),vB.point(UB,FB)}function CB(){NB.point=kB,vB.lineEnd()}function zB(){wB(),NB.point=TB,NB.lineEnd=RB}function TB(BB,YB){SB(PB=BB,YB),AB=UB,OB=FB,MB=jB,DB=IB,qB=$B,NB.point=SB}function RB(){xB(UB,FB,LB,jB,IB,$B,AB,OB,PB,MB,DB,qB,EU,vB),NB.lineEnd=CB,CB()}var PB,AB,OB,MB,DB,qB,LB,UB,FB,jB,IB,$B,NB={point:kB,lineStart:wB,lineEnd:CB,polygonStart:function(){vB.polygonStart(),NB.lineStart=zB},polygonEnd:function(){vB.polygonEnd(),NB.lineStart=wB}};return NB}}function Ig(bB){return $g(function(){return bB})()}function $g(bB){function _B(VB){return VB=UB(VB[0]*Fq,VB[1]*Fq),[VB[0]*CB+RB,PB-VB[1]*CB]}function xB(VB){return VB=UB.invert((VB[0]-RB)/CB,(PB-VB[1])/CB),VB&&[VB[0]*Uq,VB[1]*Uq]}function vB(VB,JB){return VB=SB(VB,JB),[VB[0]*CB+RB,PB-VB[1]*CB]}function kB(){UB=Mp(LB=qp(MB,DB,qB),SB);var VB=SB(AB,OB);return RB=zB-VB[0]*CB,PB=TB+VB[1]*CB,wB()}function wB(){return HB=XB=null,_B}var CB=150,zB=480,TB=250,AB=0,OB=0,MB=0,DB=0,qB=0,FB=null,jB=wU,IB=null,YB=ag,GB=0.5,WB=Ug(vB,GB),SB,RB,PB,LB,UB,$B,NB,BB,HB,XB;return _B.stream=function(VB){return HB&&XB===VB?HB:HB=CU(jB(LB,WB(YB(XB=VB))))},_B.clipAngle=function(VB){return arguments.length?(jB=+VB?Og(FB=VB*Fq,6*Fq):(FB=null,wU),wB()):FB*Uq},_B.clipExtent=function(VB){return arguments.length?(YB=null==VB?(IB=$B=NB=BB=null,ag):Xp(IB=+VB[0][0],$B=+VB[0][1],NB=+VB[1][0],BB=+VB[1][1]),wB()):null==IB?null:[[IB,$B],[NB,BB]]},_B.scale=function(VB){return arguments.length?(CB=+VB,kB()):CB},_B.translate=function(VB){return arguments.length?(zB=+VB[0],TB=+VB[1],kB()):[zB,TB]},_B.center=function(VB){return arguments.length?(AB=VB[0]%360*Fq,OB=VB[1]%360*Fq,kB()):[AB*Uq,OB*Uq]},_B.rotate=function(VB){return arguments.length?(MB=VB[0]%360*Fq,DB=VB[1]%360*Fq,qB=2<VB.length?VB[2]%360*Fq:0,kB()):[MB*Uq,DB*Uq,qB*Uq]},_B.precision=function(VB){return arguments.length?(WB=Ug(vB,GB=VB*VB),wB()):Vq(GB)},_B.fitExtent=function(VB,JB){return qg(_B,VB,JB)},_B.fitSize=function(VB,JB){return Lg(_B,VB,JB)},function(){return SB=bB.apply(this,arguments),_B.invert=SB.invert&&xB,kB()}}function Ng(bB){var _B=0,xB=Mq/3,vB=$g(bB),kB=vB(_B,xB);return kB.parallels=function(wB){return arguments.length?vB(_B=wB[0]*Fq,xB=wB[1]*Fq):[_B*Uq,xB*Uq]},kB}function Bg(bB){function _B(vB,kB){return[vB*xB,Hq(kB)/xB]}var xB=Nq(bB);return _B.invert=function(vB,kB){return[vB/xB,Yu(kB*xB)]},_B}function Yg(bB,_B){function xB(CB,zB){var TB=Vq(wB-2*kB*Hq(zB))/kB;return[TB*Hq(CB*=kB),SB-TB*Nq(CB)]}var vB=Hq(bB),kB=(vB+Hq(_B))/2;if(jq(kB)<Oq)return Bg(bB);var wB=1+vB*(2*kB-vB),SB=Vq(wB)/kB;return xB.invert=function(CB,zB){var TB=SB-zB;return[$q(CB,jq(TB))/kB*Xq(TB),Yu((wB-(CB*CB+TB*TB)*kB*kB)/(2*kB))]},xB}function Gg(){return Ng(Yg).scale(155.424).center([0,33.6442])}function Wg(){return Gg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])}function Hg(bB){var _B=bB.length;return{point:function(vB,kB){for(var wB=-1;++wB<_B;)bB[wB].point(vB,kB)},sphere:function(){for(var vB=-1;++vB<_B;)bB[vB].sphere()},lineStart:function(){for(var vB=-1;++vB<_B;)bB[vB].lineStart()},lineEnd:function(){for(var vB=-1;++vB<_B;)bB[vB].lineEnd()},polygonStart:function(){for(var vB=-1;++vB<_B;)bB[vB].polygonStart()},polygonEnd:function(){for(var vB=-1;++vB<_B;)bB[vB].polygonEnd()}}}function Vg(bB){return function(_B,xB){var vB=Nq(_B),kB=Nq(xB),wB=bB(vB*kB);return[wB*kB*Hq(_B),wB*Hq(xB)]}}function Jg(bB){return function(_B,xB){var vB=Vq(_B*_B+xB*xB),kB=bB(vB),wB=Hq(kB),SB=Nq(kB);return[$q(_B*wB,vB*SB),Yu(vB&&xB*wB/vB)]}}function Qg(bB,_B){return[bB,Gq(Jq((Dq+_B)/2))]}function tm(bB){function _B(){var PB=Mq*kB(),AB=xB(jp(xB.rotate()).invert([0,0]));return SB(null==CB?[[AB[0]-PB,AB[1]-PB],[AB[0]+PB,AB[1]+PB]]:bB===Qg?[[Math.max(AB[0]-PB,CB),zB],[Math.min(AB[0]+PB,TB),RB]]:[[CB,Math.max(AB[1]-PB,zB)],[TB,Math.min(AB[1]+PB,RB)]])}var xB=Ig(bB),vB=xB.center,kB=xB.scale,wB=xB.translate,SB=xB.clipExtent,CB=null,zB,TB,RB;return xB.scale=function(PB){return arguments.length?(kB(PB),_B()):kB()},xB.translate=function(PB){return arguments.length?(wB(PB),_B()):wB()},xB.center=function(PB){return arguments.length?(vB(PB),_B()):vB()},xB.clipExtent=function(PB){return arguments.length?(null==PB?CB=zB=TB=RB=null:(CB=+PB[0][0],zB=+PB[0][1],TB=+PB[1][0],RB=+PB[1][1]),_B()):null==CB?null:[[CB,zB],[TB,RB]]},_B()}function nm(bB){return Jq((Dq+bB)/2)}function im(bB,_B){function xB(SB,CB){0<wB?CB<-Dq+Oq&&(CB=-Dq+Oq):CB>Dq-Oq&&(CB=Dq-Oq);var zB=wB/Wq(nm(CB),kB);return[zB*Hq(kB*SB),wB-zB*Nq(kB*SB)]}var vB=Nq(bB),kB=bB===_B?Hq(bB):Gq(vB/Nq(_B))/Gq(nm(_B)/nm(bB)),wB=vB*Wq(nm(bB),kB)/kB;return kB?(xB.invert=function(SB,CB){var zB=wB-CB,TB=Xq(kB)*Vq(SB*SB+zB*zB);return[$q(SB,jq(zB))/kB*Xq(zB),2*Iq(Wq(wB/TB,1/kB))-Dq]},xB):Qg}function rm(bB,_B){return[bB,_B]}function lm(bB,_B){function xB(SB,CB){var zB=wB-CB,TB=kB*SB;return[zB*Hq(TB),wB-zB*Nq(TB)]}var vB=Nq(bB),kB=bB===_B?Hq(bB):(vB-Nq(_B))/(_B-bB),wB=vB/kB+bB;return jq(kB)<Oq?rm:(xB.invert=function(SB,CB){var zB=wB-CB;return[$q(SB,jq(zB))/kB*Xq(zB),wB-Xq(kB)*Vq(SB*SB+zB*zB)]},xB)}function cm(bB,_B){var xB=Nq(_B),vB=Nq(bB)*xB;return[xB*Hq(bB)/vB,Hq(_B)/vB]}function pm(bB,_B){return[Nq(_B)*Hq(bB),Hq(_B)]}function mm(bB,_B){var xB=Nq(_B),vB=1+Nq(bB)*xB;return[xB*Hq(bB)/vB,Hq(_B)/vB]}function _m(bB,_B){return[Gq(Jq((Dq+_B)/2)),-bB]}function km(bB,_B){return function xB(){var vB=_B();return vB.type=bB,vB.path=Sg().projection(vB),vB.copy=vB.copy||function(){var kB=xB();return PU.forEach(function(wB){vB.hasOwnProperty(wB)&&kB[wB](vB[wB]())}),kB.path.pointRadius(vB.path.pointRadius()),kB},vB}}function Em(bB,_B){return 1<arguments.length?(AU[bB]=km(bB,_B),this):AU.hasOwnProperty(bB)?AU[bB]:null}function Sm(bB){return bB&&bB.path||RU}function Cm(bB){Rl.call(this,null,bB)}function zm(bB){Rl.call(this,null,bB)}function Tm(bB){Rl.call(this,null,bB)}function Rm(bB,_B){var xB=function(kB){return bB(_B(kB))};return xB.context=function(vB){return bB.context(vB),xB},xB}function Pm(bB){Rl.call(this,[],bB),this.generator=ng()}function Am(bB){Rl.call(this,null,bB),this.modified(!0)}function Om(bB,_B){var xB=Mm(_B.fit);_B.extent?bB.fitExtent(_B.extent,xB):_B.size?bB.fitSize(_B.size,xB):0}function Mm(bB){return Qz(bB)?1<bB.length?{type:'FeatureCollection',features:bB}:bB[0]:bB}function Dm(bB){var _B=Em((bB||'mercator').toLowerCase());return _B||ke('Unrecognized projection type: '+bB),_B()}function qm(bB,_B,xB){Oe(bB[_B])&&bB[_B](xB)}function Lm(bB,_B){return bB.ticks?bB.ticks(_B):bB.domain()}function Um(bB,_B,xB){var vB=bB.tickFormat?bB.tickFormat(_B,xB):String;return bB.type===BU?Fm(vB,jm(xB)):vB}function Fm(bB,_B){return function(xB){return bB(xB)?_B(xB):''}}function jm(bB){var _B=Ec(bB||',');if(null==_B.precision){switch(_B.precision=12,_B.type){case'%':_B.precision-=2;break;case'e':_B.precision-=1;}return Im(IM(_B),IM('.1f')(1)[1])}return IM(_B)}function Im(bB,_B){return function(xB){var vB=bB(xB),kB=vB.indexOf(_B),wB,SB;if(0>kB)return vB;for(wB=$m(vB,kB),SB=wB<vB.length?vB.slice(wB):'';--wB>kB;)if('0'!==vB[wB]){++wB;break}return vB.slice(0,wB)+SB}}function $m(bB,_B){var xB=bB.lastIndexOf('e'),vB;if(0<xB)return xB;for(xB=bB.length;--xB>_B;)if(vB=bB.charCodeAt(xB),48<=vB&&57>=vB)return xB+1}function Nm(bB){Rl.call(this,null,bB)}function Bm(bB){Rl.call(this,null,bB)}function Ym(){return Io({})}function Gm(bB){return bB.exit}function Wm(bB){Rl.call(this,null,bB)}function Hm(bB,_B,xB){if(xB)return bB.domain();var vB=dF[bB.type];return vB?vB(bB):Lm(bB,_B)}function Zm(bB){var _B=bB.domain();return _B.max=_B.pop(),_B}function Km(bB,_B){return dF[bB.type]?Qm(_B):nh(_B)}function Qm(bB){return function(_B,xB,vB){var kB=vB[xB+1]||vB.max||+Infinity,wB=eh(_B,bB),SB=eh(kB,bB);return wB&&SB?wB+'\u2013'+SB:SB?'< '+SB:'\u2265 '+wB}}function eh(bB,_B){return isFinite(bB)?_B(bB):null}function nh(bB){return function(_B){return bB(_B)}}function ah(bB){Rl.call(this,[],bB)}function ih(bB){return bB.source.x}function dh(bB){return bB.source.y}function rh(bB){return bB.target.x}function oh(bB){return bB.target.y}function lh(bB){Rl.call(this,{},bB)}function sh(bB,_B,xB,vB){return'M'+bB+','+_B+'L'+xB+','+vB}function uh(bB,_B,xB,vB){var kB=xB-bB,wB=vB-_B,SB=Math.sqrt(kB*kB+wB*wB)/2,CB=180*Math.atan2(wB,kB)/Math.PI;return'M'+bB+','+_B+'A'+SB+','+SB+' '+CB+' 0 1 '+xB+','+vB}function gh(bB,_B,xB,vB){var kB=xB-bB,wB=vB-_B,SB=0.2*(kB+wB),CB=0.2*(wB-kB);return'M'+bB+','+_B+'C'+(bB+SB)+','+(_B+CB)+' '+(xB+CB)+','+(vB-SB)+' '+xB+','+vB}function wh(bB){Rl.call(this,null,bB)}function Eh(bB){Rl.call(this,null,bB),this.modified(!0)}function Sh(bB,_B,xB){var vB=Ch(bB,_B.domainRaw);if(-1<vB)return vB;var kB=_B.domain,wB=_B.zero||void 0===_B.zero&&cF[bB.type],SB,CB;return kB?((wB||null!=_B.domainMin||null!=_B.domainMax||null!=_B.domainMid)&&(SB=(kB=kB.slice()).length-1||1,wB&&(0<kB[0]&&(kB[0]=0),0>kB[SB]&&(kB[SB]=0)),null!=_B.domainMin&&(kB[0]=_B.domainMin),null!=_B.domainMax&&(kB[SB]=_B.domainMax),null!=_B.domainMid&&(CB=_B.domainMid,(CB<kB[0]||CB>kB[SB])&&xB.warn('Scale domainMid exceeds domain min or max.',CB),kB.splice(SB,0,CB))),bB.domain(kB),_B.nice&&bB.nice&&bB.nice(!0!==_B.nice&&+_B.nice||null),kB.length):0}function Ch(bB,_B){return _B?(bB.domain(_B),_B.length):-1}function zh(bB,_B,xB){var vB=_B.round||!1,kB=_B.range;if(null!=_B.rangeStep)kB=Th(bB.type,_B,xB);else if(_B.scheme){if(kB=Rh(bB.type,_B,xB),Oe(kB))return bB.interpolator(kB);}else if(kB&&bB.type===tF)return bB.interpolator(cM(Ah(kB,_B.reverse)));kB&&_B.interpolate&&bB.interpolate?bB.interpolate(ku(_B.interpolate,_B.interpolateGamma)):Oe(bB.round)?bB.round(vB):Oe(bB.rangeRound)&&bB.interpolate(vB?Uf:Lf),kB&&bB.range(Ah(kB,_B.reverse))}function Th(bB,_B,xB){bB!==WU&&bB!==HU&&ke('Only band and point scales support rangeStep.');var vB=(null==_B.paddingOuter?_B.padding:_B.paddingOuter)||0,kB=bB===HU?1:(null==_B.paddingInner?_B.padding:_B.paddingInner)||0;return[0,_B.rangeStep*js(xB,kB,vB)]}function Rh(bB,_B,xB){var vB=_B.scheme.toLowerCase(),kB=bu(vB),wB=_B.schemeExtent,SB;return kB||ke('Unrecognized scheme name: '+_B.scheme),xB=bB===KU?xB+1:bB===eF?xB-1:bB===JU||bB===ZU?+_B.schemeCount||fF:xB,bB===tF?Ph(kB,wB,_B.reverse):!wB&&(SB=bu(vB+'-'+xB))?SB:Oe(kB)?Oh(Ph(kB,wB),xB):bB===VU?kB:kB.slice(0,xB)}function Ph(bB,_B,xB){return Oe(bB)&&(_B||xB)?_u(bB,Ah(_B||[0,1],xB)):bB}function Ah(bB,_B){return _B?bB.slice().reverse():bB}function Oh(bB,_B){for(var xB=Array(_B),kB=0;kB<_B;++kB)xB[kB]=bB(kB/(_B-1||1));return xB}function Mh(bB){Rl.call(this,null,bB)}function Dh(bB){Rl.call(this,null,bB)}function qh(bB,_B,xB,vB,kB){for(var wB=(_B-bB.sum)/2,SB=bB.length,CB=0,zB;CB<SB;++CB)zB=bB[CB],zB[vB]=wB,zB[kB]=wB+=Math.abs(xB(zB))}function Lh(bB,_B,xB,vB,kB){for(var wB=1/bB.sum,SB=0,CB=bB.length,zB=0,TB=0,RB;zB<CB;++zB)RB=bB[zB],RB[vB]=SB,RB[kB]=SB=wB*(TB+=Math.abs(xB(RB)))}function Uh(bB,_B,xB,vB,kB){for(var wB=0,SB=0,CB=bB.length,zB=0,TB,RB;zB<CB;++zB)RB=bB[zB],TB=xB(RB),0>TB?(RB[vB]=SB,RB[kB]=SB+=TB):(RB[vB]=wB,RB[kB]=wB+=TB)}function Fh(bB,_B,xB,vB){var kB=[],wB=function(qB){return qB(RB)},SB,CB,zB,TB,RB,PB,AB,OB,MB;if(null==_B)kB.push(bB.slice());else for(SB={},CB=0,zB=bB.length;CB<zB;++CB)RB=bB[CB],PB=_B.map(wB),AB=SB[PB]||(kB.push(SB[PB]=[]),SB[PB]),AB.push(RB);for(PB=0,MB=0,TB=kB.length;PB<TB;++PB){for(AB=kB[PB],CB=0,OB=0,zB=AB.length;CB<zB;++CB)OB+=Math.abs(vB(AB[CB]));AB.sum=OB,OB>MB&&(MB=OB),xB&&AB.sort(xB)}return kB.max=MB,kB}function Ih(bB){return function(){return bB}}function $h(){return 1e-6*(Math.random()-0.5)}function Bh(bB,_B,xB,vB){if(isNaN(_B)||isNaN(xB))return bB;var wB=bB._root,SB={data:vB},CB=bB._x0,zB=bB._y0,TB=bB._x1,RB=bB._y1,kB,PB,AB,OB,MB,DB,qB,LB,UB;if(!wB)return bB._root=SB,bB;for(;wB.length;)if((DB=_B>=(PB=(CB+TB)/2))?CB=PB:TB=PB,(qB=xB>=(AB=(zB+RB)/2))?zB=AB:RB=AB,(kB=wB,!(wB=wB[LB=qB<<1|DB])))return kB[LB]=SB,bB;if(OB=+bB._x.call(null,wB.data),MB=+bB._y.call(null,wB.data),_B===OB&&xB===MB)return SB.next=wB,kB?kB[LB]=SB:bB._root=SB,bB;do kB=kB?kB[LB]=[,,,,]:bB._root=[,,,,],(DB=_B>=(PB=(CB+TB)/2))?CB=PB:TB=PB,(qB=xB>=(AB=(zB+RB)/2))?zB=AB:RB=AB;while((LB=qB<<1|DB)===(UB=(MB>=AB)<<1|OB>=PB));return kB[UB]=wB,kB[LB]=SB,bB}function Xh(bB,_B,xB,vB,kB){this.node=bB,this.x0=_B,this.y0=xB,this.x1=vB,this.y1=kB}function my(bB){return bB[0]}function yy(bB){return bB[1]}function wy(bB,_B,xB){var vB=new Ey(null==_B?my:_B,null==xB?yy:xB,NaN,NaN,NaN,NaN);return null==bB?vB:vB.addAll(bB)}function Ey(bB,_B,xB,vB,kB,wB){this._x=bB,this._y=_B,this._x0=xB,this._y0=vB,this._x1=kB,this._y1=wB,this._root=void 0}function Sy(bB){for(var _B={data:bB.data},xB=_B;bB=bB.next;)xB=xB.next={data:bB.data};return _B}function Cy(bB){return bB.x+bB.vx}function zy(bB){return bB.y+bB.vy}function Ry(bB){return bB.index}function Py(bB,_B){var xB=bB.get(_B);if(!xB)throw new Error('missing: '+_B);return xB}function Oy(){return RF||(OF(My),RF=AF.now()+PF)}function My(){RF=0}function Dy(){this._call=this._time=this._next=null}function qy(bB,_B,xB){var vB=new Dy;return vB.restart(bB,_B,xB),vB}function Ly(){Oy(),++kF;for(var bB=CF,_B;bB;)0<=(_B=RF-bB._time)&&bB._call.call(null,_B),bB=bB._next;--kF}function Uy(){RF=(TF=AF.now())+PF,kF=wF=0;try{Ly()}finally{kF=0,jy(),RF=0}}function Fy(){var bB=AF.now(),_B=bB-TF;_B>SF&&(PF-=_B,TF=bB)}function jy(){for(var _B=CF,vB=Infinity,bB,xB;_B;)_B._call?(vB>_B._time&&(vB=_B._time),bB=_B,_B=_B._next):(xB=_B._next,_B._next=null,_B=bB?bB._next=xB:CF=xB);zF=bB,Iy(vB)}function Iy(bB){if(!kF){wF&&(wF=clearTimeout(wF));var _B=bB-RF;24<_B?(bB<Infinity&&(wF=setTimeout(Uy,_B)),EF&&(EF=clearInterval(EF))):(!EF&&(TF=RF,EF=setInterval(Fy,SF)),kF=1,OF(Uy))}}function $y(bB){return bB.x}function Ny(bB){return bB.y}function By(bB){function _B(){xB(),OB.call('tick',wB),SB<CB&&(AB.stop(),OB.call('end',wB))}function xB(){var DB=bB.length,MB,qB;for(SB+=(TB-SB)*zB,PB.each(function(LB){LB(SB)}),MB=0;MB<DB;++MB)qB=bB[MB],null==qB.fx?qB.x+=qB.vx*=RB:(qB.x=qB.fx,qB.vx=0),null==qB.fy?qB.y+=qB.vy*=RB:(qB.y=qB.fy,qB.vy=0)}function vB(){for(var MB=0,DB=bB.length,qB;MB<DB;++MB){if(qB=bB[MB],qB.index=MB,isNaN(qB.x)||isNaN(qB.y)){var LB=MF*Math.sqrt(MB),UB=MB*DF;qB.x=LB*Math.cos(UB),qB.y=LB*Math.sin(UB)}(isNaN(qB.vx)||isNaN(qB.vy))&&(qB.vx=qB.vy=0)}}function kB(MB){return MB.initialize&&MB.initialize(bB),MB}var SB=1,CB=1e-3,zB=1-Math.pow(CB,1/300),TB=0,RB=0.6,PB=tt(),AB=qy(_B),OB=st('tick','end'),wB;return null==bB&&(bB=[]),vB(),wB={tick:xB,restart:function(){return AB.restart(_B),wB},stop:function(){return AB.stop(),wB},nodes:function(DB){return arguments.length?(bB=DB,vB(),PB.each(kB),wB):bB},alpha:function(DB){return arguments.length?(SB=+DB,wB):SB},alphaMin:function(DB){return arguments.length?(CB=+DB,wB):CB},alphaDecay:function(DB){return arguments.length?(zB=+DB,wB):+zB},alphaTarget:function(DB){return arguments.length?(TB=+DB,wB):TB},velocityDecay:function(DB){return arguments.length?(RB=1-DB,wB):1-RB},force:function(DB,qB){return 1<arguments.length?(null==qB?PB.remove(DB):PB.set(DB,kB(qB)),wB):PB.get(DB)},find:function(DB,qB,LB){var UB=0,FB=bB.length,jB,IB,$B,NB,BB;for(null==LB?LB=Infinity:LB*=LB,UB=0;UB<FB;++UB)NB=bB[UB],jB=DB-NB.x,IB=qB-NB.y,$B=jB*jB+IB*IB,$B<LB&&(BB=NB,LB=$B);return BB},on:function(DB,qB){return 1<arguments.length?(OB.on(DB,qB),wB):OB.on(DB)}}}function Hy(bB){Rl.call(this,null,bB)}function Xy(bB,_B){return function(){bB.touch(_B).run()}}function Vy(bB,_B){var xB=By(bB),vB=!1,kB=xB.stop,wB=xB.restart;return xB.stopped=function(){return vB},xB.restart=function(){return vB=!1,wB()},xB.stop=function(){return vB=!0,kB()},Jy(xB,_B,!0).on('end',function(){vB=!0})}function Jy(bB,_B,xB){var vB=Pe(_B.forces),kB,wB,SB;for(kB=0,wB=UF.length;kB<wB;++kB)SB=UF[kB],SB!==LF&&_B.modified(SB)&&bB[SB](_B[SB]);for(kB=0,wB=vB.length;kB<wB;++kB)(xB||_B.modified(LF,kB))&&bB.force(LF+kB,Zy(vB[kB]));for(wB=bB.numForces||0;kB<wB;++kB)bB.force(LF+kB,null);return bB.numForces=vB.length,bB}function Zy(bB){var _B,xB;for(xB in qF.hasOwnProperty(bB.force)||ke('Unrecognized force: '+bB.force),_B=qF[bB.force](),bB)Oe(_B[xB])&&_B[xB](bB[xB]);return _B}function Ky(bB,_B){return bB.parent===_B.parent?1:2}function Qy(bB){return bB.reduce(eb,0)/bB.length}function eb(bB,_B){return bB+_B.x}function tb(bB){return 1+bB.reduce(ib,0)}function ib(bB,_B){return Math.max(bB,_B.y)}function rb(bB){for(var _B;_B=bB.children;)bB=_B[0];return bB}function ob(bB){for(var _B;_B=bB.children;)bB=_B[_B.length-1];return bB}function sb(bB){var _B=0,xB=bB.children,vB=xB&&xB.length;if(!vB)_B=1;else for(;0<=--vB;)_B+=xB[vB].value;bB.value=_B}function Sb(bB,_B){if(bB===_B)return bB;var xB=bB.ancestors(),vB=_B.ancestors(),kB=null;for(bB=xB.pop(),_B=vB.pop();bB===_B;)kB=bB,bB=xB.pop(),_B=vB.pop();return kB}function Pb(bB,_B){var xB=new qb(bB),vB=+bB.value&&(xB.value=bB.value),wB=[xB],kB,SB,CB,zB,TB;for(null==_B&&(_B=Ob);kB=wB.pop();)if(vB&&(kB.value=+kB.data.value),(CB=_B(kB.data))&&(TB=CB.length))for(kB.children=Array(TB),zB=TB-1;0<=zB;--zB)wB.push(SB=kB.children[zB]=new qb(CB[zB])),SB.parent=kB,SB.depth=kB.depth+1;return xB.eachBefore(Db)}function Ob(bB){return bB.children}function Mb(bB){bB.data=bB.data.data}function Db(bB){var _B=0;do bB.height=_B;while((bB=bB.parent)&&bB.height<++_B)}function qb(bB){this.data=bB,this.depth=this.height=0,this.parent=null}function Lb(bB){this._=bB,this.next=null}function Ub(bB){for(var xB=(bB=bB.slice()).length,vB=null,kB=vB,_B,wB;xB;)wB=new Lb(bB[xB-1]),kB=kB?kB.next=wB:vB=wB,bB[_B]=bB[--xB];return{head:vB,tail:kB}}function Fb(bB){return Ib(Ub(bB),[])}function jb(bB,_B){var xB=_B.x-bB.x,vB=_B.y-bB.y,kB=bB.r-_B.r;return kB*kB+1e-6>xB*xB+vB*vB}function Ib(bB,_B){var vB=null,kB=bB.head,xB,wB,SB;switch(_B.length){case 1:xB=$b(_B[0]);break;case 2:xB=Nb(_B[0],_B[1]);break;case 3:xB=Bb(_B[0],_B[1],_B[2]);}for(;kB;)SB=kB._,wB=kB.next,xB&&jb(xB,SB)?vB=kB:(vB?(bB.tail=vB,vB.next=null):bB.head=bB.tail=null,_B.push(SB),xB=Ib(bB,_B),_B.pop(),bB.head?(kB.next=bB.head,bB.head=kB):(kB.next=null,bB.head=bB.tail=kB),vB=bB.tail,vB.next=wB),kB=wB;return bB.tail=vB,xB}function $b(bB){return{x:bB.x,y:bB.y,r:bB.r}}function Nb(bB,_B){var xB=bB.x,vB=bB.y,kB=bB.r,wB=_B.x,SB=_B.y,CB=_B.r,zB=wB-xB,TB=SB-vB,RB=CB-kB,PB=Math.sqrt(zB*zB+TB*TB);return{x:(xB+wB+zB/PB*RB)/2,y:(vB+SB+TB/PB*RB)/2,r:(PB+kB+CB)/2}}function Bb(bB,_B,xB){var vB=bB.x,kB=bB.y,wB=bB.r,SB=_B.x,CB=_B.y,zB=_B.r,TB=xB.x,RB=xB.y,PB=xB.r,AB=2*(vB-SB),OB=2*(kB-CB),MB=2*(zB-wB),DB=vB*vB+kB*kB-wB*wB-SB*SB-CB*CB+zB*zB,qB=2*(vB-TB),LB=2*(kB-RB),UB=2*(PB-wB),FB=vB*vB+kB*kB-wB*wB-TB*TB-RB*RB+PB*PB,jB=qB*OB-AB*LB,IB=(OB*FB-LB*DB)/jB-vB,$B=(LB*MB-OB*UB)/jB,NB=(qB*DB-AB*FB)/jB-kB,BB=(AB*UB-qB*MB)/jB,YB=$B*$B+BB*BB-1,GB=2*(IB*$B+NB*BB+wB),HB=(-GB-Math.sqrt(GB*GB-4*YB*(IB*IB+NB*NB-wB*wB)))/(2*YB);return{x:IB+$B*HB+vB,y:NB+BB*HB+kB,r:HB}}function Yb(bB,_B,xB){var vB=bB.x,kB=bB.y,wB=_B.r+xB.r,SB=bB.r+xB.r,CB=_B.x-vB,zB=_B.y-kB,TB=CB*CB+zB*zB;if(TB){var RB=0.5+((SB*=SB)-(wB*=wB))/(2*TB),PB=Math.sqrt(Math.max(0,2*wB*(SB+TB)-(SB-=TB)*SB-wB*wB))/(2*TB);xB.x=vB+RB*CB+PB*zB,xB.y=kB+RB*zB-PB*CB}else xB.x=vB+SB,xB.y=kB}function Gb(bB,_B){var xB=_B.x-bB.x,vB=_B.y-bB.y,kB=bB.r+_B.r;return kB*kB-1e-6>xB*xB+vB*vB}function Wb(bB,_B,xB){var vB=bB._,kB=bB.next._,wB=vB.r+kB.r,SB=(vB.x*kB.r+kB.x*vB.r)/wB-_B,CB=(vB.y*kB.r+kB.y*vB.r)/wB-xB;return SB*SB+CB*CB}function Hb(bB){this._=bB,this.next=null,this.previous=null}function Xb(bB){if(!(kB=bB.length))return 0;var _B,xB,vB,kB;if(_B=bB[0],_B.x=0,_B.y=0,!(1<kB))return _B.r;if(xB=bB[1],_B.x=-xB.r,xB.x=_B.r,xB.y=0,!(2<kB))return _B.r+xB.r;Yb(xB,_B,vB=bB[2]);var wB=_B.r*_B.r,SB=xB.r*xB.r,CB=vB.r*vB.r,zB=wB+SB+CB,TB=wB*_B.x+SB*xB.x+CB*vB.x,RB=wB*_B.y+SB*xB.y+CB*vB.y,PB,AB,OB,MB,DB,qB,LB;_B=new Hb(_B),xB=new Hb(xB),vB=new Hb(vB),_B.next=vB.previous=xB,xB.next=_B.previous=vB,vB.next=xB.previous=_B;pack:for(OB=3;OB<kB;++OB){Yb(_B._,xB._,vB=bB[OB]),vB=new Hb(vB),MB=xB.next,DB=_B.previous,qB=xB._.r,LB=_B._.r;do if(qB<=LB){if(Gb(MB._,vB._)){xB=MB,_B.next=xB,xB.previous=_B,--OB;continue pack}qB+=MB._.r,MB=MB.next}else{if(Gb(DB._,vB._)){_B=DB,_B.next=xB,xB.previous=_B,--OB;continue pack}LB+=DB._.r,DB=DB.previous}while(MB!==DB.next);for(vB.previous=_B,vB.next=xB,_B.next=xB.previous=xB=vB,zB+=CB=vB._.r*vB._.r,TB+=CB*vB._.x,RB+=CB*vB._.y,wB=Wb(_B,PB=TB/zB,AB=RB/zB);(vB=vB.next)!==xB;)(CB=Wb(vB,PB,AB))<wB&&(_B=vB,wB=CB);xB=_B.next}for(_B=[xB._],vB=xB;(vB=vB.next)!==xB;)_B.push(vB._);for(vB=Fb(_B),OB=0;OB<kB;++OB)_B=bB[OB],_B.x-=vB.x,_B.y-=vB.y;return vB.r}function Vb(bB){return null==bB?null:Jb(bB)}function Jb(bB){if('function'!==typeof bB)throw new Error;return bB}function Zb(){return 0}function Kb(bB){return function(){return bB}}function Qb(bB){return Math.sqrt(bB.value)}function t_(bB){return function(_B){_B.children||(_B.r=Math.max(0,+bB(_B)||0))}}function n_(bB,_B){return function(xB){if(vB=xB.children){var wB=vB.length,SB=bB(xB)*_B||0,vB,kB,CB;if(SB)for(kB=0;kB<wB;++kB)vB[kB].r+=SB;if(CB=Xb(vB),SB)for(kB=0;kB<wB;++kB)vB[kB].r-=SB;xB.r=CB+SB}}}function a_(bB){return function(_B){var xB=_B.parent;_B.r*=bB,xB&&(_B.x=xB.x+bB*_B.x,_B.y=xB.y+bB*_B.y)}}function i_(bB){bB.x0=Math.round(bB.x0),bB.y0=Math.round(bB.y0),bB.x1=Math.round(bB.x1),bB.y1=Math.round(bB.y1)}function d_(bB,_B,xB,vB,kB){for(var wB=bB.children,CB=-1,zB=wB.length,TB=bB.value&&(vB-_B)/bB.value,SB;++CB<zB;)SB=wB[CB],SB.y0=xB,SB.y1=kB,SB.x0=_B,SB.x1=_B+=SB.value*TB}function o_(bB){return bB.id}function l_(bB){return bB.parentId}function s_(){function bB(vB){var SB=vB.length,RB=Array(SB),OB={},kB,wB,CB,zB,TB,PB,AB;for(wB=0;wB<SB;++wB)kB=vB[wB],TB=RB[wB]=new qb(kB),null!=(PB=_B(kB,wB,vB))&&(PB+='')&&(AB=NF+(TB.id=PB),OB[AB]=AB in OB?YF:TB);for(wB=0;wB<SB;++wB)if(TB=RB[wB],PB=xB(vB[wB],wB,vB),null==PB||!(PB+='')){if(CB)throw new Error('multiple roots');CB=TB}else{if(zB=OB[NF+PB],!zB)throw new Error('missing: '+PB);if(zB===YF)throw new Error('ambiguous: '+PB);zB.children?zB.children.push(TB):zB.children=[TB],TB.parent=zB}if(!CB)throw new Error('no root');if(CB.parent=BF,CB.eachBefore(function(MB){MB.depth=MB.parent.depth+1,--SB}).eachBefore(Db),CB.parent=null,0<SB)throw new Error('cycle');return CB}var _B=o_,xB=l_;return bB.id=function(vB){return arguments.length?(_B=Jb(vB),bB):_B},bB.parentId=function(vB){return arguments.length?(xB=Jb(vB),bB):xB},bB}function f_(bB,_B){return bB.parent===_B.parent?1:2}function c_(bB){var _B=bB.children;return _B?_B[0]:bB.t}function u_(bB){var _B=bB.children;return _B?_B[_B.length-1]:bB.t}function p_(bB,_B,xB){var vB=xB/(_B.i-bB.i);_B.c-=vB,_B.s+=xB,bB.c+=vB,_B.z+=xB,_B.m+=xB}function g_(bB){for(var _B=0,xB=0,vB=bB.children,kB=vB.length,wB;0<=--kB;)wB=vB[kB],wB.z+=_B,wB.m+=_B,_B+=wB.s+(xB+=wB.c)}function m_(bB,_B,xB){return bB.a.parent===_B.parent?bB.a:xB}function h_(bB,_B){this._=bB,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=_B}function b_(bB){for(var _B=new h_(bB,0),vB=[_B],xB,kB,wB,SB,CB;xB=vB.pop();)if(wB=xB._.children)for(xB.children=Array(CB=wB.length),SB=CB-1;0<=SB;--SB)vB.push(kB=xB.children[SB]=new h_(wB[SB],SB)),kB.parent=xB;return(_B.parent=new h_(null,0)).children=[_B],_B}function k_(bB,_B,xB,vB,kB){for(var wB=bB.children,CB=-1,zB=wB.length,TB=bB.value&&(kB-xB)/bB.value,SB;++CB<zB;)SB=wB[CB],SB.x0=_B,SB.x1=vB,SB.y0=xB,SB.y1=xB+=SB.value*TB}function w_(bB,_B,xB,vB,kB,wB){for(var SB=[],CB=_B.children,RB=0,PB=0,AB=CB.length,DB=_B.value,zB,TB,OB,MB,qB,LB,UB,FB,jB,IB,$B;RB<AB;){OB=kB-xB,MB=wB-vB;do qB=CB[PB++].value;while(!qB&&PB<AB);for(LB=UB=qB,IB=Math.max(MB/OB,OB/MB)/(DB*bB),$B=qB*qB*IB,jB=Math.max(UB/$B,$B/LB);PB<AB;++PB){if(qB+=TB=CB[PB].value,TB<LB&&(LB=TB),TB>UB&&(UB=TB),$B=qB*qB*IB,FB=Math.max(UB/$B,$B/LB),FB>jB){qB-=TB;break}jB=FB}SB.push(zB={value:qB,dice:OB<MB,children:CB.slice(RB,PB)}),zB.dice?d_(zB,xB,vB,kB,DB?vB+=MB*qB/DB:wB):k_(zB,xB,vB,DB?xB+=OB*qB/DB:kB,wB),DB-=qB,RB=PB}return SB}function E_(){function bB(AB){return AB.x0=AB.y0=0,AB.x1=kB,AB.y1=wB,AB.eachBefore(_B),SB=[0],vB&&AB.eachBefore(i_),AB}function _B(AB){var OB=SB[AB.depth],MB=AB.x0+OB,DB=AB.y0+OB,qB=AB.x1-OB,LB=AB.y1-OB;qB<MB&&(MB=qB=(MB+qB)/2),LB<DB&&(DB=LB=(DB+LB)/2),AB.x0=MB,AB.y0=DB,AB.x1=qB,AB.y1=LB,AB.children&&(OB=SB[AB.depth+1]=CB(AB)/2,MB+=PB(AB)-OB,DB+=zB(AB)-OB,qB-=TB(AB)-OB,LB-=RB(AB)-OB,qB<MB&&(MB=qB=(MB+qB)/2),LB<DB&&(DB=LB=(DB+LB)/2),xB(AB,MB,DB,qB,LB))}var xB=WF,vB=!1,kB=1,wB=1,SB=[0],CB=Zb,zB=Zb,TB=Zb,RB=Zb,PB=Zb;return bB.round=function(AB){return arguments.length?(vB=!!AB,bB):vB},bB.size=function(AB){return arguments.length?(kB=+AB[0],wB=+AB[1],bB):[kB,wB]},bB.tile=function(AB){return arguments.length?(xB=Jb(AB),bB):xB},bB.padding=function(AB){return arguments.length?bB.paddingInner(AB).paddingOuter(AB):bB.paddingInner()},bB.paddingInner=function(AB){return arguments.length?(CB='function'===typeof AB?AB:Kb(+AB),bB):CB},bB.paddingOuter=function(AB){return arguments.length?bB.paddingTop(AB).paddingRight(AB).paddingBottom(AB).paddingLeft(AB):bB.paddingTop()},bB.paddingTop=function(AB){return arguments.length?(zB='function'===typeof AB?AB:Kb(+AB),bB):zB},bB.paddingRight=function(AB){return arguments.length?(TB='function'===typeof AB?AB:Kb(+AB),bB):TB},bB.paddingBottom=function(AB){return arguments.length?(RB='function'===typeof AB?AB:Kb(+AB),bB):RB},bB.paddingLeft=function(AB){return arguments.length?(PB='function'===typeof AB?AB:Kb(+AB),bB):PB},bB}function z_(bB){Rl.call(this,null,bB)}function T_(bB){return bB.values}function R_(bB){Rl.call(this,null,bB)}function P_(bB){Rl.call(this,{},bB)}function A_(bB){var _B;return bB.parent&&(_B=bB.parent.data)&&null!=Fo(_B)&&_B}function D_(bB){Rl.call(this,null,bB)}function q_(bB,_B,xB){for(var kB=0,wB=_B.length,vB;kB<wB;++kB)vB=_B[kB],vB in xB&&bB[vB](xB[vB])}function L_(bB,_B,xB){for(var vB=bB.data,kB=0,wB=_B.length-1;kB<wB;++kB)vB[xB[kB]]=bB[_B[kB]];vB[xB[wB]]=bB.children?bB.children.length:0}function U_(bB){D_.call(this,bB)}function F_(bB){D_.call(this,bB)}function j_(bB){D_.call(this,bB)}function I_(bB){D_.call(this,bB)}function $_(bB){return function(){return bB}}function N_(bB){return bB[0]}function B_(bB){return bB[1]}function Y_(){this._=null}function G_(bB){bB.U=bB.C=bB.L=bB.R=bB.P=bB.N=null}function W_(bB,_B){var xB=_B,vB=_B.R,kB=xB.U;kB?kB.L===xB?kB.L=vB:kB.R=vB:bB._=vB,vB.U=kB,xB.U=vB,xB.R=vB.L,xB.R&&(xB.R.U=xB),vB.L=xB}function H_(bB,_B){var xB=_B,vB=_B.L,kB=xB.U;kB?kB.L===xB?kB.L=vB:kB.R=vB:bB._=vB,vB.U=kB,xB.U=vB,xB.L=vB.R,xB.L&&(xB.L.U=xB),vB.R=xB}function X_(bB){for(;bB.L;)bB=bB.L;return bB}function V_(bB,_B,xB,vB){var kB=[null,null],wB=_j.push(kB)-1;return kB.left=bB,kB.right=_B,xB&&Z_(kB,bB,_B,xB),vB&&Z_(kB,_B,bB,vB),hj[bB.index].halfedges.push(wB),hj[_B.index].halfedges.push(wB),kB}function J_(bB,_B,xB){var vB=[_B,xB];return vB.left=bB,vB}function Z_(bB,_B,xB,vB){bB[0]||bB[1]?bB.left===xB?bB[1]=vB:bB[0]=vB:(bB[0]=vB,bB.left=_B,bB.right=xB)}function K_(bB,_B,xB,vB,kB){var wB=bB[0],SB=bB[1],CB=wB[0],zB=wB[1],TB=SB[0],RB=SB[1],PB=0,AB=1,OB=TB-CB,MB=RB-zB,DB;if(DB=_B-CB,OB||!(0<DB)){if(DB/=OB,0>OB){if(DB<PB)return;DB<AB&&(AB=DB)}else if(0<OB){if(DB>AB)return;DB>PB&&(PB=DB)}if(DB=vB-CB,OB||!(0>DB)){if(DB/=OB,0>OB){if(DB>AB)return;DB>PB&&(PB=DB)}else if(0<OB){if(DB<PB)return;DB<AB&&(AB=DB)}if(DB=xB-zB,MB||!(0<DB)){if(DB/=MB,0>MB){if(DB<PB)return;DB<AB&&(AB=DB)}else if(0<MB){if(DB>AB)return;DB>PB&&(PB=DB)}if(DB=kB-zB,MB||!(0>DB)){if(DB/=MB,0>MB){if(DB>AB)return;DB>PB&&(PB=DB)}else if(0<MB){if(DB<PB)return;DB<AB&&(AB=DB)}return 0<PB||1>AB?(0<PB&&(bB[0]=[CB+PB*OB,zB+PB*MB]),1>AB&&(bB[1]=[CB+AB*OB,zB+AB*MB]),!0):!0}}}}}function Q_(bB,_B,xB,vB,kB){var wB=bB[1];if(wB)return!0;var SB=bB[0],CB=bB.left,zB=bB.right,TB=CB[0],RB=CB[1],PB=zB[0],AB=zB[1],OB=(TB+PB)/2,DB,qB;if(AB===RB){if(OB<_B||OB>=vB)return;if(TB>PB){if(!SB)SB=[OB,xB];else if(SB[1]>=kB)return;wB=[OB,kB]}else{if(!SB)SB=[OB,kB];else if(SB[1]<xB)return;wB=[OB,xB]}}else if(DB=(TB-PB)/(AB-RB),qB=(RB+AB)/2-DB*OB,-1>DB||1<DB){if(TB>PB){if(!SB)SB=[(xB-qB)/DB,xB];else if(SB[1]>=kB)return;wB=[(kB-qB)/DB,kB]}else{if(!SB)SB=[(kB-qB)/DB,kB];else if(SB[1]<xB)return;wB=[(xB-qB)/DB,xB]}}else if(RB<AB){if(!SB)SB=[_B,DB*_B+qB];else if(SB[0]>=vB)return;wB=[vB,DB*vB+qB]}else{if(!SB)SB=[vB,DB*vB+qB];else if(SB[0]<_B)return;wB=[_B,DB*_B+qB]}return bB[0]=SB,bB[1]=wB,!0}function ex(bB,_B,xB,vB){for(var kB=_j.length,wB;kB--;)Q_(wB=_j[kB],bB,_B,xB,vB)&&K_(wB,bB,_B,xB,vB)&&(Math.abs(wB[0][0]-wB[1][0])>uj||Math.abs(wB[0][1]-wB[1][1])>uj)||delete _j[kB]}function mx(bB){return hj[bB.index]={site:bB,halfedges:[]}}function hx(bB,_B){var xB=bB.site,vB=_B.left,kB=_B.right;return(xB===kB&&(kB=vB,vB=xB),kB)?Math.atan2(kB[1]-vB[1],kB[0]-vB[0]):(xB===vB?(vB=_B[1],kB=_B[0]):(vB=_B[0],kB=_B[1]),Math.atan2(vB[0]-kB[0],kB[1]-vB[1]))}function yx(bB,_B){return _B[+(_B.left!==bB.site)]}function xx(bB,_B){return _B[+(_B.left===bB.site)]}function wx(){for(var bB=0,_B=hj.length,xB,vB,kB,wB;bB<_B;++bB)if((xB=hj[bB])&&(wB=(vB=xB.halfedges).length)){var SB=Array(wB),CB=Array(wB);for(kB=0;kB<wB;++kB)SB[kB]=kB,CB[kB]=hx(xB,_j[vB[kB]]);for(SB.sort(function(zB,TB){return CB[TB]-CB[zB]}),kB=0;kB<wB;++kB)CB[kB]=vB[SB[kB]];for(kB=0;kB<wB;++kB)vB[kB]=CB[kB]}}function Ex(bB,_B,xB,vB){var kB=hj.length,LB=!0,wB,SB,CB,zB,TB,RB,PB,AB,OB,MB,DB,qB;for(wB=0;wB<kB;++wB)if(SB=hj[wB]){for(CB=SB.site,TB=SB.halfedges,zB=TB.length;zB--;)_j[TB[zB]]||TB.splice(zB,1);for(zB=0,RB=TB.length;zB<RB;)MB=xx(SB,_j[TB[zB]]),DB=MB[0],qB=MB[1],PB=yx(SB,_j[TB[++zB%RB]]),AB=PB[0],OB=PB[1],(Math.abs(DB-AB)>uj||Math.abs(qB-OB)>uj)&&(TB.splice(zB,0,_j.push(J_(CB,MB,Math.abs(DB-bB)<uj&&vB-qB>uj?[bB,Math.abs(AB-bB)<uj?OB:vB]:Math.abs(qB-vB)<uj&&xB-DB>uj?[Math.abs(OB-vB)<uj?AB:xB,vB]:Math.abs(DB-xB)<uj&&qB-_B>uj?[xB,Math.abs(AB-xB)<uj?OB:_B]:Math.abs(qB-_B)<uj&&DB-bB>uj?[Math.abs(OB-_B)<uj?AB:bB,_B]:null))-1),++RB);RB&&(LB=!1)}if(LB){var IB=Infinity,UB,FB,jB;for(wB=0,LB=null;wB<kB;++wB)(SB=hj[wB])&&(CB=SB.site,UB=CB[0]-bB,FB=CB[1]-_B,jB=UB*UB+FB*FB,jB<IB&&(IB=jB,LB=SB));if(LB){var $B=[bB,_B],NB=[bB,vB],BB=[xB,vB],YB=[xB,_B];LB.halfedges.push(_j.push(J_(CB=LB.site,$B,NB))-1,_j.push(J_(CB,NB,BB))-1,_j.push(J_(CB,BB,YB))-1,_j.push(J_(CB,YB,$B))-1)}}for(wB=0;wB<kB;++wB)(SB=hj[wB])&&(SB.halfedges.length||delete hj[wB])}function Sx(){G_(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cx(bB){var _B=bB.P,xB=bB.N;if(_B&&xB){var vB=_B.site,kB=bB.site,wB=xB.site;if(vB!==wB){var SB=kB[0],CB=kB[1],zB=vB[0]-SB,TB=vB[1]-CB,RB=wB[0]-SB,PB=wB[1]-CB,AB=2*(zB*PB-TB*RB);if(!(AB>=-gj)){var OB=zB*zB+TB*TB,MB=RB*RB+PB*PB,DB=(PB*OB-TB*MB)/AB,qB=(zB*MB-RB*OB)/AB,LB=lj.pop()||new Sx;LB.arc=bB,LB.site=kB,LB.x=DB+SB,LB.y=(LB.cy=qB+CB)+Math.sqrt(DB*DB+qB*qB),bB.circle=LB;for(var UB=null,FB=bj._;FB;)if(LB.y<FB.y||LB.y===FB.y&&LB.x<=FB.x){if(FB.L)FB=FB.L;else{UB=FB.P;break}}else if(FB.R)FB=FB.R;else{UB=FB;break}bj.insert(UB,LB),UB||(fj=LB)}}}}function zx(bB){var _B=bB.circle;_B&&(!_B.P&&(fj=_B.N),bj.remove(_B),lj.push(_B),G_(_B),bB.circle=null)}function Tx(){G_(this),this.edge=this.site=this.circle=null}function Rx(bB){var _B=cj.pop()||new Tx;return _B.site=bB,_B}function Px(bB){zx(bB),mj.remove(bB),cj.push(bB),G_(bB)}function Ax(bB){var _B=bB.circle,xB=_B.x,vB=_B.cy,kB=[xB,vB],wB=bB.P,SB=bB.N,CB=[bB];Px(bB);for(var zB=wB;zB.circle&&Math.abs(xB-zB.circle.x)<uj&&Math.abs(vB-zB.circle.cy)<uj;)wB=zB.P,CB.unshift(zB),Px(zB),zB=wB;CB.unshift(zB),zx(zB);for(var TB=SB;TB.circle&&Math.abs(xB-TB.circle.x)<uj&&Math.abs(vB-TB.circle.cy)<uj;)SB=TB.N,CB.push(TB),Px(TB),TB=SB;CB.push(TB),zx(TB);var RB=CB.length,PB;for(PB=1;PB<RB;++PB)TB=CB[PB],zB=CB[PB-1],Z_(TB.edge,zB.site,TB.site,kB);zB=CB[0],TB=CB[RB-1],TB.edge=V_(zB.site,TB.site,null,kB),Cx(zB),Cx(TB)}function Ox(bB){for(var _B=bB[0],xB=bB[1],CB=mj._,vB,kB,wB,SB;CB;)if(wB=Mx(CB,xB)-_B,wB>uj)CB=CB.L;else if(SB=_B-Dx(CB,xB),SB>uj){if(!CB.R){vB=CB;break}CB=CB.R}else{wB>-uj?(vB=CB.P,kB=CB):SB>-uj?(vB=CB,kB=CB.N):vB=kB=CB;break}mx(bB);var zB=Rx(bB);if(mj.insert(vB,zB),vB||kB){if(vB===kB)return zx(vB),kB=Rx(vB.site),mj.insert(zB,kB),zB.edge=kB.edge=V_(vB.site,zB.site),Cx(vB),void Cx(kB);if(!kB)return void(zB.edge=V_(vB.site,zB.site));zx(vB),zx(kB);var TB=vB.site,RB=TB[0],PB=TB[1],AB=bB[0]-RB,OB=bB[1]-PB,MB=kB.site,DB=MB[0]-RB,qB=MB[1]-PB,LB=2*(AB*qB-OB*DB),UB=AB*AB+OB*OB,FB=DB*DB+qB*qB,jB=[(qB*UB-OB*FB)/LB+RB,(AB*FB-DB*UB)/LB+PB];Z_(kB.edge,TB,MB,jB),zB.edge=V_(TB,bB,null,jB),kB.edge=V_(bB,MB,null,jB),Cx(vB),Cx(kB)}}function Mx(bB,_B){var xB=bB.site,vB=xB[0],kB=xB[1],wB=kB-_B;if(!wB)return vB;var SB=bB.P;if(!SB)return-Infinity;xB=SB.site;var CB=xB[0],zB=xB[1],TB=zB-_B;if(!TB)return CB;var RB=CB-vB,PB=1/wB-1/TB,AB=RB/TB;return PB?(-AB+Math.sqrt(AB*AB-2*PB*(RB*RB/(-2*TB)-zB+TB/2+kB-wB/2)))/PB+vB:(vB+CB)/2}function Dx(bB,_B){var xB=bB.N;if(xB)return Mx(xB,_B);var vB=bB.site;return vB[1]===_B?vB[0]:Infinity}function qx(bB,_B,xB){return(bB[0]-xB[0])*(_B[1]-bB[1])-(bB[0]-_B[0])*(xB[1]-bB[1])}function Lx(bB,_B){return _B[1]-bB[1]||_B[0]-bB[0]}function Ux(bB,_B){var xB=bB.sort(Lx).pop(),vB,kB,wB;for(_j=[],hj=Array(bB.length),mj=new Y_,bj=new Y_;;)if(wB=fj,xB&&(!wB||xB[1]<wB.y||xB[1]===wB.y&&xB[0]<wB.x))(xB[0]!==vB||xB[1]!==kB)&&(Ox(xB),vB=xB[0],kB=xB[1]),xB=bB.pop();else if(wB)Ax(wB.arc);else break;if(wx(),_B){var SB=+_B[0][0],CB=+_B[0][1],zB=+_B[1][0],TB=+_B[1][1];ex(SB,CB,zB,TB),Ex(SB,CB,zB,TB)}this.edges=_j,this.cells=hj,mj=bj=_j=hj=null}function Fx(){function bB(kB){return new Ux(kB.map(function(wB,SB){var CB=[Math.round(_B(wB,SB,kB)/uj)*uj,Math.round(xB(wB,SB,kB)/uj)*uj];return CB.index=SB,CB.data=wB,CB}),vB)}var _B=N_,xB=B_,vB=null;return bB.polygons=function(kB){return bB(kB).polygons()},bB.links=function(kB){return bB(kB).links()},bB.triangles=function(kB){return bB(kB).triangles()},bB.x=function(kB){return arguments.length?(_B='function'===typeof kB?kB:$_(+kB),bB):_B},bB.y=function(kB){return arguments.length?(xB='function'===typeof kB?kB:$_(+kB),bB):xB},bB.extent=function(kB){return arguments.length?(vB=null==kB?null:[[+kB[0][0],+kB[0][1]],[+kB[1][0],+kB[1][1]]],bB):vB&&[[vB[0][0],vB[0][1]],[vB[1][0],vB[1][1]]]},bB.size=function(kB){return arguments.length?(vB=null==kB?null:[[0,0],[+kB[0],+kB[1]]],bB):vB&&[vB[1][0]-vB[0][0],vB[1][1]-vB[0][1]]},bB}function jx(bB){Rl.call(this,null,bB)}function Ix(){function bB(DB){DB.width=DB.height=1;var qB=Math.sqrt(DB.getContext('2d').getImageData(0,0,1,1).data.length>>2);DB.width=(Sj<<5)/qB,DB.height=Cj/qB;var LB=DB.getContext('2d');return LB.fillStyle=LB.strokeStyle='red',LB.textAlign='center',{context:LB,ratio:qB}}function _B(DB,qB,LB){for(var UB=qB.x,FB=qB.y,jB=Math.sqrt(xB[0]*xB[0]+xB[1]*xB[1]),IB=RB(xB),$B=.5>AB()?1:-1,NB=-$B,BB,YB,GB;(BB=IB(NB+=$B))&&(YB=~~BB[0],GB=~~BB[1],!(Math.min(Math.abs(YB),Math.abs(GB))>=jB));)if(qB.x=UB+YB,qB.y=FB+GB,!(0>qB.x+qB.x0||0>qB.y+qB.y0||qB.x+qB.x1>xB[0]||qB.y+qB.y1>xB[1])&&(!LB||!Nx(qB,DB,xB[0]))&&(!LB||Yx(qB,LB))){for(var WB=qB.sprite,HB=qB.width>>5,XB=xB[0]>>5,VB=qB.x-(HB<<4),JB=127&VB,KB=qB.y1-qB.y0,QB=(qB.y+qB.y0)*XB+(VB>>5),tY=0,eY;tY<KB;tY++){eY=0;for(var nY=0;nY<=HB;nY++)DB[QB+nY]|=eY<<32-JB|(nY<HB?(eY=WB[tY*HB+nY])>>>JB:0);QB+=XB}return qB.sprite=null,!0}return!1}var xB=[256,256],RB=Gx,PB=[],AB=Math.random,OB={},vB,kB,wB,SB,CB,zB,TB;return OB.layout=function(){for(var DB=bB(Xx()),qB=Hx((xB[0]>>5)*xB[1]),LB=null,UB=PB.length,FB=-1,jB=[],IB=PB.map(function(NB){return{text:vB(NB),font:kB(NB),style:SB(NB),weight:CB(NB),rotate:zB(NB),size:~~wB(NB),padding:TB(NB),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:NB}}).sort(function(NB,BB){return BB.size-NB.size}),$B;++FB<UB;)$B=IB[FB],$B.x=xB[0]*(AB()+.5)>>1,$B.y=xB[1]*(AB()+.5)>>1,$x(DB,$B,IB,FB),$B.hasText&&_B(qB,$B,LB)&&(jB.push($B),LB?Bx(LB,$B):LB=[{x:$B.x+$B.x0,y:$B.y+$B.y0},{x:$B.x+$B.x1,y:$B.y+$B.y1}],$B.x-=xB[0]>>1,$B.y-=xB[1]>>1);return jB},OB.words=function(DB){return arguments.length?(PB=DB,OB):PB},OB.size=function(DB){return arguments.length?(xB=[+DB[0],+DB[1]],OB):xB},OB.font=function(DB){return arguments.length?(kB=Vx(DB),OB):kB},OB.fontStyle=function(DB){return arguments.length?(SB=Vx(DB),OB):SB},OB.fontWeight=function(DB){return arguments.length?(CB=Vx(DB),OB):CB},OB.rotate=function(DB){return arguments.length?(zB=Vx(DB),OB):zB},OB.text=function(DB){return arguments.length?(vB=Vx(DB),OB):vB},OB.spiral=function(DB){return arguments.length?(RB=zj[DB]||DB,OB):RB},OB.fontSize=function(DB){return arguments.length?(wB=Vx(DB),OB):wB},OB.padding=function(DB){return arguments.length?(TB=Vx(DB),OB):TB},OB.random=function(DB){return arguments.length?(AB=DB,OB):AB},OB}function $x(bB,_B,xB,vB){if(!_B.sprite){var kB=bB.context,wB=bB.ratio;kB.clearRect(0,0,(Sj<<5)/wB,Cj/wB);var SB=0,CB=0,zB=0,TB=xB.length,RB,PB,AB,OB,MB;for(--vB;++vB<TB;){if(_B=xB[vB],kB.save(),kB.font=_B.style+' '+_B.weight+' '+~~((_B.size+1)/wB)+'px '+_B.font,RB=kB.measureText(_B.text+'m').width*wB,AB=_B.size<<1,_B.rotate){var DB=Math.sin(_B.rotate*Ej),qB=Math.cos(_B.rotate*Ej),LB=RB*qB,UB=RB*DB,FB=AB*qB,jB=AB*DB;RB=Math.max(Math.abs(LB+jB),Math.abs(LB-jB))+31>>5<<5,AB=~~Math.max(Math.abs(UB+FB),Math.abs(UB-FB))}else RB=RB+31>>5<<5;if(AB>zB&&(zB=AB),SB+RB>=Sj<<5&&(SB=0,CB+=zB,zB=0),CB+AB>=Cj)break;kB.translate((SB+(RB>>1))/wB,(CB+(AB>>1))/wB),_B.rotate&&kB.rotate(_B.rotate*Ej),kB.fillText(_B.text,0,0),_B.padding&&(kB.lineWidth=2*_B.padding,kB.strokeText(_B.text,0,0)),kB.restore(),_B.width=RB,_B.height=AB,_B.xoff=SB,_B.yoff=CB,_B.x1=RB>>1,_B.y1=AB>>1,_B.x0=-_B.x1,_B.y0=-_B.y1,_B.hasText=!0,SB+=RB}for(var IB=kB.getImageData(0,0,(Sj<<5)/wB,Cj/wB).data,$B=[];0<=--vB;)if(_B=xB[vB],_B.hasText){for(RB=_B.width,PB=RB>>5,AB=_B.y1-_B.y0,OB=0;OB<AB*PB;OB++)$B[OB]=0;if(SB=_B.xoff,null==SB)return;CB=_B.yoff;var NB=0,BB=-1;for(MB=0;MB<AB;MB++){for(OB=0;OB<RB;OB++){var YB=PB*MB+(OB>>5),GB=IB[(CB+MB)*(Sj<<5)+(SB+OB)<<2]?1<<31-OB%32:0;$B[YB]|=GB,NB|=GB}NB?BB=MB:(_B.y0++,AB--,MB--,CB++)}_B.y1=_B.y0+BB,_B.sprite=$B.slice(0,(_B.y1-_B.y0)*PB)}}}function Nx(bB,_B,xB){xB>>=5;for(var vB=bB.sprite,kB=bB.width>>5,wB=bB.x-(kB<<4),SB=127&wB,zB=bB.y1-bB.y0,TB=(bB.y+bB.y0)*xB+(wB>>5),PB=0,RB;PB<zB;PB++){RB=0;for(var AB=0;AB<=kB;AB++)if((RB<<32-SB|(AB<kB?(RB=vB[PB*kB+AB])>>>SB:0))&_B[TB+AB])return!0;TB+=xB}return!1}function Bx(bB,_B){var xB=bB[0],vB=bB[1];_B.x+_B.x0<xB.x&&(xB.x=_B.x+_B.x0),_B.y+_B.y0<xB.y&&(xB.y=_B.y+_B.y0),_B.x+_B.x1>vB.x&&(vB.x=_B.x+_B.x1),_B.y+_B.y1>vB.y&&(vB.y=_B.y+_B.y1)}function Yx(bB,_B){return bB.x+bB.x1>_B[0].x&&bB.x+bB.x0<_B[1].x&&bB.y+bB.y1>_B[0].y&&bB.y+bB.y0<_B[1].y}function Gx(bB){var _B=bB[0]/bB[1];return function(xB){return[_B*(xB*=.1)*Math.cos(xB),xB*Math.sin(xB)]}}function Hx(bB){for(var _B=[],xB=-1;++xB<bB;)_B[xB]=0;return _B}function Xx(){try{return'undefined'!==typeof document&&document.createElement?document.createElement('canvas'):new(require('canvas'))}catch(bB){ke('Canvas unavailable. Run in browser or install node-canvas.')}}function Vx(bB){return'function'===typeof bB?bB:function(){return bB}}function Jx(bB){Rl.call(this,Ix(),bB)}function Zx(bB,_B){var xB=new AA.Extent;return xB.transform({field:bB,modified:dT},_B),xB.value}function Kx(bB){return new Uint8Array(bB)}function Qx(bB){return new Uint16Array(bB)}function ev(bB){return new Uint32Array(bB)}function tv(){var bB=8,_B=[],xB=ev(0),vB=iv(0,bB),kB=iv(0,bB);return{data:function(){return _B},seen:function(){return xB=nv(xB,_B.length)},add:function(SB){for(var CB=0,zB=_B.length,TB=SB.length,RB;CB<TB;++CB)RB=SB[CB],RB._index=zB++,_B.push(RB)},remove:function(SB,CB){var zB=_B.length,TB=Array(zB-SB),RB=_B,PB,AB,OB;for(AB=0;!CB[AB]&&AB<zB;++AB)TB[AB]=_B[AB],RB[AB]=AB;for(OB=AB;AB<zB;++AB)PB=_B[AB],CB[AB]?RB[AB]=-1:(RB[AB]=OB,vB[OB]=vB[AB],kB[OB]=kB[AB],TB[OB]=PB,PB._index=OB++),vB[AB]=0;return _B=TB,RB},size:function(){return _B.length},curr:function(){return vB},prev:function(){return kB},reset:function(SB){kB[SB]=vB[SB]},all:function(){return 257>bB?255:65537>bB?65535:4294967295},set:function(SB,CB){vB[SB]|=CB},clear:function(SB,CB){vB[SB]&=~CB},resize:function(SB,CB){var zB=vB.length;(SB>zB||CB>bB)&&(bB=Math.max(CB,bB),vB=iv(SB,bB,vB),kB=iv(SB,bB))}}}function nv(bB,_B,xB){return bB.length>=_B?bB:(xB=xB||new bB.constructor(_B),xB.set(bB),xB)}function iv(bB,_B,xB){var vB=(257>_B?Kx:65537>_B?Qx:ev)(bB);return xB&&vB.set(xB),vB}function dv(bB,_B,xB){var vB=1<<_B;return{one:vB,zero:~vB,range:xB.slice(),bisect:bB.bisect,index:bB.index,size:bB.size,onAdd:function(wB,SB){var CB=this,zB=CB.bisect(CB.range,wB.value),TB=wB.index,RB=zB[0],PB=zB[1],AB=TB.length,OB;for(OB=0;OB<RB;++OB)SB[TB[OB]]|=vB;for(OB=PB;OB<AB;++OB)SB[TB[OB]]|=vB;return CB}}}function ov(){var kB=ev(0),wB=[],SB=0;return{insert:function(CB,zB,TB){if(!zB.length)return[];var RB=SB,PB=zB.length,AB=Array(PB),OB=ev(PB),MB,DB,qB;for(qB=0;qB<PB;++qB)AB[qB]=CB(zB[qB]),OB[qB]=qB;if(AB=lv(AB,OB),RB)MB=wB,DB=kB,wB=Array(RB+PB),kB=ev(RB+PB),sv(TB,MB,DB,RB,AB,OB,PB,wB,kB);else{if(0<TB)for(qB=0;qB<PB;++qB)OB[qB]+=TB;wB=AB,kB=OB}return SB=RB+PB,{index:OB,value:AB}},remove:function(CB,zB){var TB=SB,RB,PB,AB;for(PB=0;!zB[kB[PB]]&&PB<TB;++PB);for(AB=PB;PB<TB;++PB)zB[RB=kB[PB]]||(kB[AB]=RB,wB[AB]=wB[PB],++AB);SB=TB-CB},bisect:function(CB,zB){var TB=zB?zB.length:(zB=wB,SB);return[Vz(zB,CB[0],0,TB),Xz(zB,CB[1],0,TB)]},reindex:function(CB){for(var zB=0,TB=SB;zB<TB;++zB)kB[zB]=CB[kB[zB]]},index:function(){return kB},size:function(){return SB}}}function lv(bB,_B){return bB.sort.call(_B,function(xB,vB){var kB=bB[xB],wB=bB[vB];return kB<wB?-1:kB>wB?1:0}),se(bB,_B)}function sv(bB,_B,xB,vB,kB,wB,SB,CB,zB){var TB=0,RB=0,PB;for(PB=0;TB<vB&&RB<SB;++PB)_B[TB]<kB[RB]?(CB[PB]=_B[TB],zB[PB]=xB[TB++]):(CB[PB]=kB[RB],zB[PB]=wB[RB++]+bB);for(;TB<vB;++TB,++PB)CB[PB]=_B[TB],zB[PB]=xB[TB];for(;RB<SB;++RB,++PB)CB[PB]=kB[RB],zB[PB]=wB[RB]+bB}function fv(bB){Rl.call(this,tv(),bB),this._indices=null,this._dims=null}function cv(bB){Rl.call(this,null,bB)}function uv(bB){Rl.call(this,null,bB)}function pv(bB,_B,xB){return bB.bounds_prev.clear().union(bB.bounds),_B(bB.bounds.clear(),bB,xB)}function gv(bB){Rl.call(this,null,bB)}function mv(bB){var _B=bB.groups,xB=bB.parent;return _B&&1===_B.size?_B.get(Object.keys(_B.object)[0]):_B&&xB?_B.lookup(xB):null}function hv(bB){Rl.call(this,null,bB)}function yv(bB){for(var _B=bB.items,xB=_B.length,vB=0,SB={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null},kB,wB;vB<xB;++vB)if(kB=_B[vB],wB=kB.items,'group'===kB.marktype)switch(kB.role){case Ij:case $j:break;case Nj:_v(wB,SB.rowheaders);break;case Bj:_v(wB,SB.rowfooters);break;case Gj:_v(wB,SB.colheaders);break;case Wj:_v(wB,SB.colfooters);break;case Yj:SB.rowtitle=wB[0];break;case Hj:SB.coltitle=wB[0];break;default:_v(wB,SB.marks);}return SB}function _v(bB,_B){for(var xB=0,vB=bB.length;xB<vB;++xB)_B.push(bB[xB])}function xv(bB){return{x1:0,y1:0,x2:bB.width||0,y2:bB.height||0}}function vv(bB){return bB.bounds.clone().translate(-(bB.x||0),-(bB.y||0))}function kv(bB,_B){var xB={x1:bB.x,y1:bB.y,x2:bB.x+bB.width,y2:bB.y+bB.height};return xB[_B]}function wv(bB,_B){return bB.bounds[_B]}function Ev(bB,_B,xB){return(Ee(bB)?bB[_B]:bB)||xB||0}function Sv(bB,_B,xB){function vB(QB,eY){return Math.floor(Math.min(QB,eY))}function kB(QB,eY){return Math.ceil(Math.max(QB,eY))}var wB=yv(_B,xB),SB=wB.marks,CB='flush'===xB.bounds,zB=CB?xv:vv,TB=new Pa(0,0,0,0),RB=Ev(xB.align,'column'),PB=Ev(xB.align,'row'),AB=Ev(xB.padding,'column'),OB=Ev(xB.padding,'row'),MB=xB.offset,DB=xB.columns||SB.length,qB=0>DB?1:Math.ceil(SB.length/DB),UB=[],jB=[],$B=SB.length,NB,BB,YB,GB,WB,HB,XB,VB,JB,ZB,KB;for(BB=0;BB<$B;++BB)GB=zB(SB[BB]),HB=0===BB%DB?0:Math.ceil(zB(SB[BB-1]).x2),XB=BB<DB?0:Math.ceil(zB(SB[BB-DB]).y2),VB=(0>GB.x1?Math.ceil(-GB.x1):0)+HB,JB=(0>GB.y1?Math.ceil(-GB.y1):0)+XB,UB.push(VB+AB),jB.push(JB+OB);for(BB=0;BB<$B;++BB)0===BB%DB&&(UB[BB]=0),BB<DB&&(jB[BB]=0);if('each'===RB)for(YB=1;YB<DB;++YB){for(KB=0,BB=YB;BB<$B;BB+=DB)KB<UB[BB]&&(KB=UB[BB]);for(BB=YB;BB<$B;BB+=DB)UB[BB]=KB}else if('all'===RB){for(KB=0,BB=0;BB<$B;++BB)BB%DB&&KB<UB[BB]&&(KB=UB[BB]);for(BB=0;BB<$B;++BB)BB%DB&&(UB[BB]=KB)}if('each'===PB)for(YB=1;YB<qB;++YB){for(KB=0,BB=YB*DB,NB=BB+DB;BB<NB;++BB)KB<jB[BB]&&(KB=jB[BB]);for(BB=YB*DB;BB<NB;++BB)jB[BB]=KB}else if('all'===PB){for(KB=0,BB=DB;BB<$B;++BB)KB<jB[BB]&&(KB=jB[BB]);for(BB=DB;BB<$B;++BB)jB[BB]=KB}for(VB=0,BB=0;BB<$B;++BB)WB=SB[BB],HB=WB.x||0,WB.x=VB=UB[BB]+(BB%DB?VB:0),WB.bounds.translate(VB-HB,0);for(YB=0;YB<DB;++YB)for(JB=0,BB=YB;BB<$B;BB+=DB)WB=SB[BB],XB=WB.y||0,WB.y=JB+=jB[BB],WB.bounds.translate(0,JB-XB);for(bB.enqueue(SB),BB=0;BB<$B;++BB)SB[BB].mark.bounds.clear();for(BB=0;BB<$B;++BB)WB=SB[BB],TB.union(WB.mark.bounds.union(WB.bounds));zB=CB?kv:wv,VB=Cv(bB,wB.rowheaders,SB,DB,qB,-Ev(MB,'rowHeader'),vB,0,zB,'x1',0,DB,1),JB=Cv(bB,wB.colheaders,SB,DB,DB,-Ev(MB,'columnHeader'),vB,1,zB,'y1',0,1,DB),Cv(bB,wB.rowfooters,SB,DB,qB,Ev(MB,'rowFooter'),kB,0,zB,'x2',DB-1,DB,1),Cv(bB,wB.colfooters,SB,DB,DB,Ev(MB,'columnFooter'),kB,1,zB,'y2',qB*DB-DB,1,DB),wB.rowtitle&&(KB=VB-Ev(MB,'rowTitle'),ZB=Ev(xB.titleBand,'row',0.5),zv(bB,wB.rowtitle,KB,0,TB,ZB)),wB.coltitle&&(KB=JB-Ev(MB,'columnTitle'),ZB=Ev(xB.titleBand,'column',0.5),zv(bB,wB.coltitle,KB,1,TB,ZB))}function Cv(bB,_B,xB,vB,kB,wB,SB,CB,zB,TB,RB,PB,AB){var OB=xB.length,MB=0,DB=0,qB,LB,UB,FB,jB,IB,$B,NB,BB;for(qB=RB;qB<OB;qB+=PB)xB[qB]&&(MB=SB(MB,zB(xB[qB],TB)));if(!_B.length)return MB;for(_B.length>kB&&(bB.warn('Grid headers exceed limit: '+kB),_B=_B.slice(0,kB)),MB+=wB,(LB=0,FB=_B.length);LB<FB;++LB)_B[LB].mark.bounds.clear();for(qB=RB,LB=0,FB=_B.length;LB<FB;++LB,qB+=PB){for(IB=_B[LB],jB=IB.mark.bounds,UB=qB;null==($B=xB[UB]);UB-=AB);CB?(NB=$B.x,BB=MB):(NB=MB,BB=$B.y),jB.union(IB.bounds.translate(NB-(IB.x||0),BB-(IB.y||0))),IB.x=NB,IB.y=BB,DB=SB(DB,jB[TB])}return bB.enqueue(_B),DB}function zv(bB,_B,xB,vB,kB,wB){if(_B){var SB=xB,CB=xB;vB?SB=Math.round(kB.x1+wB*kB.width()):CB=Math.round(kB.y1+wB*kB.height()),_B.bounds.translate(SB-(_B.x||0),CB-(_B.y||0)),_B.mark.bounds.clear().union(_B.bounds),_B.x=SB,_B.y=CB,bB.enqueue(_B.mark.items)}}function Tv(bB){Rl.call(this,null,bB)}function Rv(bB,_B,xB){var vB=_B.items,kB=Math.max(0,_B.width||0),wB=Math.max(0,_B.height||0),SB=new Pa().set(0,0,kB,wB),CB=SB.clone(),zB=SB.clone(),TB=[],RB,PB,AB,OB,MB,DB;for(MB=0,DB=vB.length;MB<DB;++MB)switch(PB=vB[MB],PB.role){case Zj:CB.union(OB=Mv(bB,PB,kB,wB)),Av(PB)&&zB.union(OB);break;case Kj:RB=PB;break;case eI:TB.push(PB);break;case Qj:case tI:case nI:case aI:case iI:case dI:zB.union(PB.bounds);break;default:SB.union(PB.bounds);}if(RB&&(CB.union(OB=Dv(bB,RB,CB)),Av(RB)&&zB.union(OB)),TB.length)for(AB={left:0,right:0,margin:xB.legendMargin||8},MB=0,DB=TB.length;MB<DB;++MB)OB=qv(bB,TB[MB],AB,zB,kB,wB),xB.autosize&&xB.autosize.type===Xj?SB.add(OB.x1,0).add(OB.x2,0):SB.union(OB);Lv(bB,_B,SB.union(zB).union(CB),xB)}function Pv(bB,_B,xB){return bB[_B]===xB?0:(bB[_B]=xB,1)}function Av(bB){var _B=bB.items[0].datum.orient;return'left'===_B||'right'===_B}function Ov(bB){var _B=+bB.grid;return[bB.ticks?_B++:-1,bB.labels?_B++:-1,_B+ +bB.domain]}function Mv(bB,_B,xB,vB){var kB=_B.items[0],wB=kB.datum,SB=wB.orient,CB=Ov(wB),zB=kB.range,TB=kB.offset,RB=kB.position,PB=kB.minExtent,AB=kB.maxExtent,OB=wB.title&&kB.items[CB[2]].items[0],MB=kB.titlePadding,DB=OB?OB.fontSize+MB:0,qB=kB.bounds,LB=0,UB=0,FB,jB;return qB.clear(),-1<(FB=CB[0])&&qB.union(kB.items[FB].bounds),-1<(FB=CB[1])&&qB.union(kB.items[FB].bounds),'top'===SB?(LB=RB||0,UB=-TB,jB=Math.max(PB,Math.min(AB,-qB.y1)),OB&&(OB.auto?(OB.y=-(MB+jB),jB+=DB):qB.union(OB.bounds)),qB.add(0,-jB).add(zB,0)):'left'===SB?(LB=-TB,UB=RB||0,jB=Math.max(PB,Math.min(AB,-qB.x1)),OB&&(OB.auto?(OB.x=-(MB+jB),jB+=DB):qB.union(OB.bounds)),qB.add(-jB,0).add(0,zB)):'right'===SB?(LB=xB+TB,UB=RB||0,jB=Math.max(PB,Math.min(AB,qB.x2)),OB&&(OB.auto?(OB.x=MB+jB,jB+=DB):qB.union(OB.bounds)),qB.add(0,0).add(jB,zB)):'bottom'===SB?(LB=RB||0,UB=vB+TB,jB=Math.max(PB,Math.min(AB,qB.y2)),OB&&(OB.auto?(OB.y=MB+jB,jB+=DB):qB.union(OB.bounds)),qB.add(0,0).add(zB,jB)):(LB=kB.x,UB=kB.y),(Pv(kB,'x',LB+0.5)|Pv(kB,'y',UB+0.5)&&bB.enqueue([kB]),qd(qB.translate(LB,UB),kB),kB.mark.bounds.clear().union(qB))}function Dv(bB,_B,xB){var vB=_B.items[0],kB=vB.datum,wB=kB.orient,SB=vB.offset,CB=vB.bounds,zB=0,TB=0;return'top'===wB?(zB=vB.x,TB=xB.y1-SB):'left'===wB?(zB=xB.x1-SB,TB=vB.y):'right'===wB?(zB=xB.x2+SB,TB=vB.y):'bottom'===wB?(zB=vB.x,TB=xB.y2+SB):(zB=vB.x,TB=vB.y),CB.translate(zB-vB.x,TB-vB.y),Pv(vB,'x',zB)|Pv(vB,'y',TB)&&bB.enqueue([vB]),_B.bounds.clear().union(CB)}function qv(bB,_B,xB,vB,kB,wB){var SB=_B.items[0],CB=SB.datum,zB=CB.orient,TB=SB.offset,RB=SB.bounds.clear(),PB=0,AB=xB[zB]||0,OB,MB;return SB.items.forEach(function(DB){RB.union(DB.bounds)}),OB=Math.round(RB.width())+2*SB.padding-1,MB=Math.round(RB.height())+2*SB.padding-1,'left'===zB?(PB-=OB+TB-Math.floor(vB.x1),xB.left+=MB+xB.margin):'right'===zB?(PB+=TB+Math.ceil(vB.x2),xB.right+=MB+xB.margin):'top-left'===zB?(PB+=TB,AB+=TB):'top-right'===zB?(PB+=kB-OB-TB,AB+=TB):'bottom-left'===zB?(PB+=TB,AB+=wB-MB-TB):'bottom-right'===zB?(PB+=kB-OB-TB,AB+=wB-MB-TB):(PB=SB.x,AB=SB.y),(Pv(SB,'x',PB)|Pv(SB,'width',OB)|Pv(SB,'y',AB)|Pv(SB,'height',MB)&&bB.enqueue([SB]),qd(RB.set(PB,AB,PB+OB,AB+MB),SB),SB.mark.bounds.clear().union(RB))}function Lv(bB,_B,xB,vB){var kB=vB.autosize&&vB.autosize.type,wB=vB.autosize&&vB.autosize.resize,SB=bB._width,CB=bB._height;if(!(1>bB._autosize)&&kB){var zB=Math.max(0,_B.width||0),TB=Math.max(0,Math.ceil(-xB.x1)),RB=Math.max(0,Math.ceil(xB.x2-zB)),PB=Math.max(0,_B.height||0),AB=Math.max(0,Math.ceil(-xB.y1)),OB=Math.max(0,Math.ceil(xB.y2-PB));kB===Jj?(SB=zB,CB=PB,TB=0,AB=0):kB===Xj?(zB=Math.max(0,SB-TB-RB),PB=Math.max(0,CB-AB-OB)):kB===Vj&&(SB=zB+TB+RB,CB=PB+AB+OB),bB.autosize(SB,CB,zB,PB,[TB,AB],wB)}}function Uv(bB){var _B=bB._signals.cursor;_B||(bB._signals.cursor=_B=bB.add({user:oI,item:null})),bB.on(bB.events('view','mousemove'),_B,function(xB,vB){var kB=_B.value,wB=kB?Se(kB)?kB:kB.user:oI,SB=vB.item&&vB.item.cursor||null;return kB&&wB===kB.user&&SB==kB.item?kB:{user:wB,item:SB}}),bB.add(null,function(xB){var vB=xB.cursor,kB=this.value;return Se(vB)||(kB=vB.item,vB=vB.user),Fv(vB&&vB!==oI?vB:kB||vB),kB},{cursor:_B})}function Fv(bB){'undefined'!==typeof document&&document.body&&(document.body.style.cursor=bB)}function jv(bB,_B){var xB=bB._runtime.data;return xB.hasOwnProperty(_B)||bB.error('Unrecognized data set: '+_B),xB[_B]}function $v(bB,_B){Yo(_B)||this.error('Second argument to changes must be a changeset.');var xB=jv(this,bB);return xB.modified=!0,this.pulse(xB.input,_B)}function Yv(bB){var _B=bB.padding();return Math.max(0,bB._width+_B.left+_B.right)}function Gv(bB){var _B=bB.padding();return Math.max(0,bB._height+_B.top+_B.bottom)}function Wv(bB){var _B=bB.padding(),xB=bB._origin;return[_B.left+xB[0],_B.top+xB[1]]}function Hv(bB){var _B=Wv(bB);bB._renderer.background(bB._background),bB._renderer.resize(Yv(bB),Gv(bB),_B),bB._handler.origin(_B)}function Xv(bB,_B,xB){var vB=bB._renderer.element(),kB,wB,SB;return vB&&(SB=Wv(bB),wB=_B.changedTouches?_B.changedTouches[0]:_B,kB=oo(wB,vB),kB[0]-=SB[0],kB[1]-=SB[1]),_B.vega=Vv(bB,xB,kB),_B.item=xB,_B}function Vv(bB,_B,xB){function vB(SB){var CB=wB,zB;if(SB)for(zB=_B;zB;zB=zB.mark.group)if(zB.mark.name===SB){CB=zB;break}return CB&&CB.mark&&CB.mark.interactive?CB:{}}function kB(SB){if(!SB)return xB;Se(SB)&&(SB=vB(SB));for(var CB=xB.slice();SB;)CB[0]-=SB.x||0,CB[1]-=SB.y||0,SB=SB.mark&&SB.mark.group;return CB}var wB=_B?'group'===_B.mark.marktype?_B:_B.mark.group:null;return{view:Me(bB),item:Me(_B||{}),group:vB,xy:kB,x:function(CB){return kB(CB)[0]},y:function(CB){return kB(CB)[1]}}}function Zv(bB){return bB.item}function Kv(bB){var _B=bB.item.mark.source;return _B.source||_B}function Qv(bB){return function(_B,xB){return xB.vega.view().changeset().encode(xB.item,bB)}}function nk(bB,_B,xB){var vB=document.createElement(bB);for(var kB in _B)vB.setAttribute(kB,_B[kB]);return null!=xB&&(vB.textContent=xB),vB}function ak(bB,_B,xB){var vB=xB.param,kB=xB.state||(xB.state={elements:null,set:null,update:function(SB){kB.source=!0,bB.signal(vB.signal,SB).run()},active:!1});return Se(_B)&&(_B=document.querySelector(_B)),ik(kB,_B,vB,bB.signal(vB.signal)),kB.active||(bB.on(bB._signals[vB.signal],null,function(){kB.source?kB.source=!1:kB.set(bB.signal(vB.signal))}),kB.active=!0),kB}function ik(bB,_B,xB,vB){var kB=nk('div',{class:fI});kB.appendChild(nk('span',{class:cI},xB.name||xB.signal)),_B.appendChild(kB);var wB=dk;switch(xB.input){case'checkbox':wB=rk;break;case'select':wB=ok;break;case'radio':wB=lk;break;case'range':wB=fk;}wB(bB,kB,xB,vB)}function dk(bB,_B,xB,vB){var kB=nk('input');for(var wB in xB)'signal'!==wB&&'element'!==wB&&kB.setAttribute('input'===wB?'type':wB,xB[wB]);kB.setAttribute('name',xB.signal),kB.value=vB,_B.appendChild(kB),kB.addEventListener('input',function(){bB.update(kB.value)}),bB.elements=[kB],bB.set=function(SB){kB.value=SB}}function rk(bB,_B,xB,vB){var kB={type:'checkbox',name:xB.signal};vB&&(kB.checked=!0);var wB=nk('input',kB);_B.appendChild(wB),wB.addEventListener('change',function(){bB.update(wB.checked)}),bB.elements=[wB],bB.set=function(SB){wB.checked=!!SB||null}}function ok(bB,_B,xB,vB){var kB=nk('select',{name:xB.signal});xB.options.forEach(function(wB){var SB={value:wB};ck(wB,vB)&&(SB.selected=!0),kB.appendChild(nk('option',SB,wB+''))}),_B.appendChild(kB),kB.addEventListener('change',function(){bB.update(xB.options[kB.selectedIndex])}),bB.elements=[kB],bB.set=function(wB){for(var SB=0,CB=xB.options.length;SB<CB;++SB)if(ck(xB.options[SB],wB))return void(kB.selectedIndex=SB)}}function lk(bB,_B,xB,vB){var kB=nk('span',{class:uI});_B.appendChild(kB),bB.elements=xB.options.map(function(wB){var SB=pI+xB.signal+'-'+wB,CB={id:SB,type:'radio',name:xB.signal,value:wB};ck(wB,vB)&&(CB.checked=!0);var zB=nk('input',CB);return zB.addEventListener('change',function(){bB.update(wB)}),kB.appendChild(zB),kB.appendChild(nk('label',{for:SB},wB+'')),zB}),bB.set=function(wB){for(var SB=bB.elements,CB=0,zB=SB.length;CB<zB;++CB)ck(SB[CB].value,wB)&&(SB[CB].checked=!0)}}function fk(bB,_B,xB,vB){function kB(){TB.textContent=zB.value,bB.update(+zB.value)}vB=vB===void 0?(+xB.max+ +xB.min)/2:vB;var wB=xB.min||Math.min(0,+vB)||0,SB=xB.max||Math.max(100,+vB)||100,CB=xB.step||ee(wB,SB,100),zB=nk('input',{type:'range',name:xB.signal,min:wB,max:SB,step:CB});zB.value=vB;var TB=nk('label',{},+vB);_B.appendChild(zB),_B.appendChild(TB),zB.addEventListener('input',kB),zB.addEventListener('change',kB),bB.elements=[zB],bB.set=function(RB){zB.value=RB,TB.textContent=RB}}function ck(bB,_B){return bB===_B||bB+''===_B+''}function uk(bB,_B,xB,vB){return _B=_B||new vB(bB.loader()),_B.initialize(xB,Yv(bB),Gv(bB),Wv(bB)).background(bB._background)}function pk(bB,_B,xB,vB){var kB=new vB().scene(bB.scenegraph().root).initialize(xB,Wv(bB),bB);return _B&&(kB.handleTooltip=_B.handleTooltip,_B.handlers().forEach(function(wB){kB.on(wB.type,wB.handler)})),kB}function mk(bB,_B){return'string'===typeof _B&&(_B='undefined'===typeof document?bB.error('DOM document instance not found.'):document.querySelector(_B)),_B.innerHTML='',_B}function hk(bB,_B){var xB=Mo(_B);return xB&&xB.headless?bB.runAsync().then(function(){return uk(bB,null,null,xB.headless).renderAsync(bB._scenegraph.root)}):Promise.reject('Unrecognized renderer type: '+_B)}function _k(bB,_B){var xB=new Blob([bB],{type:_B});return window.URL.createObjectURL(xB)}function wk(bB,_B){return bB=bB||_B.autosize,Ee(bB)?bB:(bB=bB||'pad',{type:bB})}function Ek(bB,_B){return bB=bB||_B.padding,Ee(bB)?bB:(bB=+bB||0,{top:bB,bottom:bB,left:bB,right:bB})}function Sk(bB,_B){ke(bB+' for "outer" push: '+Ce(_B))}function Ck(bB,_B){var xB=bB.name;if(bB.push===gI)_B.signals[xB]||Sk('No prior signal definition',xB),mI.forEach(function(kB){void 0!==bB[kB]&&Sk('Invalid property ',kB)});else{var vB=_B.addSignal(xB,bB.value);!1===bB.react&&(vB.react=!1),bB.bind&&_B.addBinding(xB,bB.bind)}}function zk(bB){this.type=bB}function Tk(bB){switch(bB.type){case'ArrayExpression':return bB.elements;case'BinaryExpression':case'LogicalExpression':return[bB.left,bB.right];case'CallExpression':var _B=bB.arguments.slice();return _B.unshift(bB.callee),_B;case'ConditionalExpression':return[bB.test,bB.consequent,bB.alternate];case'MemberExpression':return[bB.object,bB.property];case'ObjectExpression':return bB.properties;case'Property':return[bB.key,bB.value];case'UnaryExpression':return[bB.argument];case'Identifier':case'Literal':case'RawCode':default:return[];}}function Rk(bB,_B){if(!bB)throw new Error('ASSERT: '+_B)}function Pk(bB){return 48<=bB&&57>=bB}function Ak(bB){return 0<='0123456789abcdefABCDEF'.indexOf(bB)}function Ok(bB){return 0<='01234567'.indexOf(bB)}function Mk(bB){return 32===bB||9===bB||11===bB||12===bB||160===bB||5760<=bB&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(bB)}function Dk(bB){return 10===bB||13===bB||8232===bB||8233===bB}function qk(bB){return 36===bB||95===bB||65<=bB&&90>=bB||97<=bB&&122>=bB||92===bB||128<=bB&&ZI.test(String.fromCharCode(bB))}function Lk(bB){return 36===bB||95===bB||65<=bB&&90>=bB||97<=bB&&122>=bB||48<=bB&&57>=bB||92===bB||128<=bB&&KI.test(String.fromCharCode(bB))}function Uk(){for(var bB;yI<bI&&(bB=hI.charCodeAt(yI),Mk(bB)||Dk(bB));)++yI}function Fk(bB){var kB=0,_B,xB,vB;for(xB='u'===bB?4:2,_B=0;_B<xB;++_B)yI<bI&&Ak(hI[yI])?(vB=hI[yI++],kB=16*kB+'0123456789abcdef'.indexOf(vB.toLowerCase())):mw({},jI,VI);return String.fromCharCode(kB)}function jk(){var bB,_B,xB,vB;for(bB=hI[yI],_B=0,'}'===bB&&mw({},jI,VI);yI<bI&&(bB=hI[yI++],!!Ak(bB));)_B=16*_B+'0123456789abcdef'.indexOf(bB.toLowerCase());return((1114111<_B||'}'!==bB)&&mw({},jI,VI),65535>=_B)?String.fromCharCode(_B):(xB=(_B-65536>>10)+55296,vB=(1023&_B-65536)+56320,String.fromCharCode(xB,vB))}function Ik(){var bB,_B;for(bB=hI.charCodeAt(yI++),_B=String.fromCharCode(bB),92===bB&&(117!==hI.charCodeAt(yI)&&mw({},jI,VI),++yI,bB=Fk('u'),(!bB||'\\'===bB||!qk(bB.charCodeAt(0)))&&mw({},jI,VI),_B=bB);yI<bI&&(bB=hI.charCodeAt(yI),!!Lk(bB));)++yI,_B+=String.fromCharCode(bB),92===bB&&(_B=_B.substr(0,_B.length-1),117!==hI.charCodeAt(yI)&&mw({},jI,VI),++yI,bB=Fk('u'),(!bB||'\\'===bB||!Lk(bB.charCodeAt(0)))&&mw({},jI,VI),_B+=bB);return _B}function $k(){var bB,_B;for(bB=yI++;yI<bI;){if(_B=hI.charCodeAt(yI),92===_B)return yI=bB,Ik();if(Lk(_B))++yI;else break}return hI.slice(bB,yI)}function Nk(){var bB,_B,xB;return bB=yI,_B=92===hI.charCodeAt(yI)?Ik():$k(),xB=1===_B.length?kI:QI.hasOwnProperty(_B)?wI:'null'===_B?EI:'true'===_B||'false'===_B?xI:kI,{type:xB,value:_B,start:bB,end:yI}}function Bk(){var bB=yI,_B=hI.charCodeAt(yI),vB=hI[yI],xB,kB,wB,SB;switch(_B){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++yI,{type:CI,value:String.fromCharCode(_B),start:bB,end:yI};default:if(xB=hI.charCodeAt(yI+1),61===xB)switch(_B){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return yI+=2,{type:CI,value:String.fromCharCode(_B)+String.fromCharCode(xB),start:bB,end:yI};case 33:case 61:return yI+=2,61===hI.charCodeAt(yI)&&++yI,{type:CI,value:hI.slice(bB,yI),start:bB,end:yI};}}return(SB=hI.substr(yI,4),'>>>='===SB)?(yI+=4,{type:CI,value:SB,start:bB,end:yI}):(wB=SB.substr(0,3),'>>>'===wB||'<<='===wB||'>>='===wB)?(yI+=3,{type:CI,value:wB,start:bB,end:yI}):(kB=wB.substr(0,2),vB===kB[1]&&0<='+-<>&|'.indexOf(vB)||'=>'===kB?(yI+=2,{type:CI,value:kB,start:bB,end:yI}):0<='<>=!+-*%&|^/'.indexOf(vB)?(++yI,{type:CI,value:vB,start:bB,end:yI}):void mw({},jI,VI))}function Yk(bB){for(var _B='';yI<bI&&!!Ak(hI[yI]);)_B+=hI[yI++];return 0===_B.length&&mw({},jI,VI),qk(hI.charCodeAt(yI))&&mw({},jI,VI),{type:SI,value:parseInt('0x'+_B,16),start:bB,end:yI}}function Gk(bB){for(var _B='0'+hI[yI++];yI<bI&&!!Ok(hI[yI]);)_B+=hI[yI++];return(qk(hI.charCodeAt(yI))||Pk(hI.charCodeAt(yI)))&&mw({},jI,VI),{type:SI,value:parseInt(_B,8),octal:!0,start:bB,end:yI}}function Wk(){var bB,_B,xB;if(xB=hI[yI],Rk(Pk(xB.charCodeAt(0))||'.'===xB,'Numeric literal must start with a decimal digit or a decimal point'),_B=yI,bB='','.'!==xB){if(bB=hI[yI++],xB=hI[yI],'0'===bB){if('x'===xB||'X'===xB)return++yI,Yk(_B);if(Ok(xB))return Gk(_B);xB&&Pk(xB.charCodeAt(0))&&mw({},jI,VI)}for(;Pk(hI.charCodeAt(yI));)bB+=hI[yI++];xB=hI[yI]}if('.'===xB){for(bB+=hI[yI++];Pk(hI.charCodeAt(yI));)bB+=hI[yI++];xB=hI[yI]}if('e'===xB||'E'===xB)if(bB+=hI[yI++],xB=hI[yI],('+'===xB||'-'===xB)&&(bB+=hI[yI++]),Pk(hI.charCodeAt(yI)))for(;Pk(hI.charCodeAt(yI));)bB+=hI[yI++];else mw({},jI,VI);return qk(hI.charCodeAt(yI))&&mw({},jI,VI),{type:SI,value:parseFloat(bB),start:_B,end:yI}}function Hk(){var bB='',wB=!1,_B,xB,vB,kB;for(_B=hI[yI],Rk('\''===_B||'"'===_B,'String literal must starts with a quote'),xB=yI,++yI;yI<bI;)if(vB=hI[yI++],vB===_B){_B='';break}else if('\\'===vB)vB=hI[yI++],vB&&Dk(vB.charCodeAt(0))?'\r'===vB&&'\n'===hI[yI]&&++yI:'u'===vB||'x'===vB?'{'===hI[yI]?(++yI,bB+=jk()):bB+=Fk(vB):'n'===vB?bB+='\n':'r'===vB?bB+='\r':'t'===vB?bB+='\t':'b'===vB?bB+='\b':'f'===vB?bB+='\f':'v'===vB?bB+='\x0B':Ok(vB)?(kB='01234567'.indexOf(vB),0!==kB&&(wB=!0),yI<bI&&Ok(hI[yI])&&(wB=!0,kB=8*kB+'01234567'.indexOf(hI[yI++]),0<='0123'.indexOf(vB)&&yI<bI&&Ok(hI[yI])&&(kB=8*kB+'01234567'.indexOf(hI[yI++]))),bB+=String.fromCharCode(kB)):bB+=vB;else if(Dk(vB.charCodeAt(0)))break;else bB+=vB;return''!==_B&&mw({},jI,VI),{type:zI,value:bB,octal:wB,start:xB,end:yI}}function Xk(bB,_B){var xB=bB;0<=_B.indexOf('u')&&(xB=xB.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(vB,kB){return 1114111>=parseInt(kB,16)?'x':void mw({},GI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,'x'));try{new RegExp(xB)}catch(vB){mw({},GI)}try{return new RegExp(bB,_B)}catch(vB){return null}}function Vk(){var bB,_B,xB,vB,kB;for(bB=hI[yI],Rk('/'===bB,'Regular expression literal must start with a slash'),_B=hI[yI++],xB=!1,vB=!1;yI<bI;)if(bB=hI[yI++],_B+=bB,'\\'===bB)bB=hI[yI++],Dk(bB.charCodeAt(0))&&mw({},WI),_B+=bB;else if(Dk(bB.charCodeAt(0)))mw({},WI);else if(xB)']'===bB&&(xB=!1);else if('/'===bB){vB=!0;break}else'['===bB&&(xB=!0);return vB||mw({},WI),kB=_B.substr(1,_B.length-2),{value:kB,literal:_B}}function Jk(){var bB,_B,xB;for(_B='',xB='';yI<bI&&(bB=hI[yI],!!Lk(bB.charCodeAt(0)));)++yI,'\\'===bB&&yI<bI?mw({},jI,VI):(xB+=bB,_B+=bB);return 0<=xB.search(/[^gimuy]/g)&&mw({},GI,xB),{value:xB,literal:_B}}function Zk(){var bB,_B,xB,vB;return _I=null,Uk(),bB=yI,_B=Vk(),xB=Jk(),vB=Xk(_B.value,xB.value),{literal:_B.literal+xB.literal,value:vB,regex:{pattern:_B.value,flags:xB.value},start:bB,end:yI}}function Kk(bB){return bB.type===kI||bB.type===wI||bB.type===xI||bB.type===EI}function Qk(){var bB;return(Uk(),yI>=bI)?{type:vI,start:yI,end:yI}:(bB=hI.charCodeAt(yI),qk(bB)?Nk():40===bB||41===bB||59===bB?Bk():39===bB||34===bB?Hk():46===bB?Pk(hI.charCodeAt(yI+1))?Wk():Bk():Pk(bB)?Wk():Bk())}function ew(){var bB;return bB=_I,yI=bB.end,_I=Qk(),yI=bB.end,bB}function tw(){var bB;bB=yI,_I=Qk(),yI=bB}function nw(bB){var _B=new zk(TI);return _B.elements=bB,_B}function aw(bB,_B,xB){var vB=new zk('||'===bB||'&&'===bB?DI:RI);return vB.operator=bB,vB.left=_B,vB.right=xB,vB}function iw(bB,_B){var xB=new zk(PI);return xB.callee=bB,xB.arguments=_B,xB}function dw(bB,_B,xB){var vB=new zk(AI);return vB.test=bB,vB.consequent=_B,vB.alternate=xB,vB}function rw(bB){var _B=new zk(OI);return _B.name=bB,_B}function ow(bB){var _B=new zk(MI);return _B.value=bB.value,_B.raw=hI.slice(bB.start,bB.end),bB.regex&&('//'===_B.raw&&(_B.raw='/(?:)/'),_B.regex=bB.regex),_B}function fw(bB,_B,xB){var vB=new zk(qI);return vB.computed='['===bB,vB.object=_B,vB.property=xB,vB.computed||(xB.member=!0),vB}function uw(bB){var _B=new zk(LI);return _B.properties=bB,_B}function pw(bB,_B,xB){var vB=new zk(UI);return vB.key=_B,vB.value=xB,vB.kind=bB,vB}function gw(bB,_B){var xB=new zk(FI);return xB.operator=bB,xB.argument=_B,xB.prefix=!0,xB}function mw(bB,_B){var vB=Array.prototype.slice.call(arguments,2),kB=_B.replace(/%(\d)/g,function(wB,SB){return Rk(SB<vB.length,'Message reference must be in range'),vB[SB]}),xB;throw xB=new Error(kB),xB.index=yI,xB.description=kB,xB}function hw(bB){bB.type===vI&&mw(bB,YI),bB.type===SI&&mw(bB,II),bB.type===zI&&mw(bB,$I),bB.type===kI&&mw(bB,NI),bB.type===wI&&mw(bB,BI),mw(bB,jI,bB.value)}function yw(bB){var _B=ew();(_B.type!==CI||_B.value!==bB)&&hw(_B)}function bw(bB){return _I.type===CI&&_I.value===bB}function _w(bB){return _I.type===wI&&_I.value===bB}function vw(){var bB=[];for(yI=_I.start,yw('[');!bw(']');)bw(',')?(ew(),bB.push(null)):(bB.push(Lw()),bw(']')||yw(','));return ew(),nw(bB)}function kw(){var bB;return yI=_I.start,bB=ew(),bB.type===zI||bB.type===SI?(bB.octal&&mw(bB,HI),ow(bB)):rw(bB.value)}function ww(){var bB,_B,xB,vB;return yI=_I.start,bB=_I,bB.type===kI?(xB=kw(),yw(':'),vB=Lw(),pw('init',xB,vB)):bB.type===vI||bB.type===CI?void hw(bB):(_B=kw(),yw(':'),vB=Lw(),pw('init',_B,vB))}function Ew(){var bB=[],kB={},wB=String,_B,xB,vB;for(yI=_I.start,yw('{');!bw('}');)_B=ww(),xB=_B.key.type===OI?_B.key.name:wB(_B.key.value),vB='$'+xB,Object.prototype.hasOwnProperty.call(kB,vB)?mw({},XI):kB[vB]=!0,bB.push(_B),bw('}')||yw(',');return yw('}'),uw(bB)}function Sw(){var bB;return yw('('),bB=Uw(),yw(')'),bB}function Cw(){var bB,_B,xB;if(bw('('))return Sw();if(bw('['))return vw();if(bw('{'))return Ew();if(bB=_I.type,yI=_I.start,bB===kI||e$[_I.value])xB=rw(ew().value);else if(bB===zI||bB===SI)_I.octal&&mw(_I,HI),xB=ow(ew());else if(bB===wI)throw new Error(JI);else bB===xI?(_B=ew(),_B.value='true'===_B.value,xB=ow(_B)):bB===EI?(_B=ew(),_B.value=null,xB=ow(_B)):bw('/')||bw('/=')?(xB=ow(Zk()),tw()):hw(ew());return xB}function zw(){var bB=[];if(yw('('),!bw(')'))for(;yI<bI&&(bB.push(Lw()),!bw(')'));)yw(',');return yw(')'),bB}function Tw(){var bB;return yI=_I.start,bB=ew(),Kk(bB)||hw(bB),rw(bB.value)}function Rw(){return yw('.'),Tw()}function Pw(){var bB;return yw('['),bB=Uw(),yw(']'),bB}function Aw(){var bB,_B,xB;for(bB=Cw();;)if(bw('.'))xB=Rw(),bB=fw('.',bB,xB);else if(bw('('))_B=zw(),bB=iw(bB,_B);else if(bw('['))xB=Pw(),bB=fw('[',bB,xB);else break;return bB}function Ow(){var bB=Aw();if(_I.type===CI&&(bw('++')||bw('--')))throw new Error(JI);return bB}function Mw(){var bB,_B;if(_I.type!==CI&&_I.type!==wI)_B=Ow();else if(bw('++')||bw('--'))throw new Error(JI);else if(bw('+')||bw('-')||bw('~')||bw('!'))bB=ew(),_B=Mw(),_B=gw(bB.value,_B);else if(_w('delete')||_w('void')||_w('typeof'))throw new Error(JI);else _B=Ow();return _B}function Dw(bB){var _B=0;if(bB.type!==CI&&bB.type!==wI)return 0;switch(bB.value){case'||':_B=1;break;case'&&':_B=2;break;case'|':_B=3;break;case'^':_B=4;break;case'&':_B=5;break;case'==':case'!=':case'===':case'!==':_B=6;break;case'<':case'>':case'<=':case'>=':case'instanceof':case'in':_B=7;break;case'<<':case'>>':case'>>>':_B=8;break;case'+':case'-':_B=9;break;case'*':case'/':case'%':_B=11;break;default:}return _B}function qw(){var bB,_B,xB,vB,kB,wB,SB,CB,zB,TB;if(bB=_I,zB=Mw(),vB=_I,kB=Dw(vB),0===kB)return zB;for(vB.prec=kB,ew(),_B=[bB,_I],SB=Mw(),wB=[zB,vB,SB];0<(kB=Dw(_I));){for(;2<wB.length&&kB<=wB[wB.length-2].prec;)SB=wB.pop(),CB=wB.pop().value,zB=wB.pop(),_B.pop(),xB=aw(CB,zB,SB),wB.push(xB);vB=ew(),vB.prec=kB,wB.push(vB),_B.push(_I),xB=Mw(),wB.push(xB)}for(TB=wB.length-1,xB=wB[TB],_B.pop();1<TB;)_B.pop(),xB=aw(wB[TB-1].value,wB[TB-2],xB),TB-=2;return xB}function Lw(){var bB,_B,xB;return bB=qw(),bw('?')&&(ew(),_B=Lw(),yw(':'),xB=Lw(),bB=dw(bB,_B,xB)),bB}function Uw(){var bB=Lw();if(bw(','))throw new Error(JI);return bB}function Fw(bB){hI=bB,yI=0,bI=hI.length,_I=null,tw();var _B=Uw();if(_I.type!==vI)throw new Error('Unexpect token after expression.');return _B}function jw(bB){function _B(SB,CB,zB,TB){var RB=bB(CB[0]);return zB&&(RB=zB+'('+RB+')',0===zB.lastIndexOf('new ',0)&&(RB='('+RB+')')),RB+'.'+SB+(0>TB?'':0===TB?'()':'('+CB.slice(1).map(bB).join(',')+')')}function xB(SB,CB,zB){return function(TB){return _B(SB,TB,CB,zB)}}var vB='new Date',kB='String',wB='RegExp';return{isNaN:'isNaN',isFinite:'isFinite',abs:'Math.abs',acos:'Math.acos',asin:'Math.asin',atan:'Math.atan',atan2:'Math.atan2',ceil:'Math.ceil',cos:'Math.cos',exp:'Math.exp',floor:'Math.floor',log:'Math.log',max:'Math.max',min:'Math.min',pow:'Math.pow',random:'Math.random',round:'Math.round',sin:'Math.sin',sqrt:'Math.sqrt',tan:'Math.tan',clamp:function(CB){3>CB.length&&ke('Missing arguments to clamp function.'),3<CB.length&&ke('Too many arguments to clamp function.');var zB=CB.map(bB);return'Math.max('+zB[1]+', Math.min('+zB[2]+','+zB[0]+'))'},now:'Date.now',utc:'Date.UTC',datetime:vB,date:xB('getDate',vB,0),day:xB('getDay',vB,0),year:xB('getFullYear',vB,0),month:xB('getMonth',vB,0),hours:xB('getHours',vB,0),minutes:xB('getMinutes',vB,0),seconds:xB('getSeconds',vB,0),milliseconds:xB('getMilliseconds',vB,0),time:xB('getTime',vB,0),timezoneoffset:xB('getTimezoneOffset',vB,0),utcdate:xB('getUTCDate',vB,0),utcday:xB('getUTCDay',vB,0),utcyear:xB('getUTCFullYear',vB,0),utcmonth:xB('getUTCMonth',vB,0),utchours:xB('getUTCHours',vB,0),utcminutes:xB('getUTCMinutes',vB,0),utcseconds:xB('getUTCSeconds',vB,0),utcmilliseconds:xB('getUTCMilliseconds',vB,0),length:xB('length',null,-1),indexof:xB('indexOf',null),lastindexof:xB('lastIndexOf',null),slice:xB('slice',null),parseFloat:'parseFloat',parseInt:'parseInt',upper:xB('toUpperCase',kB,0),lower:xB('toLowerCase',kB,0),substring:xB('substring',kB),replace:xB('replace',kB),regexp:wB,test:xB('test',wB),if:function(CB){3>CB.length&&ke('Missing arguments to if function.'),3<CB.length&&ke('Too many arguments to if function.');var zB=CB.map(bB);return'('+zB[0]+'?'+zB[1]+':'+zB[2]+')'}}}function $w(bB){var _B={};return function(xB,vB){var kB=_B[vB]||(_B[vB]=bB(vB));return kB(xB)}}function Nw(bB,_B,xB){return o$.setMonth(bB),o$.setDate(_B),i$(o$,xB)}function Vw(bB,_B,xB){try{bB[_B].apply(bB,['EXPRESSION'].concat([].slice.call(xB)))}catch(vB){bB.warn(vB)}return xB[xB.length-1]}function oE(bB,_B){var xB;return Oe(bB)?bB:Se(bB)?(xB=_B.scales[bB])&&xB.value:void 0}function lE(bB,_B,xB){var vB=u$+xB;if(!_B.hasOwnProperty(vB))try{_B[vB]=bB.scaleRef(xB)}catch(kB){}}function sE(bB,_B,xB,vB){if(_B[0].type===s$)lE(xB,vB,_B[0].value);else if(_B[0].type===f$)for(bB in xB.scales)lE(xB,vB,bB)}function bE(bB){return function(_B,xB,vB){var kB=oE(_B,(vB||this).context);return kB&&kB.path[bB](xB)}}function _E(bB){var _B=this.context.data[bB];return _B?_B.values.value:[]}function xE(bB,_B,xB,vB){_B[0].type!==s$&&ke('First argument to data functions must be a string literal.');var kB=_B[0].value,wB=p$+kB;vB.hasOwnProperty(wB)||(vB[wB]=xB.getData(kB).tuplesRef())}function wE(bB){return bB.data}function EE(bB,_B){var xB=_E.call(_B,bB);return xB.root&&xB.root.lookup||y$}function zE(bB,_B){var xB=_B[0],vB=_B[_B.length-1],kB;return xB>vB&&(kB=xB,xB=vB,vB=kB),xB<=bB&&bB<=vB}function RE(bB){return function(_B){for(var xB in bB)if('_id'!==xB&&_B[xB]!==bB[xB])return!1;return!0}}function AE(bB,_B){for(var xB=_B.fields,vB=_B.values,kB=_B.getter||(_B.getter=[]),wB=xB.length,SB=0;SB<wB;++SB)if(kB[SB]=kB[SB]||ze(xB[SB]),kB[SB](bB)!==vB[SB])return!1;return!0}function OE(bB,_B){for(var xB=_B.intervals,vB=xB.length,kB=0,wB;kB<vB;++kB){if(wB=xB[kB].getter||(xB[kB].getter=ze(xB[kB].field)),xB[kB].extent[0]===xB[kB].extent[1])return!0;if(!zE(wB(bB),xB[kB].extent))return!1}return!0}function ME(bB,_B,xB,vB,kB,wB){for(var SB=this.context.data[bB],CB=SB?SB.values.value:[],zB=vB!==b$,TB=CB.length,RB=0,PB,AB;RB<TB;++RB)if(PB=CB[RB],AB=_B===PB.unit,(kB!==x$||!AB)&&(kB!==_$||AB)&&(AB=wB(xB,PB),zB^AB))return AB;return!TB||zB}function FE(bB,_B,xB){return bB[0]>_B&&(bB[0]=_B),bB[1]<xB&&(bB[1]=xB),bB}function jE(bB,_B,xB){return xB<bB[0]||bB[1]<_B?[]:(bB[0]<_B&&(bB[0]=_B),bB[1]>xB&&(bB[1]=xB),bB)}function IE(bB,_B,xB){return 1===arguments.length?v$[bB]:(v$[bB]=_B,xB&&(S$[bB]=xB),z$&&(z$.functions[bB]=E$+bB),this)}function NE(bB,_B,xB){var vB={},kB,wB;try{kB=Fw(bB)}catch(SB){ke('Expression parse error: '+Ce(bB))}return kB.visit(function(CB){if('CallExpression'===CB.type){var zB=CB.callee.name,TB=C$.visitors[zB];TB&&TB(zB,CB.arguments,_B,vB)}}),wB=z$(kB),wB.globals.forEach(function(SB){var CB=T$+SB;!vB.hasOwnProperty(CB)&&_B.getSignal(SB)&&(vB[CB]=_B.signalRef(SB))}),{$expr:xB?xB+'return('+wB.code+');':wB.code,$fields:wB.fields,$params:vB}}function BE(bB,_B){return bB.signal?_B.getSignal(bB.signal).id:GE(bB,_B)}function YE(bB){return bB===P$?R$:bB||R$}function GE(bB,_B){var xB=bB.merge?WE:bB.stream?HE:bB.type?XE:ke('Invalid stream specification: '+Ce(bB));return xB(bB,_B)}function WE(bB,_B){var xB=bB.merge.map(function(kB){return GE(kB,_B)}),vB=VE({merge:xB},bB,_B);return _B.addStream(vB).id}function HE(bB,_B){var xB=GE(bB.stream,_B),vB=VE({stream:xB},bB,_B);return _B.addStream(vB).id}function XE(bB,_B){var xB=_B.event(YE(bB.source),bB.type),vB=VE({stream:xB},bB,_B);return 1===Object.keys(vB).length?xB:_B.addStream(vB).id}function VE(bB,_B,xB){var vB=_B.between;return vB&&(2!==vB.length&&ke('Stream "between" parameter must have 2 entries: '+Ce(_B)),bB.between=[GE(vB[0],xB),GE(vB[1],xB)]),vB=_B.filter?Pe(_B.filter):[],(_B.marktype||_B.markname||_B.markrole)&&vB.push(JE(_B.marktype,_B.markname,_B.markrole)),_B.source===P$&&vB.push('inScope(event.item)'),vB.length&&(bB.filter=NE('('+vB.join(')&&(')+')').$expr),null!=(vB=_B.throttle)&&(bB.throttle=+vB),null!=(vB=_B.debounce)&&(bB.debounce=+vB),_B.consume&&(bB.consume=!0),bB}function JE(bB,_B,xB){var vB='event.item';return vB+(bB&&'*'!==bB?'&&'+vB+'.mark.marktype===\''+bB+'\'':'')+(xB?'&&'+vB+'.mark.role===\''+xB+'\'':'')+(_B?'&&'+vB+'.mark.name===\''+_B+'\'':'')}function ZE(bB,_B,xB){return $$=_B||A$,N$=xB||B$,eS(bB.trim()).map(tS)}function KE(bB){return N$.hasOwnProperty(bB)}function QE(bB,_B,xB,vB,kB){for(var wB=0,SB=bB.length,CB;_B<SB;++_B){if(CB=bB[_B],!wB&&CB===xB)return _B;kB&&0<=kB.indexOf(CB)?--wB:vB&&0<=vB.indexOf(CB)&&++wB}return _B}function eS(bB){for(var _B=[],xB=0,vB=bB.length,kB=0;kB<vB;)kB=QE(bB,kB,U$,O$+D$,M$+q$),_B.push(bB.substring(xB,kB).trim()),xB=++kB;if(0===_B.length)throw'Empty event selector: '+bB;return _B}function tS(bB){return'['===bB[0]?nS(bB):aS(bB)}function nS(bB){var _B=bB.length,xB=1,vB,kB;if(xB=QE(bB,xB,M$,O$,M$),xB===_B)throw'Empty between selector: '+bB;if(vB=eS(bB.substring(1,xB)),2!==vB.length)throw'Between selector must have two elements: '+bB;if(bB=bB.slice(xB+1).trim(),bB[0]!==j$)throw'Expected \'>\' after between selector: '+bB;return(vB=vB.map(tS),kB=tS(bB.slice(1).trim()),kB.between)?{between:vB,stream:kB}:(kB.between=vB,kB)}function aS(bB){var _B={source:$$},xB=[],vB=[0,0],kB=0,wB=0,SB=bB.length,CB=0,zB,TB;if(bB[SB-1]===q$){if(CB=bB.lastIndexOf(D$),0<=CB){try{vB=iS(bB.substring(CB+1,SB-1))}catch(RB){throw'Invalid throttle specification: '+bB}bB=bB.slice(0,CB).trim(),SB=bB.length}else throw'Unmatched right brace: '+bB;CB=0}if(!SB)throw bB;if(bB[0]===F$&&(kB=++CB),zB=QE(bB,CB,L$),zB<SB&&(xB.push(bB.substring(wB,zB).trim()),wB=CB=++zB),CB=QE(bB,CB,O$),CB===SB)xB.push(bB.substring(wB,SB).trim());else if(xB.push(bB.substring(wB,CB).trim()),TB=[],wB=++CB,wB===SB)throw'Unmatched left bracket: '+bB;for(;CB<SB;){if(CB=QE(bB,CB,M$),CB===SB)throw'Unmatched left bracket: '+bB;if(TB.push(bB.substring(wB,CB).trim()),CB<SB-1&&bB[++CB]!==O$)throw'Expected left bracket: '+bB;wB=++CB}if(!(SB=xB.length)||I$.test(xB[SB-1]))throw'Invalid event selector: '+bB;return 1<SB?(_B.type=xB[1],kB?_B.markname=xB[0].slice(1):KE(xB[0])?_B.marktype=xB[0]:_B.source=xB[0]):_B.type=xB[0],'!'===_B.type.slice(-1)&&(_B.consume=!0,_B.type=_B.type.slice(0,-1)),null!=TB&&(_B.filter=TB),vB[0]&&(_B.throttle=vB[0]),vB[1]&&(_B.debounce=vB[1]),_B}function iS(bB){var _B=bB.split(U$);if(!bB.length||2<_B.length)throw bB;return _B.map(function(xB){var vB=+xB;if(vB!==vB)throw bB;return vB})}function dS(bB,_B,xB){var vB=bB.events,kB=bB.update,wB=bB.encode,SB=[],CB='',zB;vB||ke('Signal update missing events specification.'),Se(vB)&&(vB=ZE(vB)),vB=Pe(vB).filter(function(TB){return TB.signal?(SB.push(TB),0):1}),vB.length&&SB.push(1<vB.length?{merge:vB}:vB[0]),null!=wB&&(kB&&ke('Signal encode and update are mutually exclusive.'),kB='encode(item(),'+Ce(wB)+')'),CB=Se(kB)?NE(kB,_B,Y$):null==kB.expr?null==kB.value?null==kB.signal?ke('Invalid signal update specification.'):{$expr:'_.value',$params:{value:_B.signalRef(kB.signal)}}:kB.value:NE(kB.expr,_B,Y$),zB={target:xB,update:CB},bB.force&&(zB.options={force:!0}),SB.forEach(function(TB){TB={source:BE(TB,_B)},_B.addUpdate(De(TB,zB))})}function rS(bB,_B){var xB=_B.getSignal(bB.name);if(bB.update){var vB=NE(bB.update,_B);xB.update=vB.$expr,xB.params=vB.$params}bB.on&&bB.on.forEach(function(kB){dS(kB,_B,xB.id)})}function oS(bB,_B){var xB={};for(var vB in bB)'name'!==vB&&(xB[vB]=lS(bB[vB],_B));_B.addProjection(bB.name,xB)}function lS(bB,_B){return Qz(bB)?bB.map(function(xB){return lS(xB,_B)}):Ee(bB)?bB.signal?_B.signalRef(bB.signal):ke('Unsupported parameter object: '+Ce(bB)):bB}function sS(bB,_B){var xB='';return G$[_B]?xB:(bB.x2&&(bB.x?(W$[_B]&&(xB+='if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;'),xB+='o.width=o.x2-o.x;'):bB.width?xB+='o.x=o.x2-o.width;':xB+='o.x=o.x2;'),bB.xc&&(bB.width?xB+='o.x=o.xc-o.width/2;':xB+='o.x=o.xc;'),bB.y2&&(bB.y?(W$[_B]&&(xB+='if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;'),xB+='o.height=o.y2-o.y;'):bB.height?xB+='o.y=o.y2-o.height;':xB+='o.y=o.y2;'),bB.yc&&(bB.height?xB+='o.y=o.yc-o.height/2;':xB+='o.y=o.yc;'),xB)}function fS(bB,_B,xB,vB){function kB(wB,SB,CB,zB){var TB=_S(null,SB,_B,xB,vB),RB=_S(null,CB,_B,xB,vB),PB=_S(null,zB,_B,xB,vB);return'this.'+wB+'('+[TB,RB,PB].join(',')+').toString()'}return bB.c?kB('hcl',bB.h,bB.c,bB.l):bB.h||bB.s?kB('hsl',bB.h,bB.s,bB.l):bB.l||bB.a?kB('lab',bB.l,bB.a,bB.b):bB.r||bB.g||bB.b?kB('rgb',bB.r,bB.g,bB.b):null}function cS(bB,_B,xB,vB){var kB=NE(bB,_B);return kB.$fields.forEach(function(wB){vB[wB]=1}),De(xB,kB.$params),kB.$expr}function uS(bB,_B,xB,vB){return pS(Ee(bB)?bB:{datum:bB},_B,xB,vB)}function pS(bB,_B,xB,vB){var kB,wB,SB;if(bB.signal)kB='datum',SB=cS(bB.signal,_B,xB,vB);else if(bB.group||bB.parent){for(wB=Math.max(1,bB.level||1),kB='item';0<wB--;)kB+='.mark.group';bB.parent?(SB=bB.parent,kB+='.datum'):SB=bB.group}else bB.datum?(kB='datum',SB=bB.datum):ke('Invalid field reference: '+Ce(bB));return bB.signal||(Se(SB)?(vB[SB]=1,SB=we(SB).map(Ce).join('][')):SB=pS(SB,_B,xB,vB)),kB+'['+SB+']'}function gS(bB,_B,xB,vB,kB){var wB=hS(bB.scale,xB,vB,kB),SB,CB,zB;return null==bB.range?(void 0!==_B&&(_B=wB+'('+_B+')'),bB.band&&(zB=mS(bB.scale,xB))&&(CB=wB+'.bandwidth',SB=+bB.band,SB=CB+'()'+(1===SB?'':'*'+SB),0>zB&&(SB='('+CB+'?'+SB+':0)'),_B=(_B?_B+'+':'')+SB,bB.extra&&(_B='(datum.extra?'+wB+'(datum.extra.value):'+_B+')')),null==_B&&(_B='0')):(SB=+bB.range,CB=wB+'.range()',_B=0===SB?CB+'[0]':'($='+CB+','+(1===SB?'$[$.length-1]':'$[0]+'+SB+'*($[$.length-1]-$[0])')+')'),_B}function mS(bB,_B){if(!Se(bB))return-1;var xB=_B.scaleType(bB);return'band'===xB||'point'===xB?1:0}function hS(bB,_B,xB,vB){if(Se(bB))kB=u$+bB,xB.hasOwnProperty(kB)||(xB[kB]=_B.scaleRef(bB)),kB=Ce(kB);else{for(var kB in _B.scales)xB[u$+kB]=_B.scaleRef(kB);kB=Ce(u$)+'+'+(bB.signal?'('+cS(bB.signal,_B,xB,vB)+')':uS(bB,_B,xB,vB))}return'_['+kB+']'}function yS(bB,_B,xB,vB){return'this.gradient('+hS(bB.gradient,_B,xB,vB)+','+Ce(bB.start)+','+Ce(bB.stop)+','+Ce(bB.count)+')'}function bS(bB,_B,xB,vB){return Ee(bB)?'('+_S(null,bB,_B,xB,vB)+')':bB}function _S(bB,_B,xB,vB,kB){if(null!=_B.gradient)return yS(_B,xB,vB,kB);var wB=_B.signal?cS(_B.signal,xB,vB,kB):_B.color?fS(_B.color,xB,vB,kB):null==_B.field?void 0===_B.value?void 0:Ce(_B.value):uS(_B.field,xB,vB,kB);return null!=_B.scale&&(wB=gS(_B,wB,xB,vB,kB)),void 0===wB&&(wB=null),null!=_B.exponent&&(wB='Math.pow('+wB+','+bS(_B.exponent,xB,vB,kB)+')'),null!=_B.mult&&(wB+='*'+bS(_B.mult,xB,vB,kB)),null!=_B.offset&&(wB+='+'+bS(_B.offset,xB,vB,kB)),_B.round&&(wB='Math.round('+wB+')'),wB}function xS(bB,_B,xB){return bB+'['+Ce(_B)+']='+xB+';'}function vS(bB,_B,xB,vB,kB){var wB='';return _B.forEach(function(SB){var CB=_S(bB,SB,xB,vB,kB);wB+=SB.test?cS(SB.test,xB,vB,kB)+'?'+CB+':':CB}),xS('o',bB,wB)}function kS(bB,_B,xB,vB){var kB={},wB='var o=item,datum=o.datum,$;',SB,CB,zB;for(SB in bB)CB=bB[SB],Qz(CB)?wB+=vS(SB,CB,vB,xB,kB):(zB=_S(SB,CB,vB,xB,kB),wB+=xS('o',SB,zB));return wB+=sS(bB,_B),wB+='return 1;',{$expr:wB,$fields:Object.keys(kB),$output:Object.keys(bB)}}function wS(bB){return Ee(bB)?bB:{value:bB}}function ES(bB,_B,xB){return null==xB?0:(bB[_B]={value:xB},1)}function SS(bB,_B,xB){for(var vB in _B)xB&&xB.hasOwnProperty(vB)||(bB[vB]=De(bB[vB]||{},_B[vB]));return bB}function CS(bB,_B,xB,vB,kB){var wB,SB;for(SB in kB=kB||{},kB.encoders={$encode:wB={}},bB=zS(bB,_B,xB,vB.config),bB)wB[SB]=kS(bB[SB],_B,kB,vB);return kB}function zS(bB,_B,xB,vB){var kB,wB,SB;for(wB in('legend'==xB||0===(xB+'').indexOf('axis'))&&(xB=null),vB=xB===X$?vB.group:xB===H$||vB[_B=xB]?De({},vB.mark,vB[_B]):{},kB={},vB)SB=TS(wB,bB)||('fill'===wB||'stroke'===wB)&&(TS('fill',bB)||TS('stroke',bB)),SB||(kB[wB]={value:vB[wB]});return bB=De({},bB),bB.enter=De(kB,bB.enter),bB}function TS(bB,_B){return _B.enter&&_B.enter[bB]||_B.update&&_B.update[bB]}function RS(bB,_B,xB,vB,kB,wB){return{type:bB,name:wB?wB.name:void 0,role:_B,key:xB,from:vB,interactive:!!(wB&&wB.interactive),encode:SS(kB,wB,sN)}}function PS(bB,_B,xB){var vB={value:0},kB={},wB,SB;return kB.enter=wB={opacity:vB,x:vB,y:vB},ES(wB,'width',_B.gradientWidth),ES(wB,'height',_B.gradientHeight),ES(wB,'stroke',_B.gradientStrokeColor),ES(wB,'strokeWidth',_B.gradientStrokeWidth),kB.exit={opacity:vB},kB.update=SB={x:vB,y:vB,fill:{gradient:bB},opacity:{value:1}},ES(SB,'width',_B.gradientWidth),ES(SB,'height',_B.gradientHeight),RS(cN,iN,void 0,void 0,kB,xB)}function AS(bB,_B,xB,vB){var kB={value:0},wB={},SB,CB;return wB.enter=SB={opacity:kB,text:{field:xN}},ES(SB,'fill',_B.labelColor),ES(SB,'font',_B.labelFont),ES(SB,'fontSize',_B.labelFontSize),ES(SB,'baseline',_B.gradientLabelBaseline),ES(SB,'limit',_B.gradientLabelLimit),wB.exit={opacity:kB},wB.update=CB={opacity:{value:1}},SB.x=CB.x={field:kN,mult:_B.gradientWidth},SB.y=CB.y={value:_B.gradientHeight,offset:_B.gradientLabelOffset},SB.align=CB.align={signal:zN},RS(gN,dN,kN,vB,wB,xB)}function OS(bB,_B,xB,vB){var kB={value:0},wB={},SB,CB;return wB.enter=SB={opacity:kB,text:{field:xN}},ES(SB,'align',_B.labelAlign),ES(SB,'baseline',_B.labelBaseline),ES(SB,'fill',_B.labelColor),ES(SB,'font',_B.labelFont),ES(SB,'fontSize',_B.labelFontSize),ES(SB,'limit',_B.labelLimit),wB.exit={opacity:kB},wB.update=CB={opacity:{value:1}},SB.x=CB.x={field:vN,offset:_B.labelOffset},SB.y=CB.y={field:wN,mult:0.5,offset:{field:EN,offset:{field:{group:'entryPadding'},mult:{field:_N}}}},RS(gN,dN,SN,vB,wB,xB)}function MS(bB,_B,xB,vB){var kB={value:0},wB={},SB,CB;return wB.enter=SB={opacity:kB},ES(SB,'shape',_B.symbolType),ES(SB,'size',_B.symbolSize),ES(SB,'strokeWidth',_B.symbolStrokeWidth),bB.fill||ES(SB,'stroke',_B.symbolColor),wB.exit={opacity:kB},wB.update=CB={opacity:{value:1}},SB.x=CB.x={field:vN,mult:0.5},SB.y=CB.y={field:wN,mult:0.5,offset:{field:EN,offset:{field:{group:'entryPadding'},mult:{field:_N}}}},CN.forEach(function(zB){bB[zB]&&(CB[zB]=SB[zB]={scale:bB[zB],field:SN})}),RS(pN,rN,SN,vB,wB,xB)}function DS(bB,_B,xB,vB){var kB={value:0},wB=bB.title,SB={},CB;return SB.enter=CB={x:{field:{group:'padding'}},y:{field:{group:'padding'}},opacity:kB},ES(CB,'align',_B.titleAlign),ES(CB,'baseline',_B.titleBaseline),ES(CB,'fill',_B.titleColor),ES(CB,'font',_B.titleFont),ES(CB,'fontSize',_B.titleFontSize),ES(CB,'fontWeight',_B.titleFontWeight),ES(CB,'limit',_B.titleLimit),SB.exit={opacity:kB},SB.update={opacity:{value:1},text:wB&&wB.signal?{signal:wB.signal}:{value:wB+''}},RS(gN,oN,null,vB,SB,xB)}function qS(bB,_B,xB,vB,kB,wB){return{type:fN,name:_B,role:bB,from:xB,interactive:vB,encode:kB,marks:wB}}function LS(bB){var _B=bB.role||'';return _B.indexOf('axis')&&_B.indexOf('legend')?bB.type===fN?V$:_B||H$:_B}function US(bB){return{clip:bB.clip||!1,interactive:!1!==bB.interactive,marktype:bB.type,name:bB.name||void 0,role:bB.role||LS(bB),zindex:+bB.zindex||void 0}}function FS(bB){return bB}function jS(bB,_B,xB,vB){this.id=-1,this.type=bB,this.value=_B,this.params=xB,vB&&(this.parent=vB)}function IS(bB,_B,xB,vB){return new jS(bB,_B,xB,vB)}function $S(bB,_B){return IS('Operator',bB,_B)}function NS(bB){var _B={$ref:bB.id};return 0>bB.id&&(bB.refs=bB.refs||[]).push(_B),_B}function BS(bB,_B){return _B?{$field:bB,$name:_B}:{$field:bB}}function YS(bB,_B){return{$compare:bB,$order:_B}}function GS(bB){return{$key:bB}}function WS(bB){return Ee(bB)?(bB.order===PN?'-':'+')+HS(bB.op,bB.field):''}function HS(bB,_B){return(bB&&bB.signal?'$'+bB.signal:bB||'')+(bB&&_B?'_':'')+(_B&&_B.signal?'$'+_B.signal:_B||'')}function XS(bB){return bB&&bB.signal}function VS(bB){return function(_B,xB,vB){return IS(bB,xB,_B||void 0,vB)}}function JS(bB,_B){var xB=Al(bB.type);xB||ke('Unrecognized transform type: '+Ce(bB.type));var vB=IS(xB.type,null,ZS(xB,bB,_B));return bB.signal&&_B.addSignal(bB.signal,_B.proxy(vB)),vB.metadata=xB.metadata||{},vB}function ZS(bB,_B,xB){var vB={},kB,wB,SB;for(wB=0,SB=bB.params.length;wB<SB;++wB)kB=bB.params[wB],vB[kB.name]=KS(kB,_B,xB);return vB}function KS(bB,_B,xB){var vB=bB.type,kB=_B[bB.name];if('index'===vB)return eC(bB,_B,xB);return void 0===kB?void(bB.required&&ke('Missing required '+Ce(_B.type)+' parameter: '+Ce(bB.name))):'param'===vB?tC(bB,_B,xB):'projection'===vB?xB.projectionRef(_B[bB.name]):bB.array&&!XS(kB)?kB.map(function(wB){return QS(bB,wB,xB)}):QS(bB,kB,xB)}function QS(bB,_B,xB){var vB=bB.type;if(XS(_B))return rC(vB)?ke('Expression references can not be signals.'):oC(vB)?xB.fieldRef(_B):lC(vB)?xB.compareRef(_B):xB.signalRef(_B.signal);var kB=bB.expr||oC(vB);return kB&&aC(_B)?NE(_B.expr,xB):kB&&iC(_B)?BS(_B.field):rC(vB)?NE(_B,xB):dC(vB)?NS(xB.getData(_B).values):oC(vB)?BS(_B):lC(vB)?xB.compareRef(_B):_B}function eC(bB,_B,xB){return Se(_B.from)||ke('Lookup "from" parameter must be a string literal.'),xB.getData(_B.from).lookupRef(xB,_B.key)}function tC(bB,_B,xB){var vB=_B[bB.name];return bB.array?(Qz(vB)||ke('Expected an array of sub-parameters. Instead: '+Ce(vB)),vB.map(function(kB){return nC(bB,kB,xB)})):nC(bB,vB,xB)}function nC(bB,_B,xB){var vB,kB,wB,SB,CB;for(SB=0,CB=bB.params.length;SB<CB;++SB){for(wB in kB=bB.params[SB],kB.key)if(kB.key[wB]!==_B[wB]){kB=null;break}if(kB)break}return kB||ke('Unsupported parameter: '+Ce(_B)),vB=De(ZS(kB,_B,xB),kB.key),NS(xB.add(GN(vB)))}function aC(bB){return bB&&bB.expr}function iC(bB){return bB&&bB.field}function dC(bB){return'data'===bB}function rC(bB){return'expr'===bB}function oC(bB){return'field'===bB}function lC(bB){return'compare'===bB}function sC(bB,_B,xB){var vB,kB,wB,SB,CB;return bB?(vB=bB.facet)&&(!_B&&ke('Only group marks can be faceted.'),null==vB.field?(kB=xB.keyRef(vB.groupby),bB.data?CB=NS(xB.getData(bB.data).aggregate):(wB=JS(De({type:'aggregate',groupby:Pe(vB.groupby)},vB.aggregate)),wB.params.key=kB,wB.params.pulse=NS(xB.getData(vB.data).output),SB=CB=NS(xB.add(wB)))):SB=CB=NS(xB.getData(vB.data).output)):SB=NS(xB.add(DN(null,[{}]))),SB||(SB=bB.$ref?bB:bB.mark?NS(xB.getData(FS(bB.mark)).output):NS(xB.getData(bB.data).output)),{key:kB,pulse:SB,parent:CB}}function fC(bB,_B,xB,vB,kB){this.scope=bB,this.input=_B,this.output=xB,this.values=vB,this.aggregate=kB,this.index={}}function cC(bB){return Se(bB)?bB:null}function uC(bB,_B,xB){var vB=HS(xB.op,xB.field),kB;if(_B.ops){for(var wB=0,SB=_B.as.length;wB<SB;++wB)if(_B.as[wB]===vB)return;}else _B.ops=['count'],_B.fields=[null],_B.as=['count'];xB.op&&(_B.ops.push((kB=xB.op.signal)?bB.signalRef(kB):xB.op),_B.fields.push(bB.fieldRef(xB.field)),_B.as.push(vB))}function pC(bB,_B,xB,vB,kB,wB,SB){var CB=_B[xB]||(_B[xB]={}),zB=WS(wB),TB=cC(kB),RB,PB;if(null!=TB&&(bB=_B.scope,TB+=zB?'|'+zB:'',RB=CB[TB]),!RB){var AB=wB?{field:TN,pulse:_B.countsRef(bB,kB,wB)}:{field:bB.fieldRef(kB),pulse:NS(_B.output)};zB&&(AB.sort=bB.sortRef(wB)),PB=bB.add(IS(vB,void 0,AB)),SB&&(_B.index[kB]=PB),RB=NS(PB),null!=TB&&(CB[TB]=RB)}return RB}function gC(bB,_B,xB){var vB=bB.from.facet,kB=vB.name,wB=NS(_B.getData(vB.data).output),SB,CB,zB,TB;vB.name||ke('Facet must have a name: '+Ce(vB)),vB.data||ke('Facet must reference a data set: '+Ce(vB)),vB.field?TB=_B.add(WN({field:_B.fieldRef(vB.field),pulse:wB})):vB.groupby?TB=_B.add(FN({key:_B.keyRef(vB.groupby),group:NS(_B.proxy(xB.parent)),pulse:wB})):ke('Facet must specify groupby or field: '+Ce(vB)),SB=_B.fork(),CB=SB.add(DN()),zB=SB.add(KN({pulse:NS(CB)})),SB.addData(kB,new fC(SB,CB,CB,zB)),SB.addSignal('parent',null),TB.params.subflow={$subflow:KC(bB,SB).toRuntime()}}function mC(bB,_B,xB){var vB=_B.add(WN({pulse:xB.pulse})),kB=_B.fork();kB.add(KN()),kB.addSignal('parent',null),vB.params.subflow={$subflow:KC(bB,kB).toRuntime()}}function hC(bB,_B,xB){var vB=bB.remove,kB=bB.insert,wB=bB.toggle,SB=bB.modify,CB=bB.values,zB=_B.add($S()),TB,RB;TB='if('+bB.trigger+',modify("'+xB+'",'+[kB,vB,wB,SB,CB].map(function(PB){return null==PB?'null':PB}).join(',')+'),0)',RB=NE(TB,_B),zB.update=RB.$expr,zB.params=RB.$params}function yC(bB,_B){var xB=LS(bB),vB=bB.type===fN,kB=bB.from&&bB.from.facet,wB=bB.layout||xB===V$||xB===X$,SB=xB===H$||wB||kB,CB,zB,TB,RB,PB,AB,OB,MB,DB,qB,LB,UB,FB;TB=sC(bB.from,vB,_B),zB=_B.add(LN({key:TB.key||(bB.key?BS(bB.key):void 0),pulse:TB.pulse,clean:!vB})),DB=NS(zB),zB=RB=_B.add(DN({pulse:DB})),zB=_B.add(NN({markdef:US(bB),context:{$context:!0},groups:_B.lookup(),parent:_B.signals.parent?_B.signalRef('parent'):null,index:_B.markpath(),pulse:NS(zB)})),qB=NS(zB),zB=_B.add(UN(CS(bB.encode,bB.type,xB,_B,{pulse:qB}))),zB.params.parent=_B.encode(),bB.transform&&bB.transform.forEach(function(jB){var IB=JS(jB,_B);(IB.metadata.generates||IB.metadata.changes)&&ke('Mark transforms should not generate new data.'),IB.params.pulse=NS(zB),_B.add(zB=IB)}),bB.sort&&(zB=_B.add(QN({sort:_B.compareRef(bB.sort),pulse:NS(zB)}))),LB=NS(zB),(kB||wB)&&(wB=_B.add(eB({layout:_B.objectProperty(bB.layout),legendMargin:_B.config.legendMargin,mark:qB,pulse:LB})),UB=NS(wB)),PB=_B.add(MN({mark:qB,pulse:UB||LB})),FB=NS(PB),vB&&(SB&&(CB=_B.operators,CB.pop(),wB&&CB.pop()),_B.pushState(LB,UB||FB,DB),kB?gC(bB,_B,TB):SB?mC(bB,_B,TB):KC(bB,_B),_B.popState(),SB&&(wB&&CB.push(wB),CB.push(PB))),AB=_B.add(JN({pulse:FB})),OB=_B.add(KN({pulse:FB},void 0,_B.parent())),null!=bB.name&&(MB=FS(bB.name),_B.addData(MB,new fC(_B,RB,AB,OB)),bB.on&&bB.on.forEach(function(jB){(jB.insert||jB.remove||jB.toggle)&&ke('Marks only support modify triggers.'),hC(jB,_B,MB)}))}function bC(bB,_B){var xB=bB.type||'symbol',vB=_B.config.legend,kB=bB.name||void 0,wB=bB.encode||{},SB=!!bB.interactive,DB=bB.size||bB.shape||bB.fill||bB.stroke||bB.strokeDash||bB.opacity,CB,zB,TB,RB,PB,AB,OB,MB;return DB||ke('Missing valid scale for legend.'),CB={orient:_C(bB.orient,vB.orient),title:null!=bB.title},zB=NS(_B.add(DN(null,[CB]))),AB=SS({enter:vC(vB),update:{offset:wS(_C(bB.offset,vB.offset)),padding:wS(_C(bB.padding,vB.padding)),titlePadding:wS(_C(bB.titlePadding,vB.titlePadding))}},wB.legend),OB={update:{x:{field:{group:'padding'}},y:{field:{group:'padding'}},entryPadding:wS(_C(bB.entryPadding,vB.entryPadding))}},'gradient'===xB?(TB=NS(_B.add($N({type:'gradient',scale:_B.scaleRef(DB),count:_B.property(bB.tickCount),values:_B.property(bB.values),formatSpecifier:_B.property(bB.format)}))),MB=[PS(DB,vB,wB.gradient),AS(bB,vB,wB.labels,TB)]):(TB=NS(_B.add($N({size:xC(bB,vB,wB.labels),scale:_B.scaleRef(DB),count:_B.property(bB.tickCount),values:_B.property(bB.values),formatSpecifier:_B.property(bB.format)}))),MB=[MS(bB,vB,wB.symbols,TB),OS(bB,vB,wB.labels,TB)]),MB=[qS(aN,null,zB,SB,OB,MB)],CB.title&&(PB=DS(bB,vB,wB.title,zB),OB.update.y.offset={field:{group:'titlePadding'},offset:PB.encode.update.fontSize||PB.encode.enter.fontSize},MB.push(PB)),RB=qS(nN,kB,zB,SB,AB,MB),bB.zindex&&(RB.zindex=bB.zindex),yC(RB,_B)}function _C(bB,_B){return null==bB?_B:bB}function xC(bB,_B,xB){var vB=+_B.symbolSize,kB;return kB=xB&&xB.update&&xB.update.fontSize,kB||(kB=xB&&xB.enter&&xB.enter.fontSize),kB&&(kB=kB.value),kB||(kB=+_B.labelFontSize),bB.size?{$expr:'Math.max(Math.ceil(Math.sqrt(_.scale(datum))),'+kB+')'}:Math.max(Math.ceil(Math.sqrt(vB)),kB)}function vC(bB){var _B={},xB=ES(_B,'fill',bB.fillColor)+ES(_B,'stroke',bB.strokeColor)+ES(_B,'strokeWidth',bB.strokeWidth)+ES(_B,'strokeDash',bB.strokeDash)+ES(_B,'cornerRadius',bB.cornerRadius);return xB?_B:void 0}function kC(bB){return rB.hasOwnProperty(bB)}function wC(bB){return'quantile'===bB}function EC(bB,_B){var xB=bB.type||'linear',vB,kB;for(kB in dB.hasOwnProperty(xB)||ke('Unrecognized scale type: '+Ce(xB)),vB={type:xB,domain:TC(bB.domain,bB,_B)},null!=bB.range&&(vB.range=FC(bB,_B,vB)),null!=bB.interpolate&&UC(bB.interpolate,vB),bB)vB.hasOwnProperty(kB)||'name'===kB||(vB[kB]=SC(bB[kB],_B));_B.addScale(bB.name,vB)}function SC(bB,_B){return Ee(bB)?bB.signal?_B.signalRef(bB.signal):ke('Unsupported object: '+Ce(bB)):bB}function CC(bB,_B){return bB.signal?_B.signalRef(bB.signal):bB.map(function(xB){return SC(xB,_B)})}function zC(bB){ke('Can not find data set: '+Ce(bB))}function TC(bB,_B,xB){return bB?bB.signal?xB.signalRef(bB.signal):(Qz(bB)?RC:bB.fields?AC:PC)(bB,_B,xB):void((null!=_B.domainMin||null!=_B.domainMax)&&ke('No scale domain defined for domainMin/domainMax to override.'))}function RC(bB,_B,xB){return bB.map(function(vB){return SC(vB,xB)})}function PC(bB,_B,xB){var vB=xB.getData(bB.data);return vB||zC(bB.data),kC(_B.type)?vB.valuesRef(xB,bB.field,DC(bB.sort,!1)):wC(_B.type)?vB.domainRef(xB,bB.field):vB.extentRef(xB,bB.field)}function AC(bB,_B,xB){var vB=bB.data,kB=bB.fields.reduce(function(wB,SB){return SB=Se(SB)?{data:vB,field:SB}:Qz(SB)||SB.signal?OC(SB,xB):SB,wB.push(SB),wB},[]);return(kC(_B.type)?MC:wC(_B.type)?qC:LC)(bB,xB,kB)}function OC(bB,_B){var xB='_:vega:_'+aB++,vB=DN({});return Qz(bB)?vB.value={$ingest:bB}:bB.signal&&_B.signalRef('modify('+Ce(xB)+','+bB.signal+', true)'),_B.addDataPipeline(xB,[vB,KN({})]),{data:xB,field:'data'}}function MC(bB,_B,xB){var vB,kB,wB,SB;return vB=xB.map(function(CB){var zB=_B.getData(CB.data);return zB||zC(CB.data),zB.countsRef(_B,CB.field)}),kB=_B.add(AN({groupby:TN,ops:['sum'],fields:[_B.fieldRef('count')],as:['count'],pulse:vB})),wB=_B.add(DN({pulse:NS(kB)})),SB=_B.add(tB({field:TN,sort:_B.sortRef(DC(bB.sort,!0)),pulse:NS(wB)})),NS(SB)}function DC(bB,_B){return bB&&(bB.field||bB.op?bB.field||'count'===bB.op?_B&&bB.field?ke('Multiple domain scales can not sort by field.'):_B&&bB.op&&'count'!==bB.op&&ke('Multiple domain scales support op count only.'):ke('No field provided for sort aggregate op: '+bB.op):Ee(bB)?bB.field='key':bB={field:'key'}),bB}function qC(bB,_B,xB){var vB=xB.map(function(kB){var wB=_B.getData(kB.data);return wB||zC(kB.data),wB.domainRef(_B,kB.field)});return NS(_B.add(YN({values:vB})))}function LC(bB,_B,xB){var vB=xB.map(function(kB){var wB=_B.getData(kB.data);return wB||zC(kB.data),wB.extentRef(_B,kB.field)});return NS(_B.add(BN({extents:vB})))}function UC(bB,_B){_B.interpolate=SC(bB.type||bB),null!=bB.gamma&&(_B.interpolateGamma=SC(bB.gamma))}function FC(bB,_B,xB){var vB=bB.range,kB=_B.config.range;if(vB.signal)return _B.signalRef(vB.signal);if(Se(vB)){if(kB&&kB.hasOwnProperty(vB))return bB=De({},bB,{range:kB[vB]}),FC(bB,_B,xB);'width'===vB?vB=[0,{signal:'width'}]:'height'===vB?vB=kC(bB.type)?[0,{signal:'height'}]:[{signal:'height'},0]:ke('Unrecognized scale range value: '+Ce(vB))}else{if(vB.scheme)return xB.scheme=SC(vB.scheme,_B),vB.extent&&(xB.schemeExtent=CC(vB.extent,_B)),void(vB.count&&(xB.schemeCount=SC(vB.count,_B)));if(vB.step)return void(xB.rangeStep=SC(vB.step,_B));if(kC(bB.type)&&!Qz(vB))return TC(vB,bB,_B);Qz(vB)||ke('Unsupported range type: '+Ce(vB))}return vB.map(function(wB){return SC(wB,_B)})}function jC(bB,_B){bB=Se(bB)?{text:bB}:bB;var xB=_B.config.title,vB=De({},bB.encode),kB,wB,SB;return kB={orient:null==bB.orient?xB.orient:bB.orient},wB=NS(_B.add(DN(null,[kB]))),vB.name=bB.name,vB.interactive=bB.interactive,SB=IC(bB,xB,vB,wB),bB.zindex&&(SB.zindex=bB.zindex),yC(SB,_B)}function IC(bB,_B,xB,vB){var kB=bB.text,wB=bB.orient||_B.orient,SB=bB.anchor||_B.anchor,CB=wB===hN||wB===mN?-1:1,zB=wB===mN||wB===bN,TB={group:zB?'width':'height'},RB={},PB,AB,OB,MB,DB,qB;return RB.enter=PB={opacity:{value:0}},ES(PB,'fill',_B.color),ES(PB,'font',_B.font),ES(PB,'fontSize',_B.fontSize),ES(PB,'fontWeight',_B.fontWeight),RB.exit={opacity:{value:0}},RB.update=AB={opacity:{value:1},text:Ee(kB)?kB:{value:kB+''},offset:wS(bB.offset||0)},'start'===SB?(DB=0,qB='left'):'end'===SB?(DB=1,qB='right'):(DB=0.5,qB='center'),OB={field:TB,mult:DB},MB=0>CB?{value:0}:zB?{field:{group:'height'}}:{field:{group:'width'}},zB?(AB.x=OB,AB.y=MB,AB.angle={value:0},AB.baseline={value:wB===mN?'bottom':'top'}):(AB.x=MB,AB.y=OB,AB.angle={value:90*CB},AB.baseline={value:'bottom'}),AB.align={value:qB},AB.limit={field:TB},ES(AB,'angle',_B.angle),ES(AB,'baseline',_B.baseline),ES(AB,'limit',_B.limit),RS(gN,lN,null,vB,RB,xB)}function $C(bB,_B){var xB=[];bB.transform&&bB.transform.forEach(function(vB){xB.push(JS(vB,_B))}),bB.on&&bB.on.forEach(function(vB){hC(vB,_B,bB.name)}),_B.addDataPipeline(bB.name,NC(bB,_B,xB))}function NC(bB,_B,xB){var vB=[],kB=null,wB=!1,SB=!1,CB,zB,TB,RB,PB;for(bB.values?vB.push(kB=BC({$ingest:bB.values,$format:bB.format})):bB.url?vB.push(kB=BC({$request:bB.url,$format:bB.format})):bB.source&&(CB=_B.getData(bB.source),kB=CB.output,vB.push(null)),zB=0,TB=xB.length;zB<TB;++zB)RB=xB[zB],PB=RB.metadata,kB||PB.source||vB.push(kB=BC()),vB.push(RB),PB.generates&&(SB=!0),PB.modifies&&!SB&&(wB=!0),PB.source?kB=RB:PB.changes&&(kB=null);return CB&&(vB[0]=VN({derive:wB,pulse:NS(CB.output)}),wB&&vB.splice(1,0,BC())),kB||vB.push(BC()),vB.push(KN({})),vB}function BC(bB){var _B=DN({},bB);return _B.metadata={source:!0},_B}function YC(bB,_B){var xB=_B.config,vB=bB.orient,kB=vB===mN||vB===bN?xB.axisX:xB.axisY,wB=xB['axis'+vB[0].toUpperCase()+vB.slice(1)],SB='band'===_B.scaleType(bB.scale)&&xB.axisBand;return kB||wB||SB?De({},xB.axis,kB,wB,SB):xB.axis}function GC(bB,_B,xB,vB){var kB=bB.orient,wB={value:0},SB={},CB,zB,TB,RB,PB;return SB.enter=CB={opacity:wB},ES(CB,'stroke',_B.tickColor),ES(CB,'strokeWidth',_B.tickWidth),SB.exit={opacity:wB},SB.update=zB={opacity:{value:1}},kB===mN||kB===bN?(TB='x',PB='y'):(TB='y',PB='x'),RB=TB+'2',CB[PB]=wB,zB[TB]=CB[TB]=WC(bB,0),zB[RB]=CB[RB]=WC(bB,1),RS(uN,Z$,null,vB,SB,xB)}function WC(bB,_B){return{scale:bB.scale,range:_B}}function HC(bB,_B,xB,vB){var kB=bB.orient,wB=bB.gridScale,SB=kB===hN||kB===mN?1:-1,CB=SB*bB.offset||0,zB={value:0},TB={},RB,PB,AB,OB,MB,DB,qB,LB;return TB.enter=RB={opacity:zB},ES(RB,'stroke',_B.gridColor),ES(RB,'strokeWidth',_B.gridWidth),ES(RB,'strokeDash',_B.gridDash),TB.exit=PB={opacity:zB},TB.update=AB={},ES(AB,'opacity',_B.gridOpacity),OB={scale:bB.scale,field:SN,band:_B.bandPosition,round:_B.tickRound,extra:_B.tickExtra},kB===mN||kB===bN?(MB='x',DB='y',LB='height'):(MB='y',DB='x',LB='width'),qB=DB+'2',AB[MB]=RB[MB]=PB[MB]=OB,wB?(RB[DB]={scale:wB,range:0,mult:SB,offset:CB},AB[qB]=RB[qB]={scale:wB,range:1,mult:SB,offset:CB}):(RB[DB]={value:CB},AB[qB]=RB[qB]={signal:LB,mult:SB,offset:CB}),RS(uN,K$,SN,vB,TB,xB)}function XC(bB,_B,xB,vB,kB){var wB=bB.orient,SB=wB===hN||wB===mN?-1:1,CB={value:0},zB={},TB,RB,PB,AB,OB;return zB.enter=TB={opacity:CB},ES(TB,'stroke',_B.tickColor),ES(TB,'strokeWidth',_B.tickWidth),zB.exit=RB={opacity:CB},zB.update=PB={opacity:{value:1}},AB=wS(kB),AB.mult=SB,OB={scale:bB.scale,field:SN,band:_B.bandPosition,round:_B.tickRound,extra:_B.tickExtra},wB===mN||wB===bN?(PB.y=TB.y=CB,PB.y2=TB.y2=AB,PB.x=TB.x=RB.x=OB):(PB.x=TB.x=CB,PB.x2=TB.x2=AB,PB.y=TB.y=RB.y=OB),RS(uN,eN,SN,vB,zB,xB)}function VC(bB,_B,xB,vB,kB){var wB=bB.orient,SB=wB===hN||wB===mN?-1:1,CB=null==bB.labelPadding?_B.labelPadding:bB.labelPadding,zB={value:0},TB={},RB,PB,AB,OB,MB;return TB.enter=RB={opacity:zB},ES(RB,'angle',_B.labelAngle),ES(RB,'fill',_B.labelColor),ES(RB,'font',_B.labelFont),ES(RB,'fontSize',_B.labelFontSize),ES(RB,'limit',_B.labelLimit),TB.exit=PB={opacity:zB},TB.update=AB={opacity:{value:1},text:{field:xN}},OB=wS(kB),OB.mult=SB,OB.offset=wS(CB),OB.offset.mult=SB,MB={scale:bB.scale,field:SN,band:0.5},wB===mN||wB===bN?(AB.y=RB.y=OB,AB.x=RB.x=PB.x=MB,ES(AB,'align','center'),ES(AB,'baseline',wB===mN?'bottom':'top')):(AB.x=RB.x=OB,AB.y=RB.y=PB.y=MB,ES(AB,'align',wB===yN?'left':'right'),ES(AB,'baseline','middle')),RS(gN,Q$,SN,vB,TB,xB)}function JC(bB,_B,xB,vB){var kB=bB.orient,wB=bB.title,SB=kB===hN||kB===mN?-1:1,CB=kB===mN||kB===bN,zB={},TB,RB,PB;return zB.enter=TB={opacity:{value:0}},ES(TB,'align',_B.titleAlign),ES(TB,'fill',_B.titleColor),ES(TB,'font',_B.titleFont),ES(TB,'fontSize',_B.titleFontSize),ES(TB,'fontWeight',_B.titleFontWeight),ES(TB,'limit',_B.titleLimit),zB.exit={opacity:{value:0}},zB.update=RB={opacity:{value:1},text:wB&&wB.signal?{signal:wB.signal}:{value:wB+''}},PB={scale:bB.scale,range:0.5},CB?(RB.x=PB,RB.angle={value:0},RB.baseline={value:kB===mN?'bottom':'top'}):(RB.y=PB,RB.angle={value:90*SB},RB.baseline={value:'bottom'}),ES(RB,'angle',_B.titleAngle),ES(RB,'baseline',_B.titleBaseline),ES(RB,'x',_B.titleX)||!CB||TS(xB,'x')||(zB.enter.auto={value:!0}),ES(RB,'y',_B.titleY)||CB||TS(xB,'y')||(zB.enter.auto={value:!0}),RS(gN,tN,null,vB,zB,xB)}function ZC(bB,_B){var xB=YC(bB,_B),vB=bB.name||void 0,kB=bB.encode||{},wB=!!bB.interactive,SB,CB,zB,TB,RB,PB,AB;return SB={orient:bB.orient,ticks:null==bB.ticks?xB.ticks:!!bB.ticks,labels:null==bB.labels?xB.labels:!!bB.labels,grid:null==bB.grid?xB.grid:!!bB.grid,domain:null==bB.domain?xB.domain:!!bB.domain,title:null!=bB.title},CB=NS(_B.add(DN({},[SB]))),PB=SS({update:{range:{signal:'abs(span(range("'+bB.scale+'")))'},offset:wS(bB.offset||0),position:wS(bB.position||0),titlePadding:wS(bB.titlePadding||xB.titlePadding),minExtent:wS(bB.minExtent||xB.minExtent),maxExtent:wS(bB.maxExtent||xB.maxExtent)}},kB.axis),zB=NS(_B.add(ON({scale:_B.scaleRef(bB.scale),extra:xB.tickExtra,count:_B.property(bB.tickCount),values:_B.property(bB.values),formatSpecifier:_B.property(bB.format)}))),AB=[],SB.grid&&AB.push(HC(bB,xB,kB.grid,zB)),SB.ticks&&(TB=null==bB.tickSize?xB.tickSize:bB.tickSize,AB.push(XC(bB,xB,kB.ticks,zB,TB))),SB.labels&&(TB=SB.ticks?TB:0,AB.push(VC(bB,xB,kB.labels,zB,TB))),SB.domain&&AB.push(GC(bB,xB,kB.domain,CB)),SB.title&&AB.push(JC(bB,xB,kB.title,CB)),RB=qS(J$,vB,CB,wB,PB,AB),bB.zindex&&(RB.zindex=bB.zindex),yC(RB,_B)}function KC(bB,_B,xB){var vB=Pe(bB.signals);return xB||vB.forEach(function(kB){Ck(kB,_B)}),Pe(bB.projections).forEach(function(kB){oS(kB,_B)}),Pe(bB.data).forEach(function(kB){$C(kB,_B)}),Pe(bB.scales).forEach(function(kB){EC(kB,_B)}),vB.forEach(function(kB){rS(kB,_B)}),Pe(bB.axes).forEach(function(kB){ZC(kB,_B)}),Pe(bB.marks).forEach(function(kB){yC(kB,_B)}),Pe(bB.legends).forEach(function(kB){bC(kB,_B)}),bB.title&&jC(bB.title,_B),(_B.parseLambdas(),_B)}function QC(bB,_B){var xB=_B.config,vB,kB,wB,SB,CB;return _B.background=bB.background||xB.background,CB=NS(_B.root=_B.add($S())),_B.addSignal('width',bB.width||-1),_B.addSignal('height',bB.height||-1),_B.addSignal('padding',Ek(bB.padding,xB)),Pe(bB.signals).forEach(function(zB){oB[zB.name]||Ck(zB,_B)}),kB=_B.add(DN()),wB=SS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:'width'},height:{signal:'height'}}},bB.encode),wB=_B.add(UN(CS(wB,fN,X$,_B,{pulse:NS(kB)}))),SB=_B.add(eB({layout:_B.objectProperty(bB.layout),legendMargin:xB.legendMargin,autosize:wk(bB.autosize,xB),mark:CB,pulse:NS(wB)})),_B.operators.pop(),_B.pushState(NS(wB),NS(SB),null),KC(bB,_B,!0),_B.operators.push(SB),vB=_B.add(MN({mark:CB,pulse:NS(SB)})),vB=_B.add(JN({pulse:NS(vB)})),vB=_B.add(KN({pulse:NS(vB)})),_B.addData('root',new fC(_B,kB,kB,vB)),_B}function ez(bB){this.config=bB,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function nz(bB){this.config=bB.config,this.field=Object.create(bB.field),this.signals=Object.create(bB.signals),this.lambdas=Object.create(bB.lambdas),this.scales=Object.create(bB.scales),this.events=Object.create(bB.events),this.data=Object.create(bB.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++bB._nextsub[0],this._nextsub=bB._nextsub,this._parent=bB._parent.slice(),this._encode=bB._encode.slice(),this._lookup=bB._lookup.slice(),this._markpath=bB._markpath}function az(bB){var _B='{',xB=0,vB,kB;for(vB in bB)kB=bB[vB],_B+=(1<++xB?',':'')+Ce(vB)+':'+(Ee(kB)?kB.signal||az(kB):Ce(kB));return _B+'}'}function iz(bB){var _B=rz(),xB;for(xB in bB)_B[xB]=Ee(_B[xB])?De(_B[xB],bB[xB]):_B[xB]=bB[xB];return _B}function rz(){return{padding:0,autosize:'pad',background:null,group:null,mark:null,arc:{fill:cB},area:{fill:cB},image:null,line:{stroke:cB,strokeWidth:fB},path:{stroke:cB},rect:{fill:cB},rule:{stroke:uB},shape:{stroke:cB},symbol:{fill:cB,size:64},text:{fill:uB,font:'sans-serif',fontSize:11},point:{size:sB,strokeWidth:fB,shape:'circle'},circle:{size:sB,strokeWidth:fB},square:{size:sB,strokeWidth:fB},axis:{minExtent:0,maxExtent:200,bandPosition:0.5,domain:!0,domainWidth:1,domainColor:uB,grid:!1,gridWidth:1,gridColor:gB,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelColor:uB,labelFont:'sans-serif',labelFontSize:10,labelPadding:2,labelLimit:180,ticks:!0,tickRound:!0,tickSize:5,tickWidth:1,tickColor:uB,titleAlign:'center',titlePadding:2,titleColor:uB,titleFont:'sans-serif',titleFontSize:11,titleFontWeight:'bold'},legend:{orient:'right',offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:gB,gradientStrokeWidth:0,gradientLabelBaseline:'top',gradientLabelOffset:2,labelColor:uB,labelFontSize:10,labelFont:'sans-serif',labelAlign:'left',labelBaseline:'middle',labelOffset:8,labelLimit:160,symbolType:'circle',symbolSize:100,symbolColor:pB,symbolStrokeWidth:1.5,titleColor:uB,titleFont:'sans-serif',titleFontSize:11,titleFontWeight:'bold',titleAlign:'left',titleBaseline:'top',titleLimit:180},title:{orient:'top',anchor:'middle',offset:2,color:uB,font:'sans-serif',fontSize:13,fontWeight:'bold'},range:{category:{scheme:'tableau10'},ordinal:{scheme:'blues',extent:[0.2,1]},heatmap:{scheme:'viridis'},ramp:{scheme:'blues',extent:[0.2,1]},diverging:{scheme:'blueorange'},symbol:['circle','square','triangle-up','cross','diamond','triangle-right','triangle-down','triangle-left']}}}function lz(bB,_B,xB){';'!==_B[_B.length-1]&&(_B='return('+_B+');');var vB=Function.apply(null,bB.concat(_B));return xB&&xB.functions?vB.bind(xB.functions):vB}function sz(bB,_B){return lz(['_'],bB,_B)}function fz(bB,_B){return lz(['datum','_'],bB,_B)}function uz(bB,_B){return lz(['event'],bB,_B)}function pz(bB,_B){return lz(['_','event'],bB,_B)}function gz(bB,_B){return lz(['item','_'],bB,_B)}function mz(bB,_B,xB){xB=xB||{};var vB,kB;for(vB in bB)kB=bB[vB],kB&&kB.$expr&&kB.$params&&mz(kB.$params,_B,xB),xB[vB]=Qz(kB)?kB.map(function(wB){return hz(wB,_B)}):hz(kB,_B);return xB}function hz(bB,_B){if(!bB||!Ee(bB))return bB;for(var xB=0,vB=mB.length,kB;xB<vB;++xB)if(kB=mB[xB],bB.hasOwnProperty(kB.key))return kB.parse(bB,_B);return bB}function zz(bB,_B){'Operator'!==bB.type&&bB.type?_B.transform(bB,bB.type):_B.operator(bB,bB.update?sz(bB.update,_B):null)}function Tz(bB,_B){var xB,vB;bB.params&&(!(xB=_B.get(bB.id))&&ke('Invalid operator id: '+bB.id),vB=mz(bB.params,_B),_B.dataflow.connect(xB,xB.parameters(vB)))}function Rz(bB,_B){var xB=null==bB.filter?void 0:uz(bB.filter,_B),vB=null==bB.stream?void 0:_B.get(bB.stream),kB;bB.source?vB=_B.events(bB.source,bB.type,xB):bB.merge&&(kB=bB.merge.map(_B.get.bind(_B)),vB=kB[0].merge.apply(kB[0],kB.slice(1))),bB.between&&(kB=bB.between.map(_B.get.bind(_B)),vB=vB.between(kB[0],kB[1])),bB.filter&&(vB=vB.filter(xB)),null!=bB.throttle&&(vB=vB.throttle(+bB.throttle)),null!=bB.debounce&&(vB=vB.debounce(+bB.debounce)),null==vB&&ke('Invalid stream definition: '+JSON.stringify(bB)),bB.consume&&vB.consume(!0),_B.stream(bB,vB)}function Pz(bB,_B){var xB=_B.get(bB.source),vB=null,kB=bB.update,wB;xB||ke('Source not defined: '+bB.source),vB=bB.target&&bB.target.$expr?uz(bB.target.$expr,_B):_B.get(bB.target),kB&&kB.$expr&&(kB.$params&&(wB=mz(kB.$params,_B)),kB=pz(kB.$expr,_B)),_B.update(bB,xB,vB,kB,wB)}function Az(bB,_B){var xB=bB.operators||[];return bB.background&&(_B.background=bB.background),xB.forEach(function(vB){zz(vB,_B)}),xB.forEach(function(vB){Tz(vB,_B)}),(bB.streams||[]).forEach(function(vB){Rz(vB,_B)}),(bB.updates||[]).forEach(function(vB){Pz(vB,_B)}),_B.resolve()}function Dz(bB,_B,xB){return new qz(bB,_B,xB)}function qz(bB,_B,xB){this.dataflow=bB,this.transforms=_B,this.events=bB.events.bind(bB),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},xB&&(this.functions=Object.create(xB),this.functions.context=this)}function Lz(bB){this.dataflow=bB.dataflow,this.transforms=bB.transforms,this.functions=bB.functions,this.events=bB.events,this.signals=Object.create(bB.signals),this.scales=Object.create(bB.scales),this.nodes=Object.create(bB.nodes),this.data=Object.create(bB.data),this.fn=Object.create(bB.fn),bB.functions&&(this.functions=Object.create(bB.functions),this.functions.context=this)}function Uz(bB,_B,xB){return Az(_B,Dz(bB,AA,xB||v$))}function Fz(bB,_B){var xB=bB.add(null,function(vB){bB['_'+_B]=vB.size,bB._autosize=bB._resize=1},{size:bB._signals[_B]});return xB.rank=0,xB}function $z(bB,_B){return _B.modified&&Qz(_B.input.value)&&bB.indexOf('_:vega:_')}function Nz(bB,_B){return!('parent'===bB||_B instanceof AA.Proxy)}function Yz(bB,_B){_B=_B||{},zl.call(this),this.loader(_B.loader||this._loader),this.logLevel(_B.logLevel||0),this._el=null,this._renderType=_B.renderer||QP.Canvas,this._scenegraph=new no;var xB=this._scenegraph.root;this._renderer=null,this._queue=null,this._handler=new so().scene(xB),this._eventListeners=[],this._preventDefault=!0;var vB=Uz(this,bB,_B.functions);this._runtime=vB,this._signals=vB.signals,this._bind=(bB.bindings||[]).map(function(kB){return{state:null,param:De({},kB)}}),vB.root&&vB.root.set(xB),xB.source=vB.data.root.input,this.pulse(vB.data.root.input,this.changeset().insert(xB.items)),this._background=vB.background||null,this._width=this.width(),this._height=this.height(),this._origin=[0,0],this._resize=0,this._autosize=1,this._resizeWidth=Fz(this,'width'),this._resizeHeight=Fz(this,'height'),Uv(this)}function Gz(bB,_B){return bB._signals.hasOwnProperty(_B)?bB._signals[_B]:bB.error('Unrecognized signal name: '+Ce(_B))}var Hz=F(U),Xz=Hz.right,Vz=Hz.left,Jz=Math.sqrt(50),Zz=Math.sqrt(10),Kz=Math.sqrt(2),Qz=Array.isArray,eT=[],tT=ze('id'),nT=_e(function(bB){return bB},eT,'identity'),aT=_e(function(){return 0},eT,'zero'),iT=_e(function(){return 1},eT,'one'),dT=_e(function(){return!0},eT,'true'),rT=_e(function(){return!1},eT,'false'),oT=0,lT=1,sT=2,fT=3,cT={},uT='$';et.prototype=tt.prototype={constructor:et,has:function(_B){return uT+_B in this},get:function(_B){return this[uT+_B]},set:function(_B,xB){return this[uT+_B]=xB,this},remove:function(_B){var xB=uT+_B;return xB in this&&delete this[xB]},clear:function(){for(var _B in this)_B[0]===uT&&delete this[_B]},keys:function(){var bB=[];for(var _B in this)_B[0]===uT&&bB.push(_B.slice(1));return bB},values:function(){var bB=[];for(var _B in this)_B[0]===uT&&bB.push(this[_B]);return bB},entries:function(){var bB=[];for(var _B in this)_B[0]===uT&&bB.push({key:_B.slice(1),value:this[_B]});return bB},size:function(){var bB=0;for(var _B in this)_B[0]===uT&&++bB;return bB},empty:function(){for(var _B in this)if(_B[0]===uT)return!1;return!0},each:function(_B){for(var xB in this)xB[0]===uT&&_B(this[xB],xB.slice(1),this)}};var pT=tt.prototype,gT={value:function(){}};ct.prototype=st.prototype={constructor:ct,on:function(_B,xB){var vB=this._,kB=ut(_B+'',vB),SB=-1,CB=kB.length,wB;if(2>arguments.length){for(;++SB<CB;)if((wB=(_B=kB[SB]).type)&&(wB=pt(vB[wB],_B.name)))return wB;return}if(null!=xB&&'function'!==typeof xB)throw new Error('invalid callback: '+xB);for(;++SB<CB;)if(wB=(_B=kB[SB]).type)vB[wB]=mt(vB[wB],_B.name,xB);else if(null==xB)for(wB in vB)vB[wB]=mt(vB[wB],_B.name,null);return this},copy:function(){var bB={},_B=this._;for(var xB in _B)bB[xB]=_B[xB].slice();return new ct(bB)},call:function(_B,xB){if(0<(wB=arguments.length-2))for(var vB=Array(wB),kB=0,wB,SB;kB<wB;++kB)vB[kB]=arguments[kB+2];if(!this._.hasOwnProperty(_B))throw new Error('unknown type: '+_B);for(SB=this._[_B],kB=0,wB=SB.length;kB<wB;++kB)SB[kB].value.apply(xB,vB)},apply:function(_B,xB,vB){if(!this._.hasOwnProperty(_B))throw new Error('unknown type: '+_B);for(var kB=this._[_B],wB=0,SB=kB.length;wB<SB;++wB)kB[wB].value.apply(xB,vB)}};var mT=Et(','),hT=Et('\t'),yT=/^([A-Za-z]+:)?\/\//,bT='file://',_T=['mimeType','responseType','user','password'],xT={boolean:He,integer:Ve,number:Ve,date:Xe,string:Je},vT=[function(bB){return'true'===bB||'false'===bB||!0===bB||!1===bB},function(bB){return Ft(bB)&&(bB=+bB)===~~bB},Ft,function(bB){return!isNaN(Date.parse(bB))}],kT=['boolean','integer','number','date'],wT={dsv:$t,csv:It(','),tsv:It('\t'),json:Bt,topojson:function(bB,_B){var xB,vB;return(bB=Bt(bB,_B),_B&&(vB=_B.feature))?(xB=bB.objects[vB])?Xt(bB,xB).features:ke('Invalid TopoJSON object: '+vB):_B&&(vB=_B.mesh)?(xB=bB.objects[vB])?[Kt(bB,xB)]:ke('Invalid TopoJSON object: '+vB):void ke('Missing TopoJSON feature or mesh parameter.')}},ET=new Date,ST=new Date,CT=nn(function(){},function(bB,_B){bB.setTime(+bB+_B)},function(bB,_B){return _B-bB});CT.every=function(bB){return bB=Math.floor(bB),isFinite(bB)&&0<bB?1<bB?nn(function(_B){_B.setTime(Math.floor(_B/bB)*bB)},function(_B,xB){_B.setTime(+_B+xB*bB)},function(_B,xB){return(xB-_B)/bB}):CT:null};var zT=1e3,TT=6e4,RT=36e5,PT=864e5,AT=6048e5,OT=nn(function(bB){bB.setTime(Math.floor(bB/zT)*zT)},function(bB,_B){bB.setTime(+bB+_B*zT)},function(bB,_B){return(_B-bB)/zT},function(bB){return bB.getUTCSeconds()}),MT=nn(function(bB){bB.setTime(Math.floor(bB/TT)*TT)},function(bB,_B){bB.setTime(+bB+_B*TT)},function(bB,_B){return(_B-bB)/TT},function(bB){return bB.getMinutes()}),DT=nn(function(bB){var _B=bB.getTimezoneOffset()*TT%RT;0>_B&&(_B+=RT),bB.setTime(Math.floor((+bB-_B)/RT)*RT+_B)},function(bB,_B){bB.setTime(+bB+_B*RT)},function(bB,_B){return(_B-bB)/RT},function(bB){return bB.getHours()}),qT=nn(function(bB){bB.setHours(0,0,0,0)},function(bB,_B){bB.setDate(bB.getDate()+_B)},function(bB,_B){return(_B-bB-(_B.getTimezoneOffset()-bB.getTimezoneOffset())*TT)/PT},function(bB){return bB.getDate()-1}),LT=an(0),UT=an(1),FT=nn(function(bB){bB.setDate(1),bB.setHours(0,0,0,0)},function(bB,_B){bB.setMonth(bB.getMonth()+_B)},function(bB,_B){return _B.getMonth()-bB.getMonth()+12*(_B.getFullYear()-bB.getFullYear())},function(bB){return bB.getMonth()}),jT=nn(function(bB){bB.setMonth(0,1),bB.setHours(0,0,0,0)},function(bB,_B){bB.setFullYear(bB.getFullYear()+_B)},function(bB,_B){return _B.getFullYear()-bB.getFullYear()},function(bB){return bB.getFullYear()});jT.every=function(bB){return isFinite(bB=Math.floor(bB))&&0<bB?nn(function(_B){_B.setFullYear(Math.floor(_B.getFullYear()/bB)*bB),_B.setMonth(0,1),_B.setHours(0,0,0,0)},function(_B,xB){_B.setFullYear(_B.getFullYear()+xB*bB)}):null};var IT=nn(function(bB){bB.setUTCSeconds(0,0)},function(bB,_B){bB.setTime(+bB+_B*TT)},function(bB,_B){return(_B-bB)/TT},function(bB){return bB.getUTCMinutes()}),$T=nn(function(bB){bB.setUTCMinutes(0,0,0)},function(bB,_B){bB.setTime(+bB+_B*RT)},function(bB,_B){return(_B-bB)/RT},function(bB){return bB.getUTCHours()}),NT=nn(function(bB){bB.setUTCHours(0,0,0,0)},function(bB,_B){bB.setUTCDate(bB.getUTCDate()+_B)},function(bB,_B){return(_B-bB)/PT},function(bB){return bB.getUTCDate()-1}),BT=dn(0),YT=dn(1),WT=nn(function(bB){bB.setUTCDate(1),bB.setUTCHours(0,0,0,0)},function(bB,_B){bB.setUTCMonth(bB.getUTCMonth()+_B)},function(bB,_B){return _B.getUTCMonth()-bB.getUTCMonth()+12*(_B.getUTCFullYear()-bB.getUTCFullYear())},function(bB){return bB.getUTCMonth()}),HT=nn(function(bB){bB.setUTCMonth(0,1),bB.setUTCHours(0,0,0,0)},function(bB,_B){bB.setUTCFullYear(bB.getUTCFullYear()+_B)},function(bB,_B){return _B.getUTCFullYear()-bB.getUTCFullYear()},function(bB){return bB.getUTCFullYear()});HT.every=function(bB){return isFinite(bB=Math.floor(bB))&&0<bB?nn(function(_B){_B.setUTCFullYear(Math.floor(_B.getUTCFullYear()/bB)*bB),_B.setUTCMonth(0,1),_B.setUTCHours(0,0,0,0)},function(_B,xB){_B.setUTCFullYear(_B.getUTCFullYear()+xB*bB)}):null};var XT={0:'0',"-":'',_:' '},VT=/^\s*\d+/,JT=/^%/,ZT=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,KT,QT,eR,tR,nR;Sa({dateTime:'%x, %X',date:'%-m/%-d/%Y',time:'%-I:%M:%S %p',periods:['AM','PM'],days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']});var aR='%Y-%m-%dT%H:%M:%S.%LZ',iR=Date.prototype.toISOString?function(bB){return bB.toISOString()}:tR(aR),dR=+new Date('2000-01-01T00:00:00.000Z')?function(bB){var _B=new Date(bB);return isNaN(_B)?null:_B}:nR(aR),rR=Pa.prototype;rR.clone=function(){return new Pa(this)},rR.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},rR.set=function(bB,_B,xB,vB){return xB<bB?(this.x2=bB,this.x1=xB):(this.x1=bB,this.x2=xB),vB<_B?(this.y2=_B,this.y1=vB):(this.y1=_B,this.y2=vB),this},rR.add=function(bB,_B){return bB<this.x1&&(this.x1=bB),_B<this.y1&&(this.y1=_B),bB>this.x2&&(this.x2=bB),_B>this.y2&&(this.y2=_B),this},rR.expand=function(bB){return this.x1-=bB,this.y1-=bB,this.x2+=bB,this.y2+=bB,this},rR.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},rR.translate=function(bB,_B){return this.x1+=bB,this.x2+=bB,this.y1+=_B,this.y2+=_B,this},rR.rotate=function(bB,_B,xB){var vB=Math.cos(bB),kB=Math.sin(bB),wB=_B-_B*vB+xB*kB,SB=xB-_B*kB-xB*vB,CB=this.x1,zB=this.x2,TB=this.y1,RB=this.y2;return this.clear().add(vB*CB-kB*TB+wB,kB*CB+vB*TB+SB).add(vB*CB-kB*RB+wB,kB*CB+vB*RB+SB).add(vB*zB-kB*TB+wB,kB*zB+vB*TB+SB).add(vB*zB-kB*RB+wB,kB*zB+vB*RB+SB)},rR.union=function(bB){return bB.x1<this.x1&&(this.x1=bB.x1),bB.y1<this.y1&&(this.y1=bB.y1),bB.x2>this.x2&&(this.x2=bB.x2),bB.y2>this.y2&&(this.y2=bB.y2),this},rR.intersect=function(bB){return bB.x1>this.x1&&(this.x1=bB.x1),bB.y1>this.y1&&(this.y1=bB.y1),bB.x2<this.x2&&(this.x2=bB.x2),bB.y2<this.y2&&(this.y2=bB.y2),this},rR.encloses=function(bB){return bB&&this.x1<=bB.x1&&this.x2>=bB.x2&&this.y1<=bB.y1&&this.y2>=bB.y2},rR.alignsWith=function(bB){return bB&&(this.x1==bB.x1||this.x2==bB.x2||this.y1==bB.y1||this.y2==bB.y2)},rR.intersects=function(bB){return bB&&!(this.x2<bB.x1||this.x1>bB.x2||this.y2<bB.y1||this.y1>bB.y2)},rR.contains=function(bB,_B){return!(bB<this.x1||bB>this.x2||_B<this.y1||_B>this.y2)},rR.width=function(){return this.x2-this.x1},rR.height=function(){return this.y2-this.y1};var oR=0;Ue(Ma,Oa);var lR;try{lR=require('canvas')}catch(bB){lR=null}var sR='undefined'===typeof Image?lR&&lR.Image||null:Image,fR=Ia.prototype;fR.pending=function(){return this._pending},fR.sanitizeURL=function(bB){var _B=this;return $a(_B),_B._loader.sanitize(bB,{context:'href'}).then(function(xB){return Na(_B),xB}).catch(function(){return Na(_B),null})},fR.loadImage=function(bB){var _B=this;return $a(_B),_B._loader.sanitize(bB,{context:'image'}).then(function(xB){var vB=xB.href;if(!vB||!sR)throw'Image unsupported.';var kB=new sR;return kB.onload=function(){Na(_B),kB.loaded=!0},kB.onerror=function(){Na(_B),kB.loaded=!1},kB.src=vB,kB}).catch(function(){return Na(_B),{loaded:!1,width:0,height:0}})},fR.ready=function(){var bB=this;return new Promise(function(_B){function xB(vB){bB.pending()?setTimeout(function(){xB(!0)},10):_B(vB)}xB(!1)})};var cR=Math.PI,uR=2*cR,pR=1e-6;Ba.prototype=Ya.prototype={constructor:Ba,moveTo:function(_B,xB){this._+='M'+(this._x0=this._x1=+_B)+','+(this._y0=this._y1=+xB)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+='Z')},lineTo:function(_B,xB){this._+='L'+(this._x1=+_B)+','+(this._y1=+xB)},quadraticCurveTo:function(_B,xB,vB,kB){this._+='Q'+ +_B+','+ +xB+','+(this._x1=+vB)+','+(this._y1=+kB)},bezierCurveTo:function(_B,xB,vB,kB,wB,SB){this._+='C'+ +_B+','+ +xB+','+ +vB+','+ +kB+','+(this._x1=+wB)+','+(this._y1=+SB)},arcTo:function(_B,xB,vB,kB,wB){_B=+_B,xB=+xB,vB=+vB,kB=+kB,wB=+wB;var SB=this._x1,CB=this._y1,zB=vB-_B,TB=kB-xB,RB=SB-_B,PB=CB-xB,AB=RB*RB+PB*PB;if(0>wB)throw new Error('negative radius: '+wB);if(null===this._x1)this._+='M'+(this._x1=_B)+','+(this._y1=xB);else if(!(AB>pR));else if(!(Math.abs(PB*zB-TB*RB)>pR)||!wB)this._+='L'+(this._x1=_B)+','+(this._y1=xB);else{var OB=vB-SB,MB=kB-CB,DB=zB*zB+TB*TB,LB=Math.sqrt(DB),UB=Math.sqrt(AB),FB=wB*Math.tan((cR-Math.acos((DB+AB-(OB*OB+MB*MB))/(2*LB*UB)))/2),jB=FB/UB,IB=FB/LB;Math.abs(jB-1)>pR&&(this._+='L'+(_B+jB*RB)+','+(xB+jB*PB)),this._+='A'+wB+','+wB+',0,0,'+ +(PB*OB>RB*MB)+','+(this._x1=_B+IB*zB)+','+(this._y1=xB+IB*TB)}},arc:function(_B,xB,vB,kB,wB,SB){_B=+_B,xB=+xB,vB=+vB;var CB=vB*Math.cos(kB),zB=vB*Math.sin(kB),TB=_B+CB,RB=xB+zB,PB=1^SB,AB=SB?kB-wB:wB-kB;if(0>vB)throw new Error('negative radius: '+vB);null===this._x1?this._+='M'+TB+','+RB:(Math.abs(this._x1-TB)>pR||Math.abs(this._y1-RB)>pR)&&(this._+='L'+TB+','+RB);vB&&(0>AB&&(AB=AB%uR+uR),AB>uR-pR?this._+='A'+vB+','+vB+',0,1,'+PB+','+(_B-CB)+','+(xB-zB)+'A'+vB+','+vB+',0,1,'+PB+','+(this._x1=TB)+','+(this._y1=RB):AB>pR&&(this._+='A'+vB+','+vB+',0,'+ +(AB>=cR)+','+PB+','+(this._x1=_B+vB*Math.cos(wB))+','+(this._y1=xB+vB*Math.sin(wB))))},rect:function(_B,xB,vB,kB){this._+='M'+(this._x0=this._x1=+_B)+','+(this._y0=this._y1=+xB)+'h'+ +vB+'v'+ +kB+'h'+-vB+'Z'},toString:function(){return this._}};var mR=Math.abs,hR=Math.atan2,yR=Math.cos,bR=Math.max,_R=Math.min,xR=Math.sin,vR=Math.sqrt,kR=1e-12,wR=Math.PI,ER=wR/2,SR=2*wR;ni.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;default:this._context.lineTo(_B,xB);}}};var CR={draw:function(_B,xB){var vB=Math.sqrt(xB/wR);_B.moveTo(vB,0),_B.arc(0,0,vB,0,SR)}},zR=Math.sin(wR/10)/Math.sin(7*wR/10),TR=Math.sin(SR/10)*zR,RR=-Math.cos(SR/10)*zR;gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ui(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ui(this,_B,xB);}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB}},_i.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._x2=_B,this._y2=xB;break;case 1:this._point=2,this._x3=_B,this._y3=xB;break;case 2:this._point=3,this._x4=_B,this._y4=xB,this._context.moveTo((this._x0+4*this._x1+_B)/6,(this._y0+4*this._y1+xB)/6);break;default:ui(this,_B,xB);}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB}},ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var vB=(this._x0+4*this._x1+_B)/6,kB=(this._y0+4*this._y1+xB)/6;this._line?this._context.lineTo(vB,kB):this._context.moveTo(vB,kB);break;case 3:this._point=4;default:ui(this,_B,xB);}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB}},Ei.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var _B=this._x,xB=this._y,vB=_B.length-1;if(0<vB)for(var kB=_B[0],wB=xB[0],SB=_B[vB]-kB,CB=xB[vB]-wB,zB=-1,TB;++zB<=vB;)TB=zB/vB,this._basis.point(this._beta*_B[zB]+(1-this._beta)*(kB+TB*SB),this._beta*xB[zB]+(1-this._beta)*(wB+TB*CB));this._x=this._y=null,this._basis.lineEnd()},point:function(_B,xB){this._x.push(+_B),this._y.push(+xB)}};var PR=function bB(_B){function xB(vB){return 1===_B?new gi(vB):new Ei(vB,_B)}return xB.beta=function(vB){return bB(+vB)},xB}(0.85);Ci.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Si(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2,this._x1=_B,this._y1=xB;break;case 2:this._point=3;default:Si(this,_B,xB);}this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var AR=function bB(_B){function xB(vB){return new Ci(vB,_B)}return xB.tension=function(vB){return bB(+vB)},xB}(0);zi.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._x3=_B,this._y3=xB;break;case 1:this._point=2,this._context.moveTo(this._x4=_B,this._y4=xB);break;case 2:this._point=3,this._x5=_B,this._y5=xB;break;default:Si(this,_B,xB);}this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var OR=function bB(_B){function xB(vB){return new zi(vB,_B)}return xB.tension=function(vB){return bB(+vB)},xB}(0);Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Si(this,_B,xB);}this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var MR=function bB(_B){function xB(vB){return new Ti(vB,_B)}return xB.tension=function(vB){return bB(+vB)},xB}(0);Pi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){if(_B=+_B,xB=+xB,this._point){var vB=this._x2-_B,kB=this._y2-xB;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vB*vB+kB*kB,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;break;case 2:this._point=3;default:Ri(this,_B,xB);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var DR=function bB(_B){function xB(vB){return _B?new Pi(vB,_B):new Ci(vB,0)}return xB.alpha=function(vB){return bB(+vB)},xB}(0.5);Ai.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_B,xB){if(_B=+_B,xB=+xB,this._point){var vB=this._x2-_B,kB=this._y2-xB;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vB*vB+kB*kB,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=_B,this._y3=xB;break;case 1:this._point=2,this._context.moveTo(this._x4=_B,this._y4=xB);break;case 2:this._point=3,this._x5=_B,this._y5=xB;break;default:Ri(this,_B,xB);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var qR=function bB(_B){function xB(vB){return _B?new Ai(vB,_B):new zi(vB,0)}return xB.alpha=function(vB){return bB(+vB)},xB}(0.5);Oi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){if(_B=+_B,xB=+xB,this._point){var vB=this._x2-_B,kB=this._y2-xB;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vB*vB+kB*kB,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ri(this,_B,xB);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var LR=function bB(_B){function xB(vB){return _B?new Oi(vB,_B):new Ti(vB,0)}return xB.alpha=function(vB){return bB(+vB)},xB}(0.5);Mi.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(_B,xB){_B=+_B,xB=+xB,this._point?this._context.lineTo(_B,xB):(this._point=1,this._context.moveTo(_B,xB))}},ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fi(this,this._t0,Ui(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){var vB=NaN;if(_B=+_B,xB=+xB,_B!==this._x1||xB!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;break;case 2:this._point=3,Fi(this,Ui(this,vB=Li(this,_B,xB)),vB);break;default:Fi(this,this._t0,vB=Li(this,_B,xB));}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB,this._t0=vB}}},(Ii.prototype=Object.create(ji.prototype)).point=function(bB,_B){ji.prototype.point.call(this,_B,bB)},$i.prototype={moveTo:function(_B,xB){this._context.moveTo(xB,_B)},closePath:function(){this._context.closePath()},lineTo:function(_B,xB){this._context.lineTo(xB,_B)},bezierCurveTo:function(_B,xB,vB,kB,wB,SB){this._context.bezierCurveTo(xB,_B,kB,vB,SB,wB)}},Yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var _B=this._x,xB=this._y,vB=_B.length;if(vB)if(this._line?this._context.lineTo(_B[0],xB[0]):this._context.moveTo(_B[0],xB[0]),2===vB)this._context.lineTo(_B[1],xB[1]);else for(var kB=Gi(_B),wB=Gi(xB),SB=0,CB=1;CB<vB;++SB,++CB)this._context.bezierCurveTo(kB[0][SB],wB[0][SB],kB[1][SB],wB[1][SB],_B[CB],xB[CB]);(this._line||0!==this._line&&1===vB)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(_B,xB){this._x.push(+_B),this._y.push(+xB)}},Hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;default:{if(0>=this._t)this._context.lineTo(this._x,xB),this._context.lineTo(_B,xB);else{var vB=this._x*(1-this._t)+_B*this._t;this._context.lineTo(vB,this._y),this._context.lineTo(vB,xB)}break}}this._x=_B,this._y=xB}};var UR={basis:{curve:function(bB){return new gi(bB)}},"basis-closed":{curve:function(bB){return new _i(bB)}},"basis-open":{curve:function(bB){return new ki(bB)}},bundle:{curve:PR,tension:'beta',value:0.85},cardinal:{curve:AR,tension:'tension',value:0},"cardinal-open":{curve:MR,tension:'tension',value:0},"cardinal-closed":{curve:OR,tension:'tension',value:0},"catmull-rom":{curve:DR,tension:'alpha',value:0.5},"catmull-rom-closed":{curve:qR,tension:'alpha',value:0.5},"catmull-rom-open":{curve:LR,tension:'alpha',value:0.5},linear:{curve:ai},"linear-closed":{curve:function(bB){return new Mi(bB)}},monotone:{horizontal:function(bB){return new Ii(bB)},vertical:function(bB){return new ji(bB)}},natural:{curve:function(bB){return new Yi(bB)}},step:{curve:function(bB){return new Hi(bB,0.5)}},"step-after":{curve:function(bB){return new Hi(bB,1)}},"step-before":{curve:function(bB){return new Hi(bB,0)}}},FR={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},jR=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],IR={},$R={},NR=[].join,BR=['l',0,0,0,0,0,0,0],YR=2*Math.PI,GR=Math.sqrt(3)/2,WR={circle:{draw:function(_B,xB){var vB=Math.sqrt(xB)/2;_B.moveTo(vB,0),_B.arc(0,0,vB,0,YR)}},cross:{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=vB/2.5;_B.moveTo(-vB,-kB),_B.lineTo(-vB,kB),_B.lineTo(-kB,kB),_B.lineTo(-kB,vB),_B.lineTo(kB,vB),_B.lineTo(kB,kB),_B.lineTo(vB,kB),_B.lineTo(vB,-kB),_B.lineTo(kB,-kB),_B.lineTo(kB,-vB),_B.lineTo(-kB,-vB),_B.lineTo(-kB,-kB),_B.closePath()}},diamond:{draw:function(_B,xB){var vB=Math.sqrt(xB)/2;_B.moveTo(-vB,0),_B.lineTo(0,-vB),_B.lineTo(vB,0),_B.lineTo(0,vB),_B.closePath()}},square:{draw:function(_B,xB){var vB=Math.sqrt(xB),kB=-vB/2;_B.rect(kB,kB,vB,vB)}},"triangle-up":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(0,-kB),_B.lineTo(-vB,kB),_B.lineTo(vB,kB),_B.closePath()}},"triangle-down":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(0,kB),_B.lineTo(-vB,-kB),_B.lineTo(vB,-kB),_B.closePath()}},"triangle-right":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(kB,0),_B.lineTo(-kB,-vB),_B.lineTo(-kB,vB),_B.closePath()}},"triangle-left":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(-kB,0),_B.lineTo(kB,-vB),_B.lineTo(kB,vB),_B.closePath()}}},HR={},XR=Math.PI,VR=function(){function bB(){var PB=+_B.apply(this,arguments),AB=+xB.apply(this,arguments),OB=wB.apply(this,arguments)-ER,MB=SB.apply(this,arguments)-ER,DB=mR(MB-OB),qB=MB>OB,TB,RB;if(zB||(zB=TB=Ya()),AB<PB&&(RB=AB,AB=PB,PB=RB),!(AB>kR))zB.moveTo(0,0);else if(DB>SR-kR)zB.moveTo(AB*yR(OB),AB*xR(OB)),zB.arc(0,0,AB,OB,MB,!qB),PB>kR&&(zB.moveTo(PB*yR(MB),PB*xR(MB)),zB.arc(0,0,PB,MB,OB,qB));else{var LB=OB,UB=MB,FB=OB,jB=MB,IB=DB,$B=DB,NB=CB.apply(this,arguments)/2,BB=NB>kR&&(kB?+kB.apply(this,arguments):vR(PB*PB+AB*AB)),YB=_R(mR(AB-PB)/2,+vB.apply(this,arguments)),GB=YB,WB=YB,HB,XB;if(BB>kR){var VB=Ha(BB/PB*xR(NB)),JB=Ha(BB/AB*xR(NB));(IB-=2*VB)>kR?(VB*=qB?1:-1,FB+=VB,jB-=VB):(IB=0,FB=jB=(OB+MB)/2),($B-=2*JB)>kR?(JB*=qB?1:-1,LB+=JB,UB-=JB):($B=0,LB=UB=(OB+MB)/2)}var ZB=AB*yR(LB),KB=AB*xR(LB),QB=PB*yR(jB),eY=PB*xR(jB);if(YB>kR){var tY=AB*yR(UB),nY=AB*xR(UB),aY=PB*yR(FB),iY=PB*xR(FB);if(DB<wR){var dY=IB>kR?Qa(ZB,KB,aY,iY,tY,nY,QB,eY):[QB,eY],rY=ZB-dY[0],oY=KB-dY[1],lY=tY-dY[0],sY=nY-dY[1],fY=1/xR(Wa((rY*lY+oY*sY)/(vR(rY*rY+oY*oY)*vR(lY*lY+sY*sY)))/2),cY=vR(dY[0]*dY[0]+dY[1]*dY[1]);GB=_R(YB,(PB-cY)/(fY-1)),WB=_R(YB,(AB-cY)/(fY+1))}}$B>kR?WB>kR?(HB=ei(aY,iY,ZB,KB,AB,WB,qB),XB=ei(tY,nY,QB,eY,AB,WB,qB),zB.moveTo(HB.cx+HB.x01,HB.cy+HB.y01),WB<YB?zB.arc(HB.cx,HB.cy,WB,hR(HB.y01,HB.x01),hR(XB.y01,XB.x01),!qB):(zB.arc(HB.cx,HB.cy,WB,hR(HB.y01,HB.x01),hR(HB.y11,HB.x11),!qB),zB.arc(0,0,AB,hR(HB.cy+HB.y11,HB.cx+HB.x11),hR(XB.cy+XB.y11,XB.cx+XB.x11),!qB),zB.arc(XB.cx,XB.cy,WB,hR(XB.y11,XB.x11),hR(XB.y01,XB.x01),!qB))):(zB.moveTo(ZB,KB),zB.arc(0,0,AB,LB,UB,!qB)):zB.moveTo(ZB,KB),PB>kR&&IB>kR?GB>kR?(HB=ei(QB,eY,tY,nY,PB,-GB,qB),XB=ei(ZB,KB,aY,iY,PB,-GB,qB),zB.lineTo(HB.cx+HB.x01,HB.cy+HB.y01),GB<YB?zB.arc(HB.cx,HB.cy,GB,hR(HB.y01,HB.x01),hR(XB.y01,XB.x01),!qB):(zB.arc(HB.cx,HB.cy,GB,hR(HB.y01,HB.x01),hR(HB.y11,HB.x11),!qB),zB.arc(0,0,PB,hR(HB.cy+HB.y11,HB.cx+HB.x11),hR(XB.cy+XB.y11,XB.cx+XB.x11),qB),zB.arc(XB.cx,XB.cy,GB,hR(XB.y11,XB.x11),hR(XB.y01,XB.x01),!qB))):zB.arc(0,0,PB,jB,FB,qB):zB.lineTo(QB,eY)}return(zB.closePath(),TB)?(zB=null,TB+''||null):void 0}var _B=Xa,xB=Va,vB=Ga(0),kB=null,wB=Ja,SB=Za,CB=Ka,zB=null;return bB.centroid=function(){var TB=(+_B.apply(this,arguments)+ +xB.apply(this,arguments))/2,RB=(+wB.apply(this,arguments)+ +SB.apply(this,arguments))/2-wR/2;return[yR(RB)*TB,xR(RB)*TB]},bB.innerRadius=function(TB){return arguments.length?(_B='function'===typeof TB?TB:Ga(+TB),bB):_B},bB.outerRadius=function(TB){return arguments.length?(xB='function'===typeof TB?TB:Ga(+TB),bB):xB},bB.cornerRadius=function(TB){return arguments.length?(vB='function'===typeof TB?TB:Ga(+TB),bB):vB},bB.padRadius=function(TB){return arguments.length?(kB=null==TB?null:'function'===typeof TB?TB:Ga(+TB),bB):kB},bB.startAngle=function(TB){return arguments.length?(wB='function'===typeof TB?TB:Ga(+TB),bB):wB},bB.endAngle=function(TB){return arguments.length?(SB='function'===typeof TB?TB:Ga(+TB),bB):SB},bB.padAngle=function(TB){return arguments.length?(CB='function'===typeof TB?TB:Ga(+TB),bB):CB},bB.context=function(TB){return arguments.length?(zB=null==TB?null:TB,bB):zB},bB}().cornerRadius(wd).padAngle(function(bB){return bB.padAngle||0}),JR=si().x(hd).y1(yd).y0(function(bB){return(bB.y||0)+(bB.height||0)}).defined(Sd),ZR=si().y(yd).x1(hd).x0(function(bB){return(bB.x||0)+(bB.width||0)}).defined(Sd),KR=li().x(hd).y(yd).defined(Sd),QR=gd().x(hd).y(yd).width(function(bB){return bB.width||0}).height(function(bB){return bB.height||0}).cornerRadius(wd),eP=function(){function bB(){var kB;if(vB||(vB=kB=Ya()),_B.apply(this,arguments).draw(vB,+xB.apply(this,arguments)),kB)return vB=null,kB+''||null}var _B=Ga(CR),xB=Ga(64),vB=null;return bB.type=function(kB){return arguments.length?(_B='function'===typeof kB?kB:Ga(kB),bB):_B},bB.size=function(kB){return arguments.length?(xB='function'===typeof kB?kB:Ga(+kB),bB):xB},bB.context=function(kB){return arguments.length?(vB=null==kB?null:kB,bB):vB},bB}().type(function(bB){return dd(bB.shape||'circle')}).size(function(bB){return null==bB.size?64:bB.size}),tP=md().x(hd).y(yd).defined(Sd).size(function(bB){return bB.size||1}),nP,aP=2*Math.PI,iP=aP/4;Ld.beginPath=Ud,Ld.closePath=Ud,Ld.moveTo=Fd,Ld.lineTo=Fd,Ld.rect=function(bB,_B,xB,vB){Fd(bB,_B),Fd(bB+xB,_B+vB)},Ld.quadraticCurveTo=function(bB,_B,xB,vB){Fd(bB,_B),Fd(xB,vB)},Ld.bezierCurveTo=function(bB,_B,xB,vB,kB,wB){Fd(bB,_B),Fd(xB,vB),Fd(kB,wB)},Ld.arc=function(bB,_B,xB,vB,kB,wB){function SB(DB){OB=xB*Math.cos(DB),MB=xB*Math.sin(DB),OB<CB&&(CB=OB),OB>zB&&(zB=OB),MB<TB&&(TB=MB),MB>RB&&(RB=MB)}if(Math.abs(kB-vB)>aP-1e-8)return Fd(bB-xB,_B-xB),void Fd(bB+xB,_B+xB);var CB=Infinity,zB=-Infinity,TB=Infinity,RB=-Infinity,PB,AB,OB,MB;if(SB(vB),SB(kB),kB!==vB)if(vB%=aP,0>vB&&(vB+=aP),kB%=aP,0>kB&&(kB+=aP),kB<vB&&(wB=!wB,PB=vB,vB=kB,kB=PB),wB)for(kB-=aP,PB=vB-vB%iP,AB=0;3>AB&&PB>kB;++AB,PB-=iP)SB(PB);else for(PB=vB-vB%iP+iP,AB=0;3>AB&&PB<kB;++AB,PB+=iP)SB(PB);Fd(bB+CB,_B+TB),Fd(bB+zB,_B+RB)};var rP=[],oP=function(){return!0},lP=nr('arc',function(bB,_B){return VR.context(bB)(_B)}),sP=ar('area',function(bB,_B){var xB=_B[0],vB=xB.interpolate||'linear';return('horizontal'===xB.orient?ZR:JR).curve(Zi(vB,xB.orient,xB.tension)).context(bB)(_B)}),cP={type:'image',tag:'image',nested:!1,attr:function(bB,_B,xB){var vB=br(_B,xB),kB=_B.x||0,wB=_B.y||0,SB=(null==_B.width?vB.width:_B.width)||0,CB=(null==_B.height?vB.height:_B.height)||0,zB=!1===_B.aspect?'none':'xMidYMid';kB-=_r(_B.align,SB),wB-=xr(_B.baseline,CB),bB('href',vB.src||'','http://www.w3.org/1999/xlink','xlink:href'),bB('transform',Qd(kB,wB)),bB('width',SB),bB('height',CB),bB('preserveAspectRatio',zB)},bound:function(bB,_B){var xB=_B.image,vB=_B.x||0,kB=_B.y||0,wB=(null==_B.width?xB&&xB.width:_B.width)||0,SB=(null==_B.height?xB&&xB.height:_B.height)||0;return vB-=_r(_B.align,wB),kB-=xr(_B.baseline,SB),bB.set(vB,kB,vB+wB,kB+SB)},draw:function(bB,_B,xB){var vB=this;Gd(_B,function(kB){if(!xB||xB.intersects(kB.bounds)){var wB=br(kB,vB),SB=kB.x||0,CB=kB.y||0,zB=(null==kB.width?wB.width:kB.width)||0,TB=(null==kB.height?wB.height:kB.height)||0,RB,PB,AB,OB;SB-=_r(kB.align,zB),CB-=xr(kB.baseline,TB),!1!==kB.aspect&&(PB=wB.width/wB.height,AB=kB.width/kB.height,PB===PB&&AB===AB&&PB!==AB&&(AB<PB?(OB=zB/PB,CB+=(TB-OB)/2,TB=OB):(OB=TB*PB,SB+=(zB-OB)/2,zB=OB))),wB.loaded&&(bB.globalAlpha=null==(RB=kB.opacity)?1:RB,bB.drawImage(wB,SB,CB,zB,TB))}})},pick:Jd(),get:br,xOffset:_r,yOffset:xr},uP=ar('line',function(bB,_B){var xB=_B[0],vB=xB.interpolate||'linear';return KR.curve(Zi(vB,xB.orient,xB.tension)).context(bB)(_B)}),pP={type:'path',tag:'path',nested:!1,attr:function(bB,_B){bB('transform',er(_B)),bB('d',_B.path)},bound:function(bB,_B){return Cr(Ld(bB),_B)?bB.set(0,0,0,0):qd(bB,_B)},draw:Hd(Cr),pick:Kd(Cr)},gP={type:'rect',tag:'path',nested:!1,attr:function(bB,_B){bB('d',Ad(null,_B))},bound:function(bB,_B){var xB,vB;return qd(bB.set(xB=_B.x||0,vB=_B.y||0,xB+_B.width||0,vB+_B.height||0),_B)},draw:Hd(Pr),pick:Kd(Pr)},mP={type:'rule',tag:'line',nested:!1,attr:function(bB,_B){bB('transform',er(_B)),bB('x2',null==_B.x2?0:_B.x2-(_B.x||0)),bB('y2',null==_B.y2?0:_B.y2-(_B.y||0))},bound:function(bB,_B){var xB,vB;return qd(bB.set(xB=_B.x||0,vB=_B.y||0,null==_B.x2?xB:_B.x2,null==_B.y2?vB:_B.y2),_B)},draw:function(bB,_B,xB){Gd(_B,function(vB){if(!xB||xB.intersects(vB.bounds)){var kB=null==vB.opacity?1:vB.opacity;kB&&Mr(bB,vB,kB)&&bB.stroke()}})},pick:Jd(function(bB,_B,xB,vB){return!!bB.isPointInStroke&&Mr(bB,_B,1)&&bB.isPointInStroke(xB,vB)})},hP=nr('shape',function(bB,_B){return(_B.mark.shape||_B.shape).context(bB)(_B)}),yP=nr('symbol',function(bB,_B){return eP.context(bB)(_B)}),bP,_P,xP={height:Ir,measureWidth:Fr,estimateWidth:Lr,width:Lr,canvas:$r};$r(!0);var vP={left:'start',center:'middle',right:'end'},kP=new Pa,wP={type:'text',tag:'text',nested:!1,attr:function(bB,_B){var xB=_B.dx||0,vB=(_B.dy||0)+Gr(_B),kB=_B.x||0,wB=_B.y||0,SB=_B.angle||0,CB=_B.radius||0,zB;CB&&(zB=(_B.theta||0)-Math.PI/2,kB+=CB*Math.cos(zB),wB+=CB*Math.sin(zB)),bB('text-anchor',vP[_B.align]||'start'),SB?(zB=Qd(kB,wB)+' rotate('+SB+')',(xB||vB)&&(zB+=' '+Qd(xB,vB))):zB=Qd(kB+xB,wB+vB),bB('transform',zB)},bound:Hr,draw:function(bB,_B,xB){Gd(_B,function(vB){var kB,wB,SB,CB,zB,TB;(!xB||xB.intersects(vB.bounds))&&(TB=Nr(vB))&&(kB=null==vB.opacity?1:vB.opacity,0===kB||(bB.font=Yr(vB),bB.textAlign=vB.align||'left',wB=vB.x||0,SB=vB.y||0,(CB=vB.radius)&&(zB=(vB.theta||0)-Math.PI/2,wB+=CB*Math.cos(zB),SB+=CB*Math.sin(zB)),vB.angle&&(bB.save(),bB.translate(wB,SB),bB.rotate(vB.angle*Math.PI/180),wB=SB=0),wB+=vB.dx||0,SB+=(vB.dy||0)+Gr(vB),vB.fill&&$d(bB,vB,kB)&&bB.fillText(TB,wB,SB),vB.stroke&&Nd(bB,vB,kB)&&bB.strokeText(TB,wB,SB),vB.angle&&bB.restore()))})},pick:Jd(function(bB,_B,xB,vB,kB,wB){if(0>=_B.fontSize)return!1;if(!_B.angle)return!0;var SB=Hr(kP,_B,!0),CB=-_B.angle*Math.PI/180,zB=Math.cos(CB),TB=Math.sin(CB),RB=_B.x,PB=_B.y;return SB.contains(zB*kB-TB*wB+(RB-RB*zB+PB*TB),TB*kB+zB*wB+(PB-RB*TB-PB*zB))})},EP=ar('trail',function(bB,_B){return tP.context(bB)(_B)}),SP={arc:lP,area:sP,group:{type:'group',tag:'g',nested:!1,attr:function(bB,_B){bB('transform',er(_B))},bound:function(bB,_B){if(!_B.clip&&_B.items)for(var xB=_B.items,vB=0,kB=xB.length;vB<kB;++vB)bB.union(xB[vB].bounds);return(_B.clip||_B.width||_B.height)&&qd(bB.add(0,0).add(_B.width||0,_B.height||0),_B),bB.translate(_B.x||0,_B.y||0)},draw:function(bB,_B,xB){var vB=this;Gd(_B,function(kB){var wB=kB.x||0,SB=kB.y||0,CB=kB.width||0,zB=kB.height||0,TB,RB;bB.save(),bB.translate(wB,SB),(kB.stroke||kB.fill)&&(RB=null==kB.opacity?1:kB.opacity,0<RB&&(bB.beginPath(),TB=kB.stroke?0.5:0,Ad(bB,kB,TB,TB),kB.fill&&$d(bB,kB,RB)&&bB.fill(),kB.stroke&&Nd(bB,kB,RB)&&bB.stroke())),kB.clip&&(bB.beginPath(),bB.rect(0,0,CB,zB),bB.clip()),xB&&xB.translate(-wB,-SB),Gd(kB,function(PB){vB.draw(bB,PB,xB)}),xB&&xB.translate(wB,SB),bB.restore()})},pick:function(bB,_B,xB,vB,kB,wB){if(_B.bounds&&!_B.bounds.contains(kB,wB)||!_B.items)return null;var SB=this;return Wd(_B,function(CB){var zB,TB,RB,PB;if(PB=CB.bounds,!PB||PB.contains(kB,wB))return(TB=CB.x||0,RB=CB.y||0,bB.save(),bB.translate(TB,RB),TB=kB-TB,RB=wB-RB,zB=Wd(CB,function(AB){return yr(AB,TB,RB)?SB.pick(AB,xB,vB,TB,RB):null}),bB.restore(),zB)?zB:(zB=!1!==_B.interactive&&(CB.fill||CB.stroke)&&0<=TB&&TB<=CB.width&&0<=RB&&RB<=CB.height,zB?CB:null)})},background:function(bB,_B){var xB=_B.stroke?0.5:0;bB('class','background'),bB('d',Ad(null,_B,xB,xB))},foreground:function(bB,_B,xB){var vB=_B.clip?ir(xB,_B,_B):null;bB('clip-path',vB)}},image:cP,line:uP,path:pP,rect:gP,rule:mP,shape:hP,symbol:yP,text:wP,trail:EP},CP={mark:null},zP=['marktype','name','role','interactive','clip','items','zindex','x','y','width','height','align','baseline','fill','fillOpacity','opacity','stroke','strokeOpacity','strokeWidth','strokeCap','strokeDash','strokeDashOffset','startAngle','endAngle','innerRadius','outerRadius','cornerRadius','padAngle','interpolate','tension','orient','defined','url','path','x2','y2','size','shape','text','angle','theta','radius','dx','dy','font','fontSize','fontWeight','fontStyle','fontVariant'],TP=no.prototype;TP.toJSON=function(bB){return Kr(this.root,bB||0)},TP.mark=function(bB,_B,xB){_B=_B||this.root.items[0];var vB=ao(bB,_B);return _B.items[xB]=vB,vB.zindex&&(vB.group.zdirty=!0),vB};var RP=io.prototype;RP.initialize=function(bB,_B,xB){return this._el=bB,this._obj=xB||null,this.origin(_B)},RP.element=function(){return this._el},RP.origin=function(bB){return this._origin=bB||[0,0],this},RP.scene=function(bB){return arguments.length?(this._scene=bB,this):this._scene},RP.on=function(){},RP.off=function(){},RP.handlers=function(){var bB=this._handlers,_B=[],xB;for(xB in bB)_B.push.apply(_B,bB[xB]);return _B},RP.eventName=function(bB){var _B=bB.indexOf('.');return 0>_B?bB:bB.slice(0,_B)},RP.handleHref=function(bB,_B,xB){this._loader.sanitize(xB,{context:'href'}).then(function(vB){var kB=new MouseEvent(bB.type,bB),wB=Da(null,'a');for(var SB in vB)wB.setAttribute(SB,vB[SB]);wB.dispatchEvent(kB)}).catch(function(){})},RP.handleTooltip=function(bB,_B,xB){this._el.setAttribute('title',xB||'')};var PP=ro.prototype;PP.initialize=function(bB,_B,xB,vB){return this._el=bB,this.resize(_B,xB,vB)},PP.element=function(){return this._el},PP.scene=function(){return this._el&&this._el.firstChild},PP.background=function(bB){return 0===arguments.length?this._bgcolor:(this._bgcolor=bB,this)},PP.resize=function(bB,_B,xB){return this._width=bB,this._height=_B,this._origin=xB||[0,0],this},PP.render=function(bB,_B){var xB=this;return xB._call=function(){xB._render(bB,_B)},xB._call(),xB._call=null,xB},PP._render=function(){},PP.renderAsync=function(bB,_B){var xB=this.render(bB,_B);return this._ready?this._ready.then(function(){return xB}):Promise.resolve(xB)},PP._load=function(bB,_B){var xB=this,vB=xB._loader[bB](_B);if(!xB._ready){var kB=xB._call;xB._ready=xB._loader.ready().then(function(wB){wB&&kB(),xB._ready=null})}return vB},PP.sanitizeURL=function(bB){return this._load('sanitizeURL',bB)},PP.loadImage=function(bB){return this._load('loadImage',bB)};var AP=Ue(so,io);AP.initialize=function(bB,_B,xB){var vB=this._canvas=bB&&qa(bB,'canvas');if(vB){var kB=this;this.events.forEach(function(wB){vB.addEventListener(wB,function(SB){AP[wB]?AP[wB].call(kB,SB):kB.fire(wB,SB)})})}return io.prototype.initialize.call(this,bB,_B,xB)},AP.canvas=function(){return this._canvas},AP.context=function(){return this._canvas.getContext('2d')},AP.events=['keydown','keypress','keyup','dragenter','dragleave','dragover','mousedown','mouseup','mousemove','mouseout','mouseover','click','dblclick','wheel','mousewheel','touchstart','touchmove','touchend'],AP.DOMMouseScroll=function(bB){this.fire('mousewheel',bB)},AP.mousemove=fo('mousemove','mouseover','mouseout'),AP.dragover=fo('dragover','dragenter','dragleave'),AP.mouseout=co('mouseout'),AP.dragleave=co('dragleave'),AP.mousedown=function(bB){this._down=this._active,this.fire('mousedown',bB)},AP.click=function(bB){this._down===this._active&&(this.fire('click',bB),this._down=null)},AP.touchstart=function(bB){this._touch=this.pickEvent(bB.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire('touchstart',bB,!0)},AP.touchmove=function(bB){this.fire('touchmove',bB,!0)},AP.touchend=function(bB){this.fire('touchend',bB,!0),this._touch=null},AP.fire=function(bB,_B,xB){var vB=xB?this._touch:this._active,kB=this._handlers[bB],wB,SB;if('click'===bB&&vB&&vB.href?this.handleHref(_B,vB,vB.href):('mouseover'===bB||'mouseout'===bB)&&vB&&vB.tooltip&&this.handleTooltip(_B,vB,'mouseover'===bB?vB.tooltip:null),kB)for(_B.vegaType=bB,wB=0,SB=kB.length;wB<SB;++wB)kB[wB].handler.call(this._obj,_B,vB)},AP.on=function(bB,_B){var xB=this.eventName(bB),vB=this._handlers;return(vB[xB]||(vB[xB]=[])).push({type:bB,handler:_B}),this},AP.off=function(bB,_B){var xB=this.eventName(bB),vB=this._handlers[xB],kB;if(vB){for(kB=vB.length;0<=--kB;)vB[kB].type===bB&&(_B&&vB[kB].handler!==_B||vB.splice(kB,1));return this}},AP.pickEvent=function(bB){var _B=oo(bB,this._canvas),xB=this._origin;return this.pick(this._scene,_B[0],_B[1],_B[0]-xB[0],_B[1]-xB[1])},AP.pick=function(bB,_B,xB,vB,kB){var wB=this.context(),SB=SP[bB.marktype];return SB.pick.call(this,wB,bB,_B,xB,vB,kB)};var OP='undefined'===typeof window?1:window.devicePixelRatio||1,MP=Ue(go,ro),DP=ro.prototype,qP=new Pa;MP.initialize=function(bB,_B,xB,vB){return this._canvas=ja(1,1),bB&&(Ua(bB,0).appendChild(this._canvas),this._canvas.setAttribute('class','marks')),DP.initialize.call(this,bB,_B,xB,vB)},MP.resize=function(bB,_B,xB){return DP.resize.call(this,bB,_B,xB),po(this._canvas,this._width,this._height,this._origin),(this._redraw=!0,this)},MP.canvas=function(){return this._canvas},MP.context=function(){return this._canvas?this._canvas.getContext('2d'):null},MP._render=function(bB,_B){var xB=this.context(),vB=this._origin,kB=this._width,wB=this._height,SB;return xB.save(),SB=!_B||this._redraw?(this._redraw=!1,null):mo(xB,_B),this.clear(-vB[0],-vB[1],kB,wB),this.draw(xB,bB,SB),xB.restore(),this},MP.draw=function(bB,_B,xB){var vB=SP[_B.marktype];_B.clip&&uo(bB,_B),vB.draw.call(this,bB,_B,xB),_B.clip&&bB.restore()},MP.clear=function(bB,_B,xB,vB){var kB=this.context();kB.clearRect(bB,_B,xB,vB),null!=this._bgcolor&&(kB.fillStyle=this._bgcolor,kB.fillRect(bB,_B,xB,vB))};var LP=Ue(yo,io);LP.initialize=function(bB,_B,xB){var vB=this._svg;return vB&&(vB.removeEventListener('click',this._hrefHandler),vB.removeEventListener('mouseover',this._tooltipHandler),vB.removeEventListener('mouseout',this._tooltipHandler)),this._svg=vB=bB&&qa(bB,'svg'),vB&&(vB.addEventListener('click',this._hrefHandler),vB.addEventListener('mouseover',this._tooltipHandler),vB.addEventListener('mouseout',this._tooltipHandler)),io.prototype.initialize.call(this,bB,_B,xB)},LP.svg=function(){return this._svg},LP.on=function(bB,_B){var xB=this.eventName(bB),vB=this._handlers,kB={type:bB,handler:_B,listener:bo(this,_B)};return(vB[xB]||(vB[xB]=[])).push(kB),this._svg&&this._svg.addEventListener(xB,kB.listener),this},LP.off=function(bB,_B){var xB=this.eventName(bB),vB=this._svg,kB=this._handlers[xB],wB;if(kB){for(wB=kB.length;0<=--wB;)(kB[wB].type!==bB||_B)&&kB[wB].handler!==_B||(this._svg&&vB.removeEventListener(xB,kB[wB].listener),kB.splice(wB,1));return this}};var UP={version:'1.1',xmlns:'http://www.w3.org/2000/svg',"xmlns:xlink":'http://www.w3.org/1999/xlink'},FP={fill:'fill',fillOpacity:'fill-opacity',stroke:'stroke',strokeWidth:'stroke-width',strokeOpacity:'stroke-opacity',strokeCap:'stroke-linecap',strokeJoin:'stroke-linejoin',strokeDash:'stroke-dasharray',strokeDashOffset:'stroke-dashoffset',strokeMiterLimit:'stroke-miterlimit',opacity:'opacity'},jP=Object.keys(FP),IP=UP.xmlns,$P=Ue(vo,ro),NP=ro.prototype;$P.initialize=function(bB,_B,xB,vB){return bB&&(this._svg=La(bB,0,'svg',IP),this._svg.setAttribute('class','marks'),Ua(bB,1),this._root=La(this._svg,0,'g',IP),Ua(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),NP.initialize.call(this,bB,_B,xB,vB)},$P.background=function(bB){return arguments.length&&this._svg&&this._svg.style.setProperty('background-color',bB),NP.background.apply(this,arguments)},$P.resize=function(bB,_B,xB){return NP.resize.call(this,bB,_B,xB),this._svg&&(this._svg.setAttribute('width',this._width),this._svg.setAttribute('height',this._height),this._svg.setAttribute('viewBox','0 0 '+this._width+' '+this._height),this._root.setAttribute('transform','translate('+this._origin+')')),this},$P.svg=function(){if(!this._svg)return null;var bB={class:'marks',width:this._width,height:this._height,viewBox:'0 0 '+this._width+' '+this._height};for(var _B in UP)bB[_B]=UP[_B];return _o('svg',bB)+this._svg.innerHTML+xo('svg')},$P._render=function(bB,_B){return this._dirtyCheck(_B)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,bB),Ua(this._root,1)),this.updateDefs(),this},$P.updateDefs=function(){var bB=this._svg,_B=this._defs,xB=_B.el,vB=0,kB;for(kB in _B.gradient)xB||(_B.el=xB=La(bB,0,'defs',IP)),ko(xB,_B.gradient[kB],vB++);for(kB in _B.clipping)xB||(_B.el=xB=La(bB,0,'defs',IP)),wo(xB,_B.clipping[kB],vB++);xB&&(0===vB?(bB.removeChild(xB),_B.el=null):Ua(xB,vB))},$P._resetDefs=function(){var bB=this._defs;bB.clip_id=1,bB.gradient={},bB.clipping={}},$P.isDirty=function(bB){return this._dirtyAll||!bB._svg||bB.dirty===this._dirtyID},$P._dirtyCheck=function(bB){if(this._dirtyAll=!0,!bB)return!0;var _B=++this._dirtyID,xB,vB,kB,wB,SB,CB,zB;for(SB=0,CB=bB.length;SB<CB;++SB){if(xB=bB[SB],vB=xB.mark,vB.marktype!==kB&&(kB=vB.marktype,wB=SP[kB]),vB.zdirty&&vB.dirty!==_B&&(this._dirtyAll=!1,vB.dirty=_B,Eo(vB.group,_B)),xB.exit){wB.nested&&vB.items.length?(zB=vB.items[0],zB._svg&&this._update(wB,zB._svg,zB)):xB._svg&&xB._svg.parentNode.removeChild(xB._svg),xB._svg=null;continue}xB=wB.nested?vB.items[0]:xB,xB._update===_B||(xB._svg&&xB._svg.ownerSVGElement?this._update(wB,xB._svg,xB):(this._dirtyAll=!1,Eo(xB,_B)),xB._update=_B)}return!this._dirtyAll},$P.draw=function(bB,_B,xB){function vB(PB){var AB=kB.isDirty(PB),OB=Co(PB,RB,zB,wB.tag);AB&&(kB._update(wB,OB,PB),CB&&So(kB,OB,PB)),zB=OB,++TB}if(!this.isDirty(_B))return _B._svg;var kB=this,wB=SP[_B.marktype],SB=!1===_B.interactive?'none':null,CB='g'===wB.tag,zB=null,TB=0,RB;return RB=Co(_B,bB,xB,'g'),RB.setAttribute('class',Fa(_B)),!CB&&SB&&RB.style.setProperty('pointer-events',SB),_B.clip&&RB.setAttribute('clip-path',ir(kB,_B,_B.group)),wB.nested?_B.items.length&&vB(_B.items[0]):Gd(_B,vB),Ua(RB,TB),RB};var BP=null,YP=null,GP={group:function(_B,xB,vB){YP=xB.__values__,BP=xB.childNodes[1],_B.foreground(zo,vB,this),BP=xB.childNodes[0],_B.background(zo,vB,this);var kB=!1===vB.mark.interactive?'none':null;kB!==YP.events&&(BP.style.setProperty('pointer-events',kB),YP.events=kB)},text:function(_B,xB,vB){var kB=Nr(vB);kB!==YP.text&&(xB.textContent=kB,YP.text=kB),kB=Yr(vB),kB!==YP.font&&(xB.style.setProperty('font',kB),YP.font=kB)}};$P._update=function(bB,_B,xB){BP=_B,YP=_B.__values__,bB.attr(zo,xB,this);var vB=GP[bB.type];vB&&vB.call(this,bB,_B,xB),this.style(BP,xB)},$P.style=function(bB,_B){if(null!=_B){var xB,vB,kB,wB,SB;for(xB=0,vB=jP.length;xB<vB;++xB)kB=jP[xB],SB=_B[kB],SB===YP[kB]||(wB=FP[kB],null==SB?'fill'===wB?bB.style.setProperty(wB,'none'):bB.style.removeProperty(wB):(SB.id&&(this._defs.gradient[SB.id]=SB,SB='url('+To()+'#'+SB.id+')'),bB.style.setProperty(wB,SB+'')),YP[kB]=SB)}};var WP=Ue(Ro,ro),HP=ro.prototype;WP.resize=function(bB,_B,xB){HP.resize.call(this,bB,_B,xB);var vB=this._origin,kB=this._text,wB={class:'marks',width:this._width,height:this._height,viewBox:'0 0 '+this._width+' '+this._height};for(var SB in UP)wB[SB]=UP[SB];return kB.head=_o('svg',wB),kB.root=_o('g',{transform:'translate('+vB+')'}),kB.foot=xo('g')+xo('svg'),this},WP.svg=function(){var bB=this._text;return bB.head+bB.defs+bB.root+bB.body+bB.foot},WP._render=function(bB){return this._text.body=this.mark(bB),this._text.defs=this.buildDefs(),this},WP.reset=function(){return this._defs.clip_id=0,this},WP.buildDefs=function(){var bB=this._defs,_B='',xB,vB,kB,wB;for(vB in bB.gradient){for(kB=bB.gradient[vB],wB=kB.stops,_B+=_o('linearGradient',{id:vB,x1:kB.x1,x2:kB.x2,y1:kB.y1,y2:kB.y2}),xB=0;xB<wB.length;++xB)_B+=_o('stop',{offset:wB[xB].offset,"stop-color":wB[xB].color})+xo('stop');_B+=xo('linearGradient')}for(vB in bB.clipping)kB=bB.clipping[vB],_B+=_o('clipPath',{id:vB}),_B+=_o('rect',{x:0,y:0,width:kB.width,height:kB.height})+xo('rect'),_B+=xo('clipPath');return 0<_B.length?_o('defs')+_B+xo('defs'):''};var XP;WP.attributes=function(bB,_B){return XP={},bB(Po,_B,this),XP},WP.href=function(bB){var _B=this,xB=bB.href,vB;if(xB){if(vB=_B._hrefs&&_B._hrefs[xB])return vB;_B.sanitizeURL(xB).then(function(kB){kB['xlink:href']=kB.href,kB.href=null,(_B._hrefs||(_B._hrefs={}))[xB]=kB})}return null},WP.mark=function(bB){function _B(zB){var TB=xB.href(zB);TB&&(SB+=_o('a',TB)),CB='g'===kB?null:Ao(zB,bB,kB,wB),SB+=_o(kB,xB.attributes(vB.attr,zB),CB),'text'===kB?SB+=Oo(Nr(zB)):'g'===kB&&(SB+=_o('path',xB.attributes(vB.background,zB),Ao(zB,bB,'bgrect',wB))+xo('path'),SB+=_o('g',xB.attributes(vB.foreground,zB))+xB.markGroup(zB)+xo('g')),SB+=xo(kB),TB&&(SB+=xo('a'))}var xB=this,vB=SP[bB.marktype],kB=vB.tag,wB=this._defs,SB='',CB;return'g'!==kB&&!1===bB.interactive&&(CB='style="pointer-events: none;"'),SB+=_o('g',{class:Fa(bB),"clip-path":bB.clip?ir(xB,bB,bB.group):null},CB),vB.nested?bB.items&&bB.items.length&&_B(bB.items[0]):Gd(bB,_B),SB+xo('g')},WP.markGroup=function(bB){var _B=this,xB='';return Gd(bB,function(vB){xB+=_B.mark(vB)}),xB};var VP='canvas',JP='png',ZP='svg',KP='none',QP={Canvas:VP,PNG:JP,SVG:ZP,None:KP},eA={};eA[VP]=eA[JP]={renderer:go,headless:go,handler:so},eA[ZP]={renderer:vo,headless:Ro,handler:yo},eA[KP]={};var tA=1e-9,nA=1,aA='_:mod:_',iA=Wo.prototype;iA.set=function(bB,_B,xB,vB){var kB=this,wB=kB[bB],SB=kB[aA];return null!=_B&&0<=_B?(wB[_B]!==xB||vB)&&(wB[_B]=xB,SB[_B+':'+bB]=-1,SB[bB]=-1):(wB!==xB||vB)&&(kB[bB]=xB,SB[bB]=Qz(xB)?xB.length:-1),kB},iA.modified=function(bB,_B){var xB=this[aA],vB;if(!arguments.length){for(vB in xB)if(xB[vB])return!0;return!1}if(Qz(bB)){for(vB=0;vB<bB.length;++vB)if(xB[bB[vB]])return!0;return!1}return null!=_B&&0<=_B?_B<xB[bB]||!!xB[_B+':'+bB]:!!xB[bB]},iA.clear=function(){return this[aA]={},this};var dA=0,oA=new Wo,fA=Ho.prototype;fA.targets=function(){return this._targets||(this._targets=Uo(tT))},fA.set=function(bB){return this.value===bB?0:(this.value=bB,1)},fA.skip=Xo(1),fA.modified=Xo(2),fA.parameters=function(bB,_B){function xB(PB,AB,OB){OB instanceof Ho?(OB!==vB&&(_B&&OB.targets().add(vB),SB.push(OB)),wB.push({op:OB,name:PB,index:AB})):kB.set(PB,AB,OB)}_B=!1!==_B;var vB=this,kB=vB._argval=vB._argval||new Wo,wB=vB._argops=vB._argops||[],SB=[],CB,zB,TB,RB;for(CB in bB)if(zB=bB[CB],CB==='pulse')Pe(zB).forEach(function(PB){PB instanceof Ho?PB!==vB&&(PB.targets().add(vB),SB.push(PB)):ke('Pulse parameters must be operator instances.')}),vB.source=zB;else if(Qz(zB))for(kB.set(CB,-1,Array(TB=zB.length)),RB=0;RB<TB;++RB)xB(CB,RB,zB[RB]);else xB(CB,-1,zB);return this.marshall().clear(),SB},fA.marshall=function(bB){var _B=this._argval||oA,xB=this._argops,vB,kB,wB,SB,CB;if(xB&&(wB=xB.length))for(kB=0;kB<wB;++kB)vB=xB[kB],SB=vB.op,CB=SB.modified()&&SB.stamp===bB,_B.set(vB.name,vB.index,SB.value,CB);return _B},fA.evaluate=function(bB){if(this._update){var _B=this.marshall(bB.stamp),xB=this._update(_B,bB);if(_B.clear(),xB!==this.value)this.value=xB;else if(!this.modified())return bB.StopPropagation}},fA.run=function(bB){if(bB.stamp<=this.stamp)return bB.StopPropagation;var _B=this.skip()?(this.skip(!1),0):this.evaluate(bB);return this.stamp=bB.stamp,this.pulse=_B||bB};var cA=0,uA=Zo.prototype;uA._filter=dT,uA._apply=nT,uA.targets=function(){return this._targets||(this._targets=Uo(tT))},uA.consume=function(bB){return arguments.length?(this._consume=!!bB,this):!!this._consume},uA.receive=function(bB){if(this._filter(bB)){for(var _B=this.value=this._apply(bB),xB=this._targets,vB=xB?xB.length:0,kB=0;kB<vB;++kB)xB[kB].receive(_B);this._consume&&(bB.preventDefault(),bB.stopPropagation())}},uA.filter=function(bB){var _B=Ko(bB);return this.targets().add(_B),_B},uA.apply=function(bB){var _B=Ko(null,bB);return this.targets().add(_B),_B},uA.merge=function(){var bB=Ko();this.targets().add(bB);for(var _B=0,xB=arguments.length;_B<xB;++_B)arguments[_B].targets().add(bB);return bB},uA.throttle=function(bB){var _B=-1;return this.filter(function(){var xB=Date.now();return xB-_B>bB?(_B=xB,1):0})},uA.debounce=function(bB){function _B(){var wB=vB.dataflow;xB.receive(vB),vB=null,kB=null,wB&&wB.run&&wB.run()}var xB=Ko(),vB=null,kB=null;return this.targets().add(Ko(null,null,function(wB){vB=wB,kB&&clearTimeout(kB),kB=setTimeout(_B,bB)})),xB},uA.between=function(bB,_B){var xB=!1;return bB.targets().add(Ko(null,null,function(){xB=!0})),_B.targets().add(Ko(null,null,function(){xB=!1})),this.filter(function(){return xB})};var pA={skip:!0},gA={},mA=1,hA=2,yA=4,_A=mA|yA,xA=mA|hA|yA,vA=8,kA=16,wA=32,EA=64,SA=rl.prototype;SA.StopPropagation=gA,SA.ADD=mA,SA.REM=hA,SA.MOD=yA,SA.ADD_REM=mA|hA,SA.ADD_MOD=_A,SA.ALL=xA,SA.REFLOW=vA,SA.SOURCE=kA,SA.NO_SOURCE=wA,SA.NO_FIELDS=EA,SA.fork=function(bB){return new rl(this.dataflow).init(this,bB)},SA.addAll=function(){var bB=this;return this.source&&this.source.length!==this.add.length?(bB=new rl(this.dataflow).init(this),bB.add=bB.source,bB):bB},SA.init=function(bB,_B){var xB=this;return xB.stamp=bB.stamp,xB.encode=bB.encode,bB.fields&&!(_B&EA)&&(xB.fields=bB.fields),xB.add=_B&mA?(xB.addF=bB.addF,bB.add):(xB.addF=null,[]),xB.rem=_B&hA?(xB.remF=bB.remF,bB.rem):(xB.remF=null,[]),xB.mod=_B&yA?(xB.modF=bB.modF,bB.mod):(xB.modF=null,[]),xB.source=_B&wA?(xB.srcF=null,null):(xB.srcF=bB.srcF,bB.source),xB},SA.runAfter=function(bB){this.dataflow.runAfter(bB)},SA.changed=function(bB){var _B=bB||xA;return _B&mA&&this.add.length||_B&hA&&this.rem.length||_B&yA&&this.mod.length},SA.reflow=function(bB){if(bB)return this.fork(xA).reflow();var _B=this.add.length,xB=this.source&&this.source.length;return xB&&xB!==_B&&(this.mod=this.source,_B&&this.filter(yA,ll(this,mA))),this},SA.modifies=function(bB){var _B=Pe(bB),xB=this.fields||(this.fields={});return _B.forEach(function(vB){xB[vB]=!0}),this},SA.modified=function(bB){var _B=this.fields;return this.mod.length&&_B&&(arguments.length?Qz(bB)?bB.some(function(xB){return _B[xB]}):_B[bB]:!!_B)},SA.filter=function(bB,_B){var xB=this;return bB&mA&&(xB.addF=ol(xB.addF,_B)),bB&hA&&(xB.remF=ol(xB.remF,_B)),bB&yA&&(xB.modF=ol(xB.modF,_B)),bB&kA&&(xB.srcF=ol(xB.srcF,_B)),xB},SA.materialize=function(bB){bB=bB||xA;var _B=this;return bB&mA&&_B.addF&&(_B.add=_B.add.filter(_B.addF),_B.addF=null),bB&hA&&_B.remF&&(_B.rem=_B.rem.filter(_B.remF),_B.remF=null),bB&yA&&_B.modF&&(_B.mod=_B.mod.filter(_B.modF),_B.modF=null),bB&kA&&_B.srcF&&(_B.source=_B.source.filter(_B.srcF),_B.srcF=null),_B},SA.visit=function(bB,_B){var xB=_B,vB,kB;return bB&kA?(Qe(this.source,this.srcF,xB),this):(bB&mA&&Qe(this.add,this.addF,xB),bB&hA&&Qe(this.rem,this.remF,xB),bB&yA&&Qe(this.mod,this.modF,xB),bB&vA&&(vB=this.source)&&(kB=this.add.length+this.mod.length,kB===vB.length||(kB?Qe(vB,ll(this,_A),xB):Qe(vB,this.srcF,xB))),this)};var CA={skip:!1,force:!1},zA=Ue(yl,rl);zA.fork=function(){return arguments.length&&arguments[0]&rl.prototype.ALL&&ke('MultiPulse fork does not support tuple change sets.'),new rl(this.dataflow).init(this,0)},zA.changed=function(bB){return this.changes&bB},zA.modified=function(bB){var _B=this,xB=_B.fields;return xB&&_B.changes&_B.MOD?Qz(bB)?bB.some(function(vB){return xB[vB]}):xB[bB]:0},zA.filter=function(){ke('MultiPulse does not support filtering.')},zA.materialize=function(){ke('MultiPulse does not support materialization.')},zA.visit=function(bB,_B){var xB=this.pulses,vB,kB;for(vB=0,kB=xB.length;vB<kB;++vB)xB[vB].stamp===this.stamp&&xB[vB].visit(bB,_B);return this};var TA=El.prototype;TA.size=function(){return this.nodes.length},TA.clear=function(){return this.nodes=[],this},TA.peek=function(){return this.nodes[0]},TA.push=function(bB){var _B=this.nodes;return _B.push(bB),Sl(_B,0,_B.length-1,this.cmp)},TA.pop=function(){var bB=this.nodes,_B=bB.pop(),xB;return bB.length?(xB=bB[0],bB[0]=_B,Cl(bB,0,this.cmp)):xB=_B,xB},TA.replace=function(bB){var _B=this.nodes,xB=_B[0];return _B[0]=bB,Cl(_B,0,this.cmp),xB},TA.pushpop=function(bB){var _B=this.nodes,xB=_B[0];return _B.length&&0>this.cmp(xB,bB)&&(_B[0]=bB,bB=xB,Cl(_B,0,this.cmp)),bB};var RA=zl.prototype;RA.stamp=function(){return this._clock},RA.loader=function(bB){return arguments.length?(this._loader=bB,this):this._loader},RA.cleanThreshold=1e4,RA.add=function(bB,_B,xB,vB){var kB=1,wB=bB instanceof Ho?bB:bB&&bB.prototype instanceof Ho?new bB:Oe(bB)?new Ho(null,bB):(kB=0,new Ho(bB,_B));return this.rank(wB),kB&&(vB=xB,xB=_B),xB&&this.connect(wB,wB.parameters(xB,vB)),this.touch(wB),wB},RA.connect=function(bB,_B){var xB=bB.rank,vB,kB;for(vB=0,kB=_B.length;vB<kB;++vB)if(xB<_B[vB].rank)return void this.rerank(bB)},RA.rank=function(bB){bB.rank=++this._rank},RA.rerank=function(bB){for(var _B=[bB],xB,vB,kB;_B.length;)if(this.rank(xB=_B.pop()),vB=xB._targets)for(kB=vB.length;0<=--kB;)_B.push(vB[kB])},RA.pulse=function(bB,_B,xB){var vB=new rl(this,this._clock+(this._pulse?0:1));return vB.target=bB,this._pulses[bB.id]=_B.pulse(vB,bB.value),this.touch(bB,xB||CA)},RA.touch=function(bB,_B){return this._pulse?this._enqueue(bB):this._touched.add(bB),(_B||CA).skip&&bB.skip(!0),this},RA.update=function(bB,_B,xB){var vB=xB||CA;return(bB.set(_B)||vB.force)&&this.touch(bB,vB),this},RA.changeset=Go,RA.ingest=function(bB,_B,xB){return this.pulse(bB,this.changeset().insert(Ta(_B,xB)))},RA.request=function(bB,_B,xB){var vB=this,kB=vB._pending||gl(vB);kB.requests+=1,vB.loader().load(_B,{context:'dataflow'}).then(function(wB){vB.ingest(bB,wB,xB)},function(wB){vB.warn('Loading failed: '+_B,wB),kB.done()}).then(kB.done).catch(function(wB){vB.warn(wB)})},RA.events=function(bB,_B,xB,vB){var kB=this,wB=Ko(xB,vB),SB=function(PB){PB.dataflow=kB,wB.receive(PB),kB.run()},CB;CB='string'===typeof bB&&'undefined'!==typeof document?document.querySelectorAll(bB):Pe(bB);for(var zB=0,TB=CB.length;zB<TB;++zB)CB[zB].addEventListener(_B,SB);return wB},RA.on=function(bB,_B,xB,vB,kB){var wB=bB instanceof Ho?al:nl;return wB(this,bB,_B,xB,vB,kB),this},RA.run=function(bB){if(!this._touched.length)return 0;if(this._pending)return this.info('Awaiting requests, delaying dataflow run.'),0;var _B=this,xB=0,vB=_B.logLevel(),kB,wB,SB;_B._pulse=new rl(_B,++_B._clock,bB),vB>=sT&&(SB=Date.now(),_B.debug('-- START PROPAGATION ('+_B._clock+') -----')),_B._touched.forEach(function(zB){_B._enqueue(zB,!0)}),_B._touched=Uo(tT);try{for(;0<_B._heap.size();){if(kB=_B._heap.pop(),kB.rank!==kB.qrank){_B._enqueue(kB,!0);continue}wB=kB.run(_B._getPulse(kB,bB)),vB>=fT&&_B.debug(kB.id,wB===gA?'STOP':wB,kB),wB!==gA&&(_B._pulse=wB,kB._targets&&kB._targets.forEach(function(zB){_B._enqueue(zB)})),++xB}}catch(zB){_B.error(zB)}if(_B._pulses={},_B._pulse=null,vB>=sT&&(SB=Date.now()-SB,_B.info('> Pulse '+_B._clock+': '+xB+' operators; '+SB+'ms')),_B._postrun.length){var CB=_B._postrun;_B._postrun=[],CB.forEach(function(zB){try{zB(_B)}catch(TB){_B.error(TB)}})}return xB},RA.runAsync=function(){return this._pending||Promise.resolve(this.run())},RA.runAfter=function(bB){if(this._pulse)this._postrun.push(bB);else try{bB(this)}catch(_B){this.error(_B)}},RA._enqueue=function(bB,_B){var xB=!this._pulses[bB.id];xB&&(this._pulses[bB.id]=this._pulse),(xB||_B)&&(bB.qrank=bB.rank,this._heap.push(bB))},RA._getPulse=function(bB,_B){var xB=bB.source,vB=this._clock,kB;return xB&&Qz(xB)?(kB=xB.map(function(wB){return wB.pulse}),new yl(this,vB,kB,_B)):(xB=xB&&xB.pulse,kB=this._pulses[bB.id],xB&&xB!==gA&&(xB.stamp===vB&&kB.target!==bB?kB=xB:kB.source=xB.source),kB)},RA.warn=Tl('warn'),RA.info=Tl('info'),RA.debug=Tl('debug'),RA.logLevel=Tl('level'),RA.error=function(bB){throw bB};var PA=Ue(Rl,Ho);PA.evaluate=function(bB){var _B=this.marshall(bB.stamp),xB=this.transform(_B,bB);return _B.clear(),xB},PA.transform=function(){};var AA={},OA={},MA=Ml.prototype;MA.add=function(bB){this._add.push(bB)},MA.rem=function(bB){this._rem.push(bB)},MA.values=function(){if(this._get=null,0===this._rem.length)return this._add;var bB=this._add,_B=this._rem,xB=this._key,vB=bB.length,kB=_B.length,wB=Array(vB-kB),SB={},CB,zB,TB;for(CB=0;CB<kB;++CB)SB[_B[CB][xB]]=1;for(CB=0,zB=0;CB<vB;++CB)SB[(TB=bB[CB])[xB]]?SB[TB[xB]]=0:wB[zB++]=TB;return this._rem=[],this._add=wB},MA.distinct=function(bB){for(var _B=this.values(),xB=_B.length,vB={},kB=0,wB;0<=--xB;)wB=bB(_B[xB])+'',vB.hasOwnProperty(wB)||(vB[wB]=1,++kB);return kB},MA.extent=function(bB){if(this._get!==bB||!this._ext){var _B=this.values(),xB=qe(_B,bB);this._ext=[_B[xB[0]],_B[xB[1]]],this._get=bB}return this._ext},MA.argmin=function(bB){return this.extent(bB)[0]||{}},MA.argmax=function(bB){return this.extent(bB)[1]||{}},MA.min=function(bB){var _B=this.extent(bB)[0];return null==_B?+Infinity:bB(_B)},MA.max=function(bB){var _B=this.extent(bB)[1];return null==_B?-Infinity:bB(_B)},MA.quartile=function(bB){return this._get===bB&&this._q||(this._q=ge(this.values(),bB),this._get=bB),this._q},MA.q1=function(bB){return this.quartile(bB)[0]},MA.q2=function(bB){return this.quartile(bB)[1]},MA.q3=function(bB){return this.quartile(bB)[2]},MA.ci=function(bB){return this._get===bB&&this._ci||(this._ci=ce(this.values(),1e3,0.05,bB),this._get=bB),this._ci},MA.ci0=function(bB){return this.ci(bB)[0]},MA.ci1=function(bB){return this.ci(bB)[1]};var DA={values:ql({name:'values',init:'cell.store = true;',set:'cell.data.values()',idx:-1}),count:ql({name:'count',set:'cell.num'}),missing:ql({name:'missing',set:'this.missing'}),valid:ql({name:'valid',set:'this.valid'}),sum:ql({name:'sum',init:'this.sum = 0;',add:'this.sum += v;',rem:'this.sum -= v;',set:'this.sum'}),mean:ql({name:'mean',init:'this.mean = 0;',add:'var d = v - this.mean; this.mean += d / this.valid;',rem:'var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;',set:'this.mean'}),average:ql({name:'average',set:'this.mean',req:['mean'],idx:1}),variance:ql({name:'variance',init:'this.dev = 0;',add:'this.dev += d * (v - this.mean);',rem:'this.dev -= d * (v - this.mean);',set:'this.valid > 1 ? this.dev / (this.valid-1) : 0',req:['mean'],idx:1}),variancep:ql({name:'variancep',set:'this.valid > 1 ? this.dev / this.valid : 0',req:['variance'],idx:2}),stdev:ql({name:'stdev',set:'this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0',req:['variance'],idx:2}),stdevp:ql({name:'stdevp',set:'this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0',req:['variance'],idx:2}),stderr:ql({name:'stderr',set:'this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0',req:['variance'],idx:2}),distinct:ql({name:'distinct',set:'cell.data.distinct(this.get)',req:['values'],idx:3}),ci0:ql({name:'ci0',set:'cell.data.ci0(this.get)',req:['values'],idx:3}),ci1:ql({name:'ci1',set:'cell.data.ci1(this.get)',req:['values'],idx:3}),median:ql({name:'median',set:'cell.data.q2(this.get)',req:['values'],idx:3}),q1:ql({name:'q1',set:'cell.data.q1(this.get)',req:['values'],idx:3}),q3:ql({name:'q3',set:'cell.data.q3(this.get)',req:['values'],idx:3}),argmin:ql({name:'argmin',add:'if (v < this.min) this.argmin = t;',rem:'if (v <= this.min) this.argmin = null;',set:'this.argmin || cell.data.argmin(this.get)',req:['min'],str:['values'],idx:3}),argmax:ql({name:'argmax',add:'if (v > this.max) this.argmax = t;',rem:'if (v >= this.max) this.argmax = null;',set:'this.argmax || cell.data.argmax(this.get)',req:['max'],str:['values'],idx:3}),min:ql({name:'min',init:'this.min = null;',add:'if (v < this.min || this.min === null) this.min = v;',rem:'if (v <= this.min) this.min = NaN;',set:'this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)',str:['values'],idx:4}),max:ql({name:'max',init:'this.max = null;',add:'if (v > this.max || this.max === null) this.max = v;',rem:'if (v >= this.max) this.max = NaN;',set:'this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)',str:['values'],idx:4})},qA=Ue(jl,Rl);qA.transform=function(bB,_B){var xB=this,vB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),kB;return this.stamp=vB.stamp,this.value&&((kB=bB.modified())||_B.modified(this._inputs))?(this._prev=this.value,this.value=kB?this.init(bB):{},_B.visit(_B.SOURCE,function(wB){xB.add(wB)})):(this.value=this.value||this.init(bB),_B.visit(_B.REM,function(wB){xB.rem(wB)}),_B.visit(_B.ADD,function(wB){xB.add(wB)})),vB.modifies(this._outputs),xB._drop=!1!==bB.drop,bB.cross&&1<xB._dims.length&&(xB._drop=!1,this.cross()),xB.changes(vB)},qA.cross=function(){function bB(CB){var zB,TB,RB,PB;for(zB in CB)for(RB=CB[zB].tuple,TB=0;TB<SB;++TB)wB[TB][PB=RB[kB[TB]]]=PB}function _B(CB,zB,TB){var RB=kB[TB],PB=wB[TB++],AB,OB;for(AB in PB)zB[RB]=PB[AB],OB=CB?CB+'|'+AB:AB,TB<SB?_B(OB,zB,TB):!vB[OB]&&xB.cell(OB,zB)}var xB=this,vB=xB.value,kB=xB._dnames,wB=kB.map(function(){return{}}),SB=kB.length;bB(xB._prev),bB(vB),_B('',{},0)},qA.init=function(bB){function _B(qB){for(var LB=qB.fields,UB=0,FB=LB.length,jB;UB<FB;++UB)kB[jB=LB[UB]]||(kB[jB]=1,xB.push(jB))}var xB=this._inputs=[],vB=this._outputs=[],kB={};this._dims=Pe(bB.groupby),this._dnames=this._dims.map(function(qB){var LB=xe(qB);return _B(qB),vB.push(LB),LB}),this.cellkey=bB.key?bB.key:0===this._dims.length?function(){return''}:1===this._dims.length?this._dims[0]:$l,this._countOnly=!0,this._counts=[],this._measures=[];var wB=bB.fields||[null],SB=bB.ops||['count'],CB=bB.as||[],zB=wB.length,TB={},RB,PB,AB,OB,MB,DB;for(zB!==SB.length&&ke('Unmatched number of fields and aggregate ops.'),DB=0;DB<zB;++DB){if(RB=wB[DB],PB=SB[DB],null==RB&&'count'!==PB&&ke('Null aggregate field specified.'),OB=xe(RB),MB=Il(PB,OB,CB[DB]),vB.push(MB),'count'===PB){this._counts.push(MB);continue}AB=TB[OB],AB||(_B(RB),AB=TB[OB]=[],AB.field=RB,this._measures.push(AB)),'count'!==PB&&(this._countOnly=!1),AB.push(Dl(PB,MB))}return this._measures=this._measures.map(function(qB){return Fl(qB,qB.field)}),{}},qA.cellkey=$l,qA.cell=function(bB,_B){var xB=this.value[bB];return xB?0===xB.num&&this._drop&&xB.stamp<this.stamp?(xB.stamp=this.stamp,this._adds[this._alen++]=xB):xB.stamp<this.stamp&&(xB.stamp=this.stamp,this._mods[this._mlen++]=xB):(xB=this.value[bB]=this.newcell(bB,_B),this._adds[this._alen++]=xB),xB},qA.newcell=function(bB,_B){var xB={key:bB,num:0,agg:null,tuple:this.newtuple(_B,this._prev&&this._prev[bB]),stamp:this.stamp,store:!1};if(!this._countOnly){var vB=this._measures,kB=vB.length,wB;for(xB.agg=Array(kB),wB=0;wB<kB;++wB)xB.agg[wB]=new vB[wB](xB,xB.tuple)}return xB.store&&(xB.data=new Ml),xB},qA.newtuple=function(bB,_B){var xB=this._dnames,vB=this._dims,kB={},wB,SB;for(wB=0,SB=vB.length;wB<SB;++wB)kB[xB[wB]]=vB[wB](bB);return _B?Bo(_B.tuple,kB):Io(kB)},qA.add=function(bB){var _B=this.cellkey(bB),xB=this.cell(_B,bB),vB,kB,wB;if(xB.num+=1,!this._countOnly)for(xB.store&&xB.data.add(bB),vB=xB.agg,(kB=0,wB=vB.length);kB<wB;++kB)vB[kB].add(vB[kB].get(bB),bB)},qA.rem=function(bB){var _B=this.cellkey(bB),xB=this.cell(_B,bB),vB,kB,wB;if(xB.num-=1,!this._countOnly)for(xB.store&&xB.data.rem(bB),vB=xB.agg,(kB=0,wB=vB.length);kB<wB;++kB)vB[kB].rem(vB[kB].get(bB),bB)},qA.celltuple=function(bB){var _B=bB.tuple,xB=this._counts,vB,kB,wB;for(bB.store&&bB.data.values(),kB=0,wB=xB.length;kB<wB;++kB)_B[xB[kB]]=bB.num;if(!this._countOnly)for(vB=bB.agg,kB=0,wB=vB.length;kB<wB;++kB)vB[kB].set();return _B},qA.changes=function(bB){var _B=this._adds,xB=this._mods,vB=this._prev,kB=this._drop,wB=bB.add,SB=bB.rem,CB=bB.mod,zB,TB,RB,PB;if(vB)for(TB in vB)SB.push(vB[TB].tuple);for(RB=0,PB=this._alen;RB<PB;++RB)wB.push(this.celltuple(_B[RB])),_B[RB]=null;for(RB=0,PB=this._mlen;RB<PB;++RB)zB=xB[RB],(0===zB.num&&kB?SB:CB).push(this.celltuple(zB)),xB[RB]=null;return this._alen=this._mlen=0,this._prev=null,bB};var LA=Ue(Nl,Rl);LA.transform=function(bB,_B){var xB=this._bins(bB),vB=xB.step,kB=bB.as||['bin0','bin1'],wB=kB[0],SB=kB[1],CB=bB.modified()?(_B=_B.reflow(!0),_B.SOURCE):_B.modified(ve(bB.field))?_B.ADD_MOD:_B.ADD;return _B.visit(CB,function(zB){var TB=xB(zB);zB[wB]=TB,zB[SB]=null==TB?null:TB+vB}),_B.modifies(kB)},LA._bins=function(bB){if(this.value&&!bB.modified())return this.value;var _B=bB.field,xB=P(bB),vB=xB.start,kB=xB.stop,wB=xB.step,SB,CB;null!=(SB=bB.anchor)&&(CB=SB-(vB+wB*Math.floor((SB-vB)/wB)),vB+=CB,kB+=CB);var zB=function(RB){var PB=_B(RB);return null==PB?null:(PB=Math.max(vB,Math.min(+PB,kB-wB)),vB+wB*Math.floor((PB-vB)/wB))};return zB.start=vB,zB.stop=kB,zB.step=wB,this.value=_e(zB,ve(_B),bB.name||'bin_'+xe(_B))};var UA=Ue(Bl,Rl);UA.transform=function(bB,_B){var xB=_B.fork(_B.ALL),vB=_B.changed(_B.ADD),kB=_B.changed(),wB=bB.sort,SB=this.value,zB=0,TB;return xB.rem.length&&(TB={},xB.visit(xB.REM,function(RB){TB[RB._id]=1,++zB}),SB=SB.filter(function(RB){return!TB[RB._id]})),wB?((bB.modified('sort')||_B.modified(wB.fields))&&(SB.sort(wB),kB=!0),vB&&(SB=Be(wB,SB,xB.add.sort(wB)))):vB&&xB.visit(xB.ADD,function(PB){SB.push(PB)}),this.modified(kB),this.value=xB.source=SB,xB},Ue(Yl,Ho);var FA=Ue(Wl,Rl);FA.transform=function(bB,_B){function xB(PB){return function(AB){for(var OB=Hl(CB(AB),bB.case,wB)||[],DB=0,qB=OB.length,MB;DB<qB;++DB)SB.test(MB=OB[DB])||PB(MB)}}var vB=this._parameterCheck(bB,_B),kB=this._counts,wB=this._match,SB=this._stop,CB=bB.field,zB=bB.as||['text','count'],TB=xB(function(PB){kB[PB]=1+(kB[PB]||0)}),RB=xB(function(PB){kB[PB]-=1});return vB?_B.visit(_B.SOURCE,TB):(_B.visit(_B.ADD,TB),_B.visit(_B.REM,RB)),this._finish(_B,zB)},FA._parameterCheck=function(bB,_B){var xB=!1;return(bB.modified('stopwords')||!this._stop)&&(this._stop=new RegExp('^'+(bB.stopwords||'')+'$','i'),xB=!0),(bB.modified('pattern')||!this._match)&&(this._match=new RegExp(bB.pattern||'[\\w\']+','g'),xB=!0),(bB.modified('field')||_B.modified(bB.field.fields))&&(xB=!0),xB&&(this._counts={}),xB},FA._finish=function(bB,_B){var xB=this._counts,vB=this._tuples||(this._tuples={}),kB=_B[0],wB=_B[1],SB=bB.fork(),CB,zB,TB;for(CB in xB)zB=vB[CB],TB=xB[CB]||0,!zB&&TB?(vB[CB]=zB=Io({}),zB[kB]=CB,zB[wB]=TB,SB.add.push(zB)):0===TB?(zB&&SB.rem.push(zB),xB[CB]=null,vB[CB]=null):zB[wB]!==TB&&(zB[wB]=TB,SB.mod.push(zB));return SB.modifies(_B)};var jA=Ue(Xl,Rl);jA.transform=function(bB,_B){var xB=_B.fork(_B.NO_SOURCE),vB=this.value,kB=bB.as||['a','b'],wB=kB[0],SB=kB[1],CB=!vB||_B.changed(_B.ADD_REM)||bB.modified('as')||bB.modified('filter');return CB?(vB&&(xB.rem=vB),xB.add=this.value=Vl(_B.source,wB,SB,bB.filter||dT)):xB.mod=vB,xB.source=this.value,xB.modifies(kB)};var IA={kde:me,mixture:ye,normal:pe,uniform:be},$A='distributions',NA='function',BA='field',YA=Ue(Zl,Rl);YA.transform=function(bB,_B){var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS);if(!this.value||_B.changed()||bB.modified()){var vB=Jl(bB.distribution,Kl(_B)),kB=bB.method||'pdf';'pdf'!==kB&&'cdf'!==kB&&ke('Invalid density method: '+kB),bB.extent||vB.data||ke('Missing density extent parameter.'),kB=vB[kB];var wB=bB.as||['value','density'],SB=bB.extent||V(vB.data()),CB=(SB[1]-SB[0])/(bB.steps||100),zB=J(SB[0],SB[1]+CB/2,CB).map(function(TB){var RB={};return RB[wB[0]]=TB,RB[wB[1]]=kB(TB),Io(RB)});this.value&&(xB.rem=this.value),this.value=xB.add=xB.source=zB}return xB};var GA=Ue(Ql,Rl);GA.transform=function(bB,_B){var xB=this.value,vB=bB.field,kB=xB[0],wB=xB[1],SB=_B.ADD,CB;CB=_B.changed()||_B.modified(vB.fields)||bB.modified('field'),CB&&(SB=_B.SOURCE,kB=+Infinity,wB=-Infinity),_B.visit(SB,function(zB){var TB=vB(zB);TB<kB&&(kB=TB),TB>wB&&(wB=TB)}),this.value=[kB,wB]};var WA=Ue(es,Ho);WA.connect=function(bB){return this.targets().add(bB),bB.source=this},WA.add=function(bB){this.value.add.push(bB)},WA.rem=function(bB){this.value.rem.push(bB)},WA.mod=function(bB){this.value.mod.push(bB)},WA.init=function(bB){this.value.init(bB,bB.NO_SOURCE)},WA.evaluate=function(){return this.value};var HA=Ue(is,Rl);HA.activate=function(bB){this._targets[this._targets.active++]=bB},HA.subflow=function(bB,_B,xB,vB){var kB=this.value,wB=kB.hasOwnProperty(bB)&&kB[bB],SB,CB;return wB?wB.value.stamp<xB.stamp&&(wB.init(xB),this.activate(wB)):(CB=vB||(CB=this._group[bB])&&CB.tuple,SB=xB.dataflow,wB=SB.add(new es(xB.fork(xB.NO_SOURCE),this)).connect(_B(SB,bB,CB)),kB[bB]=wB,this.activate(wB)),wB},HA.transform=function(bB,_B){function xB(TB){return kB.subflow(TB,SB,_B)}var vB=_B.dataflow,kB=this,wB=bB.key,SB=bB.subflow,CB=this._keys,zB=bB.modified('key');return this._group=bB.group||{},this._targets.active=0,_B.visit(_B.ADD,function(TB){var RB=wB(TB);CB.set(TB._id,RB),xB(RB).add(TB)}),_B.visit(_B.REM,function(TB){var RB=CB.get(TB._id);CB.delete(TB._id),xB(RB).rem(TB)}),zB||_B.modified(wB.fields)?_B.visit(_B.MOD,function(TB){var RB=CB.get(TB._id),PB=wB(TB);RB===PB?xB(PB).mod(TB):(CB.set(TB._id,PB),xB(RB).rem(TB),xB(PB).add(TB))}):_B.changed(_B.MOD)&&_B.visit(_B.MOD,function(TB){xB(CB.get(TB._id)).mod(TB)}),zB&&_B.visit(_B.REFLOW,function(TB){var RB=CB.get(TB._id),PB=wB(TB);RB!==PB&&(CB.set(TB._id,PB),xB(RB).rem(TB),xB(PB).add(TB))}),CB.empty>vB.cleanThreshold&&vB.runAfter(CB.clean),_B},Ue(rs,Ho);var XA=Ue(ls,Rl);XA.transform=function(bB,_B){function xB(PB){var AB=TB(PB,bB),OB=kB.get(PB._id);AB&&OB?(kB.delete(PB._id),SB.push(PB)):AB||OB?RB&&AB&&!OB&&zB.push(PB):(kB.set(PB._id,1),CB.push(PB))}var vB=_B.dataflow,kB=this.value,wB=_B.fork(),SB=wB.add,CB=wB.rem,zB=wB.mod,TB=bB.expr,RB=!0;return _B.visit(_B.REM,function(PB){kB.has(PB._id)?kB.delete(PB._id):CB.push(PB)}),_B.visit(_B.ADD,function(PB){TB(PB,bB)?SB.push(PB):kB.set(PB._id,1)}),_B.visit(_B.MOD,xB),bB.modified()&&(RB=!1,_B.visit(_B.REFLOW,xB)),kB.empty>vB.cleanThreshold&&vB.runAfter(kB.clean),wB};var VA=Ue(cs,Rl);VA.transform=function(bB,_B){function xB(LB){for(var UB=kB[LB._id]=Array(PB),FB=0,jB;FB<PB;++FB)jB=UB[FB]=$o(LB),jB[zB]=RB[FB],jB[TB]=SB[FB](LB),OB.add.push(jB)}function vB(LB){for(var UB=kB[LB._id],FB=0,jB;FB<PB;++FB)DB&1<<FB&&(jB=No(LB,UB[FB],AB),jB[zB]=RB[FB],jB[TB]=SB[FB](LB),OB.mod.push(jB))}var kB=this.value,wB=bB.modified('fields'),SB=bB.fields,CB=bB.as||['key','value'],zB=CB[0],TB=CB[1],RB=SB.map(us),PB=SB.length,AB=_B.stamp,OB=_B.fork(_B.NO_SOURCE),MB=0,DB=0,qB;if(wB){for(qB in kB)OB.rem.push.apply(OB.rem,kB[qB]);kB=this.value={},_B.visit(_B.SOURCE,xB)}else{for(_B.visit(_B.ADD,xB);MB<PB;++MB)_B.modified(SB[MB].fields)&&(DB|=1<<MB);DB&&_B.visit(_B.MOD,vB),_B.visit(_B.REM,function(LB){OB.rem.push.apply(OB.rem,kB[LB._id]),kB[LB._id]=null})}return OB.modifies(CB)};var JA=Ue(ps,Rl);JA.transform=function(bB,_B){var vB=bB.expr,kB=bB.as,wB=bB.modified(),SB=bB.initonly?_B.ADD:wB?_B.SOURCE:_B.modified(vB.fields)?_B.ADD_MOD:_B.ADD;return wB&&(_B=_B.materialize().reflow(!0)),_B.visit(SB,function(CB){CB[kB]=vB(CB,bB)}).modifies(kB)};var ZA=Ue(gs,Rl);ZA.transform=function(bB,_B){var xB=this.value,vB=_B.fork(_B.ALL),kB=bB.size-xB.length,wB=bB.generator,SB,CB,zB;if(0<kB){for(SB=[];0<=--kB;)SB.push(zB=Io(wB(bB))),xB.push(zB);vB.add=vB.add.length?vB.materialize(vB.ADD).add.concat(SB):SB}else CB=xB.slice(0,-kB),vB.rem=vB.rem.length?vB.materialize(vB.REM).rem.concat(CB):CB,xB=xB.slice(-kB);return vB.source=this.value=xB,vB};var KA={value:'value',median:function(bB,_B){var xB=bB.length,vB=-1,wB=[],kB;if(null==_B)for(;++vB<xB;)isNaN(kB=W(bB[vB]))||wB.push(kB);else for(;++vB<xB;)isNaN(kB=W(_B(bB[vB],vB,bB)))||wB.push(kB);return ne(wB.sort(U),0.5)},mean:function(bB,_B){var xB=bB.length,vB=xB,kB=-1,SB=0,wB;if(null==_B)for(;++kB<xB;)isNaN(wB=W(bB[kB]))?--vB:SB+=wB;else for(;++kB<xB;)isNaN(wB=W(_B(bB[kB],kB,bB)))?--vB:SB+=wB;return vB?SB/vB:void 0},min:function(bB,_B){var xB=bB.length,vB=-1,kB,wB;if(null==_B){for(;++vB<xB;)if(null!=(kB=bB[vB])&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=bB[vB])&&wB>kB&&(wB=kB);}else for(;++vB<xB;)if(null!=(kB=_B(bB[vB],vB,bB))&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=_B(bB[vB],vB,bB))&&wB>kB&&(wB=kB);return wB},max:ae},QA=[],eO=Ue(ms,Rl);eO.transform=function(bB,_B){var xB=_B.fork(_B.ALL),vB=hs(bB),kB=ys(bB),wB=xe(bB.field),SB=bB.groupby.map(xe),CB=bB.orderby.map(xe),zB=_s(_B.source,bB.groupby,bB.orderby),TB=[],RB=this.value,PB=zB.domain.length,AB,OB,MB,DB,qB,LB,UB,FB,jB,IB;for(qB=0,FB=zB.length;qB<FB;++qB)for(AB=zB[qB],MB=AB.values,OB=NaN,UB=0;UB<PB;++UB)if(null==AB[UB]){for(DB=zB.domain[UB],IB={_impute:!0},(LB=0,jB=MB.length);LB<jB;++LB)IB[SB[LB]]=MB[LB];for(LB=0,jB=DB.length;LB<jB;++LB)IB[CB[LB]]=DB[LB];IB[wB]=isNaN(OB)?OB=vB(AB,kB):OB,TB.push(Io(IB))}return TB.length&&(xB.add=xB.materialize(xB.ADD).add.concat(TB)),RB.length&&(xB.rem=xB.materialize(xB.REM).rem.concat(RB)),this.value=TB,xB},Ue(xs,Ho);var tO=Ue(ks,Rl);tO.transform=function(bB,_B){var xB=_B,vB=bB.as,kB=bB.fields,wB=bB.index,SB=bB.values,CB=null==bB.default?null:bB.default,zB=bB.modified(),TB=zB?_B.SOURCE:_B.ADD,RB=kB.length,PB,AB,OB;return SB?(AB=SB.length,1<RB&&!vB&&ke('Multi-field lookup requires explicit "as" parameter.'),vB&&vB.length!==RB*AB&&ke('The "as" parameter has too few output field names.'),vB=vB||SB.map(xe),PB=function(DB){for(var qB=0,LB=0,UB,FB;qB<RB;++qB)if(FB=wB.get(kB[qB](DB)),null==FB)for(UB=0;UB<AB;++UB,++LB)DB[vB[LB]]=CB;else for(UB=0;UB<AB;++UB,++LB)DB[vB[LB]]=SB[UB](FB)}):(!vB&&ke('Missing output field names.'),PB=function(DB){for(var qB=0,LB;qB<RB;++qB)LB=wB.get(kB[qB](DB)),DB[vB[qB]]=null==LB?CB:LB}),zB?xB=_B.reflow(!0):(OB=kB.some(function(MB){return _B.modified(MB.fields)}),TB|=OB?_B.MOD:0),_B.visit(TB,PB),xB.modifies(vB)},Ue(ws,Ho),Ue(Ss,Ho),Ue(zs,Rl),zs.prototype.transform=function(bB,_B){return this.modified(bB.modified()),this.value=bB,_B.fork(_B.NO_SOURCE|_B.NO_FIELDS)};var nO=Ue(Ts,is);nO.transform=function(bB,_B){var xB=this,vB=bB.subflow,kB=bB.field;return bB.modified('field')&&ke('PreFacet does not support field modification.'),this._targets.active=0,_B.visit(_B.MOD,function(wB){var SB=xB.subflow(wB._id,vB,_B,wB);kB?kB(wB).forEach(function(CB){SB.mod(CB)}):SB.mod(wB)}),_B.visit(_B.ADD,function(wB){var SB=xB.subflow(wB._id,vB,_B,wB);kB?kB(wB).forEach(function(CB){SB.add(Io(CB))}):SB.add(wB)}),_B.visit(_B.REM,function(wB){var SB=xB.subflow(wB._id,vB,_B,wB);kB?kB(wB).forEach(function(CB){SB.rem(CB)}):SB.rem(wB)}),_B};var aO=Ue(Rs,Rl);aO.transform=function(bB,_B){return this.value=bB.value,bB.modified('value')?_B.fork(_B.NO_SOURCE|_B.NO_FIELDS):_B.StopPropagation};var iO=Ue(Ps,Rl);iO.transform=function(bB,_B){_B.source||ke('Rank transform requires an upstream data source.');var xB=bB.normalize,vB=bB.field,kB=bB.as||'rank',wB={},SB=-1,CB;return vB?(_B.visit(_B.SOURCE,function(zB){var TB=vB(zB);null==wB[TB]&&(wB[TB]=++SB)}),_B.visit(_B.SOURCE,xB&&--SB?function(zB){zB[kB]=wB[vB(zB)]/SB}:function(zB){zB[kB]=wB[vB(zB)]})):(SB+=_B.source.length,CB=-1,_B.visit(_B.SOURCE,xB&&SB?function(zB){zB[kB]=++CB/SB}:function(zB){zB[kB]=++CB})),_B.reflow(bB.modified()).modifies(kB)};var dO=Ue(As,Rl);dO.transform=function(bB,_B){var vB=this.value||(xB=_B=_B.addAll(),this.value={}),xB;return bB.derive&&(xB=_B.fork(),_B.visit(_B.ADD,function(kB){var wB=$o(kB);vB[kB._id]=wB,xB.add.push(wB)}),_B.visit(_B.MOD,function(kB){xB.mod.push(No(kB,vB[kB._id]))}),_B.visit(_B.REM,function(kB){xB.rem.push(vB[kB._id]),vB[kB._id]=null})),xB};var rO=Ue(Os,Rl);rO.transform=function(bB,_B){function xB(AB){var OB,MB;SB.length<wB?SB.push(AB):(MB=~~(CB*Math.random()),MB<SB.length&&MB>=zB&&(OB=SB[MB],TB[OB._id]&&vB.rem.push(OB),SB[MB]=AB)),++CB}var vB=_B.fork(),kB=bB.modified('size'),wB=bB.size,SB=this.value,CB=this.count,zB=0,TB=SB.reduce(function(AB,OB){return AB[OB._id]=1,AB},{});if(_B.rem.length&&(_B.visit(_B.REM,function(AB){TB[AB._id]&&(TB[AB._id]=-1,vB.rem.push(AB)),--CB}),SB=SB.filter(function(AB){return-1!==TB[AB._id]})),(_B.rem.length||kB)&&SB.length<wB&&_B.source&&(zB=CB=SB.length,_B.visit(_B.SOURCE,function(AB){TB[AB._id]||xB(AB)}),zB=-1),kB&&SB.length>wB){for(var RB=0,PB=SB.length-wB;RB<PB;++RB)TB[SB[RB]._id]=-1,vB.rem.push(SB[RB]);SB=SB.slice(PB)}return _B.mod.length&&_B.visit(_B.MOD,function(AB){TB[AB._id]&&vB.mod.push(AB)}),_B.add.length&&_B.visit(_B.ADD,xB),(_B.add.length||0>zB)&&(vB.add=SB.filter(function(AB){return!TB[AB._id]})),this.count=CB,this.value=vB.source=SB,vB};var oO=Ue(Ms,Rl);oO.transform=function(bB,_B){if(!this.value||bB.modified()){var xB=_B.materialize().fork(_B.MOD);return xB.rem=this.value?_B.rem.concat(this.value):_B.rem,xB.source=this.value=J(bB.start,bB.stop,bB.step||1).map(Io),xB.add=_B.add.concat(this.value),xB}};var lO=Ue(Ds,Rl);lO.transform=function(bB,_B){return this.value=_B.source,_B.changed()?_B.fork(_B.NO_SOURCE|_B.NO_FIELDS):_B.StopPropagation};var sO=Ue(qs,Rl);sO.transform=function(bB,_B){function xB(CB){wB.set(kB(CB),CB)}var vB=_B.dataflow,kB=bB.field,wB=this.value,SB=!0;return bB.modified('field')||_B.modified(kB.fields)?(wB.clear(),_B.visit(_B.SOURCE,xB)):_B.changed()?(_B.visit(_B.REM,function(CB){wB.delete(kB(CB))}),_B.visit(_B.ADD,xB)):SB=!1,this.modified(SB),wB.empty>vB.cleanThreshold&&vB.runAfter(wB.clean),_B.fork()};var fO=Ue(Ls,Rl);fO.transform=function(bB,_B){var xB=!this.value||bB.modified('field')||bB.modified('sort')||_B.changed()||bB.sort&&_B.modified(bB.sort.fields);xB&&(this.value=(bB.sort?_B.source.slice().sort(bB.sort):_B.source).map(bB.field))};var hO=[{key:{function:'normal'},params:[{name:'mean',type:'number',default:0},{name:'stdev',type:'number',default:1}]},{key:{function:'uniform'},params:[{name:'min',type:'number',default:0},{name:'max',type:'number',default:1}]},{key:{function:'kde'},params:[{name:'field',type:'field',required:!0},{name:'from',type:'data'},{name:'bandwidth',type:'number',default:0}]}],bO={type:'Density',metadata:{generates:!0,source:!0},params:[{name:'extent',type:'number',array:!0,length:2},{name:'steps',type:'number',default:100},{name:'method',type:'string',default:'pdf',values:['pdf','cdf']},{name:'distribution',type:'param',params:hO.concat({key:{function:'mixture'},params:[{name:'distributions',type:'param',array:!0,params:hO},{name:'weights',type:'number',array:!0}]})},{name:'as',type:'string',array:!0,default:['value','density']}]};Pl({type:'Aggregate',metadata:{generates:!0,changes:!0},params:[{name:'groupby',type:'field',array:!0},{name:'fields',type:'field',array:!0},{name:'ops',type:'enum',array:!0,values:['count','valid','missing','distinct','sum','mean','average','variance','variancep','stdev','stdevp','stderr','median','q1','q3','ci0','ci1','min','max','argmin','argmax']},{name:'as',type:'string',array:!0},{name:'drop',type:'boolean',default:!0},{name:'cross',type:'boolean',default:!1},{name:'key',type:'field'}]},jl),Pl({type:'Bin',metadata:{modifies:!0},params:[{name:'field',type:'field',required:!0},{name:'anchor',type:'number'},{name:'maxbins',type:'number',default:20},{name:'base',type:'number',default:10},{name:'divide',type:'number',array:!0,default:[5,2]},{name:'extent',type:'number',array:!0,length:2,required:!0},{name:'step',type:'number'},{name:'steps',type:'number',array:!0},{name:'minstep',type:'number',default:0},{name:'nice',type:'boolean',default:!0},{name:'name',type:'string'},{name:'as',type:'string',array:!0,length:2,default:['bin0','bin1']}]},Nl),Pl({type:'Collect',metadata:{source:!0},params:[{name:'sort',type:'compare'}]},Bl),Pl({type:'CountPattern',metadata:{generates:!0,changes:!0},params:[{name:'field',type:'field',required:!0},{name:'case',type:'enum',values:['upper','lower','mixed'],default:'mixed'},{name:'pattern',type:'string',default:'[\\w"]+'},{name:'stopwords',type:'string',default:''},{name:'as',type:'string',array:!0,length:2,default:['text','count']}]},Wl),Pl({type:'Cross',metadata:{source:!0,generates:!0,changes:!0},params:[{name:'filter',type:'expr'},{name:'as',type:'string',array:!0,length:2,default:['a','b']}]},Xl),Pl(bO,Zl),Pl({type:'Extent',metadata:{},params:[{name:'field',type:'field',required:!0}]},Ql),Pl({type:'Filter',metadata:{changes:!0},params:[{name:'expr',type:'expr',required:!0}]},ls),Pl({type:'Fold',metadata:{generates:!0,changes:!0},params:[{name:'fields',type:'field',array:!0,required:!0},{name:'as',type:'string',array:!0,length:2,default:['key','value']}]},cs),Pl({type:'Formula',metadata:{modifies:!0},params:[{name:'expr',type:'expr',required:!0},{name:'as',type:'string',required:!0},{name:'initonly',type:'boolean'}]},ps),Pl({type:'Impute',metadata:{changes:!0},params:[{name:'field',type:'field',required:!0},{name:'groupby',type:'field',array:!0},{name:'orderby',type:'field',array:!0},{name:'method',type:'enum',default:'value',values:['value','mean','median','max','min']},{name:'value',default:0}]},ms),Pl({type:'Lookup',metadata:{modifies:!0},params:[{name:'index',type:'index',params:[{name:'from',type:'data',required:!0},{name:'key',type:'field',required:!0}]},{name:'values',type:'field',array:!0},{name:'fields',type:'field',array:!0,required:!0},{name:'as',type:'string',array:!0},{name:'default',default:null}]},ks),Pl({type:'Rank',metadata:{modifies:!0},params:[{name:'field',type:'field'},{name:'normalize',type:'boolean',default:!1},{name:'as',type:'string',default:'rank'}]},Ps),Pl({type:'Sample',metadata:{source:!0,changes:!0},params:[{name:'size',type:'number',default:1000}]},Os),Pl({type:'Sequence',metadata:{generates:!0,source:!0},params:[{name:'start',type:'number',required:!0},{name:'stop',type:'number',required:!0},{name:'step',type:'number',default:1}],output:['value']},Ms),Ol('Compare',Yl),Ol('Facet',is),Ol('Field',rs),Ol('Generate',gs),Ol('Key',xs),Ol('MultiExtent',ws),Ol('MultiValues',Ss),Ol('Params',zs),Ol('PreFacet',Ts),Ol('Proxy',Rs),Ol('Relay',As),Ol('Sieve',Ds),Ol('Subflow',es),Ol('TupleIndex',qs),Ol('Values',Ls);var TO=Array.prototype,RO=TO.map,PO=TO.slice,AO={name:'implicit'},OO=0.7,MO=1/OO,UO=/^#([0-9a-f]{3})$/,FO=/^#([0-9a-f]{6})$/,jO=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,IO=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,$O=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,NO=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,BO=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,YO=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,GO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$s(Bs,Ys,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+''}}),$s(Vs,Xs,Ns(Bs,{brighter:function(_B){return _B=null==_B?MO:Math.pow(MO,_B),new Vs(this.r*_B,this.g*_B,this.b*_B,this.opacity)},darker:function(_B){return _B=null==_B?OO:Math.pow(OO,_B),new Vs(this.r*_B,this.g*_B,this.b*_B,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var _B=this.opacity;return _B=isNaN(_B)?1:Math.max(0,Math.min(1,_B)),(1===_B?'rgb(':'rgba(')+Math.max(0,Math.min(255,Math.round(this.r)||0))+', '+Math.max(0,Math.min(255,Math.round(this.g)||0))+', '+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===_B?')':', '+_B+')')}})),$s(Qs,Ks,Ns(Bs,{brighter:function(_B){return _B=null==_B?MO:Math.pow(MO,_B),new Qs(this.h,this.s,this.l*_B,this.opacity)},darker:function(_B){return _B=null==_B?OO:Math.pow(OO,_B),new Qs(this.h,this.s,this.l*_B,this.opacity)},rgb:function(){var _B=this.h%360+360*(0>this.h),xB=isNaN(_B)||isNaN(this.s)?0:this.s,vB=this.l,kB=vB+(0.5>vB?vB:1-vB)*xB,wB=2*vB-kB;return new Vs(ef(240<=_B?_B-240:_B+120,wB,kB),ef(_B,wB,kB),ef(120>_B?_B+240:_B-120,wB,kB),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var WO=Math.PI/180,HO=180/Math.PI,XO=18,VO=0.95047,JO=1,ZO=1.08883,KO=4/29,QO=6/29,eM=3*QO*QO,tM=QO*QO*QO;$s(af,nf,Ns(Bs,{brighter:function(_B){return new af(this.l+XO*(null==_B?1:_B),this.a,this.b,this.opacity)},darker:function(_B){return new af(this.l-XO*(null==_B?1:_B),this.a,this.b,this.opacity)},rgb:function(){var _B=(this.l+16)/116,xB=isNaN(this.a)?_B:_B+this.a/500,vB=isNaN(this.b)?_B:_B-this.b/200;return _B=JO*of(_B),xB=VO*of(xB),vB=ZO*of(vB),new Vs(lf(3.2404542*xB-1.5371385*_B-0.4985314*vB),lf(-0.969266*xB+1.8760108*_B+0.041556*vB),lf(0.0556434*xB-0.2040259*_B+1.0572252*vB),this.opacity)}})),$s(pf,uf,Ns(Bs,{brighter:function(_B){return new pf(this.h,this.c,this.l+XO*(null==_B?1:_B),this.opacity)},darker:function(_B){return new pf(this.h,this.c,this.l-XO*(null==_B?1:_B),this.opacity)},rgb:function(){return tf(this).rgb()}}));var nM=-0.14861,aM=+1.78277,iM=-0.29227,dM=-0.90649,rM=+1.97294,oM=rM*dM,lM=rM*aM,sM=aM*iM-dM*nM;$s(yf,hf,Ns(Bs,{brighter:function(_B){return _B=null==_B?MO:Math.pow(MO,_B),new yf(this.h,this.s,this.l*_B,this.opacity)},darker:function(_B){return _B=null==_B?OO:Math.pow(OO,_B),new yf(this.h,this.s,this.l*_B,this.opacity)},rgb:function(){var _B=isNaN(this.h)?0:(this.h+120)*WO,xB=+this.l,vB=isNaN(this.s)?0:this.s*xB*(1-xB),kB=Math.cos(_B),wB=Math.sin(_B);return new Vs(255*(xB+vB*(nM*kB+aM*wB)),255*(xB+vB*(iM*kB+dM*wB)),255*(xB+vB*(rM*kB)),this.opacity)}}));var fM=function bB(_B){function xB(kB,wB){var SB=vB((kB=Xs(kB)).r,(wB=Xs(wB)).r),CB=vB(kB.g,wB.g),zB=vB(kB.b,wB.b),TB=zf(kB.opacity,wB.opacity);return function(RB){return kB.r=SB(RB),kB.g=CB(RB),kB.b=zB(RB),kB.opacity=TB(RB),kB+''}}var vB=Cf(_B);return xB.gamma=bB,xB}(1),cM=Tf(xf),uM=Tf(vf),pM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gM=new RegExp(pM.source,'g'),mM=180/Math.PI,hM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},yM,bM,_M,xM,vM=$f(function(bB){return'none'===bB?hM:(yM||(yM=document.createElement('DIV'),bM=document.documentElement,_M=document.defaultView),yM.style.transform=bB,bB=_M.getComputedStyle(bM.appendChild(yM),null).getPropertyValue('transform'),bM.removeChild(yM),bB=bB.slice(7,-1).split(','),Ff(+bB[0],+bB[1],+bB[2],+bB[3],+bB[4],+bB[5]))},'px, ','px)','deg)'),kM=$f(function(bB){return null==bB?hM:(xM||(xM=document.createElementNS('http://www.w3.org/2000/svg','g')),xM.setAttribute('transform',bB),!(bB=xM.transform.baseVal.consolidate()))?hM:(bB=bB.matrix,Ff(bB.a,bB.b,bB.c,bB.d,bB.e,bB.f))},', ',')',')'),wM=Math.SQRT2,EM=2,SM=4,zM=Wf(Sf),TM=Wf(zf),RM=Xf(Sf),PM=Xf(zf),AM=Vf(Sf),OM=Vf(zf),MM=Object.freeze({interpolate:Lf,interpolateArray:Rf,interpolateBasis:xf,interpolateBasisClosed:vf,interpolateDate:Pf,interpolateNumber:Af,interpolateObject:Of,interpolateRound:Uf,interpolateString:qf,interpolateTransformCss:vM,interpolateTransformSvg:kM,interpolateZoom:function(bB,_B){var xB=bB[0],vB=bB[1],kB=bB[2],wB=_B[0],SB=_B[1],CB=_B[2],zB=wB-xB,TB=SB-vB,RB=zB*zB+TB*TB,PB,AB;if(RB<1e-12)AB=Math.log(CB/kB)/wM,PB=function(FB){return[xB+FB*zB,vB+FB*TB,kB*Math.exp(wM*FB*AB)]};else{var OB=Math.sqrt(RB),MB=(CB*CB-kB*kB+SM*RB)/(2*kB*EM*OB),DB=(CB*CB-kB*kB-SM*RB)/(2*CB*EM*OB),qB=Math.log(Math.sqrt(MB*MB+1)-MB),LB=Math.log(Math.sqrt(DB*DB+1)-DB);AB=(LB-qB)/wM,PB=function(FB){var jB=FB*AB,IB=Nf(qB),$B=kB/(EM*OB)*(IB*Yf(wM*jB+qB)-Bf(qB));return[xB+$B*zB,vB+$B*TB,kB*IB/Nf(wM*jB+qB)]}}return PB.duration=1e3*AB,PB},interpolateRgb:fM,interpolateRgbBasis:cM,interpolateRgbBasisClosed:uM,interpolateHsl:zM,interpolateHslLong:TM,interpolateLab:function(bB,_B){var xB=zf((bB=nf(bB)).l,(_B=nf(_B)).l),vB=zf(bB.a,_B.a),kB=zf(bB.b,_B.b),wB=zf(bB.opacity,_B.opacity);return function(SB){return bB.l=xB(SB),bB.a=vB(SB),bB.b=kB(SB),bB.opacity=wB(SB),bB+''}},interpolateHcl:RM,interpolateHclLong:PM,interpolateCubehelix:AM,interpolateCubehelixLong:OM,quantize:function(bB,_B){for(var xB=Array(_B),vB=0;vB<_B;++vB)xB[vB]=bB(vB/(_B-1));return xB}}),DM=[0,1],qM,LM={"":function(bB,_B){bB=bB.toPrecision(_B);out:for(var xB=bB.length,vB=1,kB=-1,wB;vB<xB;++vB)switch(bB[vB]){case'.':kB=wB=vB;break;case'0':0===kB&&(kB=vB),wB=vB;break;case'e':break out;default:0<kB&&(kB=0);}return 0<kB?bB.slice(0,kB)+bB.slice(wB+1):bB},"%":function(_B,xB){return(100*_B).toFixed(xB)},b:function(_B){return Math.round(_B).toString(2)},c:function(_B){return _B+''},d:function(_B){return Math.round(_B).toString(10)},e:function(_B,xB){return _B.toExponential(xB)},f:function(_B,xB){return _B.toFixed(xB)},g:function(_B,xB){return _B.toPrecision(xB)},o:function(_B){return Math.round(_B).toString(8)},p:function(_B,xB){return wc(100*_B,xB)},r:wc,s:function(bB,_B){var xB=pc(bB,_B);if(!xB)return bB+'';var vB=xB[0],kB=xB[1],wB=kB-(qM=3*Math.max(-8,Math.min(8,Math.floor(kB/3))))+1,SB=vB.length;return wB===SB?vB:wB>SB?vB+Array(wB-SB+1).join('0'):0<wB?vB.slice(0,wB)+'.'+vB.slice(wB):'0.'+Array(1-wB).join('0')+pc(bB,Math.max(0,_B+wB-1))[0]},X:function(_B){return Math.round(_B).toString(16).toUpperCase()},x:function(_B){return Math.round(_B).toString(16)}},UM=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Ec.prototype=Sc.prototype,Sc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?'0':'')+(null==this.width?'':Math.max(1,0|this.width))+(this.comma?',':'')+(null==this.precision?'':'.'+Math.max(0,0|this.precision))+this.type};var FM=['y','z','a','f','p','n','\xB5','m','','k','M','G','T','P','E','Z','Y'],jM,IM,$M;Tc({decimal:'.',thousands:',',grouping:[3],currency:['$','']});var NM=1e3,BM=60*NM,YM=60*BM,GM=24*YM,WM=7*GM,HM=30*GM,XM=365*GM,VM=tu('1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf'),JM=tu('393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6'),ZM=tu('3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9'),KM=tu('1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5');OM(hf(300,0.5,0),hf(-240,0.5,1));var QM=OM(hf(-100,0.75,0.35),hf(80,1.5,0.8)),eD=OM(hf(260,0.75,0.35),hf(80,1.5,0.8)),tD=hf(),nD=nu(tu('44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725')),aD=nu(tu('00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf')),iD=nu(tu('00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4')),dD=nu(tu('0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921')),rD=Array.prototype.map,oD=Array.prototype.slice,lD={identity:qc,linear:Dc,log:Bc,ordinal:Is,pow:Gc,sqrt:function(){return Gc().exponent(0.5)},quantile:Hc,quantize:Xc,threshold:Vc,time:function(){return Kc(jT,FT,LT,qT,DT,MT,OT,CT,QT).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Kc(HT,WT,BT,NT,$T,IT,OT,CT,tR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:au,point:function(){return iu(au().paddingInner(1))},sequential:su,"bin-linear":ou,"bin-ordinal":lu};for(var sD in lD)cu(sD,lD[sD]);var fD=pu('4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac'),cD=pu('4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5'),uD=[,,,].concat('67a9cff7f7f7f1a340','0571b092c5defdb863e66101','0571b092c5def7f7f7fdb863e66101','2166ac67a9cfd1e5f0fee0b6f1a340b35806','2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806','2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806','2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806','0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08','0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08').map(pu),pD=gu('7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666'),gD=gu('1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666'),mD=gu('a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928'),hD=gu('fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2'),yD=gu('b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc'),bD=gu('e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999'),_D=gu('66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3'),xD=gu('8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f'),vD=[,,,].concat('d8b365f5f5f55ab4ac','a6611adfc27d80cdc1018571','a6611adfc27df5f5f580cdc1018571','8c510ad8b365f6e8c3c7eae55ab4ac01665e','8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e','8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e','8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e','5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30','5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30').map(gu),kD=hu(vD),wD=[,,,].concat('af8dc3f7f7f77fbf7b','7b3294c2a5cfa6dba0008837','7b3294c2a5cff7f7f7a6dba0008837','762a83af8dc3e7d4e8d9f0d37fbf7b1b7837','762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837','762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837','762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837','40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b','40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b').map(gu),SD=hu(wD),CD=[,,,].concat('e9a3c9f7f7f7a1d76a','d01c8bf1b6dab8e1864dac26','d01c8bf1b6daf7f7f7b8e1864dac26','c51b7de9a3c9fde0efe6f5d0a1d76a4d9221','c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221','c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221','c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221','8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419','8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419').map(gu),zD=hu(CD),TD=[,,,].concat('998ec3f7f7f7f1a340','5e3c99b2abd2fdb863e66101','5e3c99b2abd2f7f7f7fdb863e66101','542788998ec3d8daebfee0b6f1a340b35806','542788998ec3d8daebf7f7f7fee0b6f1a340b35806','5427888073acb2abd2d8daebfee0b6fdb863e08214b35806','5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806','2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08','2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08').map(gu),RD=hu(TD),PD=[,,,].concat('ef8a62f7f7f767a9cf','ca0020f4a58292c5de0571b0','ca0020f4a582f7f7f792c5de0571b0','b2182bef8a62fddbc7d1e5f067a9cf2166ac','b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac','b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac','b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac','67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061','67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061').map(gu),AD=hu(PD),OD=[,,,].concat('ef8a62ffffff999999','ca0020f4a582bababa404040','ca0020f4a582ffffffbababa404040','b2182bef8a62fddbc7e0e0e09999994d4d4d','b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d','b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d','b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d','67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a','67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a').map(gu),MD=hu(OD),DD=[,,,].concat('fc8d59ffffbf91bfdb','d7191cfdae61abd9e92c7bb6','d7191cfdae61ffffbfabd9e92c7bb6','d73027fc8d59fee090e0f3f891bfdb4575b4','d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4','d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4','d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4','a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695','a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695').map(gu),qD=hu(DD),LD=[,,,].concat('fc8d59ffffbf91cf60','d7191cfdae61a6d96a1a9641','d7191cfdae61ffffbfa6d96a1a9641','d73027fc8d59fee08bd9ef8b91cf601a9850','d73027fc8d59fee08bffffbfd9ef8b91cf601a9850','d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850','d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850','a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837','a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837').map(gu),UD=hu(LD),FD=[,,,].concat('fc8d59ffffbf99d594','d7191cfdae61abdda42b83ba','d7191cfdae61ffffbfabdda42b83ba','d53e4ffc8d59fee08be6f59899d5943288bd','d53e4ffc8d59fee08bffffbfe6f59899d5943288bd','d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd','d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd','9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2','9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2').map(gu),jD=hu(FD),ID=[,,,].concat('e5f5f999d8c92ca25f','edf8fbb2e2e266c2a4238b45','edf8fbb2e2e266c2a42ca25f006d2c','edf8fbccece699d8c966c2a42ca25f006d2c','edf8fbccece699d8c966c2a441ae76238b45005824','f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824','f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b').map(gu),$D=hu(ID),ND=[,,,].concat('e0ecf49ebcda8856a7','edf8fbb3cde38c96c688419d','edf8fbb3cde38c96c68856a7810f7c','edf8fbbfd3e69ebcda8c96c68856a7810f7c','edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b','f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b','f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b').map(gu),BD=hu(ND),YD=[,,,].concat('e0f3dba8ddb543a2ca','f0f9e8bae4bc7bccc42b8cbe','f0f9e8bae4bc7bccc443a2ca0868ac','f0f9e8ccebc5a8ddb57bccc443a2ca0868ac','f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e','f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e','f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081').map(gu),GD=hu(YD),WD=[,,,].concat('fee8c8fdbb84e34a33','fef0d9fdcc8afc8d59d7301f','fef0d9fdcc8afc8d59e34a33b30000','fef0d9fdd49efdbb84fc8d59e34a33b30000','fef0d9fdd49efdbb84fc8d59ef6548d7301f990000','fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000','fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000').map(gu),HD=hu(WD),XD=[,,,].concat('ece2f0a6bddb1c9099','f6eff7bdc9e167a9cf02818a','f6eff7bdc9e167a9cf1c9099016c59','f6eff7d0d1e6a6bddb67a9cf1c9099016c59','f6eff7d0d1e6a6bddb67a9cf3690c002818a016450','fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450','fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636').map(gu),VD=hu(XD),JD=[,,,].concat('ece7f2a6bddb2b8cbe','f1eef6bdc9e174a9cf0570b0','f1eef6bdc9e174a9cf2b8cbe045a8d','f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d','f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b','fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b','fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858').map(gu),ZD=hu(JD),KD=[,,,].concat('e7e1efc994c7dd1c77','f1eef6d7b5d8df65b0ce1256','f1eef6d7b5d8df65b0dd1c77980043','f1eef6d4b9dac994c7df65b0dd1c77980043','f1eef6d4b9dac994c7df65b0e7298ace125691003f','f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f','f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f').map(gu),QD=hu(KD),eq=[,,,].concat('fde0ddfa9fb5c51b8a','feebe2fbb4b9f768a1ae017e','feebe2fbb4b9f768a1c51b8a7a0177','feebe2fcc5c0fa9fb5f768a1c51b8a7a0177','feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177','fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177','fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a').map(gu),tq=hu(eq),nq=[,,,].concat('edf8b17fcdbb2c7fb8','ffffcca1dab441b6c4225ea8','ffffcca1dab441b6c42c7fb8253494','ffffccc7e9b47fcdbb41b6c42c7fb8253494','ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84','ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84','ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58').map(gu),aq=hu(nq),iq=[,,,].concat('f7fcb9addd8e31a354','ffffccc2e69978c679238443','ffffccc2e69978c67931a354006837','ffffccd9f0a3addd8e78c67931a354006837','ffffccd9f0a3addd8e78c67941ab5d238443005a32','ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32','ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529').map(gu),dq=hu(iq),rq=[,,,].concat('fff7bcfec44fd95f0e','ffffd4fed98efe9929cc4c02','ffffd4fed98efe9929d95f0e993404','ffffd4fee391fec44ffe9929d95f0e993404','ffffd4fee391fec44ffe9929ec7014cc4c028c2d04','ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04','ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506').map(gu),oq=hu(rq),lq=[,,,].concat('ffeda0feb24cf03b20','ffffb2fecc5cfd8d3ce31a1c','ffffb2fecc5cfd8d3cf03b20bd0026','ffffb2fed976feb24cfd8d3cf03b20bd0026','ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026','ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026','ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026').map(gu),sq=hu(lq),fq=[,,,].concat('deebf79ecae13182bd','eff3ffbdd7e76baed62171b5','eff3ffbdd7e76baed63182bd08519c','eff3ffc6dbef9ecae16baed63182bd08519c','eff3ffc6dbef9ecae16baed64292c62171b5084594','f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594','f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b').map(gu),cq=hu(fq),uq=[,,,].concat('e5f5e0a1d99b31a354','edf8e9bae4b374c476238b45','edf8e9bae4b374c47631a354006d2c','edf8e9c7e9c0a1d99b74c47631a354006d2c','edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32','f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32','f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b').map(gu),pq=hu(uq),gq=[,,,].concat('f0f0f0bdbdbd636363','f7f7f7cccccc969696525252','f7f7f7cccccc969696636363252525','f7f7f7d9d9d9bdbdbd969696636363252525','f7f7f7d9d9d9bdbdbd969696737373525252252525','fffffff0f0f0d9d9d9bdbdbd969696737373525252252525','fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000').map(gu),mq=hu(gq),hq=[,,,].concat('efedf5bcbddc756bb1','f2f0f7cbc9e29e9ac86a51a3','f2f0f7cbc9e29e9ac8756bb154278f','f2f0f7dadaebbcbddc9e9ac8756bb154278f','f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486','fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486','fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d').map(gu),yq=hu(hq),bq=[,,,].concat('fee0d2fc9272de2d26','fee5d9fcae91fb6a4acb181d','fee5d9fcae91fb6a4ade2d26a50f15','fee5d9fcbba1fc9272fb6a4ade2d26a50f15','fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d','fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d','fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d').map(gu),_q=hu(bq),xq=[,,,].concat('fee6cefdae6be6550d','feeddefdbe85fd8d3cd94701','feeddefdbe85fd8d3ce6550da63603','feeddefdd0a2fdae6bfd8d3ce6550da63603','feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04','fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04','fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704').map(gu),vq=hu(xq),kq=Object.freeze({schemeAccent:pD,schemeDark2:gD,schemePaired:mD,schemePastel1:hD,schemePastel2:yD,schemeSet1:bD,schemeSet2:_D,schemeSet3:xD,interpolateBrBG:kD,schemeBrBG:vD,interpolatePRGn:SD,schemePRGn:wD,interpolatePiYG:zD,schemePiYG:CD,interpolatePuOr:RD,schemePuOr:TD,interpolateRdBu:AD,schemeRdBu:PD,interpolateRdGy:MD,schemeRdGy:OD,interpolateRdYlBu:qD,schemeRdYlBu:DD,interpolateRdYlGn:UD,schemeRdYlGn:LD,interpolateSpectral:jD,schemeSpectral:FD,interpolateBuGn:$D,schemeBuGn:ID,interpolateBuPu:BD,schemeBuPu:ND,interpolateGnBu:GD,schemeGnBu:YD,interpolateOrRd:HD,schemeOrRd:WD,interpolatePuBuGn:VD,schemePuBuGn:XD,interpolatePuBu:ZD,schemePuBu:JD,interpolatePuRd:QD,schemePuRd:KD,interpolateRdPu:tq,schemeRdPu:eq,interpolateYlGnBu:aq,schemeYlGnBu:nq,interpolateYlGn:dq,schemeYlGn:iq,interpolateYlOrBr:oq,schemeYlOrBr:rq,interpolateYlOrRd:sq,schemeYlOrRd:lq,interpolateBlues:cq,schemeBlues:fq,interpolateGreens:pq,schemeGreens:uq,interpolateGreys:mq,schemeGreys:gq,interpolatePurples:yq,schemePurples:hq,interpolateReds:_q,schemeReds:bq,interpolateOranges:vq,schemeOranges:xq}),wq={blueorange:uD},Eq={category10:VM,category20:KM,category20b:JM,category20c:ZM,accent:pD,dark2:gD,paired:mD,pastel1:hD,pastel2:yD,set1:bD,set2:_D,set3:xD,tableau10:fD,tableau20:cD,viridis:nD,magma:aD,inferno:iD,plasma:dD,blueorange:cM(We(uD))};yu('blues','Blues'),yu('greens','Greens'),yu('greys','Greys'),yu('purples','Purples'),yu('reds','Reds'),yu('oranges','Oranges'),yu('brownbluegreen','BrBG'),yu('purplegreen','PRGn'),yu('pinkyellowgreen','PiYG'),yu('purpleorange','PuOr'),yu('redblue','RdBu'),yu('redgrey','RdGy'),yu('redyellowblue','RdYlBu'),yu('redyellowgreen','RdYlGn'),yu('spectral','Spectral'),yu('bluegreen','BuGn'),yu('bluepurple','BuPu'),yu('greenblue','GnBu'),yu('orangered','OrRd'),yu('purplebluegreen','PuBuGn'),yu('purpleblue','PuBu'),yu('purplered','PuRd'),yu('redpurple','RdPu'),yu('yellowgreenblue','YlGnBu'),yu('yellowgreen','YlGn'),yu('yelloworangebrown','YlOrBr'),yu('yelloworangered','YlOrRd');var Sq=Array.prototype,Cq=Sq.slice,zq=[[],[[[1,1.5],[0.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[0.5,1]]],[[[1,0.5],[1.5,1]]],[[[1,0.5],[0.5,1]],[[1,1.5],[1.5,1]]],[[[1,0.5],[1,1.5]]],[[[1,0.5],[0.5,1]]],[[[0.5,1],[1,0.5]]],[[[1,1.5],[1,0.5]]],[[[0.5,1],[1,1.5]],[[1.5,1],[1,0.5]]],[[[1.5,1],[1,0.5]]],[[[0.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[0.5,1],[1,1.5]]],[]],Tq=['values','size','thresholds'],Rq=['x','y','size','cellSize','bandwidth','thresholds'],Pq=Ue(ju,Rl);Pq.transform=function(bB,_B){if(this.value&&!_B.changed()&&!bB.modified())return _B.StopPropagation;var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),vB,kB,wB;return bB.values?(vB=Mu(),kB=Tq,wB=bB.values):(vB=Fu(),kB=Rq,wB=_B.materialize(_B.SOURCE).source),kB.forEach(function(SB){null!=bB[SB]&&vB[SB](bB[SB])}),this.value&&(xB.rem=this.value),this.value=xB.source=xB.add=vB(wB).map(Io),xB},$u.prototype={constructor:$u,reset:function(){this.s=this.t=0},add:function(_B){Nu(Aq,_B,this.t),Nu(this,Aq.s,this.s),this.s?this.t+=Aq.t:this.s=Aq.t},valueOf:function(){return this.s}};var Aq=new $u,Oq=1e-6,Mq=Math.PI,Dq=Mq/2,qq=Mq/4,Lq=2*Mq,Uq=180/Mq,Fq=Mq/180,jq=Math.abs,Iq=Math.atan,$q=Math.atan2,Nq=Math.cos,Bq=Math.ceil,Yq=Math.exp,Gq=Math.log,Wq=Math.pow,Hq=Math.sin,Xq=Math.sign||function(bB){return 0<bB?1:0>bB?-1:0},Vq=Math.sqrt,Jq=Math.tan,Zq={Feature:function(_B,xB){Wu(_B.geometry,xB)},FeatureCollection:function(_B,xB){for(var vB=_B.features,kB=-1,wB=vB.length;++kB<wB;)Wu(vB[kB].geometry,xB)}},Kq={Sphere:function(_B,xB){xB.sphere()},Point:function(_B,xB){_B=_B.coordinates,xB.point(_B[0],_B[1],_B[2])},MultiPoint:function(_B,xB){for(var vB=_B.coordinates,kB=-1,wB=vB.length;++kB<wB;)_B=vB[kB],xB.point(_B[0],_B[1],_B[2])},LineString:function(_B,xB){Hu(_B.coordinates,xB,0)},MultiLineString:function(_B,xB){for(var vB=_B.coordinates,kB=-1,wB=vB.length;++kB<wB;)Hu(vB[kB],xB,0)},Polygon:function(_B,xB){Xu(_B.coordinates,xB)},MultiPolygon:function(_B,xB){for(var vB=_B.coordinates,kB=-1,wB=vB.length;++kB<wB;)Xu(vB[kB],xB)},GeometryCollection:function(_B,xB){for(var vB=_B.geometries,kB=-1,wB=vB.length;++kB<wB;)Wu(vB[kB],xB)}},Qq=Iu(),eL=Iu(),tL,nL,aL,iL,dL,rL={point:Gu,lineStart:Gu,lineEnd:Gu,polygonStart:function(){Qq.reset(),rL.lineStart=Ju,rL.lineEnd=Zu},polygonEnd:function(){var _B=+Qq;eL.add(0>_B?Lq+_B:_B),this.lineStart=this.lineEnd=this.point=Gu},sphere:function(){eL.add(Lq)}},oL,lL,sL,fL,cL,uL,pL,gL,mL=Iu(),hL,yL,bL={point:cp,lineStart:pp,lineEnd:gp,polygonStart:function(){bL.point=mp,bL.lineStart=hp,bL.lineEnd=bp,mL.reset(),rL.polygonStart()},polygonEnd:function(){rL.polygonEnd(),bL.point=cp,bL.lineStart=pp,bL.lineEnd=gp,0>Qq?(oL=-(sL=180),lL=-(fL=90)):mL>Oq?fL=90:mL<-Oq&&(lL=-90),yL[0]=oL,yL[1]=sL}},_L,xL,vL,kL,wL,EL,SL,CL,zL,TL,RL,PL,AL,OL,ML,DL,qL={sphere:Gu,point:kp,lineStart:Sp,lineEnd:Tp,polygonStart:function(){qL.lineStart=Rp,qL.lineEnd=Pp},polygonEnd:function(){qL.lineStart=Sp,qL.lineEnd=Tp}};Dp.invert=Dp;var LL=1e9,UL=-LL,FL=Iu(),jL=Iu(),IL,$L,NL,BL={sphere:Gu,point:Gu,lineStart:function(){BL.point=Kp,BL.lineEnd=Zp},lineEnd:Gu,polygonStart:Gu,polygonEnd:Gu},YL=Iu(),GL=Iu(),WL,HL,XL,VL,JL={point:Gu,lineStart:Gu,lineEnd:Gu,polygonStart:function(){JL.lineStart=ig,JL.lineEnd=og},polygonEnd:function(){JL.lineStart=JL.lineEnd=JL.point=Gu,YL.add(jq(GL)),GL.reset()},result:function(){return YL.reset(),YL/2}},ZL=Infinity,KL=ZL,QL=-ZL,eU=QL,tU={point:function(bB,_B){bB<ZL&&(ZL=bB),bB>QL&&(QL=bB),_B<KL&&(KL=_B),_B>eU&&(eU=_B)},lineStart:Gu,lineEnd:Gu,polygonStart:Gu,polygonEnd:Gu,result:function(){var _B=[[ZL,KL],[QL,eU]];return QL=eU=-(KL=ZL=Infinity),_B}},nU=0,aU=0,iU=0,dU=0,rU=0,oU=0,lU=0,sU=0,fU=0,cU,uU,pU,gU,mU={point:sg,lineStart:cg,lineEnd:gg,polygonStart:function(){mU.lineStart=mg,mU.lineEnd=hg},polygonEnd:function(){mU.point=sg,mU.lineStart=cg,mU.lineEnd=gg},result:function(){var _B=fU?[lU/fU,sU/fU]:oU?[dU/oU,rU/oU]:iU?[nU/iU,aU/iU]:[NaN,NaN];return nU=aU=iU=dU=rU=oU=lU=sU=fU=0,_B}};xg.prototype={_radius:4.5,pointRadius:function(_B){return this._radius=_B,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(_B,xB){switch(this._point){case 0:{this._context.moveTo(_B,xB),this._point=1;break}case 1:{this._context.lineTo(_B,xB);break}default:{this._context.moveTo(_B+this._radius,xB),this._context.arc(_B,xB,this._radius,0,Lq);break}}},result:Gu};var hU=Iu(),yU,bU,_U,xU,vU,kU={point:Gu,lineStart:function(){kU.point=vg},lineEnd:function(){yU&&kg(bU,_U),kU.point=Gu},polygonStart:function(){yU=!0},polygonEnd:function(){yU=null},result:function(){return hU.reset(),+hU}};wg.prototype={_circle:Eg(4.5),pointRadius:function(_B){return this._circle=Eg(_B),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push('Z'),this._point=NaN},point:function(_B,xB){switch(this._point){case 0:{this._string.push('M',_B,',',xB),this._point=1;break}case 1:{this._string.push('L',_B,',',xB);break}default:{this._string.push('M',_B,',',xB,this._circle);break}}},result:function(){if(this._string.length){var bB=this._string.join('');return this._string=[],bB}}};var wU=Cg(function(){return!0},function(bB){var _B=NaN,xB=NaN,vB=NaN,kB;return{lineStart:function(){bB.lineStart(),kB=1},point:function(SB,CB){var zB=0<SB?Mq:-Mq,TB=jq(SB-_B);jq(TB-Mq)<Oq?(bB.point(_B,xB=0<(xB+CB)/2?Dq:-Dq),bB.point(vB,xB),bB.lineEnd(),bB.lineStart(),bB.point(zB,xB),bB.point(SB,xB),kB=0):vB!==zB&&TB>=Mq&&(jq(_B-vB)<Oq&&(_B-=vB*Oq),jq(SB-zB)<Oq&&(SB-=zB*Oq),xB=Pg(_B,xB,SB,CB),bB.point(vB,xB),bB.lineEnd(),bB.lineStart(),bB.point(zB,xB),kB=0),bB.point(_B=SB,xB=CB),vB=zB},lineEnd:function(){bB.lineEnd(),_B=xB=NaN},clean:function(){return 2-kB}}},function(bB,_B,xB,vB){var kB;if(null==bB)kB=xB*Dq,vB.point(-Mq,kB),vB.point(0,kB),vB.point(Mq,kB),vB.point(Mq,0),vB.point(Mq,-kB),vB.point(0,-kB),vB.point(-Mq,-kB),vB.point(-Mq,0),vB.point(-Mq,kB);else if(jq(bB[0]-_B[0])>Oq){var wB=bB[0]<_B[0]?Mq:-Mq;kB=xB*wB/2,vB.point(-wB,kB),vB.point(0,kB),vB.point(wB,kB)}else vB.point(_B[0],_B[1])},[-Mq,-Dq]);Dg.prototype={constructor:Dg,point:function(_B,xB){this.stream.point(_B,xB)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var EU=16,SU=Nq(30*Fq),CU=Mg({point:function(_B,xB){this.stream.point(_B*Fq,xB*Fq)}}),zU=Vg(function(bB){return Vq(2/(1+bB))});zU.invert=Jg(function(bB){return 2*Yu(bB/2)});var TU=Vg(function(bB){return(bB=Bu(bB))&&bB/Hq(bB)});TU.invert=Jg(function(bB){return bB}),Qg.invert=function(bB,_B){return[bB,2*Iq(Yq(_B))-Dq]},rm.invert=rm,cm.invert=Jg(Iq),pm.invert=Jg(Yu),mm.invert=Jg(function(bB){return 2*Iq(bB)}),_m.invert=function(bB,_B){return[-_B,2*Iq(Yq(bB))-Dq]};var RU=Sg(),PU=['clipAngle','clipExtent','scale','translate','center','rotate','parallels','precision','coefficient','distance','fraction','lobes','parallel','radius','ratio','spacing','tilt'],AU={albers:Wg,albersusa:function(){function bB(AB){var OB=AB[0],MB=AB[1];return RB=null,(wB.point(OB,MB),RB)||(CB.point(OB,MB),RB)||(TB.point(OB,MB),RB)}function _B(){return xB=vB=null,bB}var kB=Wg(),SB=Gg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zB=Gg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),PB={point:function(OB,MB){RB=[OB,MB]}},xB,vB,wB,CB,TB,RB;return bB.invert=function(AB){var OB=kB.scale(),MB=kB.translate(),DB=(AB[0]-MB[0])/OB,qB=(AB[1]-MB[1])/OB;return(0.12<=qB&&0.234>qB&&-0.425<=DB&&-0.214>DB?SB:0.166<=qB&&0.234>qB&&-0.214<=DB&&-0.115>DB?zB:kB).invert(AB)},bB.stream=function(AB){return xB&&vB===AB?xB:xB=Hg([kB.stream(vB=AB),SB.stream(AB),zB.stream(AB)])},bB.precision=function(AB){return arguments.length?(kB.precision(AB),SB.precision(AB),zB.precision(AB),_B()):kB.precision()},bB.scale=function(AB){return arguments.length?(kB.scale(AB),SB.scale(0.35*AB),zB.scale(AB),bB.translate(kB.translate())):kB.scale()},bB.translate=function(AB){if(!arguments.length)return kB.translate();var OB=kB.scale(),MB=+AB[0],DB=+AB[1];return wB=kB.translate(AB).clipExtent([[MB-0.455*OB,DB-0.238*OB],[MB+0.455*OB,DB+0.238*OB]]).stream(PB),CB=SB.translate([MB-0.307*OB,DB+0.201*OB]).clipExtent([[MB-0.425*OB+Oq,DB+0.12*OB+Oq],[MB-0.214*OB-Oq,DB+0.234*OB-Oq]]).stream(PB),TB=zB.translate([MB-0.205*OB,DB+0.212*OB]).clipExtent([[MB-0.214*OB+Oq,DB+0.166*OB+Oq],[MB-0.115*OB-Oq,DB+0.234*OB-Oq]]).stream(PB),_B()},bB.fitExtent=function(AB,OB){return qg(bB,AB,OB)},bB.fitSize=function(AB,OB){return Lg(bB,AB,OB)},bB.scale(1070)},azimuthalequalarea:function(){return Ig(zU).scale(124.75).clipAngle(180-1e-3)},azimuthalequidistant:function(){return Ig(TU).scale(79.4188).clipAngle(180-1e-3)},conicconformal:function(){return Ng(im).scale(109.5).parallels([30,30])},conicequalarea:Gg,conicequidistant:function(){return Ng(lm).scale(131.154).center([0,13.9389])},equirectangular:function(){return Ig(rm).scale(152.63)},gnomonic:function(){return Ig(cm).scale(144.049).clipAngle(60)},mercator:function(){return tm(Qg).scale(961/Lq)},orthographic:function(){return Ig(pm).scale(249.5).clipAngle(90+Oq)},stereographic:function(){return Ig(mm).scale(250).clipAngle(142)},transversemercator:function(){var bB=tm(_m),_B=bB.center,xB=bB.rotate;return bB.center=function(vB){return arguments.length?_B([-vB[1],vB[0]]):(vB=_B(),[vB[1],-vB[0]])},bB.rotate=function(vB){return arguments.length?xB([vB[0],vB[1],2<vB.length?vB[2]+90:90]):(vB=xB(),[vB[0],vB[1],vB[2]-90])},xB([0,0,90]).scale(159.155)}};for(var OU in AU)Em(OU,AU[OU]);var MU=Ue(Cm,Rl);MU.transform=function(bB,_B){function xB(zB){zB[SB]=kB(wB(zB))}var vB=_B.fork(_B.ALL),kB=this.value,wB=bB.field||nT,SB=bB.as||'path',CB;return!kB||bB.modified()?(this.value=kB=Sm(bB.projection),vB.materialize().reflow().visit(vB.SOURCE,xB)):(CB=wB===nT||_B.modified(wB.fields),vB.visit(CB?vB.ADD_MOD:vB.ADD,xB)),vB.modifies(SB)};var DU=Ue(zm,Rl);DU.transform=function(bB,_B){function xB(RB){var PB=vB([kB(RB),wB(RB)]);PB?(RB[CB]=PB[0],RB[zB]=PB[1]):(RB[CB]=void 0,RB[zB]=void 0)}var vB=bB.projection,kB=bB.fields[0],wB=bB.fields[1],SB=bB.as||['x','y'],CB=SB[0],zB=SB[1],TB;return bB.modified()?_B.materialize().reflow(!0).visit(_B.SOURCE,xB):(TB=_B.modified(kB.fields)||_B.modified(wB.fields),_B.visit(TB?_B.ADD_MOD:_B.ADD,xB)),_B.modifies(SB)};var qU=Ue(Tm,Rl);qU.transform=function(bB,_B){var xB=_B.fork(_B.ALL),vB=this.value,kB=bB.field||ze('datum'),wB=bB.as||'shape',SB=xB.ADD_MOD;return(!vB||bB.modified())&&(this.value=vB=Rm(Sm(bB.projection),kB),xB.materialize().reflow(),SB=xB.SOURCE),xB.visit(SB,function(CB){CB[wB]=vB}),xB.modifies(wB)};var LU=Ue(Pm,Rl);LU.transform=function(bB,_B){var xB=_B.fork(),vB=this.value,kB=this.generator,wB;if(!vB.length||bB.modified())for(var SB in bB)Oe(kB[SB])&&kB[SB](bB[SB]);return wB=kB(),vB.length?(wB._id=vB[0]._id,xB.mod.push(wB)):xB.add.push(Io(wB)),vB[0]=wB,(xB.source=vB,xB)};var UU=Ue(Am,Rl);UU.transform=function(bB){var _B=this.value;!_B||bB.modified('type')?(this.value=_B=Dm(bB.type),PU.forEach(function(xB){null!=bB[xB]&&qm(_B,xB,bB[xB])})):PU.forEach(function(xB){bB.modified(xB)&&qm(_B,xB,bB[xB])}),null!=bB.pointRadius&&_B.path.pointRadius(bB.pointRadius),bB.fit&&Om(_B,bB)};Pl({type:'Contour',metadata:{generates:!0,source:!0},params:[{name:'size',type:'number',array:!0,length:2,required:!0},{name:'values',type:'number',array:!0},{name:'x',type:'field'},{name:'y',type:'field'},{name:'cellSize',type:'number'},{name:'bandwidth',type:'number'},{name:'thresholds',type:'number'}]},ju),Pl({type:'GeoPath',metadata:{modifies:!0},params:[{name:'projection',type:'projection'},{name:'field',type:'field'},{name:'as',type:'string',default:'path'}]},Cm),Pl({type:'GeoPoint',metadata:{modifies:!0},params:[{name:'projection',type:'projection',required:!0},{name:'fields',type:'field',array:!0,required:!0,length:2},{name:'as',type:'string',array:!0,length:2,default:['x','y']}]},zm),Pl({type:'GeoShape',metadata:{modifies:!0},params:[{name:'projection',type:'projection'},{name:'field',type:'field',default:'datum'},{name:'as',type:'string',default:'shape'}]},Tm),Pl({type:'Graticule',metadata:{source:!0,generates:!0,changes:!0},params:[{name:'extent',type:'array',array:!0,length:2,content:{type:'number',array:!0,length:2}},{name:'extentMajor',type:'array',array:!0,length:2,content:{type:'number',array:!0,length:2}},{name:'extentMinor',type:'array',array:!0,length:2,content:{type:'number',array:!0,length:2}},{name:'step',type:'number',array:!0,length:2},{name:'stepMajor',type:'number',array:!0,length:2,default:[90,360]},{name:'stepMinor',type:'number',array:!0,length:2,default:[10,10]},{name:'precision',type:'number',default:2.5}]},Pm),Ol('Projection',Am);var BU='log',WU='band',HU='point',XU='linear',VU='ordinal',JU='quantile',ZU='quantize',KU='threshold',eF='bin-ordinal',tF='sequential',nF=Ue(Nm,Rl);nF.transform=function(bB,_B){if(this.value&&!bB.modified())return _B.StopPropagation;var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),vB=this.value,kB=bB.scale,wB=bB.count,SB=bB.format||Um(kB,wB,bB.formatSpecifier),CB=bB.values||Lm(kB,wB);return vB&&(xB.rem=vB),vB=CB.map(function(zB){return Io({value:zB,label:SB(zB)})}),bB.extra&&vB.push(Io({extra:{value:vB[0].value},label:''})),(xB.source=xB.add=this.value=vB,xB)};var aF=Ue(Bm,Rl);aF.transform=function(bB,_B){var xB=_B.dataflow,vB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),kB=bB.item||Ym,wB=bB.key||Fo,SB=this.value;return SB||(_B=_B.addAll(),this.value=SB=Le().test(Gm),SB.lookup=function(CB){return SB.get(wB(CB))}),(bB.modified('key')||_B.modified(wB))&&ke('DataJoin does not support modified key function or fields.'),_B.visit(_B.ADD,function(CB){var zB=wB(CB),TB=SB.get(zB);TB?(TB.exit?(--SB.empty,vB.add):vB.mod).push(TB):(SB.set(zB,TB=kB(CB)),vB.add.push(TB)),TB.datum=CB,TB.exit=!1}),_B.visit(_B.MOD,function(CB){var zB=wB(CB),TB=SB.get(zB);TB&&(TB.datum=CB,vB.mod.push(TB))}),_B.visit(_B.REM,function(CB){var zB=wB(CB),TB=SB.get(zB);CB!==TB.datum||TB.exit||(vB.rem.push(TB),TB.exit=!0,++SB.empty)}),_B.changed(_B.ADD_MOD)&&vB.modifies('datum'),bB.clean&&SB.empty>xB.cleanThreshold&&xB.runAfter(SB.clean),vB};var iF=Ue(Wm,Rl);iF.transform=function(bB,_B){var xB=_B.fork(_B.ADD_REM),vB=_B.encode,kB='enter'===vB,wB=bB.encoders.update||rT,SB=bB.encoders.enter||rT,CB=bB.encoders.exit||rT,zB=(vB&&!kB?bB.encoders[vB]:wB)||rT;if(_B.changed(_B.ADD)&&(_B.visit(_B.ADD,function(RB){SB(RB,bB),wB(RB,bB),zB!==rT&&zB!==wB&&zB(RB,bB)}),xB.modifies(SB.output),xB.modifies(wB.output),zB!==rT&&zB!==wB&&xB.modifies(zB.output)),_B.changed(_B.REM)&&CB!==rT&&(_B.visit(_B.REM,function(RB){CB(RB,bB)}),xB.modifies(CB.output)),kB||zB!==rT){var TB=_B.MOD|(bB.modified()?_B.REFLOW:0);kB?(_B.visit(TB,function(RB){var PB=SB(RB,bB);(zB(RB,bB)||PB)&&xB.mod.push(RB)}),xB.mod.length&&xB.modifies(SB.output)):_B.visit(TB,function(RB){zB(RB,bB)&&xB.mod.push(RB)}),xB.mod.length&&xB.modifies(zB.output)}return xB};var dF={};dF[JU]=function(bB){var _B=bB.domain(),xB=[_B[0]].concat(bB.quantiles());return xB.max=We(_B),xB},dF[ZU]=function(bB){var _B=bB.domain(),xB=_B[0],vB=We(_B),kB=bB.range().length,wB=Array(kB),SB=0;for(wB[0]=xB;++SB<kB;)wB[SB]=(SB*vB-(SB-kB)*xB)/kB;return wB.max=vB,wB},dF[KU]=function(bB){var _B=[-Infinity].concat(bB.domain());return _B.max=+Infinity,_B},dF['bin-linear']=Zm,dF[eF]=Zm;var rF=Ue(ah,Rl);rF.transform=function(bB,_B){if(null!=this.value&&!bB.modified())return _B.StopPropagation;var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),vB=0,kB=this.value,wB='gradient'===bB.type,SB=bB.scale,CB=null==bB.count?5:bB.count,zB=bB.format||Um(SB,CB,bB.formatSpecifier),TB=bB.values||Hm(SB,CB,wB);if(zB=Km(SB,zB),kB&&(xB.rem=kB),wB)var RB=bB.values?SB.domain():TB,PB=xu(SB,RB[0],We(RB));else{var AB=bB.size,OB;Oe(AB)?(!bB.values&&0===SB(TB[0])&&(TB=TB.slice(1)),OB=TB.reduce(function(MB,DB){return Math.max(MB,AB(DB,bB))},0)):AB=Me(OB=AB||8)}return kB=TB.map(function(MB,DB){var qB=Io({index:DB,label:zB(MB,DB,TB),value:MB});return wB?qB.perc=PB(MB):(qB.offset=OB,qB.size=AB(MB,bB),qB.total=Math.round(vB),vB+=qB.size),qB}),xB.source=xB.add=this.value=kB,xB};var oF=Le({line:sh,"line-radial":function(bB,_B,xB,vB){return sh(_B*Math.cos(bB),_B*Math.sin(bB),vB*Math.cos(xB),vB*Math.sin(xB))},arc:uh,"arc-radial":function(bB,_B,xB,vB){return uh(_B*Math.cos(bB),_B*Math.sin(bB),vB*Math.cos(xB),vB*Math.sin(xB))},curve:gh,"curve-radial":function(bB,_B,xB,vB){return gh(_B*Math.cos(bB),_B*Math.sin(bB),vB*Math.cos(xB),vB*Math.sin(xB))},"orthogonal-horizontal":function(bB,_B,xB,vB){return'M'+bB+','+_B+'V'+vB+'H'+xB},"orthogonal-vertical":function(bB,_B,xB,vB){return'M'+bB+','+_B+'H'+xB+'V'+vB},"orthogonal-radial":function(bB,_B,xB,vB){var kB=Math.cos(bB),wB=Math.sin(bB),SB=Math.cos(xB),CB=Math.sin(xB),zB=Math.abs(xB-bB)>Math.PI?xB<=bB:xB>bB;return'M'+_B*kB+','+_B*wB+'A'+_B+','+_B+' 0 0,'+(zB?1:0)+' '+_B*SB+','+_B*CB+'L'+vB*SB+','+vB*CB},"diagonal-horizontal":function(bB,_B,xB,vB){var kB=(bB+xB)/2;return'M'+bB+','+_B+'C'+kB+','+_B+' '+kB+','+vB+' '+xB+','+vB},"diagonal-vertical":function(bB,_B,xB,vB){var kB=(_B+vB)/2;return'M'+bB+','+_B+'C'+bB+','+kB+' '+xB+','+kB+' '+xB+','+vB},"diagonal-radial":function(bB,_B,xB,vB){var kB=Math.cos(bB),wB=Math.sin(bB),SB=Math.cos(xB),CB=Math.sin(xB),zB=(_B+vB)/2;return'M'+_B*kB+','+_B*wB+'C'+zB*kB+','+zB*wB+' '+zB*SB+','+zB*CB+' '+vB*SB+','+vB*CB}}),lF=Ue(lh,Rl);lF.transform=function(bB,_B){var xB=bB.sourceX||ih,vB=bB.sourceY||dh,kB=bB.targetX||rh,wB=bB.targetY||oh,SB=bB.as||'path',CB=bB.orient||'vertical',zB=bB.shape||'line',TB=oF.get(zB+'-'+CB)||oF.get(zB);return TB||ke('LinkPath unsupported type: '+bB.shape+(bB.orient?'-'+bB.orient:'')),_B.visit(_B.SOURCE,function(RB){RB[SB]=TB(xB(RB),vB(RB),kB(RB),wB(RB))}),_B.reflow(bB.modified()).modifies(SB)};var sF=Ue(wh,Rl);sF.transform=function(bB,_B){var xB=bB.as||['startAngle','endAngle'],vB=xB[0],kB=xB[1],wB=bB.field||iT,SB=bB.startAngle||0,CB=null==bB.endAngle?2*Math.PI:bB.endAngle,zB=_B.source,TB=zB.map(wB),RB=TB.length,PB=SB,AB=(CB-SB)/fe(TB),OB=J(RB),MB,DB,qB;for(bB.sort&&OB.sort(function(LB,UB){return TB[LB]-TB[UB]}),MB=0;MB<RB;++MB)qB=TB[OB[MB]],DB=zB[OB[MB]],DB[vB]=PB,DB[kB]=PB+=qB*AB;return this.value=TB,_B.reflow(bB.modified()).modifies(xB)};var fF=5,cF=Ze([XU,'pow','sqrt']),uF=Ze(['set','modified','clear','type','scheme','schemeExtent','schemeCount','domain','domainMin','domainMid','domainMax','domainRaw','nice','zero','range','rangeStep','round','reverse','interpolate','interpolateGamma']),pF=Ue(Eh,Rl);pF.transform=function(bB,_B){var xB=_B.dataflow,vB=this.value,kB;for(kB in(!vB||bB.modified('type'))&&(this.value=vB=cu((bB.type||XU).toLowerCase())()),bB)uF[kB]||(Oe(vB[kB])?vB[kB](bB[kB]):xB.warn('Unsupported scale property: '+kB));return zh(vB,bB,Sh(vB,bB),xB),_B.fork(_B.NO_SOURCE|_B.NO_FIELDS)};var gF=Ue(Mh,Rl);gF.transform=function(bB,_B){var xB=bB.modified('sort')||_B.changed(_B.ADD)||_B.modified(bB.sort.fields)||_B.modified('datum');return xB&&_B.source.sort(bB.sort),this.modified(xB),_B};var yF=Ue(Dh,Rl);yF.transform=function(bB,_B){var xB=bB.as||['y0','y1'],vB=xB[0],kB=xB[1],wB=bB.field||iT,SB=bB.offset==='center'?qh:bB.offset==='normalize'?Lh:Uh,CB,zB,TB,RB;for(CB=Fh(_B.source,bB.groupby,bB.sort,wB),zB=0,TB=CB.length,RB=CB.max;zB<TB;++zB)SB(CB[zB],RB,wB,vB,kB);return _B.reflow(bB.modified()).modifies(xB)};Pl({type:'LinkPath',metadata:{modifies:!0},params:[{name:'sourceX',type:'field',default:'source.x'},{name:'sourceY',type:'field',default:'source.y'},{name:'targetX',type:'field',default:'target.x'},{name:'targetY',type:'field',default:'target.y'},{name:'orient',type:'enum',default:'vertical',values:['horizontal','vertical','radial']},{name:'shape',type:'enum',default:'line',values:['line','arc','curve','diagonal','orthogonal']},{name:'as',type:'string',default:'path'}]},lh),Pl({type:'Pie',metadata:{modifies:!0},params:[{name:'field',type:'field'},{name:'startAngle',type:'number',default:0},{name:'endAngle',type:'number',default:6.283185307179586},{name:'sort',type:'boolean',default:!1},{name:'as',type:'string',array:!0,length:2,default:['startAngle','endAngle']}]},wh),Pl({type:'Stack',metadata:{modifies:!0},params:[{name:'field',type:'field'},{name:'groupby',type:'field',array:!0},{name:'sort',type:'compare'},{name:'offset',type:'enum',default:'zero',values:['zero','center','normalize']},{name:'as',type:'string',array:!0,length:2,default:['y0','y1']}]},Dh),Ol('AxisTicks',Nm),Ol('DataJoin',Bm),Ol('Encode',Wm),Ol('LegendEntries',ah),Ol('Scale',Eh),Ol('SortItems',Mh);var vF=wy.prototype=Ey.prototype;vF.copy=function(){var bB=new Ey(this._x,this._y,this._x0,this._y0,this._x1,this._y1),_B=this._root,xB,vB;if(!_B)return bB;if(!_B.length)return bB._root=Sy(_B),bB;for(xB=[{source:_B,target:bB._root=[,,,,]}];_B=xB.pop();)for(var kB=0;4>kB;++kB)(vB=_B.source[kB])&&(vB.length?xB.push({source:vB,target:_B.target[kB]=[,,,,]}):_B.target[kB]=Sy(vB));return bB},vF.add=function(bB){var _B=+this._x.call(null,bB),xB=+this._y.call(null,bB);return Bh(this.cover(_B,xB),_B,xB,bB)},vF.addAll=function(bB){var vB=bB.length,SB=Array(vB),CB=Array(vB),zB=Infinity,TB=Infinity,RB=-Infinity,PB=-Infinity,_B,xB,kB,wB;for(xB=0;xB<vB;++xB)isNaN(kB=+this._x.call(null,_B=bB[xB]))||isNaN(wB=+this._y.call(null,_B))||(SB[xB]=kB,CB[xB]=wB,kB<zB&&(zB=kB),kB>RB&&(RB=kB),wB<TB&&(TB=wB),wB>PB&&(PB=wB));for(RB<zB&&(zB=this._x0,RB=this._x1),PB<TB&&(TB=this._y0,PB=this._y1),this.cover(zB,TB).cover(RB,PB),xB=0;xB<vB;++xB)Bh(this,SB[xB],CB[xB],bB[xB]);return this},vF.cover=function(bB,_B){if(isNaN(bB=+bB)||isNaN(_B=+_B))return this;var xB=this._x0,vB=this._y0,kB=this._x1,wB=this._y1;if(isNaN(xB))kB=(xB=Math.floor(bB))+1,wB=(vB=Math.floor(_B))+1;else if(xB>bB||bB>kB||vB>_B||_B>wB){var SB=kB-xB,CB=this._root,zB,TB;switch(TB=(_B<(vB+wB)/2)<<1|bB<(xB+kB)/2){case 0:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,kB=xB+SB,wB=vB+SB,bB>kB||_B>wB));break}case 1:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,xB=kB-SB,wB=vB+SB,xB>bB||_B>wB));break}case 2:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,kB=xB+SB,vB=wB-SB,bB>kB||vB>_B));break}case 3:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,xB=kB-SB,vB=wB-SB,xB>bB||vB>_B));break}}this._root&&this._root.length&&(this._root=CB)}else return this;return this._x0=xB,this._y0=vB,this._x1=kB,this._y1=wB,this},vF.data=function(){var bB=[];return this.visit(function(_B){if(!_B.length)do bB.push(_B.data);while(_B=_B.next)}),bB},vF.extent=function(bB){return arguments.length?this.cover(+bB[0][0],+bB[0][1]).cover(+bB[1][0],+bB[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},vF.find=function(bB,_B,xB){var kB=this._x0,wB=this._y0,RB=this._x1,PB=this._y1,AB=[],OB=this._root,vB,SB,CB,zB,TB,MB,DB;for(OB&&AB.push(new Xh(OB,kB,wB,RB,PB)),null==xB?xB=Infinity:(kB=bB-xB,wB=_B-xB,RB=bB+xB,PB=_B+xB,xB*=xB);MB=AB.pop();)if(!(!(OB=MB.node)||(SB=MB.x0)>RB||(CB=MB.y0)>PB||(zB=MB.x1)<kB||(TB=MB.y1)<wB))if(OB.length){var qB=(SB+zB)/2,LB=(CB+TB)/2;AB.push(new Xh(OB[3],qB,LB,zB,TB),new Xh(OB[2],SB,LB,qB,TB),new Xh(OB[1],qB,CB,zB,LB),new Xh(OB[0],SB,CB,qB,LB)),(DB=(_B>=LB)<<1|bB>=qB)&&(MB=AB[AB.length-1],AB[AB.length-1]=AB[AB.length-1-DB],AB[AB.length-1-DB]=MB)}else{var UB=bB-+this._x.call(null,OB.data),FB=_B-+this._y.call(null,OB.data),jB=UB*UB+FB*FB;if(jB<xB){var IB=Math.sqrt(xB=jB);kB=bB-IB,wB=_B-IB,RB=bB+IB,PB=_B+IB,vB=OB.data}}return vB},vF.remove=function(bB){if(isNaN(RB=+this._x.call(null,bB))||isNaN(PB=+this._y.call(null,bB)))return this;var xB=this._root,SB=this._x0,CB=this._y0,zB=this._x1,TB=this._y1,_B,vB,kB,wB,RB,PB,AB,OB,MB,DB,qB,LB;if(!xB)return this;if(xB.length)for(;;){if((MB=RB>=(AB=(SB+zB)/2))?SB=AB:zB=AB,(DB=PB>=(OB=(CB+TB)/2))?CB=OB:TB=OB,(_B=xB,!(xB=xB[qB=DB<<1|MB])))return this;if(!xB.length)break;(_B[3&qB+1]||_B[3&qB+2]||_B[3&qB+3])&&(vB=_B,LB=qB)}for(;xB.data!==bB;)if(kB=xB,!(xB=xB.next))return this;return((wB=xB.next)&&delete xB.next,kB)?(wB?kB.next=wB:delete kB.next,this):_B?(wB?_B[qB]=wB:delete _B[qB],(xB=_B[0]||_B[1]||_B[2]||_B[3])&&xB===(_B[3]||_B[2]||_B[1]||_B[0])&&!xB.length&&(vB?vB[LB]=xB:this._root=xB),this):(this._root=wB,this)},vF.removeAll=function(bB){for(var _B=0,xB=bB.length;_B<xB;++_B)this.remove(bB[_B]);return this},vF.root=function(){return this._root},vF.size=function(){var bB=0;return this.visit(function(_B){if(!_B.length)do++bB;while(_B=_B.next)}),bB},vF.visit=function(bB){var _B=[],vB=this._root,xB,kB,wB,SB,CB,zB;for(vB&&_B.push(new Xh(vB,this._x0,this._y0,this._x1,this._y1));xB=_B.pop();)if(!bB(vB=xB.node,wB=xB.x0,SB=xB.y0,CB=xB.x1,zB=xB.y1)&&vB.length){var TB=(wB+CB)/2,RB=(SB+zB)/2;(kB=vB[3])&&_B.push(new Xh(kB,TB,RB,CB,zB)),(kB=vB[2])&&_B.push(new Xh(kB,wB,RB,TB,zB)),(kB=vB[1])&&_B.push(new Xh(kB,TB,SB,CB,RB)),(kB=vB[0])&&_B.push(new Xh(kB,wB,SB,TB,RB))}return this},vF.visitAfter=function(bB){var _B=[],xB=[],vB;for(this._root&&_B.push(new Xh(this._root,this._x0,this._y0,this._x1,this._y1));vB=_B.pop();){var kB=vB.node;if(kB.length){var SB=vB.x0,CB=vB.y0,zB=vB.x1,TB=vB.y1,RB=(SB+zB)/2,PB=(CB+TB)/2,wB;(wB=kB[0])&&_B.push(new Xh(wB,SB,CB,RB,PB)),(wB=kB[1])&&_B.push(new Xh(wB,RB,CB,zB,PB)),(wB=kB[2])&&_B.push(new Xh(wB,SB,PB,RB,TB)),(wB=kB[3])&&_B.push(new Xh(wB,RB,PB,zB,TB))}xB.push(vB)}for(;vB=xB.pop();)bB(vB.node,vB.x0,vB.y0,vB.x1,vB.y1);return this},vF.x=function(bB){return arguments.length?(this._x=bB,this):this._x},vF.y=function(bB){return arguments.length?(this._y=bB,this):this._y};var kF=0,wF=0,EF=0,SF=1e3,CF,zF,TF=0,RF=0,PF=0,AF='object'===('undefined'===typeof performance?'undefined':babelHelpers.typeof(performance))&&performance.now?performance:Date,OF='function'===typeof requestAnimationFrame?requestAnimationFrame:function(bB){setTimeout(bB,17)};Dy.prototype=qy.prototype={constructor:Dy,restart:function(_B,xB,vB){if('function'!==typeof _B)throw new TypeError('callback is not a function');vB=(null==vB?Oy():+vB)+(null==xB?0:+xB),this._next||zF===this||(zF?zF._next=this:CF=this,zF=this),this._call=_B,this._time=vB,Iy()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Iy())}};var MF=10,DF=Math.PI*(3-Math.sqrt(5)),qF={center:function(bB,_B){function xB(){var wB=vB.length,CB=0,zB=0,kB,SB;for(kB=0;kB<wB;++kB)SB=vB[kB],CB+=SB.x,zB+=SB.y;for(CB=CB/wB-bB,zB=zB/wB-_B,kB=0;kB<wB;++kB)SB=vB[kB],SB.x-=CB,SB.y-=zB}var vB;return null==bB&&(bB=0),null==_B&&(_B=0),xB.initialize=function(kB){vB=kB},xB.x=function(kB){return arguments.length?(bB=+kB,xB):bB},xB.y=function(kB){return arguments.length?(_B=+kB,xB):_B},xB},collide:function(bB){function _B(){function zB(UB,FB,jB,IB,$B){var NB=UB.data,BB=UB.r,YB=DB+BB;if(NB){if(NB.index>AB.index){var GB=OB-NB.x-NB.vx,WB=MB-NB.y-NB.vy,HB=GB*GB+WB*WB;HB<YB*YB&&(0===GB&&(GB=$h(),HB+=GB*GB),0===WB&&(WB=$h(),HB+=WB*WB),HB=(YB-(HB=Math.sqrt(HB)))/HB*SB,AB.vx+=(GB*=HB)*(YB=(BB*=BB)/(qB+BB)),AB.vy+=(WB*=HB)*YB,NB.vx-=GB*(YB=1-YB),NB.vy-=WB*YB)}return}return FB>OB+YB||IB<OB-YB||jB>MB+YB||$B<MB-YB}for(var RB=kB.length,LB=0,TB,PB,AB,OB,MB,DB,qB;LB<CB;++LB)for(PB=wy(kB,Cy,zy).visitAfter(xB),TB=0;TB<RB;++TB)AB=kB[TB],DB=wB[AB.index],qB=DB*DB,OB=AB.x+AB.vx,MB=AB.y+AB.vy,PB.visit(zB)}function xB(zB){if(zB.data)return zB.r=wB[zB.data.index];for(var TB=zB.r=0;4>TB;++TB)zB[TB]&&zB[TB].r>zB.r&&(zB.r=zB[TB].r)}function vB(){if(kB){var TB=kB.length,zB,RB;for(wB=Array(TB),zB=0;zB<TB;++zB)RB=kB[zB],wB[RB.index]=+bB(RB,zB,kB)}}var SB=1,CB=1,kB,wB;return'function'!==typeof bB&&(bB=Ih(null==bB?1:+bB)),_B.initialize=function(zB){kB=zB,vB()},_B.iterations=function(zB){return arguments.length?(CB=+zB,_B):CB},_B.strength=function(zB){return arguments.length?(SB=+zB,_B):SB},_B.radius=function(zB){return arguments.length?(bB='function'===typeof zB?zB:Ih(+zB),vB(),_B):bB},_B},nbody:function(){function bB(AB){var MB=kB.length,DB=wy(kB,$y,Ny).visitAfter(xB),OB;for(SB=AB,OB=0;OB<MB;++OB)wB=kB[OB],DB.visit(vB)}function _B(){if(kB){var OB=kB.length,AB,MB;for(zB=Array(OB),AB=0;AB<OB;++AB)MB=kB[AB],zB[MB.index]=+CB(MB,AB,kB)}}function xB(AB){var OB=0,MB,DB,qB,LB,UB;if(AB.length){for(qB=LB=UB=0;4>UB;++UB)(MB=AB[UB])&&(DB=MB.value)&&(OB+=DB,qB+=DB*MB.x,LB+=DB*MB.y);AB.x=qB/OB,AB.y=LB/OB}else{MB=AB,MB.x=MB.data.x,MB.y=MB.data.y;do OB+=zB[MB.data.index];while(MB=MB.next)}AB.value=OB}function vB(AB,OB,MB,DB){if(!AB.value)return!0;var qB=AB.x-wB.x,LB=AB.y-wB.y,UB=DB-OB,FB=qB*qB+LB*LB;if(UB*UB/PB<FB)return FB<RB&&(0===qB&&(qB=$h(),FB+=qB*qB),0===LB&&(LB=$h(),FB+=LB*LB),FB<TB&&(FB=Math.sqrt(TB*FB)),wB.vx+=qB*AB.value*SB/FB,wB.vy+=LB*AB.value*SB/FB),!0;if(!(AB.length||FB>=RB)){(AB.data!==wB||AB.next)&&(0===qB&&(qB=$h(),FB+=qB*qB),0===LB&&(LB=$h(),FB+=LB*LB),FB<TB&&(FB=Math.sqrt(TB*FB)));do AB.data!==wB&&(UB=zB[AB.data.index]*SB/FB,wB.vx+=qB*UB,wB.vy+=LB*UB);while(AB=AB.next)}}var CB=Ih(-30),TB=1,RB=Infinity,PB=0.81,kB,wB,SB,zB;return bB.initialize=function(AB){kB=AB,_B()},bB.strength=function(AB){return arguments.length?(CB='function'===typeof AB?AB:Ih(+AB),_B(),bB):CB},bB.distanceMin=function(AB){return arguments.length?(TB=AB*AB,bB):Math.sqrt(TB)},bB.distanceMax=function(AB){return arguments.length?(RB=AB*AB,bB):Math.sqrt(RB)},bB.theta=function(AB){return arguments.length?(PB=AB*AB,bB):Math.sqrt(PB)},bB},link:function(bB){function xB(DB){for(var qB=0,LB=bB.length;qB<MB;++qB)for(var UB=0,FB,jB,IB,$B,NB,BB,YB;UB<LB;++UB)FB=bB[UB],jB=FB.source,IB=FB.target,$B=IB.x+IB.vx-jB.x-jB.vx||$h(),NB=IB.y+IB.vy-jB.y-jB.vy||$h(),BB=Math.sqrt($B*$B+NB*NB),BB=(BB-RB[UB])/BB*DB*zB[UB],$B*=BB,NB*=BB,IB.vx-=$B*(YB=OB[UB]),IB.vy-=NB*YB,jB.vx+=$B*(YB=1-YB),jB.vy+=NB*YB}function vB(){if(PB){var qB=PB.length,LB=bB.length,UB=tt(PB,SB),DB,FB;for(DB=0,AB=Array(qB);DB<LB;++DB)FB=bB[DB],FB.index=DB,'object'!==babelHelpers.typeof(FB.source)&&(FB.source=Py(UB,FB.source)),'object'!==babelHelpers.typeof(FB.target)&&(FB.target=Py(UB,FB.target)),AB[FB.source.index]=(AB[FB.source.index]||0)+1,AB[FB.target.index]=(AB[FB.target.index]||0)+1;for(DB=0,OB=Array(LB);DB<LB;++DB)FB=bB[DB],OB[DB]=AB[FB.source.index]/(AB[FB.source.index]+AB[FB.target.index]);zB=Array(LB),kB(),RB=Array(LB),wB()}}function kB(){if(PB)for(var DB=0,qB=bB.length;DB<qB;++DB)zB[DB]=+CB(bB[DB],DB,bB)}function wB(){if(PB)for(var DB=0,qB=bB.length;DB<qB;++DB)RB[DB]=+TB(bB[DB],DB,bB)}var SB=Ry,CB=function(DB){return 1/Math.min(AB[DB.source.index],AB[DB.target.index])},TB=Ih(30),MB=1,zB,RB,PB,AB,OB;return null==bB&&(bB=[]),xB.initialize=function(DB){PB=DB,vB()},xB.links=function(DB){return arguments.length?(bB=DB,vB(),xB):bB},xB.id=function(DB){return arguments.length?(SB=DB,xB):SB},xB.iterations=function(DB){return arguments.length?(MB=+DB,xB):MB},xB.strength=function(DB){return arguments.length?(CB='function'===typeof DB?DB:Ih(+DB),kB(),xB):CB},xB.distance=function(DB){return arguments.length?(TB='function'===typeof DB?DB:Ih(+DB),wB(),xB):TB},xB},x:function(bB){function _B(CB){for(var zB=0,TB=kB.length,RB;zB<TB;++zB)RB=kB[zB],RB.vx+=(SB[zB]-RB.x)*wB[zB]*CB}function xB(){if(kB){var zB=kB.length,CB;for(wB=Array(zB),SB=Array(zB),CB=0;CB<zB;++CB)wB[CB]=isNaN(SB[CB]=+bB(kB[CB],CB,kB))?0:+vB(kB[CB],CB,kB)}}var vB=Ih(0.1),kB,wB,SB;return'function'!==typeof bB&&(bB=Ih(null==bB?0:+bB)),_B.initialize=function(CB){kB=CB,xB()},_B.strength=function(CB){return arguments.length?(vB='function'===typeof CB?CB:Ih(+CB),xB(),_B):vB},_B.x=function(CB){return arguments.length?(bB='function'===typeof CB?CB:Ih(+CB),xB(),_B):bB},_B},y:function(bB){function _B(CB){for(var zB=0,TB=kB.length,RB;zB<TB;++zB)RB=kB[zB],RB.vy+=(SB[zB]-RB.y)*wB[zB]*CB}function xB(){if(kB){var zB=kB.length,CB;for(wB=Array(zB),SB=Array(zB),CB=0;CB<zB;++CB)wB[CB]=isNaN(SB[CB]=+bB(kB[CB],CB,kB))?0:+vB(kB[CB],CB,kB)}}var vB=Ih(0.1),kB,wB,SB;return'function'!==typeof bB&&(bB=Ih(null==bB?0:+bB)),_B.initialize=function(CB){kB=CB,xB()},_B.strength=function(CB){return arguments.length?(vB='function'===typeof CB?CB:Ih(+CB),xB(),_B):vB},_B.y=function(CB){return arguments.length?(bB='function'===typeof CB?CB:Ih(+CB),xB(),_B):bB},_B}},LF='forces',UF=['alpha','alphaMin','alphaTarget','velocityDecay','forces'],FF=['static','iterations'],jF=['x','y','vx','vy'],IF=Ue(Hy,Rl);IF.transform=function(bB,_B){var xB=this.value,vB=_B.changed(_B.ADD_REM),kB=bB.modified(UF),wB=bB.iterations||300;if(xB?(vB&&(_B.modifies('index'),xB.nodes(_B.source)),kB&&Jy(xB,bB)):(this.value=xB=Vy(_B.source,bB),xB.on('tick',Xy(_B.dataflow,this)),!bB.static&&(vB=!0,xB.tick()),_B.modifies('index')),kB||vB||bB.modified(FF)||_B.changed()&&bB.restart)if(xB.alpha(Math.max(xB.alpha(),bB.alpha||1)).alphaDecay(1-Math.pow(xB.alphaMin(),1/wB)),bB.static)for(xB.stop();0<=--wB;)xB.tick();else if(xB.stopped()&&xB.restart(),!vB)return _B.StopPropagation;return this.finish(bB,_B)},IF.finish=function(bB,_B){for(var xB=_B.dataflow,vB=this._argops,kB=0,wB=vB.length,SB;kB<wB;++kB)if(SB=vB[kB],SB.name===LF&&'link'===SB.op._argval.force)for(var CB=SB.op._argops,zB=0,TB=CB.length,RB;zB<TB;++zB)if('links'===CB[zB].name&&(RB=CB[zB].op.source)){xB.touch(RB);break}return _B.reflow(bB.modified()).modifies(jF)};Pl({type:'Force',metadata:{modifies:!0},params:[{name:'static',type:'boolean',default:!1},{name:'restart',type:'boolean',default:!1},{name:'iterations',type:'number',default:300},{name:'alpha',type:'number',default:1},{name:'alphaMin',type:'number',default:0.001},{name:'alphaTarget',type:'number',default:0},{name:'velocityDecay',type:'number',default:0.4},{name:'forces',type:'param',array:!0,params:[{key:{force:'center'},params:[{name:'x',type:'number',default:0},{name:'y',type:'number',default:0}]},{key:{force:'collide'},params:[{name:'radius',type:'number',expr:!0},{name:'strength',type:'number',default:0.7},{name:'iterations',type:'number',default:1}]},{key:{force:'nbody'},params:[{name:'strength',type:'number',default:-30},{name:'theta',type:'number',default:0.9},{name:'distanceMin',type:'number',default:1},{name:'distanceMax',type:'number'}]},{key:{force:'link'},params:[{name:'links',type:'data'},{name:'id',type:'field'},{name:'distance',type:'number',default:30,expr:!0},{name:'strength',type:'number',expr:!0},{name:'iterations',type:'number',default:1}]},{key:{force:'x'},params:[{name:'strength',type:'number',default:0.1},{name:'x',type:'field'}]},{key:{force:'y'},params:[{name:'strength',type:'number',default:0.1},{name:'y',type:'field'}]}]},{name:'as',type:'string',array:!0,modify:!1,default:['x','y','vx','vy']}]},Hy),qb.prototype=Pb.prototype={constructor:qb,count:function(){return this.eachAfter(sb)},each:function(bB){var _B=this,vB=[_B],xB,kB,wB,SB;do for(xB=vB.reverse(),vB=[];_B=xB.pop();)if(bB(_B),kB=_B.children,kB)for(wB=0,SB=kB.length;wB<SB;++wB)vB.push(kB[wB]);while(vB.length);return this},eachAfter:function(bB){for(var _B=this,xB=[_B],vB=[],kB,wB,SB;_B=xB.pop();)if(vB.push(_B),kB=_B.children,kB)for(wB=0,SB=kB.length;wB<SB;++wB)xB.push(kB[wB]);for(;_B=vB.pop();)bB(_B);return this},eachBefore:function(bB){for(var _B=this,xB=[_B],vB,kB;_B=xB.pop();)if(bB(_B),vB=_B.children,vB)for(kB=vB.length-1;0<=kB;--kB)xB.push(vB[kB]);return this},sum:function(bB){return this.eachAfter(function(_B){for(var xB=+bB(_B.data)||0,vB=_B.children,kB=vB&&vB.length;0<=--kB;)xB+=vB[kB].value;_B.value=xB})},sort:function(bB){return this.eachBefore(function(_B){_B.children&&_B.children.sort(bB)})},path:function(bB){for(var _B=this,xB=Sb(_B,bB),vB=[_B];_B!==xB;)_B=_B.parent,vB.push(_B);for(var kB=vB.length;bB!==xB;)vB.splice(kB,0,bB),bB=bB.parent;return vB},ancestors:function(){for(var bB=this,_B=[bB];bB=bB.parent;)_B.push(bB);return _B},descendants:function(){var bB=[];return this.each(function(_B){bB.push(_B)}),bB},leaves:function(){var bB=[];return this.eachBefore(function(_B){_B.children||bB.push(_B)}),bB},links:function(){var bB=this,_B=[];return bB.each(function(xB){xB!==bB&&_B.push({source:xB.parent,target:xB})}),_B},copy:function(){return Pb(this).eachBefore(Mb)}};var NF='$',BF={depth:-1},YF={};h_.prototype=Object.create(qb.prototype);var GF=(1+Math.sqrt(5))/2,WF=function bB(_B){function xB(vB,kB,wB,SB,CB){w_(_B,vB,kB,wB,SB,CB)}return xB.ratio=function(vB){return bB(1<(vB=+vB)?vB:1)},xB}(GF),HF=function bB(_B){function xB(vB,kB,wB,SB,CB){if((zB=vB._squarify)&&zB.ratio===_B)for(var AB=-1,MB=zB.length,DB=vB.value,zB,TB,RB,PB,OB;++AB<MB;){for(TB=zB[AB],RB=TB.children,(PB=TB.value=0,OB=RB.length);PB<OB;++PB)TB.value+=RB[PB].value;TB.dice?d_(TB,kB,wB,SB,wB+=(CB-wB)*TB.value/DB):k_(TB,kB,wB,kB+=(SB-kB)*TB.value/DB,CB),DB-=TB.value}else vB._squarify=zB=w_(_B,vB,kB,wB,SB,CB),zB.ratio=_B}return xB.ratio=function(vB){return bB(1<(vB=+vB)?vB:1)},xB}(GF),XF=Ue(z_,Rl);XF.transform=function(bB,_B){_B.source||ke('Nest transform requires an upstream data source.');var xB=bB.key||Fo,vB,kB,wB,SB;return(!this.value||(SB=bB.modified())||_B.changed())&&(vB=Pe(bB.keys).reduce(function(CB,zB){return CB.key(zB),CB},nt()).entries(_B.source),kB=Pb({values:vB},T_),wB=kB.lookup={},kB.each(function(CB){null!=Fo(CB.data)&&(wB[xB(CB.data)]=CB)}),this.value=kB),_B.source.root=this.value,SB?_B.fork(_B.ALL):_B};var VF=Ue(R_,Rl);VF.transform=function(bB,_B){_B.source||ke('Stratify transform requires an upstream data source.');var xB=bB.modified(),wB=!this.value||xB||_B.changed(_B.ADD_REM)||_B.modified(bB.key.fields)||_B.modified(bB.parentKey.fields),vB,kB;return wB&&(vB=s_().id(bB.key).parentId(bB.parentKey)(_B.source),kB=vB.lookup={},vB.each(function(SB){kB[bB.key(SB.data)]=SB}),this.value=vB),_B.source.root=this.value,xB?_B.fork(_B.ALL):_B};var JF=Ue(P_,Rl);JF.transform=function(bB,_B){function xB(TB){var RB=wB[TB];RB&&(CB[TB]=1,zB.mod.push(RB))}_B.source&&_B.source.root||ke('TreeLinks transform requires a backing tree data source.');var vB=_B.source.root,kB=vB.lookup,wB=this.value,SB=bB.key||Fo,CB={},zB=_B.fork();return _B.visit(_B.REM,function(TB){var RB=SB(TB),PB=wB[RB];PB&&(delete wB[RB],zB.rem.push(PB))}),_B.visit(_B.ADD,function(TB){var RB=SB(TB),PB;(PB=A_(kB[RB]))&&(zB.add.push(wB[RB]=Io({source:PB,target:TB})),CB[RB]=1)}),_B.visit(_B.MOD,function(TB){var RB=SB(TB),PB=kB[RB],AB=PB.children;if(xB(RB),AB)for(var OB=0,MB=AB.length;OB<MB;++OB)CB[RB=SB(AB[OB].data)]||xB(RB)}),zB};var ZF={binary:function(bB,_B,xB,vB,kB){function wB(PB,AB,OB,MB,DB,qB,LB){if(PB>=AB-1){var UB=SB[PB];return UB.x0=MB,UB.y0=DB,UB.x1=qB,void(UB.y1=LB)}for(var FB=RB[PB],jB=OB/2+FB,IB=PB+1,$B=AB-1,NB;IB<$B;)NB=IB+$B>>>1,RB[NB]<jB?IB=NB+1:$B=NB;jB-RB[IB-1]<RB[IB]-jB&&PB+1<IB&&--IB;var BB=RB[IB]-FB,YB=OB-BB;if(qB-MB>LB-DB){var GB=(MB*YB+qB*BB)/OB;wB(PB,IB,BB,MB,DB,GB,LB),wB(IB,AB,YB,GB,DB,qB,LB)}else{var WB=(DB*YB+LB*BB)/OB;wB(PB,IB,BB,MB,DB,qB,WB),wB(IB,AB,YB,MB,WB,qB,LB)}}var SB=bB.children,zB=SB.length,RB=Array(zB+1),CB,TB;for(RB[0]=TB=CB=0;CB<zB;++CB)RB[CB+1]=TB+=SB[CB].value;wB(0,zB,bB.value,_B,xB,vB,kB)},dice:d_,slice:k_,slicedice:function(bB,_B,xB,vB,kB){(1&bB.depth?k_:d_)(bB,_B,xB,vB,kB)},squarify:WF,resquarify:HF},KF={tidy:function(){function bB(TB){var RB=b_(TB);if(RB.eachAfter(_B),RB.parent.m=-RB.z,RB.eachBefore(xB),zB)TB.eachBefore(kB);else{var PB=TB,AB=TB,OB=TB;TB.eachBefore(function(UB){UB.x<PB.x&&(PB=UB),UB.x>AB.x&&(AB=UB),UB.depth>OB.depth&&(OB=UB)});var MB=PB===AB?1:wB(PB,AB)/2,DB=MB-PB.x,qB=SB/(AB.x+MB+DB),LB=CB/(OB.depth||1);TB.eachBefore(function(UB){UB.x=(UB.x+DB)*qB,UB.y=UB.depth*LB})}return TB}function _B(TB){var RB=TB.children,PB=TB.parent.children,AB=TB.i?PB[TB.i-1]:null;if(RB){g_(TB);var OB=(RB[0].z+RB[RB.length-1].z)/2;AB?(TB.z=AB.z+wB(TB._,AB._),TB.m=TB.z-OB):TB.z=OB}else AB&&(TB.z=AB.z+wB(TB._,AB._));TB.parent.A=vB(TB,AB,TB.parent.A||PB[0])}function xB(TB){TB._.x=TB.z+TB.parent.m,TB.m+=TB.parent.m}function vB(TB,RB,PB){if(RB){for(var AB=TB,OB=TB,MB=RB,DB=AB.parent.children[0],qB=AB.m,LB=OB.m,UB=MB.m,FB=DB.m,jB;MB=u_(MB),AB=c_(AB),MB&&AB;)DB=c_(DB),OB=u_(OB),OB.a=TB,jB=MB.z+UB-AB.z-qB+wB(MB._,AB._),0<jB&&(p_(m_(MB,TB,PB),TB,jB),qB+=jB,LB+=jB),UB+=MB.m,qB+=AB.m,FB+=DB.m,LB+=OB.m;MB&&!u_(OB)&&(OB.t=MB,OB.m+=UB-LB),AB&&!c_(DB)&&(DB.t=AB,DB.m+=qB-FB,PB=TB)}return PB}function kB(TB){TB.x*=SB,TB.y=TB.depth*CB}var wB=f_,SB=1,CB=1,zB=null;return bB.separation=function(TB){return arguments.length?(wB=TB,bB):wB},bB.size=function(TB){return arguments.length?(zB=!1,SB=+TB[0],CB=+TB[1],bB):zB?null:[SB,CB]},bB.nodeSize=function(TB){return arguments.length?(zB=!0,SB=+TB[0],CB=+TB[1],bB):zB?[SB,CB]:null},bB},cluster:function(){function bB(wB){var CB=0,SB;wB.eachAfter(function(AB){var OB=AB.children;OB?(AB.x=Qy(OB),AB.y=tb(OB)):(AB.x=SB?CB+=_B(AB,SB):0,AB.y=0,SB=AB)});var zB=rb(wB),TB=ob(wB),RB=zB.x-_B(zB,TB)/2,PB=TB.x+_B(TB,zB)/2;return wB.eachAfter(kB?function(AB){AB.x=(AB.x-wB.x)*xB,AB.y=(wB.y-AB.y)*vB}:function(AB){AB.x=(AB.x-RB)/(PB-RB)*xB,AB.y=(1-(wB.y?AB.y/wB.y:1))*vB})}var _B=Ky,xB=1,vB=1,kB=!1;return bB.separation=function(wB){return arguments.length?(_B=wB,bB):_B},bB.size=function(wB){return arguments.length?(kB=!1,xB=+wB[0],vB=+wB[1],bB):kB?null:[xB,vB]},bB.nodeSize=function(wB){return arguments.length?(kB=!0,xB=+wB[0],vB=+wB[1],bB):kB?[xB,vB]:null},bB}},QF=Ue(D_,Rl);QF.transform=function(bB,_B){_B.source&&_B.source.root||ke(this.constructor.name+' transform requires a backing tree data source.');var xB=this.layout(bB.method),vB=this.fields,kB=_B.source.root,wB=bB.as||vB;bB.field&&kB.sum(bB.field),bB.sort&&kB.sort(bB.sort),q_(xB,this.params,bB);try{this.value=xB(kB)}catch(SB){ke(SB)}return kB.each(function(SB){L_(SB,vB,wB)}),_B.reflow(bB.modified()).modifies(wB).modifies('leaf')},Ue(U_,D_),U_.prototype.layout=function(bB){var _B=bB||'tidy';return KF.hasOwnProperty(_B)?KF[_B]():void ke('Unrecognized Tree layout method: '+_B)},U_.prototype.params=['size','nodeSize','separation'],U_.prototype.fields=['x','y','depth','children'],Ue(F_,D_),F_.prototype.layout=function(){var bB=E_();return bB.ratio=function(_B){var xB=bB.tile();xB.ratio&&bB.tile(xB.ratio(_B))},bB.method=function(_B){ZF.hasOwnProperty(_B)?bB.tile(ZF[_B]):ke('Unrecognized Treemap layout method: '+_B)},bB},F_.prototype.params=['method','ratio','size','round','padding','paddingInner','paddingOuter','paddingTop','paddingRight','paddingBottom','paddingLeft'],F_.prototype.fields=['x0','y0','x1','y1','depth','children'],Ue(j_,D_),j_.prototype.layout=function(){function bB(SB){var CB=SB.height+1;return SB.x0=SB.y0=kB,SB.x1=xB,SB.y1=vB/CB,SB.eachBefore(_B(vB,CB)),wB&&SB.eachBefore(i_),SB}function _B(SB,CB){return function(zB){zB.children&&d_(zB,zB.x0,SB*(zB.depth+1)/CB,zB.x1,SB*(zB.depth+2)/CB);var TB=zB.x0,RB=zB.y0,PB=zB.x1-kB,AB=zB.y1-kB;PB<TB&&(TB=PB=(TB+PB)/2),AB<RB&&(RB=AB=(RB+AB)/2),zB.x0=TB,zB.y0=RB,zB.x1=PB,zB.y1=AB}}var xB=1,vB=1,kB=0,wB=!1;return bB.round=function(SB){return arguments.length?(wB=!!SB,bB):wB},bB.size=function(SB){return arguments.length?(xB=+SB[0],vB=+SB[1],bB):[xB,vB]},bB.padding=function(SB){return arguments.length?(kB=+SB,bB):kB},bB},j_.prototype.params=['size','round','padding'],j_.prototype.fields=F_.prototype.fields,Ue(I_,D_),I_.prototype.layout=function(){function bB(wB){return wB.x=xB/2,wB.y=vB/2,_B?wB.eachBefore(t_(_B)).eachAfter(n_(kB,0.5)).eachBefore(a_(1)):wB.eachBefore(t_(Qb)).eachAfter(n_(Zb,1)).eachAfter(n_(kB,wB.r/Math.min(xB,vB))).eachBefore(a_(Math.min(xB,vB)/(2*wB.r))),wB}var _B=null,xB=1,vB=1,kB=Zb;return bB.radius=function(wB){return arguments.length?(_B=Vb(wB),bB):_B},bB.size=function(wB){return arguments.length?(xB=+wB[0],vB=+wB[1],bB):[xB,vB]},bB.padding=function(wB){return arguments.length?(kB='function'===typeof wB?wB:Kb(+wB),bB):kB},bB},I_.prototype.params=['size','padding'],I_.prototype.fields=['x','y','r','depth','children'];Pl({type:'Nest',metadata:{treesource:!0},params:[{name:'keys',type:'field',array:!0},{name:'key',type:'field'}]},z_),Pl({type:'Stratify',metadata:{treesource:!0},params:[{name:'key',type:'field',required:!0},{name:'parentKey',type:'field',required:!0}]},R_),Pl({type:'TreeLinks',metadata:{tree:!0,generates:!0,changes:!0},params:[{name:'key',type:'field'}]},P_),Pl({type:'Pack',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'padding',type:'number',default:0},{name:'radius',type:'field',default:null},{name:'size',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:3,default:['x','y','r','depth','children']}]},I_),Pl({type:'Partition',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'padding',type:'number',default:0},{name:'round',type:'boolean',default:!1},{name:'size',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:4,default:['x0','y0','x1','y1','depth','children']}]},j_),Pl({type:'Tree',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'method',type:'enum',default:'tidy',values:['tidy','cluster']},{name:'size',type:'number',array:!0,length:2},{name:'nodeSize',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:4,default:['x','y','depth','children']}]},U_),Pl({type:'Treemap',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'method',type:'enum',default:'squarify',values:['squarify','resquarify','binary','dice','slice','slicedice']},{name:'padding',type:'number',default:0},{name:'paddingInner',type:'number',default:0},{name:'paddingOuter',type:'number',default:0},{name:'paddingTop',type:'number',default:0},{name:'paddingRight',type:'number',default:0},{name:'paddingBottom',type:'number',default:0},{name:'paddingLeft',type:'number',default:0},{name:'ratio',type:'number',default:1.618033988749895},{name:'round',type:'boolean',default:!1},{name:'size',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:4,default:['x0','y0','x1','y1','depth','children']}]},F_),Y_.prototype={constructor:Y_,insert:function(_B,xB){var vB,kB,wB;if(_B){if(xB.P=_B,xB.N=_B.N,_B.N&&(_B.N.P=xB),_B.N=xB,_B.R){for(_B=_B.R;_B.L;)_B=_B.L;_B.L=xB}else _B.R=xB;vB=_B}else this._?(_B=X_(this._),xB.P=null,xB.N=_B,_B.P=_B.L=xB,vB=_B):(xB.P=xB.N=null,this._=xB,vB=null);for(xB.L=xB.R=null,xB.U=vB,xB.C=!0,_B=xB;vB&&vB.C;)kB=vB.U,vB===kB.L?(wB=kB.R,wB&&wB.C?(vB.C=wB.C=!1,kB.C=!0,_B=kB):(_B===vB.R&&(W_(this,vB),_B=vB,vB=_B.U),vB.C=!1,kB.C=!0,H_(this,kB))):(wB=kB.L,wB&&wB.C?(vB.C=wB.C=!1,kB.C=!0,_B=kB):(_B===vB.L&&(H_(this,vB),_B=vB,vB=_B.U),vB.C=!1,kB.C=!0,W_(this,kB))),vB=_B.U;this._.C=!1},remove:function(_B){_B.N&&(_B.N.P=_B.P),_B.P&&(_B.P.N=_B.N),_B.N=_B.P=null;var xB=_B.U,kB=_B.L,wB=_B.R,vB,SB,CB;if(SB=kB?wB?X_(wB):kB:wB,xB?xB.L===_B?xB.L=SB:xB.R=SB:this._=SB,kB&&wB?(CB=SB.C,SB.C=_B.C,SB.L=kB,kB.U=SB,SB===wB?(SB.U=xB,xB=SB,_B=SB.R):(xB=SB.U,SB.U=_B.U,_B=SB.R,xB.L=_B,SB.R=wB,wB.U=SB)):(CB=_B.C,_B=SB),_B&&(_B.U=xB),!CB){if(_B&&_B.C)return void(_B.C=!1);do{if(_B===this._)break;if(_B===xB.L){if(vB=xB.R,vB.C&&(vB.C=!1,xB.C=!0,W_(this,xB),vB=xB.R),vB.L&&vB.L.C||vB.R&&vB.R.C){vB.R&&vB.R.C||(vB.L.C=!1,vB.C=!0,H_(this,vB),vB=xB.R),vB.C=xB.C,xB.C=vB.R.C=!1,W_(this,xB),_B=this._;break}}else if(vB=xB.L,vB.C&&(vB.C=!1,xB.C=!0,H_(this,xB),vB=xB.L),vB.L&&vB.L.C||vB.R&&vB.R.C){vB.L&&vB.L.C||(vB.R.C=!1,vB.C=!0,W_(this,vB),vB=xB.L),vB.C=xB.C,xB.C=vB.L.C=!1,H_(this,xB),_B=this._;break}vB.C=!0,_B=xB,xB=xB.U}while(!_B.C);_B&&(_B.C=!1)}}};var lj=[],fj,cj=[],uj=1e-6,gj=1e-12,mj,hj,bj,_j;Ux.prototype={constructor:Ux,polygons:function(){var _B=this.edges;return this.cells.map(function(xB){var vB=xB.halfedges.map(function(kB){return yx(xB,_B[kB])});return vB.data=xB.site.data,vB})},triangles:function(){var bB=[],_B=this.edges;return this.cells.forEach(function(xB,vB){if(CB=(wB=xB.halfedges).length)for(var kB=xB.site,SB=-1,TB=_B[wB[CB-1]],RB=TB.left===kB?TB.right:TB.left,wB,CB,zB;++SB<CB;)zB=RB,TB=_B[wB[SB]],RB=TB.left===kB?TB.right:TB.left,zB&&RB&&vB<zB.index&&vB<RB.index&&0>qx(kB,zB,RB)&&bB.push([kB.data,zB.data,RB.data])}),bB},links:function(){return this.edges.filter(function(_B){return _B.right}).map(function(_B){return{source:_B.left.data,target:_B.right.data}})},find:function(_B,xB,vB){for(var kB=this,SB=kB._found||0,CB=kB.cells.length,wB,zB;!(zB=kB.cells[SB]);)if(++SB>=CB)return null;var TB=_B-zB.site[0],RB=xB-zB.site[1],PB=TB*TB+RB*RB;do zB=kB.cells[wB=SB],SB=null,zB.halfedges.forEach(function(AB){var OB=kB.edges[AB],MB=OB.left;if(MB!==zB.site&&MB||(MB=OB.right)){var DB=_B-MB[0],qB=xB-MB[1],LB=DB*DB+qB*qB;LB<PB&&(PB=LB,SB=MB.index)}});while(null!==SB);return kB._found=wB,null==vB||PB<=vB*vB?zB.site:null}};var vj=Ue(jx,Rl),kj=[[-100000,-100000],[100000,100000]];vj.transform=function(bB,_B){var xB=bB.as||'path',vB=_B.source,kB,wB,SB,CB;for(kB=Fx().x(bB.x).y(bB.y),bB.size?kB.size(bB.size):kB.extent(bB.extent||kj),this.value=kB=kB(vB),wB=kB.polygons(),(SB=0,CB=vB.length);SB<CB;++SB)vB[SB][xB]=wB[SB]?'M'+wB[SB].join('L')+'Z':null;return _B.reflow(bB.modified()).modifies(xB)};Pl({type:'Voronoi',metadata:{modifies:!0},params:[{name:'x',type:'field',required:!0},{name:'y',type:'field',required:!0},{name:'size',type:'number',array:!0,length:2},{name:'extent',type:'array',array:!0,length:2,default:[[-100000,-100000],[100000,100000]],content:{type:'number',array:!0,length:2}},{name:'as',type:'string',default:'path'}]},jx);var Ej=Math.PI/180,Sj=64,Cj=2048,zj={archimedean:Gx,rectangular:function(bB){var _B=4,xB=_B*bB[0]/bB[1],vB=0,kB=0;return function(wB){var SB=0>wB?-1:1;switch(3&Math.sqrt(1+4*SB*wB)-SB){case 0:vB+=xB;break;case 1:kB+=_B;break;case 2:vB-=xB;break;default:kB-=_B;}return[vB,kB]}}},Tj=['x','y','font','fontSize','fontStyle','fontWeight','angle'],Rj=['text','font','rotate','fontSize','fontStyle','fontWeight'],Pj=Ue(Jx,Rl);Pj.transform=function(bB,_B){var vB=bB.modified();if(vB||_B.changed(_B.ADD_REM)||Rj.some(function(FB){var jB=bB[FB];return Oe(jB)&&_B.modified(jB.fields)})){var kB=this.value,wB=bB.as||Tj,SB=bB.fontSize||14,CB;if(Oe(SB)?CB=bB.fontSizeRange:SB=Me(SB),CB){var zB=SB,TB=cu('sqrt')().domain(Zx(zB,_B)).range(CB);SB=function(jB){return TB(zB(jB))}}var RB=_B.materialize(_B.SOURCE).source;RB.forEach(function(FB){FB[wB[0]]=NaN,FB[wB[1]]=NaN,FB[wB[3]]=0});for(var PB=kB.words(RB).text(bB.text).size(bB.size||[500,500]).padding(bB.padding||1).spiral(bB.spiral||'archimedean').rotate(bB.rotate||0).font(bB.font||'sans-serif').fontStyle(bB.fontStyle||'normal').fontWeight(bB.fontWeight||'normal').fontSize(SB).layout(),AB=kB.size(),OB=AB[0]>>1,MB=AB[1]>>1,DB=0,qB=PB.length,LB,UB;DB<qB;++DB)LB=PB[DB],UB=LB.datum,UB[wB[0]]=LB.x+OB,UB[wB[1]]=LB.y+MB,UB[wB[2]]=LB.font,UB[wB[3]]=LB.size,UB[wB[4]]=LB.style,UB[wB[5]]=LB.weight,UB[wB[6]]=LB.rotate;return _B.reflow(vB).modifies(wB)}};Pl({type:'Wordcloud',metadata:{modifies:!0},params:[{name:'size',type:'number',array:!0,length:2},{name:'font',type:'string',expr:!0,default:'sans-serif'},{name:'fontStyle',type:'string',expr:!0,default:'normal'},{name:'fontWeight',type:'string',expr:!0,default:'normal'},{name:'fontSize',type:'number',expr:!0,default:14},{name:'fontSizeRange',type:'number',array:!0,null:!0,default:[10,50]},{name:'rotate',type:'number',expr:!0,default:0},{name:'text',type:'field'},{name:'spiral',type:'string',values:['archimedean','rectangular']},{name:'padding',type:'number',expr:!0},{name:'as',type:'string',array:!0,length:7,default:['x','y','font','fontSize','fontStyle','fontWeight','angle']}]},Jx);var Oj=Ue(fv,Rl);Oj.transform=function(bB,_B){if(!this._dims)return this.init(bB,_B);var xB=bB.modified('fields')||bB.fields.some(function(vB){return _B.modified(vB.fields)});return xB?this.reinit(bB,_B):this.eval(bB,_B)},Oj.init=function(bB,_B){for(var xB=bB.fields,vB=bB.query,kB=this._indices={},wB=this._dims=[],SB=vB.length,CB=0,zB,TB;CB<SB;++CB)zB=xB[CB].fname,TB=kB[zB]||(kB[zB]=ov()),wB.push(dv(TB,CB,vB[CB]));return this.eval(bB,_B)},Oj.reinit=function(bB,_B){var xB=_B.materialize().fork(),vB=bB.fields,kB=bB.query,wB=this._indices,SB=this._dims,CB=this.value,zB=CB.curr(),TB=CB.prev(),RB=CB.all(),PB=xB.rem=xB.add,AB=xB.mod,OB=kB.length,MB={},DB,qB,LB,UB,FB,jB,IB,$B,NB;if(TB.set(zB),_B.rem.length&&(FB=this.remove(bB,_B,xB)),_B.add.length&&CB.add(_B.add),_B.mod.length)for(jB={},UB=_B.mod,IB=0,$B=UB.length;IB<$B;++IB)jB[UB[IB]._index]=1;for(IB=0;IB<OB;++IB)NB=vB[IB],(!SB[IB]||bB.modified('fields',IB)||_B.modified(NB.fields))&&(LB=NB.fname,!(DB=MB[LB])&&(wB[LB]=qB=ov(),MB[LB]=DB=qB.insert(NB,_B.source,0)),SB[IB]=dv(qB,IB,kB[IB]).onAdd(DB,zB));for(IB=0,$B=CB.data().length;IB<$B;++IB)if(FB[IB])continue;else TB[IB]===zB[IB]?jB[IB]&&zB[IB]!==RB&&AB.push(IB):PB.push(IB);return CB.mask=(1<<OB)-1,xB},Oj.eval=function(bB,_B){var xB=_B.materialize().fork(),vB=this._dims.length,kB=0;return _B.rem.length&&(this.remove(bB,_B,xB),kB|=(1<<vB)-1),bB.modified('query')&&!bB.modified('fields')&&(kB|=this.update(bB,_B,xB)),_B.add.length&&(this.insert(bB,_B,xB),kB|=(1<<vB)-1),_B.mod.length&&(this.modify(_B,xB),kB|=(1<<vB)-1),this.value.mask=kB,xB},Oj.insert=function(bB,_B,xB){var vB=_B.add,kB=this.value,wB=this._dims,SB=this._indices,CB=bB.fields,zB={},TB=xB.add,RB=kB.size(),PB=RB+vB.length,AB=wB.length,OB,MB,DB;kB.resize(PB,AB),kB.add(vB);var qB=kB.curr(),LB=kB.prev(),UB=kB.all();for(OB=0;OB<AB;++OB)MB=CB[OB].fname,DB=zB[MB]||(zB[MB]=SB[MB].insert(CB[OB],vB,RB)),wB[OB].onAdd(DB,qB);for(;RB<PB;++RB)LB[RB]=UB,qB[RB]!==UB&&TB.push(RB)},Oj.modify=function(bB,_B){var xB=_B.mod,vB=this.value,kB=vB.curr(),wB=vB.all(),SB=bB.mod,CB,zB,TB;for(CB=0,zB=SB.length;CB<zB;++CB)TB=SB[CB]._index,kB[TB]!==wB&&xB.push(TB)},Oj.remove=function(bB,_B,xB){var vB=this._indices,kB=this.value,wB=kB.curr(),SB=kB.prev(),CB=kB.all(),zB={},TB=xB.rem,RB=_B.rem,PB,AB,OB,MB;for(PB=0,AB=RB.length;PB<AB;++PB)OB=RB[PB]._index,zB[OB]=1,SB[OB]=MB=wB[OB],wB[OB]=CB,MB!==CB&&TB.push(OB);for(OB in vB)vB[OB].remove(AB,zB);return this.reindex(_B,AB,zB),zB},Oj.reindex=function(bB,_B,xB){var vB=this._indices,kB=this.value;bB.runAfter(function(){var wB=kB.remove(_B,xB);for(var SB in vB)vB[SB].reindex(wB)})},Oj.update=function(bB,_B,xB){var vB=this._dims,kB=bB.query,wB=_B.stamp,SB=vB.length,CB=0,zB,TB;for(xB.filters=0,TB=0;TB<SB;++TB)bB.modified('query',TB)&&(zB=TB,++CB);if(1===CB)CB=vB[zB].one,this.incrementOne(vB[zB],kB[zB],xB.add,xB.rem);else for(TB=0,CB=0;TB<SB;++TB)bB.modified('query',TB)&&(CB|=vB[TB].one,this.incrementAll(vB[TB],kB[TB],wB,xB.add),xB.rem=xB.add);return CB},Oj.incrementAll=function(bB,_B,xB,vB){var kB=this.value,wB=kB.seen(),SB=kB.curr(),CB=kB.prev(),zB=bB.index(),TB=bB.bisect(bB.range),RB=bB.bisect(_B),PB=RB[0],AB=RB[1],OB=TB[0],MB=TB[1],DB=bB.one,qB,LB,UB;if(PB<OB)for(qB=PB,LB=Math.min(OB,AB);qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;else if(PB>OB)for(qB=OB,LB=Math.min(PB,MB);qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;if(AB>MB)for(qB=Math.max(PB,MB),LB=AB;qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;else if(AB<MB)for(qB=Math.max(OB,AB),LB=MB;qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;bB.range=_B.slice()},Oj.incrementOne=function(bB,_B,xB,vB){var kB=this.value,wB=kB.curr(),SB=bB.index(),CB=bB.bisect(bB.range),zB=bB.bisect(_B),TB=zB[0],RB=zB[1],PB=CB[0],AB=CB[1],OB=bB.one,MB,DB,qB;if(TB<PB)for(MB=TB,DB=Math.min(PB,RB);MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,xB.push(qB);else if(TB>PB)for(MB=PB,DB=Math.min(TB,AB);MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,vB.push(qB);if(RB>AB)for(MB=Math.max(TB,AB),DB=RB;MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,xB.push(qB);else if(RB<AB)for(MB=Math.max(PB,RB),DB=AB;MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,vB.push(qB);bB.range=_B.slice()};var Dj=Ue(cv,Rl);Dj.transform=function(bB,_B){var xB=~(bB.ignore||0),vB=bB.filter,kB=vB.mask;if(0===(kB&xB))return _B.StopPropagation;var wB=_B.fork(_B.ALL),SB=vB.data(),CB=vB.curr(),zB=vB.prev(),TB=function(PB){return CB[PB]&xB?null:SB[PB]};return wB.filter(wB.MOD,TB),kB&kB-1?(wB.filter(wB.ADD,function(RB){var PB=CB[RB]&xB,AB=!PB&&PB^zB[RB]&xB;return AB?SB[RB]:null}),wB.filter(wB.REM,function(RB){var PB=CB[RB]&xB,AB=PB&&!(PB^(PB^zB[RB]&xB));return AB?SB[RB]:null})):(wB.filter(wB.ADD,TB),wB.filter(wB.REM,function(RB){return(CB[RB]&xB)===kB?SB[RB]:null})),wB.filter(wB.SOURCE,function(RB){return TB(RB._index)})};Pl({type:'CrossFilter',metadata:{},params:[{name:'fields',type:'field',array:!0,required:!0},{name:'query',type:'array',array:!0,required:!0,content:{type:'number',array:!0,length:2}}]},fv),Pl({type:'ResolveFilter',metadata:{},params:[{name:'ignore',type:'number',required:!0,description:'A bit mask indicating which filters to ignore.'},{name:'filter',type:'object',required:!0,description:'Per-tuple filter bitmaps from a CrossFilter transform.'}]},cv);var Lj=Ue(uv,Rl),Uj=new Pa;Lj.transform=function(bB,_B){var xB=bB.mark,vB=xB.marktype,kB=SP[vB],wB=kB.bound,SB=xB.clip,CB=xB.bounds,zB;return xB.bounds_prev.clear().union(CB),kB.nested?(CB=pv(xB,wB),xB.items.forEach(function(TB){TB.bounds_prev.clear().union(TB.bounds),TB.bounds.clear().union(CB)})):'group'===vB||bB.modified()?(CB.clear(),xB.items.forEach(function(TB){CB.union(pv(TB,wB))})):(zB=_B.changed(_B.REM),_B.visit(_B.ADD,function(TB){CB.union(pv(TB,wB))}),_B.visit(_B.MOD,function(TB){zB=zB||CB.alignsWith(TB.bounds),CB.union(pv(TB,wB))}),zB&&!SB&&(CB.clear(),xB.items.forEach(function(TB){CB.union(TB.bounds)}))),SB&&CB.intersect(Uj.set(0,0,xB.group.width,xB.group.height)),_B.modifies('bounds')};var Fj=Ue(gv,Rl);Fj.transform=function(bB,_B){var xB=this.value;xB||(xB=_B.dataflow.scenegraph().mark(bB.markdef,mv(bB),bB.index),xB.group.context=bB.context,!bB.context.group&&(bB.context.group=xB.group),xB.source=this,this.value=xB);var vB='group'===xB.marktype?Ma:Oa;return _B.visit(_B.ADD,function(kB){vB.call(kB,xB)}),xB.items=_B.source,_B};var jj=Ue(hv,Rl);jj.transform=function(bB,_B){var xB=_B.dataflow;if(_B.changed(_B.REM)&&xB.enqueue(_B.materialize(_B.REM).rem),_B.changed(_B.ADD)&&xB.enqueue(_B.materialize(_B.ADD).add),_B.changed(_B.MOD)&&xB.enqueue(_B.materialize(_B.MOD).mod),_B.fields&&_B.fields.zindex){var vB=_B.source&&_B.source[0];vB&&(vB.mark.zdirty=!0)}};var Ij='axis',$j='legend',Nj='row-header',Bj='row-footer',Yj='row-title',Gj='column-header',Wj='column-footer',Hj='column-title',Xj='fit',Vj='pad',Jj='none',Zj='axis',Kj='title',Qj='frame',eI='legend',tI='scope',nI='row-header',aI='row-footer',iI='column-header',dI='column-footer',rI=Ue(Tv,Rl);rI.transform=function(bB,_B){var xB=_B.dataflow;return bB.mark.items.forEach(function(vB){bB.layout&&Sv(xB,vB,bB.layout),Rv(xB,vB,bB)}),_B};var oI='default',lI='view',fI='vega-bind',cI='vega-bind-name',uI='vega-bind-radio',pI='vega-option-',gI='outer',mI=['value','update','react','bind'];zk.prototype.visit=function(bB){var _B=this,xB,vB,kB;if(bB(_B))return 1;for(xB=Tk(_B),vB=0,kB=xB.length;vB<kB;++vB)if(xB[vB].visit(bB))return 1};var hI,yI,bI,_I,xI=1,vI=2,kI=3,wI=4,EI=5,SI=6,CI=7,zI=8,TI='ArrayExpression',RI='BinaryExpression',PI='CallExpression',AI='ConditionalExpression',OI='Identifier',MI='Literal',DI='LogicalExpression',qI='MemberExpression',LI='ObjectExpression',UI='Property',FI='UnaryExpression',jI='Unexpected token %0',II='Unexpected number',$I='Unexpected string',NI='Unexpected identifier',BI='Unexpected reserved word',YI='Unexpected end of input',GI='Invalid regular expression',WI='Invalid regular expression: missing /',HI='Octal literals are not allowed in strict mode.',XI='Duplicate data property in object literal not allowed in strict mode',VI='ILLEGAL',JI='Disabled.',ZI=/[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]/,KI=/[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]/,QI={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},e$={if:1,this:1},t$={NaN:'NaN',E:'Math.E',LN2:'Math.LN2',LN10:'Math.LN10',LOG2E:'Math.LOG2E',LOG10E:'Math.LOG10E',PI:'Math.PI',SQRT1_2:'Math.SQRT1_2',SQRT2:'Math.SQRT2'},n$=$w(IM),a$=$w(tR),i$=$w(QT),d$=$w(nR),r$=$w(eR),o$=new Date(2e3,0,1),l$='undefined'!==typeof window&&window||null,s$='Literal',f$='Identifier',u$='%',p$=':',g$=bE('area'),m$=bE('bounds'),h$=bE('centroid'),y$={},b$='union',_$='unit',x$='others',v$={isArray:Qz,isBoolean:Fe,isDate:je,isNumber:Ie,isObject:Ee,isRegExp:$e,isString:Se,toBoolean:He,toDate:Xe,toNumber:Ve,toString:Je,pad:Ge,truncate:Ke,rgb:Xs,lab:nf,hcl:uf,hsl:Ks,sequence:J,format:n$,utcFormat:a$,utcParse:d$,timeFormat:i$,timeParse:r$,monthFormat:function(bB){return Nw(bB,1,'%B')},monthAbbrevFormat:function(bB){return Nw(bB,1,'%b')},dayFormat:function(bB){return Nw(0,2+bB,'%A')},dayAbbrevFormat:function(bB){return Nw(0,2+bB,'%a')},quarter:function(bB){return 1+~~(new Date(bB).getMonth()/3)},utcquarter:function(bB){return 1+~~(new Date(bB).getUTCMonth()/3)},warn:function(){return Vw(this.context.dataflow,'warn',arguments)},info:function(){return Vw(this.context.dataflow,'info',arguments)},debug:function(){return Vw(this.context.dataflow,'debug',arguments)},inScope:function(bB){var _B=this.context.group,xB=!1;if(_B)for(;bB;){if(bB===_B){xB=!0;break}bB=bB.mark.group}return xB},clampRange:function(bB,_B,xB){var vB=bB[0],kB=bB[1],wB;return kB<vB&&(wB=kB,kB=vB,vB=wB),wB=kB-vB,wB>=xB-_B?[_B,xB]:[Math.min(Math.max(vB,_B),xB-wB),Math.min(Math.max(kB,wB),xB)]},pinchDistance:function(){return'Math.sqrt(Math.pow(event.touches[0].clientX - event.touches[1].clientX, 2) + Math.pow(event.touches[0].clientY - event.touches[1].clientY, 2))'},pinchAngle:function(){return'Math.atan2(event.touches[1].clientY - event.touches[0].clientY,event.touches[1].clientX - event.touches[0].clientX)'},open:function(bB,_B){var xB=this.context.dataflow;l$&&l$.open?xB.loader().sanitize(bB,{context:'open',name:_B}).then(function(vB){l$.open(vB,_B)}).catch(function(vB){xB.warn('Open url failed: '+vB)}):xB.warn('Open function can only be invoked in a browser.')},screen:function(){return l$?l$.screen:{}},windowsize:function(){return l$?[l$.innerWidth,l$.innerHeight]:[void 0,void 0]},span:function(bB){return bB[bB.length-1]-bB[0]||0},bandspace:function(bB,_B,xB){return js(bB||0,_B||0,xB||0)},inrange:zE,encode:function(bB,_B,xB){if(bB){var vB=this.context.dataflow,kB=bB.mark.source;vB.pulse(kB,vB.changeset().encode(bB,_B))}return xB===void 0?bB:xB},modify:function(bB,_B,xB,vB,kB,wB){var SB=this.context.dataflow,CB=this.context.data[bB],zB=CB.input,TB=CB.changes,RB=SB.stamp(),PB,AB;if(!1===SB._trigger||!(zB.value.length||_B||vB))return 0;if((!TB||TB.stamp<RB)&&(CB.changes=TB=SB.changeset(),TB.stamp=RB,SB.runAfter(function(){CB.modified=!0,SB.pulse(zB,TB).run()})),xB&&(PB=!0===xB?dT:Qz(xB)||null!=xB._id?xB:RE(xB),TB.remove(PB)),_B&&TB.insert(_B),vB&&(PB=RE(vB),zB.value.some(PB)?TB.remove(PB):TB.insert(vB)),kB)for(AB in wB)TB.modify(kB,AB,wB[AB]);return 1}},k$=['view','item','group','xy','x','y'],E$='this.',S$={};IE('bandwidth',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB&&xB.bandwidth?xB.bandwidth():0},sE),IE('copy',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB?xB.copy():void 0},sE),IE('domain',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB?xB.domain():[]},sE),IE('range',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB&&xB.range?xB.range():[]},sE),IE('invert',function(bB,_B,xB){var vB=oE(bB,(xB||this).context);return vB?Qz(_B)?(vB.invertRange||vB.invert)(_B):(vB.invert||vB.invertExtent)(_B):void 0},sE),IE('scale',function(bB,_B,xB){var vB=oE(bB,(xB||this).context);return vB?vB(_B):void 0},sE),IE('gradient',function(bB,_B,xB,vB){var kB=Aa(_B,xB),wB=bB.domain(),SB=wB[0],CB=wB[wB.length-1],zB=xu(bB,SB,CB);bB.ticks&&(wB=bB.ticks(+vB||15),SB!==wB[0]&&wB.unshift(SB),CB!==wB[wB.length-1]&&wB.push(CB));for(var TB=0,RB=wB.length;TB<RB;++TB)kB.stop(zB(wB[TB]),bB(wB[TB]));return kB},sE),IE('geoArea',g$,sE),IE('geoBounds',m$,sE),IE('geoCentroid',h$,sE),IE('indata',function(bB,_B,xB){var vB=this.context.data[bB]['index:'+_B],kB=vB?vB.value.get(xB):void 0;return kB?kB.count:kB},function(bB,_B,xB,vB){_B[0].type!==s$&&ke('First argument to indata must be a string literal.'),_B[1].type!==s$&&ke('Second argument to indata must be a string literal.');var kB=_B[0].value,wB=_B[1].value,SB='@'+wB;vB.hasOwnProperty(SB)||(vB[SB]=xB.getData(kB).indataRef(xB,wB))}),IE('data',_E,xE),IE('vlPoint',function(bB,_B,xB,vB,kB){return ME.call(this,bB,_B,xB,vB,kB,AE)},xE),IE('vlInterval',function(bB,_B,xB,vB,kB){return ME.call(this,bB,_B,xB,vB,kB,OE)},xE),IE('vlPointDomain',function(bB,_B,xB,vB){for(var kB=this.context.data[bB],wB=kB?kB.values.value:[],SB={},CB=0,zB={},TB=[],RB=0,PB=wB.length,AB,OB,MB,DB;RB<PB;++RB)AB=wB[RB],OB=AB.unit,DB=AB.values[0],SB[OB]||(SB[OB]=++CB),(_B&&AB.encodings[0]===_B||xB&&AB.fields[0]===xB)&&(!(MB=zB[DB])&&(zB[DB]=MB={value:DB,units:{},count:0}),!MB.units[OB]&&(MB.units[OB]=++MB.count));for(DB in zB)(vB===b$||(MB=zB[DB]).count===CB)&&TB.push(MB.value);return TB.length?TB:void 0},xE),IE('vlIntervalDomain',function(bB,_B,xB,vB){for(var kB=vB===b$?FE:jE,wB=this.context.data[bB],SB=wB?wB.values.value:[],CB=0,zB=SB.length,TB,RB,PB,AB,OB,MB,DB,qB;CB<zB;++CB)for(TB=SB[CB].intervals,PB=0,RB=TB.length;PB<RB;++PB)AB=TB[PB],(_B&&AB.encoding===_B||xB&&AB.field===xB)&&(OB=AB.extent,DB=OB[0],qB=OB[1],DB>qB&&(qB=OB[1],DB=OB[0]),MB=MB?kB(MB,DB,qB):[DB,qB]);return MB&&MB.length&&+MB[0]!==+MB[1]?MB:void 0},xE),IE('treePath',function(bB,_B,xB){var vB=EE(bB,this),kB=vB[_B],wB=vB[xB];return kB&&wB?kB.path(wB).map(wE):void 0},xE),IE('treeAncestors',function(bB,_B){var xB=EE(bB,this)[_B];return xB?xB.ancestors().map(wE):void 0},xE);var C$={blacklist:['_'],whitelist:['datum','event','item'],fieldvar:'datum',globalvar:function(_B){return'_['+Ce('$'+_B)+']'},functions:function(bB){var _B=jw(bB);for(var xB in k$.forEach(function(vB){_B[vB]='event.vega.'+vB}),v$)_B[xB]=E$+xB;return _B},constants:t$,visitors:S$},z$=function(bB){function _B(MB){if(Se(MB))return MB;var DB=OB[MB.type];return null==DB&&ke('Unsupported type: '+MB.type),DB(MB)}function xB(MB){var DB={code:_B(MB),globals:Object.keys(TB),fields:Object.keys(RB)};return TB={},RB={},DB}bB=bB||{};var vB=bB.whitelist?Ze(bB.whitelist):{},kB=bB.blacklist?Ze(bB.blacklist):{},wB=bB.constants||t$,SB=(bB.functions||jw)(_B),CB=bB.globalvar,zB=bB.fieldvar,TB={},RB={},PB=0,AB=Oe(CB)?CB:function(MB){return CB+'["'+MB+'"]'},OB={Literal:function(DB){return DB.raw},Identifier:function(DB){var qB=DB.name;return 0<PB?qB:kB.hasOwnProperty(qB)?ke('Illegal identifier: '+qB):wB.hasOwnProperty(qB)?wB[qB]:vB.hasOwnProperty(qB)?qB:(TB[qB]=1,AB(qB))},MemberExpression:function(DB){var qB=!DB.computed,LB=_B(DB.object);qB&&(PB+=1);var UB=_B(DB.property);return LB===zB&&(RB[UB]=1),qB&&(PB-=1),LB+(qB?'.'+UB:'['+UB+']')},CallExpression:function(DB){'Identifier'!==DB.callee.type&&ke('Illegal callee type: '+DB.callee.type);var qB=DB.callee.name,LB=DB.arguments,UB=SB.hasOwnProperty(qB)&&SB[qB];return UB||ke('Unrecognized function: '+qB),Oe(UB)?UB(LB):UB+'('+LB.map(_B).join(',')+')'},ArrayExpression:function(DB){return'['+DB.elements.map(_B).join(',')+']'},BinaryExpression:function(DB){return'('+_B(DB.left)+DB.operator+_B(DB.right)+')'},UnaryExpression:function(DB){return'('+DB.operator+_B(DB.argument)+')'},ConditionalExpression:function(DB){return'('+_B(DB.test)+'?'+_B(DB.consequent)+':'+_B(DB.alternate)+')'},LogicalExpression:function(DB){return'('+_B(DB.left)+DB.operator+_B(DB.right)+')'},ObjectExpression:function(DB){return'{'+DB.properties.map(_B).join(',')+'}'},Property:function(DB){PB+=1;var qB=_B(DB.key);return PB-=1,qB+':'+_B(DB.value)}};return xB.functions=SB,xB.constants=wB,xB}(C$),T$='$',R$='view',P$='scope',A$='view',O$='[',M$=']',D$='{',q$='}',L$=':',U$=',',F$='@',j$='>',I$=/[\[\]\{\}]/,$$,N$,B$={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Y$='var datum=event.item&&event.item.datum;',G$=Ze(['rule']),W$=Ze(['group','image','rect']),H$='mark',X$='frame',V$='scope',J$='axis',Z$='axis-domain',K$='axis-grid',Q$='axis-label',eN='axis-tick',tN='axis-title',nN='legend',aN='legend-entry',iN='legend-gradient',dN='legend-label',rN='legend-symbol',oN='legend-title',lN='title',sN={name:1,interactive:1},fN='group',cN='rect',uN='rule',pN='symbol',gN='text',mN='top',hN='left',yN='right',bN='bottom',_N='index',xN='label',vN='offset',kN='perc',wN='size',EN='total',SN='value',CN=['shape','size','fill','stroke','strokeDash','opacity'],zN='datum.'+kN+'<=0?"left":datum.'+kN+'>=1?"right":"center"',TN=BS('key'),PN='descending',AN=VS('Aggregate'),ON=VS('AxisTicks'),MN=VS('Bound'),DN=VS('Collect'),qN=VS('Compare'),LN=VS('DataJoin'),UN=VS('Encode'),FN=VS('Facet'),jN=VS('Field'),IN=VS('Key'),$N=VS('LegendEntries'),NN=VS('Mark'),BN=VS('MultiExtent'),YN=VS('MultiValues'),GN=VS('Params'),WN=VS('PreFacet'),HN=VS('Projection'),XN=VS('Proxy'),VN=VS('Relay'),JN=VS('Render'),ZN=VS('Scale'),KN=VS('Sieve'),QN=VS('SortItems'),eB=VS('ViewLayout'),tB=VS('Values');fC.fromEntries=function(bB,_B){var xB=_B.length,vB=1,kB=_B[0],wB=_B[xB-1],SB=_B[xB-2],CB=null;for(bB.add(_B[0]);vB<xB;++vB)_B[vB].params.pulse=NS(_B[vB-1]),bB.add(_B[vB]),'Aggregate'===_B[vB].type&&(CB=_B[vB]);return new fC(bB,kB,SB,wB,CB)};var nB=fC.prototype;nB.countsRef=function(bB,_B,xB){var vB=this,kB=vB.counts||(vB.counts={}),wB=cC(_B),SB,CB,zB;return null!=wB&&(bB=vB.scope,SB=kB[wB]),SB?xB&&xB.field&&uC(bB,SB.agg.params,xB):(zB={groupby:bB.fieldRef(_B,'key'),pulse:NS(vB.output)},xB&&xB.field&&uC(bB,zB,xB),CB=bB.add(AN(zB)),SB=bB.add(DN({pulse:NS(CB)})),SB={agg:CB,ref:NS(SB)},null!=wB&&(kB[wB]=SB)),SB.ref},nB.tuplesRef=function(){return NS(this.values)},nB.extentRef=function(bB,_B){return pC(bB,this,'extent','Extent',_B,!1)},nB.domainRef=function(bB,_B){return pC(bB,this,'domain','Values',_B,!1)},nB.valuesRef=function(bB,_B,xB){return pC(bB,this,'vals','Values',_B,xB||!0)},nB.lookupRef=function(bB,_B){return pC(bB,this,'lookup','TupleIndex',_B,!1)},nB.indataRef=function(bB,_B){return pC(bB,this,'indata','TupleIndex',_B,!0,!0)};var aB=0,iB=['identity','ordinal','band','point','bin-linear','bin-ordinal','linear','pow','sqrt','log','sequential','time','utc','quantize','quantile','threshold'],dB=Ze(iB),rB=Ze(iB.slice(1,6)),oB=Ze(['width','height','padding']),lB=ez.prototype=nz.prototype;lB.fork=function(){return new nz(this)},lB.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings}},lB.id=function(){return(this._subid?this._subid+':':0)+this._id++},lB.add=function(bB){return this.operators.push(bB),bB.id=this.id(),bB.refs&&(bB.refs.forEach(function(_B){_B.$ref=bB.id}),bB.refs=null),bB},lB.proxy=function(bB){var _B=bB instanceof jS?NS(bB):bB;return this.add(XN({value:_B}))},lB.addStream=function(bB){return this.streams.push(bB),bB.id=this.id(),bB},lB.addUpdate=function(bB){return this.updates.push(bB),bB},lB.finish=function(){function bB(kB,wB,SB){var CB,zB;kB&&(CB=kB.data||(kB.data={}),zB=CB[wB]||(CB[wB]=[]),zB.push(SB))}var _B,xB;for(_B in this.root&&(this.root.root=!0),this.signals)this.signals[_B].signal=_B;for(_B in this.scales)this.scales[_B].scale=_B;for(_B in this.data)for(var vB in xB=this.data[_B],bB(xB.input,_B,'input'),bB(xB.output,_B,'output'),bB(xB.values,_B,'values'),xB.index)bB(xB.index[vB],_B,'index:'+vB);return this},lB.pushState=function(bB,_B,xB){this._encode.push(NS(this.add(KN({pulse:bB})))),this._parent.push(_B),this._lookup.push(xB?NS(this.proxy(xB)):null),this._markpath.push(-1)},lB.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},lB.parent=function(){return We(this._parent)},lB.encode=function(){return We(this._encode)},lB.lookup=function(){return We(this._lookup)},lB.markpath=function(){var bB=this._markpath;return++bB[bB.length-1]},lB.fieldRef=function(bB,_B){if(Se(bB))return BS(bB,_B);bB.signal||ke('Unsupported field reference: '+Ce(bB));var xB=bB.signal,vB=this.field[xB],kB;return vB||(kB={name:this.signalRef(xB)},_B&&(kB.as=_B),this.field[xB]=vB=NS(this.add(jN(kB)))),vB},lB.compareRef=function(bB){function _B(SB){return XS(SB)?(vB=!0,NS(xB[SB.signal])):SB}var xB=this.signals,vB=!1,kB=Pe(bB.field).map(_B),wB=Pe(bB.order).map(_B);return vB?NS(this.add(qN({fields:kB,orders:wB}))):YS(kB,wB)},lB.keyRef=function(bB){var xB=this.signals,vB=!1;return bB=Pe(bB).map(function(kB){return XS(kB)?(vB=!0,NS(xB[kB.signal])):kB}),vB?NS(this.add(IN({fields:bB}))):GS(bB)},lB.sortRef=function(bB){if(!bB)return bB;var _B=[HS(bB.op,bB.field),'_id'],xB=bB.order||'ascending';return xB.signal?NS(this.add(qN({fields:_B,orders:[xB=this.signalRef(xB.signal),xB]}))):YS(_B,[xB,xB])},lB.event=function(bB,_B){var xB=bB+':'+_B;if(!this.events[xB]){var vB=this.id();this.streams.push({id:vB,source:bB,type:_B}),this.events[xB]=vB}return this.events[xB]},lB.addSignal=function(bB,_B){this.signals.hasOwnProperty(bB)&&ke('Duplicate signal name: '+Ce(bB));var xB=_B instanceof jS?_B:this.add($S(_B));return this.signals[bB]=xB},lB.getSignal=function(bB){return this.signals[bB]||ke('Unrecognized signal name: '+Ce(bB)),this.signals[bB]},lB.signalRef=function(bB){return this.signals[bB]?NS(this.signals[bB]):(this.lambdas[bB]||(this.lambdas[bB]=this.add($S(null))),NS(this.lambdas[bB]))},lB.parseLambdas=function(){for(var bB=Object.keys(this.lambdas),_B=0,xB=bB.length;_B<xB;++_B){var vB=bB[_B],kB=NE(vB,this),wB=this.lambdas[vB];wB.params=kB.$params,wB.update=kB.$expr}},lB.property=function(bB){return bB&&bB.signal?this.signalRef(bB.signal):bB},lB.objectProperty=function(bB){return bB&&Ee(bB)?this.signalRef(bB.signal||az(bB)):bB},lB.addBinding=function(bB,_B){this.bindings||ke('Nested signals do not support binding: '+Ce(bB)),this.bindings.push(De({signal:bB},_B))},lB.addScaleProj=function(bB,_B){this.scales.hasOwnProperty(bB)&&ke('Duplicate scale or projection name: '+Ce(bB)),this.scales[bB]=this.add(_B)},lB.addScale=function(bB,_B){this.addScaleProj(bB,ZN(_B))},lB.addProjection=function(bB,_B){this.addScaleProj(bB,HN(_B))},lB.getScale=function(bB){return this.scales[bB]||ke('Unrecognized scale name: '+Ce(bB)),this.scales[bB]},lB.projectionRef=lB.scaleRef=function(bB){return NS(this.getScale(bB))},lB.projectionType=lB.scaleType=function(bB){return this.getScale(bB).params.type},lB.addData=function(bB,_B){return this.data.hasOwnProperty(bB)&&ke('Duplicate data set name: '+Ce(bB)),this.data[bB]=_B},lB.getData=function(bB){return this.data[bB]||ke('Undefined data set name: '+Ce(bB)),this.data[bB]},lB.addDataPipeline=function(bB,_B){return this.data.hasOwnProperty(bB)&&ke('Duplicate data set name: '+Ce(bB)),this.addData(bB,fC.fromEntries(this,_B))};var sB=30,fB=2,cB='#4c78a8',uB='#000',pB='#888',gB='#ddd',mB=[{key:'$ref',parse:function(bB,_B){return _B.get(bB.$ref)||ke('Operator not defined: '+bB.$ref)}},{key:'$key',parse:function(bB,_B){var xB='k:'+bB.$key;return _B.fn[xB]||(_B.fn[xB]=Ne(bB.$key))}},{key:'$expr',parse:function(bB,_B){var xB='e:'+bB.$expr;return _B.fn[xB]||(_B.fn[xB]=_e(fz(bB.$expr,_B),bB.$fields,bB.$name))}},{key:'$field',parse:function(bB,_B){var xB='f:'+bB.$field+'_'+bB.$name;return _B.fn[xB]||(_B.fn[xB]=ze(bB.$field,bB.$name))}},{key:'$encode',parse:function(bB,_B){var xB=bB.$encode,vB={},kB,wB;for(kB in xB)wB=xB[kB],vB[kB]=_e(gz(wB.$expr,_B),wB.$fields),vB[kB].output=wB.$output;return vB}},{key:'$compare',parse:function(bB,_B){var xB='c:'+bB.$compare+'_'+bB.$order;return _B.fn[xB]||(_B.fn[xB]=Ae(bB.$compare,bB.$order))}},{key:'$context',parse:function(bB,_B){return _B}},{key:'$subflow',parse:function(bB,_B){var xB=bB.$subflow;return function(vB,kB,wB){var SB=Az(xB,_B.fork()),CB=SB.get(xB.operators[0].id),zB=SB.signals.parent;return zB&&zB.set(wB),CB}}}],hB={skip:!0};qz.prototype=Lz.prototype={fork:function(){var _B=new Lz(this);return(this.subcontext||(this.subcontext=[])).push(_B),_B},get:function(_B){return this.nodes[_B]},set:function(_B,xB){return this.nodes[_B]=xB},add:function(_B,xB){var vB=this,kB=vB.dataflow,wB;if(vB.set(_B.id,xB),'Collect'===_B.type&&(wB=_B.value)&&(wB.$ingest?kB.ingest(xB,wB.$ingest,wB.$format):wB.$request?kB.request(xB,wB.$request,wB.$format):kB.pulse(xB,kB.changeset().insert(wB))),_B.root&&(vB.root=xB),_B.parent){var SB=vB.get(_B.parent.$ref);SB?(kB.connect(SB,[xB]),xB.targets().add(SB)):(vB.unresolved=vB.unresolved||[]).push(function(){SB=vB.get(_B.parent.$ref),kB.connect(SB,[xB]),xB.targets().add(SB)})}if(_B.signal&&(vB.signals[_B.signal]=xB),_B.scale&&(vB.scales[_B.scale]=xB),_B.data)for(var CB in _B.data)wB=vB.data[CB]||(vB.data[CB]={}),_B.data[CB].forEach(function(zB){wB[zB]=xB})},resolve:function(){return(this.unresolved||[]).forEach(function(_B){_B()}),delete this.unresolved,this},operator:function(_B,xB,vB){this.add(_B,this.dataflow.add(_B.value,xB,vB,_B.react))},transform:function(_B,xB,vB){this.add(_B,this.dataflow.add(this.transforms[xB],vB))},stream:function(_B,xB){this.set(_B.id,xB)},update:function(_B,xB,vB,kB,wB){this.dataflow.on(xB,vB,kB,wB,_B.options)},getState:function(bB){var _B=this,xB={};if(bB.signals){var vB=xB.signals={};Object.keys(_B.signals).forEach(function(wB){var SB=_B.signals[wB];bB.signals(wB,SB)&&(vB[wB]=SB.value)})}if(bB.data){var kB=xB.data={};Object.keys(_B.data).forEach(function(wB){var SB=_B.data[wB];bB.data(wB,SB)&&(kB[wB]=SB.input.value)})}return _B.subcontext&&!1!==bB.recurse&&(xB.subcontext=_B.subcontext.map(function(wB){return wB.getState(bB)})),xB},setState:function(bB){var _B=this,xB=_B.dataflow,vB=bB.data,kB=bB.signals;Object.keys(kB||{}).forEach(function(wB){xB.update(_B.signals[wB],kB[wB],hB)}),Object.keys(vB||{}).forEach(function(wB){xB.pulse(_B.data[wB].input,xB.changeset().remove(dT).insert(vB[wB]))}),(bB.subcontext||[]).forEach(function(wB,SB){var CB=CB.subcontext[SB];CB&&CB.setState(wB)})}};var yB=Ue(Yz,zl);yB.run=function(bB){zl.prototype.run.call(this,bB);var _B=this._queue;return(this._resize||!_B||_B.length)&&(this.render(_B),this._queue=[]),this},yB.render=function(bB){return this._renderer&&(this._resize&&(this._resize=0,Hv(this)),this._renderer.render(this._scenegraph.root,bB)),this},yB.enqueue=function(bB){this._queue&&bB&&bB.length&&(this._queue=this._queue.concat(bB))},yB.signal=function(bB,_B,xB){var vB=Gz(this,bB);return 1===arguments.length?vB.value:this.update(vB,_B,xB)},yB.scenegraph=function(){return this._scenegraph},yB.background=function(bB){return arguments.length?(this._background=bB,this._resize=1,this):this._background},yB.width=function(bB){return arguments.length?this.signal('width',bB):this.signal('width')},yB.height=function(bB){return arguments.length?this.signal('height',bB):this.signal('height')},yB.padding=function(bB){return arguments.length?this.signal('padding',bB):this.signal('padding')},yB.renderer=function(bB){return arguments.length?(Mo(bB)||this.error('Unrecognized renderer type: '+bB),bB!==this._renderType&&(this._renderType=bB,this._renderer&&(this._renderer=this._queue=null,this.initialize(this._el))),this):this._renderType},yB.loader=function(bB){return arguments.length?(bB!==this._loader&&(zl.prototype.loader.call(this,bB),this._renderer&&(this._renderer=this._queue=null,this.initialize(this._el))),this):this._loader},yB.addEventListener=function(bB,_B){this._handler.on(bB,_B)},yB.removeEventListener=function(bB,_B){this._handler.off(bB,_B)},yB.addSignalListener=function(bB,_B){var xB=Gz(this,bB),vB=function(){_B(bB,xB.value)};this.on(xB,null,(vB.handler=_B,vB))},yB.removeSignalListener=function(bB,_B){var xB=Gz(this,bB),vB=xB._targets||[],kB=vB.filter(function(wB){var SB=wB._update;return SB&&SB.handler===_B});kB.length&&vB.remove(kB[0])},yB.preventDefault=function(bB){return arguments.length?(this._preventDefault=bB,this):this._preventDefault},yB.tooltipHandler=function(bB){var _B=this._handler;return arguments.length?(_B.handleTooltip=bB||io.prototype.handleTooltip,this):_B.handleTooltip},yB.events=function(bB,_B,xB){var vB=this,kB=new Zo(xB),wB=function(RB,PB){vB.preventDefault()&&bB===lI&&RB.preventDefault(),kB.receive(Xv(vB,RB,PB)),vB.run()},SB;if(bB===lI)return vB.addEventListener(_B,wB),kB;if(bB==='window'?'undefined'!==typeof window&&(SB=[window]):'undefined'!==typeof document&&(SB=document.querySelectorAll(bB)),!SB)return vB.warn('Can not resolve event source: '+bB),kB;for(var CB=0,zB=SB.length;CB<zB;++CB)SB[CB].addEventListener(_B,wB);return vB._eventListeners.push({type:_B,sources:SB,handler:wB}),kB},yB.finalize=function(){for(var bB=this._eventListeners,_B=bB.length,xB,vB;0<=--_B;)for(vB=bB[_B],xB=vB.sources.length;0<=--xB;)vB.sources[xB].removeEventListener(vB.type,vB.handler)},yB.hover=function(bB,_B){return this.on(this.events('view','mouseover',Zv),Kv,Qv(bB||'hover')),this.on(this.events('view','mouseout',Zv),Kv,Qv(_B||'update')),this},yB.autosize=function(bB,_B,xB,vB,kB,wB){this.runAfter(function(SB){var CB=0;SB._autosize=0,SB.width()!==xB&&(CB=1,SB.width(xB),SB._resizeWidth.skip(!0)),SB.height()!==vB&&(CB=1,SB.height(vB),SB._resizeHeight.skip(!0)),SB._width!==bB&&(SB._resize=1,SB._width=bB),SB._height!==_B&&(SB._resize=1,SB._height=_B),(SB._origin[0]!==kB[0]||SB._origin[1]!==kB[1])&&(SB._resize=1,SB._origin=kB),CB&&SB.run('enter'),wB&&SB.runAfter(function(){SB._autosize=1})})},yB.data=function(bB){return jv(this,bB).values.value},yB.change=$v,yB.insert=function(bB,_B){return $v.call(this,bB,Go().insert(_B))},yB.remove=function(bB,_B){return $v.call(this,bB,Go().remove(_B))},yB.initialize=function(bB,_B){var xB=this,vB=xB._renderType,kB=Mo(vB),wB,SB;return bB=xB._el=bB?mk(xB,bB):null,kB||xB.error('Unrecognized renderer type: '+vB),wB=kB.handler||so,SB=bB?kB.renderer:kB.headless,xB._renderer=SB?uk(xB,xB._renderer,bB,SB):null,xB._handler=pk(xB,xB._handler,bB,wB),bB&&(_B=_B?mk(xB,_B):bB.appendChild(nk('div',{class:'vega-bindings'})),xB._bind.forEach(function(CB){CB.param.element&&mk(xB,CB.param.element)}),xB._bind.forEach(function(CB){ak(xB,CB.param.element||_B,CB)})),xB},yB.toImageURL=function(bB){return bB!==QP.Canvas&&bB!==QP.SVG&&bB!==QP.PNG?Promise.reject('Unrecognized image type: '+bB):hk(this,bB).then(function(_B){return bB===QP.SVG?_k(_B.svg(),'image/svg+xml'):_B.canvas().toDataURL('image/png')})},yB.toCanvas=function(){return hk(this,QP.Canvas).then(function(bB){return bB.canvas()})},yB.toSVG=function(){return hk(this,QP.SVG).then(function(bB){return bB.svg()})},yB.getState=function(bB){return this._runtime.getState(bB||{data:$z,signals:Nz,recurse:!0})},yB.setState=function(bB){var _B=this;return _B._trigger=!1,_B._runtime.setState(bB),_B.run().runAfter(function(){_B._trigger=!0}),this},Ol('Bound',uv),Ol('Mark',gv),Ol('Render',hv),Ol('ViewLayout',Tv),R.version='3.0.0-beta.31',R.Dataflow=zl,R.EventStream=Zo,R.Parameters=Wo,R.Pulse=rl,R.MultiPulse=yl,R.Operator=Ho,R.Transform=Rl,R.changeset=Go,R.ingest=Io,R.register=Pl,R.definition=Al,R.definitions=OA,R.transform=Ol,R.transforms=AA,R.tupleid=Fo,R.scale=cu,R.scheme=bu,R.interpolate=ku,R.interpolateRange=_u,R.projection=Em,R.View=Yz,R.parse=function(bB,_B){return QC(bB,new ez(iz(_B||bB.config))).toRuntime()},R.expressionFunction=IE,R.formatLocale=Tc,R.timeFormatLocale=Sa,R.runtime=Az,R.runtimeContext=Dz,R.bin=P,R.bootstrapCI=ce,R.randomInteger=function(bB,_B){null==_B&&(_B=bB,bB=0);var xB={},vB,kB,wB;return xB.min=function(SB){return arguments.length?(vB=SB||0,wB=kB-vB,xB):vB},xB.max=function(SB){return arguments.length?(kB=SB||0,wB=kB-vB,xB):kB},xB.sample=function(){return vB+Math.floor(wB*Math.random())},xB.pdf=function(SB){return SB===Math.floor(SB)&&SB>=vB&&SB<kB?1/wB:0},xB.cdf=function(SB){var CB=Math.floor(SB);return CB<vB?0:CB>=kB?1:(CB-vB+1)/wB},xB.icdf=function(SB){return 0<=SB&&1>=SB?vB-1+Math.floor(SB*wB):NaN},xB.min(bB).max(_B)},R.randomKDE=me,R.randomMixture=ye,R.randomNormal=pe,R.randomUniform=be,R.quartiles=ge,R.accessor=_e,R.accessorName=xe,R.accessorFields=ve,R.id=tT,R.identity=nT,R.zero=aT,R.one=iT,R.truthy=dT,R.falsy=rT,R.logger=Re,R.None=oT,R.Warn=lT,R.Info=sT,R.Debug=fT,R.array=Pe,R.compare=Ae,R.constant=Me,R.error=ke,R.extend=De,R.extentIndex=qe,R.fastmap=Le,R.field=ze,R.inherits=Ue,R.isArray=Qz,R.isBoolean=Fe,R.isDate=je,R.isFunction=Oe,R.isNumber=Ie,R.isObject=Ee,R.isRegExp=$e,R.isString=Se,R.key=Ne,R.merge=Be,R.pad=Ge,R.peek=We,R.repeat=Ye,R.splitAccessPath=we,R.stringValue=Ce,R.toBoolean=He,R.toDate=Xe,R.toNumber=Ve,R.toString=Je,R.toSet=Ze,R.truncate=Ke,R.visitArray=Qe,R.loader=St,R.read=Ta,R.inferType=Mt,R.inferTypes=Dt,R.typeParsers=xT,R.formats=tn,R.Bounds=Pa,R.Gradient=Aa,R.GroupItem=Ma,R.ResourceLoader=Ia,R.Item=Oa,R.Scenegraph=no,R.Handler=io,R.Renderer=ro,R.CanvasHandler=so,R.CanvasRenderer=go,R.SVGHandler=yo,R.SVGRenderer=vo,R.SVGStringRenderer=Ro,R.RenderType=QP,R.renderModule=Mo,R.Marks=SP,R.boundContext=Ld,R.boundStroke=qd,R.boundItem=Jr,R.boundMark=Zr,R.pathCurves=Zi,R.pathSymbols=dd,R.pathRectangle=gd,R.pathTrail=md,R.pathParse=Ki,R.pathRender=nd,R.point=oo,R.canvas=ja,R.domCreate=Da,R.domFind=qa,R.domChild=La,R.domClear=Ua,R.openTag=_o,R.closeTag=xo,R.font=Yr,R.textMetrics=xP,R.sceneEqual=Do,R.pathEqual=qo,R.sceneToJSON=Kr,R.sceneFromJSON=Qr,R.sceneZOrder=Yd,R.sceneVisit=Gd,R.scenePickVisit=Wd,Object.defineProperty(R,'__esModule',{value:!0})});</script><script>!function(U){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?module.exports=U():"function"==typeof define&&define.amd?define([],U):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).vl=U()}(function(){return function U(z,H,j){function B(V,Y){if(!H[V]){if(!z[V]){var G="function"==typeof require&&require;if(!Y&&G)return G(V,!0);if(W)return W(V,!0);var X=new Error("Cannot find module '"+V+"'");throw X.code="MODULE_NOT_FOUND",X}var K=H[V]={exports:{}};z[V][0].call(K.exports,function(Q){var Z=z[V][1][Q];return B(Z||Q)},K,K.exports,U,z,H,j)}return H[V].exports}for(var W="function"==typeof require&&require,q=0;q<j.length;q++)B(j[q]);return B}({1:[function(U,z){var j="undefined"==typeof JSON?U("jsonify"):JSON;z.exports=function(q,V){V||(V={}),"function"==typeof V&&(V={cmp:V});var Y=V.space||"";"number"==typeof Y&&(Y=Array(Y+1).join(" "));var G="boolean"==typeof V.cycles&&V.cycles,X=V.replacer||function(Z,J){return J},K=V.cmp&&function(Z){return function(J){return function($,ee){var te={key:$,value:J[$]},ae={key:ee,value:J[ee]};return Z(te,ae)}}}(V.cmp),Q=[];return function Z(J,$,ee,te){var ae=Y?"\n"+Array(te+1).join(Y):"",ne=Y?": ":":";if(ee&&ee.toJSON&&"function"==typeof ee.toJSON&&(ee=ee.toJSON()),void 0!==(ee=X.call(J,$,ee))){if("object"!=("undefined"===typeof ee?"undefined":babelHelpers.typeof(ee))||null===ee)return j.stringify(ee);if(B(ee)){for(var le,ie=[],oe=0;oe<ee.length;oe++)le=Z(ee,oe,ee[oe],te+1)||j.stringify(null),ie.push(ae+Y+le);return"["+ie.join(",")+ae+"]"}if(-1!==Q.indexOf(ee)){if(G)return j.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}Q.push(ee);for(var re,se=W(ee).sort(K&&K(ee)),ie=[],oe=0;oe<se.length;oe++)if(re=Z(ee,$=se[oe],ee[$],te+1),re){var de=j.stringify($)+ne+re;ie.push(ae+Y+de)}return Q.splice(Q.indexOf(ee),1),"{"+ie.join(",")+ae+"}"}}({"":q},"",q,0)};var B=Array.isArray||function(q){return"[object Array]"==={}.toString.call(q)},W=Object.keys||function(q){var V=Object.prototype.hasOwnProperty||function(){return!0},Y=[];for(var G in q)V.call(q,G)&&Y.push(G);return Y}},{jsonify:2}],2:[function(U,z,H){H.parse=U("./lib/parse"),H.stringify=U("./lib/stringify")},{"./lib/parse":3,"./lib/stringify":4}],3:[function(U,z){var j,B,W,q,V={'"':"\"","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Y=function(te){throw{name:"SyntaxError",message:te,at:j,text:W}},G=function(te){return te&&te!==B&&Y("Expected '"+te+"' instead of '"+B+"'"),B=W.charAt(j),j+=1,B},X=function(){var te,ae="";for("-"===B&&(ae="-",G("-"));"0"<=B&&"9">=B;)ae+=B,G();if("."===B)for(ae+=".";G()&&"0"<=B&&"9">=B;)ae+=B;if("e"===B||"E"===B)for(ae+=B,G(),"-"!==B&&"+"!==B||(ae+=B,G());"0"<=B&&"9">=B;)ae+=B,G();return(te=+ae,isFinite(te))?te:void Y("Bad number")},K=function(){var te,ae,ne,ie="";if("\""===B)for(;G();){if("\""===B)return G(),ie;if("\\"!==B)ie+=B;else if(G(),"u"===B){for(ne=0,ae=0;4>ae&&(te=parseInt(G(),16),isFinite(te));ae+=1)ne=16*ne+te;ie+=String.fromCharCode(ne)}else{if("string"!=typeof V[B])break;ie+=V[B]}}Y("Bad string")},Q=function(){for(;B&&" ">=B;)G()},Z=function(){switch(B){case"t":return G("t"),G("r"),G("u"),G("e"),!0;case"f":return G("f"),G("a"),G("l"),G("s"),G("e"),!1;case"n":return G("n"),G("u"),G("l"),G("l"),null;}Y("Unexpected '"+B+"'")},J=function(){var te=[];if("["===B){if(G("["),Q(),"]"===B)return G("]"),te;for(;B;){if(te.push(q()),Q(),"]"===B)return G("]"),te;G(","),Q()}}Y("Bad array")},$=function(){var te,ae={};if("{"===B){if(G("{"),Q(),"}"===B)return G("}"),ae;for(;B;){if(te=K(),Q(),G(":"),Object.hasOwnProperty.call(ae,te)&&Y("Duplicate key \""+te+"\""),ae[te]=q(),Q(),"}"===B)return G("}"),ae;G(","),Q()}}Y("Bad object")};q=function(){switch(Q(),B){case"{":return $();case"[":return J();case"\"":return K();case"-":return X();default:return"0"<=B&&"9">=B?X():Z();}},z.exports=function(ee,te){var ae;return W=ee,j=0,B=" ",ae=q(),Q(),B&&Y("Syntax error"),"function"==typeof te?function ne(ie,oe){var le,se,re=ie[oe];if(re&&"object"==("undefined"===typeof re?"undefined":babelHelpers.typeof(re)))for(le in re)Object.prototype.hasOwnProperty.call(re,le)&&(void 0===(se=ne(re,le))?delete re[le]:re[le]=se);return te.call(ie,oe,re)}({"":ae},""):ae}},{}],4:[function(U,z){function j(X){return Y.lastIndex=0,Y.test(X)?"\""+X.replace(Y,function(K){var Q=G[K];return"string"==typeof Q?Q:"\\u"+("0000"+K.charCodeAt(0).toString(16)).slice(-4)})+"\"":"\""+X+"\""}function B(X,K){var Q,Z,J,$,ee,te=W,ae=K[X];switch(ae&&"object"==("undefined"===typeof ae?"undefined":babelHelpers.typeof(ae))&&"function"==typeof ae.toJSON&&(ae=ae.toJSON(X)),"function"==typeof V&&(ae=V.call(K,X,ae)),"undefined"===typeof ae?"undefined":babelHelpers.typeof(ae)){case"string":return j(ae);case"number":return isFinite(ae)?ae+"":"null";case"boolean":case"null":return ae+"";case"object":if(!ae)return"null";if(W+=q,ee=[],"[object Array]"===Object.prototype.toString.apply(ae)){for($=ae.length,Q=0;Q<$;Q+=1)ee[Q]=B(Q,ae)||"null";return J=0===ee.length?"[]":W?"[\n"+W+ee.join(",\n"+W)+"\n"+te+"]":"["+ee.join(",")+"]",W=te,J}if(V&&"object"==("undefined"===typeof V?"undefined":babelHelpers.typeof(V)))for($=V.length,Q=0;Q<$;Q+=1)"string"==typeof(Z=V[Q])&&(J=B(Z,ae))&&ee.push(j(Z)+(W?": ":":")+J);else for(Z in ae)Object.prototype.hasOwnProperty.call(ae,Z)&&(J=B(Z,ae))&&ee.push(j(Z)+(W?": ":":")+J);return J=0===ee.length?"{}":W?"{\n"+W+ee.join(",\n"+W)+"\n"+te+"}":"{"+ee.join(",")+"}",W=te,J;}}var W,q,V,Y=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,G={"":"\\b","	":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':"\\\"","\\":"\\\\"};z.exports=function(X,K,Q){var Z;if(W="",q="","number"==typeof Q)for(Z=0;Z<Q;Z+=1)q+=" ";else"string"==typeof Q&&(q=Q);if(V=K,K&&"function"!=typeof K&&("object"!=("undefined"===typeof K?"undefined":babelHelpers.typeof(K))||"number"!=typeof K.length))throw new Error("JSON.stringify");return B("",{"":X})}},{}],5:[function(U,z){function j(){throw new Error("setTimeout has not been defined")}function B(){throw new Error("clearTimeout has not been defined")}function W(ae){if(K===setTimeout)return setTimeout(ae,0);if((K===j||!K)&&setTimeout)return K=setTimeout,setTimeout(ae,0);try{return K(ae,0)}catch(ne){try{return K.call(null,ae,0)}catch(ie){return K.call(this,ae,0)}}}function q(ae){if(Q===clearTimeout)return clearTimeout(ae);if((Q===B||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(ae);try{return Q(ae)}catch(ne){try{return Q.call(null,ae)}catch(ie){return Q.call(this,ae)}}}function V(){ee&&J&&(ee=!1,J.length?$=J.concat($):te=-1,$.length&&Y())}function Y(){if(!ee){var ae=W(V);ee=!0;for(var ne=$.length;ne;){for(J=$,$=[];++te<ne;)J&&J[te].run();te=-1,ne=$.length}J=null,ee=!1,q(ae)}}function G(ae,ne){this.fun=ae,this.array=ne}function X(){}var K,Q,Z=z.exports={};!function(){try{K="function"==typeof setTimeout?setTimeout:j}catch(ae){K=j}try{Q="function"==typeof clearTimeout?clearTimeout:B}catch(ae){Q=B}}();var J,$=[],ee=!1,te=-1;Z.nextTick=function(ae){var ne=Array(arguments.length-1);if(1<arguments.length)for(var ie=1;ie<arguments.length;ie++)ne[ie-1]=arguments[ie];$.push(new G(ae,ne)),1!==$.length||ee||W(Y)},G.prototype.run=function(){this.fun.apply(null,this.array)},Z.title="browser",Z.browser=!0,Z.env={},Z.argv=[],Z.version="",Z.versions={},Z.on=X,Z.addListener=X,Z.once=X,Z.off=X,Z.removeListener=X,Z.removeAllListeners=X,Z.emit=X,Z.prependListener=X,Z.prependOnceListener=X,Z.listeners=function(){return[]},Z.binding=function(){throw new Error("process.binding is not supported")},Z.cwd=function(){return"/"},Z.chdir=function(){throw new Error("process.chdir is not supported")},Z.umask=function(){return 0}},{}],6:[function(U,z){(function(j){var B,W,q,V,Y,G,X,K,Q,Z,J,$,ee,te,ae,ne,ie;!function(oe){function le(re,de){return"function"==typeof Object.create?Object.defineProperty(re,"__esModule",{value:!0}):re.__esModule=!0,function(ce,pe){return re[ce]=de?de(ce,pe):pe}}var se="object"==("undefined"===typeof j?"undefined":babelHelpers.typeof(j))?j:"object"==("undefined"===typeof self?"undefined":babelHelpers.typeof(self))?self:"object"==babelHelpers.typeof(this)?this:{};oe("object"==("undefined"===typeof z?"undefined":babelHelpers.typeof(z))&&"object"==babelHelpers.typeof(z.exports)?le(se,le(z.exports)):le(se))}(function(oe){var le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,re){se.__proto__=re}||function(se,re){for(var de in re)re.hasOwnProperty(de)&&(se[de]=re[de])};B=function(re,de){function ce(){this.constructor=re}le(re,de),re.prototype=null===de?Object.create(de):(ce.prototype=de.prototype,new ce)},W=Object.assign||function(se){for(var re,de=1,ce=arguments.length;de<ce;de++)for(var pe in re=arguments[de],re)Object.prototype.hasOwnProperty.call(re,pe)&&(se[pe]=re[pe]);return se},q=function(re,de){var ce={};for(var pe in re)Object.prototype.hasOwnProperty.call(re,pe)&&0>de.indexOf(pe)&&(ce[pe]=re[pe]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols)for(var se=0,pe=Object.getOwnPropertySymbols(re);se<pe.length;se++)0>de.indexOf(pe[se])&&(ce[pe[se]]=re[pe[se]]);return ce},V=function(re,de,ce,pe){var ue,se=arguments.length,me=3>se?de:null===pe?pe=Object.getOwnPropertyDescriptor(de,ce):pe;if("object"==("undefined"===typeof Reflect?"undefined":babelHelpers.typeof(Reflect))&&"function"==typeof Reflect.decorate)me=Reflect.decorate(re,de,ce,pe);else for(var ge=re.length-1;0<=ge;ge--)(ue=re[ge])&&(me=(3>se?ue(me):3<se?ue(de,ce,me):ue(de,ce))||me);return 3<se&&me&&Object.defineProperty(de,ce,me),me},Y=function(re,de){return function(ce,pe){de(ce,pe,re)}},G=function(re,de){if("object"==("undefined"===typeof Reflect?"undefined":babelHelpers.typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(re,de)},X=function(re,de,ce,pe){return new(ce||(ce=Promise))(function(ue,me){function ge(ye){try{he(pe.next(ye))}catch(_e){me(_e)}}function fe(ye){try{he(pe.throw(ye))}catch(_e){me(_e)}}function he(ye){ye.done?ue(ye.value):new ce(function(_e){_e(ye.value)}).then(ge,fe)}he((pe=pe.apply(re,de||[])).next())})},K=function(re,de){function ce(ye){return function(_e){return pe([ye,_e])}}function pe(ye){if(ue)throw new TypeError("Generator is already executing.");for(;he;)try{if(ue=1,me&&(ge=me[2&ye[0]?"return":ye[0]?"throw":"next"])&&!(ge=ge.call(me,ye[1])).done)return ge;switch(me=0,ge&&(ye=[0,ge.value]),ye[0]){case 0:case 1:ge=ye;break;case 4:return he.label++,{value:ye[1],done:!1};case 5:he.label++,me=ye[1],ye=[0];continue;case 7:ye=he.ops.pop(),he.trys.pop();continue;default:if(ge=he.trys,!(ge=0<ge.length&&ge[ge.length-1])&&(6===ye[0]||2===ye[0])){he=0;continue}if(3===ye[0]&&(!ge||ye[1]>ge[0]&&ye[1]<ge[3])){he.label=ye[1];break}if(6===ye[0]&&he.label<ge[1]){he.label=ge[1],ge=ye;break}if(ge&&he.label<ge[2]){he.label=ge[2],he.ops.push(ye);break}ge[2]&&he.ops.pop(),he.trys.pop();continue;}ye=de.call(re,he)}catch(_e){ye=[6,_e],me=0}finally{ue=ge=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}var ue,me,ge,fe,he={label:0,sent:function(){if(1&ge[0])throw ge[1];return ge[1]},trys:[],ops:[]};return fe={next:ce(0),throw:ce(1),return:ce(2)},"function"==typeof Symbol&&(fe[Symbol.iterator]=function(){return this}),fe},Q=function(re,de){for(var ce in re)de.hasOwnProperty(ce)||(de[ce]=re[ce])},Z=function(re){var de="function"==typeof Symbol&&re[Symbol.iterator],ce=0;return de?de.call(re):{next:function(){return re&&ce>=re.length&&(re=void 0),{value:re&&re[ce++],done:!re}}}},J=function(re,de){var ce="function"==typeof Symbol&&re[Symbol.iterator];if(!ce)return re;var pe,ue,me=ce.call(re),ge=[];try{for(;(void 0===de||0<de--)&&!(pe=me.next()).done;)ge.push(pe.value)}catch(fe){ue={error:fe}}finally{try{pe&&!pe.done&&(ce=me.return)&&ce.call(me)}finally{if(ue)throw ue.error}}return ge},$=function(){for(var re=[],de=0;de<arguments.length;de++)re=re.concat(J(arguments[de]));return re},ee=function(re){return this instanceof ee?(this.v=re,this):new ee(re)},te=function(re,de,ce){function pe(Se){_e[Se]&&(ye[Se]=function(ve){return new Promise(function(xe,Ee){1<be.push([Se,ve,xe,Ee])||ue(Se,ve)})})}function ue(Se,ve){try{me(_e[Se](ve))}catch(xe){he(be[0][3],xe)}}function me(Se){Se.value instanceof ee?Promise.resolve(Se.value.v).then(ge,fe):he(be[0][2],Se)}function ge(Se){ue("next",Se)}function fe(Se){ue("throw",Se)}function he(Se,ve){Se(ve),be.shift(),be.length&&ue(be[0][0],be[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,_e=ce.apply(re,de||[]),be=[];return ye={},pe("next"),pe("throw"),pe("return"),ye[Symbol.asyncIterator]=function(){return this},ye},ae=function(re){function de(ue,me){re[ue]&&(ce[ue]=function(ge){return(pe=!pe)?{value:ee(re[ue](ge)),done:"return"===ue}:me?me(ge):ge})}var ce,pe;return ce={},de("next"),de("throw",function(ue){throw ue}),de("return"),ce[Symbol.iterator]=function(){return this},ce},ne=function(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de=re[Symbol.asyncIterator];return de?de.call(re):"function"==typeof Z?Z(re):re[Symbol.iterator]()},ie=function(re,de){return Object.defineProperty?Object.defineProperty(re,"raw",{value:de}):re.raw=de,re},oe("__extends",B),oe("__assign",W),oe("__rest",q),oe("__decorate",V),oe("__param",Y),oe("__metadata",G),oe("__awaiter",X),oe("__generator",K),oe("__exportStar",Q),oe("__values",Z),oe("__read",J),oe("__spread",$),oe("__await",ee),oe("__asyncGenerator",te),oe("__asyncDelegator",ae),oe("__asyncValues",ne),oe("__makeTemplateObject",ie)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],7:[function(U,z){z.exports="function"==typeof Object.create?function(j,B){j.super_=B,j.prototype=Object.create(B.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}})}:function(j,B){j.super_=B;var W=function(){};W.prototype=B.prototype,j.prototype=new W,j.prototype.constructor=j}},{}],8:[function(U,z){z.exports=function(j){return j&&"object"==("undefined"===typeof j?"undefined":babelHelpers.typeof(j))&&"function"==typeof j.copy&&"function"==typeof j.fill&&"function"==typeof j.readUInt8}},{}],9:[function(U,z,H){(function(j,B){function W(_e,be){var Se={seen:[],stylize:V};return 3<=arguments.length&&(Se.depth=arguments[2]),4<=arguments.length&&(Se.colors=arguments[3]),ee(be)?Se.showHidden=be:be&&H._extend(Se,be),ie(Se.showHidden)&&(Se.showHidden=!1),ie(Se.depth)&&(Se.depth=2),ie(Se.colors)&&(Se.colors=!1),ie(Se.customInspect)&&(Se.customInspect=!0),Se.colors&&(Se.stylize=q),G(Se,_e,Se.depth)}function q(_e,be){var Se=W.styles[be];return Se?"\x1B["+W.colors[Se][0]+"m"+_e+"\x1B["+W.colors[Se][1]+"m":_e}function V(_e){return _e}function Y(_e){var be={};return _e.forEach(function(Se){be[Se]=!0}),be}function G(_e,be,Se){if(_e.customInspect&&be&&de(be.inspect)&&be.inspect!==H.inspect&&(!be.constructor||be.constructor.prototype!==be)){var ve=be.inspect(Se,_e);return ne(ve)||(ve=G(_e,ve,Se)),ve}var xe=X(_e,be);if(xe)return xe;var Ee=Object.keys(be),Ne=Y(Ee);if(_e.showHidden&&(Ee=Object.getOwnPropertyNames(be)),re(be)&&(0<=Ee.indexOf("message")||0<=Ee.indexOf("description")))return K(be);if(0===Ee.length){if(de(be)){var Te=be.name?": "+be.name:"";return _e.stylize("[Function"+Te+"]","special")}if(oe(be))return _e.stylize(RegExp.prototype.toString.call(be),"regexp");if(se(be))return _e.stylize(Date.prototype.toString.call(be),"date");if(re(be))return K(be)}var ke="",De=!1,Oe=["{","}"];if($(be)&&(De=!0,Oe=["[","]"]),de(be)&&(ke=" [Function"+(be.name?": "+be.name:"")+"]"),oe(be)&&(ke=" "+RegExp.prototype.toString.call(be)),se(be)&&(ke=" "+Date.prototype.toUTCString.call(be)),re(be)&&(ke=" "+K(be)),0===Ee.length&&(!De||0==be.length))return Oe[0]+ke+Oe[1];if(0>Se)return oe(be)?_e.stylize(RegExp.prototype.toString.call(be),"regexp"):_e.stylize("[Object]","special");_e.seen.push(be);var Ce;return Ce=De?Q(_e,be,Se,Ne,Ee):Ee.map(function(Ae){return Z(_e,be,Se,Ne,Ae,De)}),_e.seen.pop(),J(Ce,ke,Oe)}function X(_e,be){if(ie(be))return _e.stylize("undefined","undefined");if(ne(be)){var Se="'"+JSON.stringify(be).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\"")+"'";return _e.stylize(Se,"string")}return ae(be)?_e.stylize(""+be,"number"):ee(be)?_e.stylize(""+be,"boolean"):te(be)?_e.stylize("null","null"):void 0}function K(_e){return"["+Error.prototype.toString.call(_e)+"]"}function Q(_e,be,Se,ve,xe){for(var Ee=[],Ne=0,Te=be.length;Ne<Te;++Ne)me(be,Ne+"")?Ee.push(Z(_e,be,Se,ve,Ne+"",!0)):Ee.push("");return xe.forEach(function(ke){ke.match(/^\d+$/)||Ee.push(Z(_e,be,Se,ve,ke,!0))}),Ee}function Z(_e,be,Se,ve,xe,Ee){var Ne,Te,ke;if((ke=Object.getOwnPropertyDescriptor(be,xe)||{value:be[xe]}).get?Te=ke.set?_e.stylize("[Getter/Setter]","special"):_e.stylize("[Getter]","special"):ke.set&&(Te=_e.stylize("[Setter]","special")),me(ve,xe)||(Ne="["+xe+"]"),Te||(0>_e.seen.indexOf(ke.value)?-1<(Te=te(Se)?G(_e,ke.value,null):G(_e,ke.value,Se-1)).indexOf("\n")&&(Te=Ee?Te.split("\n").map(function(De){return"  "+De}).join("\n").substr(2):"\n"+Te.split("\n").map(function(De){return"   "+De}).join("\n")):Te=_e.stylize("[Circular]","special")),ie(Ne)){if(Ee&&xe.match(/^\d+$/))return Te;(Ne=JSON.stringify(""+xe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ne=Ne.substr(1,Ne.length-2),Ne=_e.stylize(Ne,"name")):(Ne=Ne.replace(/'/g,"\\'").replace(/\\"/g,"\"").replace(/(^"|"$)/g,"'"),Ne=_e.stylize(Ne,"string"))}return Ne+": "+Te}function J(_e,be,Se){var ve=0;return 60<_e.reduce(function(xe,Ee){return ve++,0<=Ee.indexOf("\n")&&ve++,xe+Ee.replace(/\u001b\[\d\d?m/g,"").length+1},0)?Se[0]+(""===be?"":be+"\n ")+" "+_e.join(",\n  ")+" "+Se[1]:Se[0]+be+" "+_e.join(", ")+" "+Se[1]}function $(_e){return Array.isArray(_e)}function ee(_e){return"boolean"==typeof _e}function te(_e){return null===_e}function ae(_e){return"number"==typeof _e}function ne(_e){return"string"==typeof _e}function ie(_e){return void 0===_e}function oe(_e){return le(_e)&&"[object RegExp]"===ce(_e)}function le(_e){return"object"==("undefined"===typeof _e?"undefined":babelHelpers.typeof(_e))&&null!==_e}function se(_e){return le(_e)&&"[object Date]"===ce(_e)}function re(_e){return le(_e)&&("[object Error]"===ce(_e)||_e instanceof Error)}function de(_e){return"function"==typeof _e}function ce(_e){return Object.prototype.toString.call(_e)}function pe(_e){return 10>_e?"0"+_e.toString(10):_e.toString(10)}function ue(){var _e=new Date,be=[pe(_e.getHours()),pe(_e.getMinutes()),pe(_e.getSeconds())].join(":");return[_e.getDate(),ye[_e.getMonth()],be].join(" ")}function me(_e,be){return Object.prototype.hasOwnProperty.call(_e,be)}var ge=/%[sdj%]/g;H.format=function(_e){if(!ne(_e)){for(var be=[],Se=0;Se<arguments.length;Se++)be.push(W(arguments[Se]));return be.join(" ")}for(var Se=1,ve=arguments,xe=ve.length,Ee=(_e+"").replace(ge,function(Te){if("%%"===Te)return"%";if(Se>=xe)return Te;switch(Te){case"%s":return ve[Se++]+"";case"%d":return+ve[Se++];case"%j":try{return JSON.stringify(ve[Se++])}catch(ke){return"[Circular]"}default:return Te;}}),Ne=ve[Se];Se<xe;Ne=ve[++Se])Ee+=te(Ne)||!le(Ne)?" "+Ne:" "+W(Ne);return Ee},H.deprecate=function(_e,be){if(ie(B.process))return function(){return H.deprecate(_e,be).apply(this,arguments)};if(!0===j.noDeprecation)return _e;var Se=!1;return function(){if(!Se){if(j.throwDeprecation)throw new Error(be);j.traceDeprecation?console.trace(be):console.error(be),Se=!0}return _e.apply(this,arguments)}};var fe,he={};H.debuglog=function(_e){if(ie(fe)&&(fe=j.env.NODE_DEBUG||""),_e=_e.toUpperCase(),!he[_e])if(new RegExp("\\b"+_e+"\\b","i").test(fe)){var be=j.pid;he[_e]=function(){var Se=H.format.apply(H,arguments);console.error("%s %d: %s",_e,be,Se)}}else he[_e]=function(){};return he[_e]},H.inspect=W,W.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},W.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},H.isArray=$,H.isBoolean=ee,H.isNull=te,H.isNullOrUndefined=function(_e){return null==_e},H.isNumber=ae,H.isString=ne,H.isSymbol=function(_e){return"symbol"==("undefined"===typeof _e?"undefined":babelHelpers.typeof(_e))},H.isUndefined=ie,H.isRegExp=oe,H.isObject=le,H.isDate=se,H.isError=re,H.isFunction=de,H.isPrimitive=function(_e){return null===_e||"boolean"==typeof _e||"number"==typeof _e||"string"==typeof _e||"symbol"==("undefined"===typeof _e?"undefined":babelHelpers.typeof(_e))||void 0===_e},H.isBuffer=U("./support/isBuffer");var ye=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];H.log=function(){console.log("%s - %s",ue(),H.format.apply(H,arguments))},H.inherits=U("inherits"),H._extend=function(_e,be){if(!be||!le(be))return _e;for(var Se=Object.keys(be),ve=Se.length;ve--;)_e[Se[ve]]=be[Se[ve]];return _e}}).call(this,U("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./support/isBuffer":8,_process:5,inherits:7}],10:[function(U,z,H){!function(j,B){B("object"==("undefined"===typeof H?"undefined":babelHelpers.typeof(H))&&void 0!==z?H:j.vega=j.vega||{})}(this,function(j){"use strict";function B(re){return Q.hasOwnProperty(re)}function W(re,de,ce,pe,ue){for(var me,ge=0,fe=re.length;de<fe;++de){if(me=re[de],!ge&&me===ce)return de;ue&&0<=ue.indexOf(me)?--ge:pe&&0<=pe.indexOf(me)&&++ge}return de}function q(re){for(var de=[],ce=0,pe=re.length,ue=0;ue<pe;)ue=W(re,ue,ne,J+ee,$+te),de.push(re.substring(ce,ue).trim()),ce=++ue;if(0===de.length)throw"Empty event selector: "+re;return de}function V(re){return"["===re[0]?Y(re):G(re)}function Y(re){var de,ce,pe=re.length,ue=1;if((ue=W(re,ue,$,J,$))===pe)throw"Empty between selector: "+re;if(2!==(de=q(re.substring(1,ue))).length)throw"Between selector must have two elements: "+re;if((re=re.slice(ue+1).trim())[0]!==oe)throw"Expected '>' after between selector: "+re;return de=de.map(V),(ce=V(re.slice(1).trim())).between?{between:de,stream:ce}:(ce.between=de,ce)}function G(re){var de,ce,pe={source:K},ue=[],me=[0,0],ge=0,fe=0,he=re.length,ye=0;if(re[he-1]===te){if(!(0<=(ye=re.lastIndexOf(ee))))throw"Unmatched right brace: "+re;try{me=X(re.substring(ye+1,he-1))}catch(_e){throw"Invalid throttle specification: "+re}he=(re=re.slice(0,ye).trim()).length,ye=0}if(!he)throw re;if(re[0]===ie&&(ge=++ye),(de=W(re,ye,ae))<he&&(ue.push(re.substring(fe,de).trim()),fe=ye=++de),(ye=W(re,ye,J))===he)ue.push(re.substring(fe,he).trim());else if(ue.push(re.substring(fe,ye).trim()),ce=[],(fe=++ye)===he)throw"Unmatched left bracket: "+re;for(;ye<he;){if((ye=W(re,ye,$))===he)throw"Unmatched left bracket: "+re;if(ce.push(re.substring(fe,ye).trim()),ye<he-1&&re[++ye]!==J)throw"Expected left bracket: "+re;fe=++ye}if(!(he=ue.length)||le.test(ue[he-1]))throw"Invalid event selector: "+re;return 1<he?(pe.type=ue[1],ge?pe.markname=ue[0].slice(1):B(ue[0])?pe.marktype=ue[0]:pe.source=ue[0]):pe.type=ue[0],"!"===pe.type.slice(-1)&&(pe.consume=!0,pe.type=pe.type.slice(0,-1)),null!=ce&&(pe.filter=ce),me[0]&&(pe.throttle=me[0]),me[1]&&(pe.debounce=me[1]),pe}function X(re){var de=re.split(ne);if(!re.length||2<de.length)throw re;return de.map(function(ce){var pe=+ce;if(pe!=pe)throw re;return pe})}var K,Q,J="[",$="]",ee="{",te="}",ae=":",ne=",",ie="@",oe=">",le=/[[\]{}]/,se={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};j.selector=function(re,de,ce){return K=de||"view",Q=ce||se,q(re.trim()).map(V)},Object.defineProperty(j,"__esModule",{value:!0})})},{}],11:[function(U,z,H){!function(j,B){B("object"==("undefined"===typeof H?"undefined":babelHelpers.typeof(H))&&void 0!==z?H:j.vega=j.vega||{})}(this,function(j){"use strict";function B(be){return null==be?null:be.fields}function W(be){return ee(be)?"["+be.map(W)+"]":te(be)||ae(be)?JSON.stringify(be).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):be}function q(be,Se,ve){var xe=[Se].concat([].slice.call(ve));console[be].apply(console,xe)}function V(be){return function(Se){return be*Math.exp(Se)}}function Y(be){return function(Se){return Math.log(be*Se)}}function G(be){return function(Se){return 0>Se?-Math.pow(-Se,be):Math.pow(Se,be)}}function X(be,Se,ve,xe){var Ee=ve(be[0]),Ne=ve(pe(be)),Te=(Ne-Ee)*Se;return[xe(Ee-Te),xe(Ne-Te)]}function K(be,Se,ve,xe,Ee){var Ne=xe(be[0]),Te=xe(pe(be)),ke=null==Se?(Ne+Te)/2:xe(Se);return[Ee(ke+(Ne-ke)*ve),Ee(ke+(Te-ke)*ve)]}function Q(be){return ye(be)?be:he(be)?be:Date.parse(be)}var Z=function(Se,ve,xe){return Se.fields=ve||[],Se.fname=xe,Se},J=function(Se){throw Error(Se)},$=function(Se){function ve(){Te.push(Ce+Se.substring(xe,Ee)),Ce="",xe=Ee+1}var xe,Ee,Ne,Te=[],ke=null,De=0,Oe=Se.length,Ce="";for(Se+="",xe=Ee=0;Ee<Oe;++Ee)if("\\"===(Ne=Se[Ee]))Ce+=Se.substring(xe,Ee),xe=++Ee;else if(Ne===ke)ve(),ke=null,De=-1;else{if(ke)continue;xe===De&&"\""===Ne?(xe=Ee+1,ke=Ne):xe===De&&"'"===Ne?(xe=Ee+1,ke=Ne):"."!==Ne||De?"["===Ne?(Ee>xe&&ve(),De=xe=Ee+1):"]"===Ne&&(De||J("Access path missing open bracket: "+Se),0<De&&ve(),De=0,xe=Ee+1):Ee>xe?ve():xe=Ee+1}return De&&J("Access path missing closing bracket: "+Se),ke&&J("Access path missing closing quote: "+Se),Ee>xe&&(Ee++,ve()),Te},ee=Array.isArray,te=function(Se){return Se===Object(Se)},ae=function(Se){return"string"==typeof Se},ne=function(Se,ve){var xe=$(Se),Ee="return _["+xe.map(W).join("][")+"];";return Z(Function("_",Ee),[Se=1===xe.length?xe[0]:Se],ve||Se)},ie=[],oe=ne("id"),le=Z(function(be){return be},ie,"identity"),se=Z(function(){return 0},ie,"zero"),re=Z(function(){return 1},ie,"one"),de=Z(function(){return!0},ie,"true"),ce=Z(function(){return!1},ie,"false"),pe=function(Se){return Se[Se.length-1]},ue=function(Se){return null==Se||""===Se?null:+Se},me=function(Se){return null==Se?[]:ee(Se)?Se:[Se]},ge=function(Se){return"function"==typeof Se},fe={},he=function(Se){return"[object Date]"===Object.prototype.toString.call(Se)},ye=function(Se){return"number"==typeof Se},_e=function(Se,ve){for(var xe="";0<=--ve;)xe+=Se;return xe};j.accessor=Z,j.accessorName=function(be){return null==be?null:be.fname},j.accessorFields=B,j.id=oe,j.identity=le,j.zero=se,j.one=re,j.truthy=de,j.falsy=ce,j.logger=function(be){var Se=be||0;return{level:function(xe){return arguments.length?(Se=+xe,this):Se},error:function(){return 1<=Se&&q("error","ERROR",arguments),this},warn:function(){return 2<=Se&&q("warn","WARN",arguments),this},info:function(){return 3<=Se&&q("log","INFO",arguments),this},debug:function(){return 4<=Se&&q("log","DEBUG",arguments),this}}},j.None=0,j.Error=1,j.Warn=2,j.Info=3,j.Debug=4,j.panLinear=function(be,Se){return X(be,Se,ue,le)},j.panLog=function(be,Se){var ve=Math.sign(be[0]);return X(be,Se,Y(ve),V(ve))},j.panPow=function(be,Se,ve){return X(be,Se,G(ve),G(1/ve))},j.zoomLinear=function(be,Se,ve){return K(be,Se,ve,ue,le)},j.zoomLog=function(be,Se,ve){var xe=Math.sign(be[0]);return K(be,Se,ve,Y(xe),V(xe))},j.zoomPow=function(be,Se,ve,xe){return K(be,Se,ve,G(xe),G(1/xe))},j.array=me,j.compare=function(be,Se){var ve,xe,Ee,Ne,Te,ke,De,Oe,Ce,Ae=[],Pe=(be=me(be)).map(function(Ie,Le){return null==Ie?null:(Ae.push(Le),ge(Ie)?Ie:$(Ie).map(W).join("]["))}),Me=Ae.length-1,Re=me(Se),we="var u,v;return ";if(0>Me)return null;for(xe=0;xe<=Me;++xe)Ee=Pe[ve=Ae[xe]],ge(Ee)?(Ne="(u=this."+(ke="f"+ve)+"(a))",Te="(v=this."+ke+"(b))",(De=De||{})[ke]=Ee):(Ne="(u=a["+Ee+"])",Te="(v=b["+Ee+"])"),ke="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"===Re[ve]?(Ce=-1,Oe=1):(Ce=1,Oe=-1),we+="("+Ne+"<"+Te+"||u==null)&&v!=null?"+Oe+":(u>v||v==null)&&u!=null?"+Ce+":"+ke+"!==u&&v===v?"+Oe+":v!==v&&u===u?"+Ce+(ve<Me?":":":0");return Ee=Function("a","b",we+";"),De&&(Ee=Ee.bind(De)),be=be.reduce(function(Ie,Le){return ge(Le)?(B(Le)||[]).forEach(function(Fe){Ie[Fe]=1}):null!=Le&&(Ie[Le+""]=1),Ie},{}),Z(Ee,Object.keys(be))},j.constant=function(be){return ge(be)?be:function(){return be}},j.debounce=function(be,Se){function ve(){Se(Ee),xe=Ee=null}var xe,Ee;return function(Ne){Ee=Ne,xe&&clearTimeout(xe),xe=setTimeout(ve,be)}},j.error=J,j.extend=function(be){for(var Se,ve,xe=1,Ee=arguments.length;xe<Ee;++xe)for(ve in Se=arguments[xe],Se)be[ve]=Se[ve];return be},j.extentIndex=function(be,Se){var ve,xe,Ee,Ne,Te,ke=-1,De=be.length;if(null==Se){for(;++ke<De;)if(null!=(xe=be[ke])&&xe>=xe){ve=Ee=xe;break}for(Ne=Te=ke;++ke<De;)null!=(xe=be[ke])&&(ve>xe&&(ve=xe,Ne=ke),Ee<xe&&(Ee=xe,Te=ke))}else{for(;++ke<De;)if(null!=(xe=Se(be[ke],ke,be))&&xe>=xe){ve=Ee=xe;break}for(Ne=Te=ke;++ke<De;)null!=(xe=Se(be[ke],ke,be))&&(ve>xe&&(ve=xe,Ne=ke),Ee<xe&&(Ee=xe,Te=ke))}return[Ne,Te]},j.fastmap=function(be){function Se(Ne){return Ee.hasOwnProperty(Ne)&&Ee[Ne]!==fe}var ve,xe,Ee={};return ve={size:0,empty:0,object:Ee,has:Se,get:function(Te){return Se(Te)?Ee[Te]:void 0},set:function(Te,ke){return Se(Te)||(++ve.size,Ee[Te]===fe&&--ve.empty),Ee[Te]=ke,this},delete:function(Te){return Se(Te)&&(--ve.size,++ve.empty,Ee[Te]=fe),this},clear:function(){ve.size=ve.empty=0,ve.object=Ee={}},test:function(Te){return arguments.length?(xe=Te,ve):xe},clean:function(){var Te,ke,De={},Oe=0;for(Te in Ee)(ke=Ee[Te])===fe||xe&&xe(ke)||(De[Te]=ke,++Oe);ve.size=Oe,ve.empty=0,ve.object=Ee=De}},be&&Object.keys(be).forEach(function(Ne){ve.set(Ne,be[Ne])}),ve},j.field=ne,j.inherits=function(be,Se){var ve=be.prototype=Object.create(Se.prototype);return ve.constructor=be,ve},j.isArray=ee,j.isBoolean=function(be){return"boolean"==typeof be},j.isDate=he,j.isFunction=ge,j.isNumber=ye,j.isObject=te,j.isRegExp=function(be){return"[object RegExp]"===Object.prototype.toString.call(be)},j.isString=ae,j.key=function(be,Se){be&&(be=Se?me(be).map(function(xe){return xe.replace(/\\(.)/g,"$1")}):me(be));var ve=be&&be.length?Function("_","return ''+"+be.map(function(xe){return"_["+(Se?W(xe):$(xe).map(W).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return Z(ve,be,"key")},j.merge=function(be,Se,ve,xe){var Ee=Se.length,Ne=ve.length;if(!Ne)return Se;if(!Ee)return ve;for(var Te=xe||new Se.constructor(Ee+Ne),ke=0,De=0,Oe=0;ke<Ee&&De<Ne;++Oe)Te[Oe]=0<be(Se[ke],ve[De])?ve[De++]:Se[ke++];for(;ke<Ee;++ke,++Oe)Te[Oe]=Se[ke];for(;De<Ne;++De,++Oe)Te[Oe]=ve[De];return Te},j.pad=function(be,Se,ve,xe){var Ee=ve||" ",Ne=be+"",Te=Se-Ne.length;return 0>=Te?Ne:"left"===xe?_e(Ee,Te)+Ne:"center"===xe?_e(Ee,~~(Te/2))+Ne+_e(Ee,Math.ceil(Te/2)):Ne+_e(Ee,Te)},j.peek=pe,j.repeat=_e,j.splitAccessPath=$,j.stringValue=W,j.toBoolean=function(be){return null==be||""===be?null:be&&"false"!==be&&"0"!==be&&be},j.toDate=function(be,Se){return Se=Se||Q,null==be||""===be?null:Se(be)},j.toNumber=ue,j.toString=function(be){return null==be||""===be?null:be+""},j.toSet=function(be){for(var Se={},ve=0,xe=be.length;ve<xe;++ve)Se[be[ve]]=1;return Se},j.truncate=function(be,Se,ve,xe){var Ee=null==xe?"\u2026":xe,Ne=be+"",Te=Ne.length,ke=Math.max(0,Se-Ee.length);return Te<=Se?Ne:"left"===ve?Ee+Ne.slice(Te-ke):"center"===ve?Ne.slice(0,Math.ceil(ke/2))+Ee+Ne.slice(Te-~~(ke/2)):Ne.slice(0,ke)+Ee},j.visitArray=function(be,Se,ve){if(be){var xe,Ee=0,Ne=be.length;if(Se)for(;Ee<Ne;++Ee)(xe=Se(be[Ee]))&&ve(xe,Ee,be);else be.forEach(ve)}},Object.defineProperty(j,"__esModule",{value:!0})})},{}],12:[function(U,z){z.exports={name:"vega-lite",author:"Jeffrey Heer, Dominik Moritz, Kanit \"Ham\" Wongsuphasawat",version:"2.0.1",collaborators:["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Jeffrey Heer <jheer@uw.edu> (http://jheer.org)"],homepage:"https://vega.github.io/vega-lite/",description:"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.",main:"build/src/index.js",types:"typings/vega-lite.d.ts",bin:{vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},directories:{test:"test"},scripts:{pretsc:"mkdir -p build && rm -rf build/*/** && cp package.json build/",tsc:"tsc",prebuild:"mkdir -p build/site build/test-gallery",build:"npm run build:only","build:only":"npm run tsc && cp package.json build && browserify src/index.ts -p tsify -d -s vl | exorcist build/vega-lite.js.map > build/vega-lite.js",postbuild:"node node_modules/uglify-js/bin/uglifyjs build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run data && npm run build:only && npm run build:examples-only","build:examples-only":"npm run build:example && npm run build:examples-normalized","build:examples-normalized":"rm -f examples/specs/normalized/*.vl.json && scripts/build-normalized-examples","build:example":"TZ=America/Los_Angeles scripts/build-examples.sh","build:toc":"bundle exec jekyll build -q && scripts/generate-toc","build:site":"browserify site/static/main.ts -p [tsify -p site] -d | exorcist build/site/main.js.map > build/site/main.js","build:versions":"scripts/update-version.sh","build:test-gallery":"browserify test-gallery/main.ts -p [tsify -p test-gallery] -d > build/test-gallery/main.js","check:examples":"scripts/check-examples.sh","check:schema":"scripts/check-schema.sh",clean:"rm -rf build && rm -f vega-lite.* & find -E src test site examples -regex '.*\\.(js|js.map|d.ts)' -delete && rm -f examples/compiled/*.png && find site/examples ! -name 'index.md' -type f -exec rm -f {} +",data:"rsync -r node_modules/vega-datasets/data/* data",link:"npm link && npm link vega-lite",deploy:"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh",prestart:"npm run data && npm run build && scripts/index-examples",start:"nodemon -x 'npm run build:test-gallery' & browser-sync start --server --files 'build/test-gallery/main.js' --index 'test-gallery/index.html'",poststart:"rm examples/all-examples.json",preschema:"npm run prebuild",schema:"ts-json-schema-generator --path tsconfig.json --type TopLevelExtendedSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/",renameschema:"scripts/rename-schema.sh",presite:"npm run prebuild && npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages",site:"bundle exec jekyll serve",lint:"tslint -p .",test:"npm run build:only && npm run test:only && npm run test:runtime && npm run lint",posttest:"npm run schema && npm run data && npm run mocha:examples","test:nocompile":"npm run test:only && npm run test:runtime && npm run lint && npm run mocha:examples","test:only":"nyc --reporter=html --reporter=text-summary npm run mocha:test","test:runtime":"TZ=America/Los_Angeles wdio wdio.conf.js","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","test:debug":"npm run tsc && mocha --recursive --debug-brk --inspect build/test","test:debug-examples":"npm run tsc && npm run schema && mocha --recursive --debug-brk --inspect build/examples","mocha:test":"mocha --require source-map-support/register --reporter dot --recursive build/test","mocha:examples":"mocha --require source-map-support/register --reporter dot --recursive build/examples",codecov:"nyc report --reporter=json && codecov -f coverage/*.json","watch:build":"watchify src/index.ts -p tsify -v -d -s vl -o 'exorcist build/vega-lite.js.map > build/vega-lite.js'","watch:tsc":"npm run tsc -- -w","watch:test":"nodemon -x 'npm test'",watch:"nodemon -x 'npm run build && npm run test:nocompile' # already ran schema in build"},repository:{type:"git",url:"https://github.com/vega/vega-lite.git"},license:"BSD-3-Clause",bugs:{url:"https://github.com/vega/vega-lite/issues"},devDependencies:{"@types/chai":"^4.0.4","@types/d3":"^4.11.0","@types/highlight.js":"^9.1.10","@types/json-stable-stringify":"^1.0.32","@types/mkdirp":"^0.5.1","@types/mocha":"^2.2.43","@types/node":"^8.0.47","@types/webdriverio":"^4.8.6",ajv:"^5.3.0","browser-sync":"^2.18.13",browserify:"^14.5.0","browserify-shim":"^3.8.14",chai:"^4.1.2",cheerio:"^1.0.0-rc.2",chromedriver:"^2.33.2",codecov:"^3.0.0",d3:"^4.11.0",exorcist:"^1.0.0","highlight.js":"^9.12.0",mkdirp:"^0.5.1",mocha:"^4.0.1",nodemon:"^1.12.1",nyc:"^11.2.1","source-map-support":"^0.5.0","svg2png-many":"^0.0.7","ts-json-schema-generator":"^0.15.0",tslint:"5.4.3","ts-node":"^3.3.0",tsify:"^3.0.3","tslint-eslint-rules":"^4.1.1",typescript:"^2.6.1","uglify-js":"^3.1.5",vega:"^3.0.7","vega-datasets":"^1.11.0","vega-embed":"^3.0.0-rc7","vega-tooltip":"^0.4.4",watchify:"^3.9.0","wdio-chromedriver-service":"^0.1.1","wdio-dot-reporter":"0.0.9","wdio-mocha-framework":"^0.5.11","wdio-static-server-service":"^1.0.1",webdriverio:"^4.8.0","yaml-front-matter":"^3.4.0"},dependencies:{"json-stable-stringify":"^1.0.1",tslib:"^1.8.0","vega-event-selector":"^2.0.0","vega-util":"^1.6.2",yargs:"^10.0.3"}}},{}],13:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("./util"),B={values:1,count:1,valid:1,missing:1,distinct:1,sum:1,mean:1,average:1,variance:1,variancep:1,stdev:1,stdevp:1,median:1,q1:1,q3:1,ci0:1,ci1:1,min:1,max:1,argmin:1,argmax:1};H.AGGREGATE_OPS=j.flagKeys(B),H.isAggregateOp=function(W){return!!B[W]},H.COUNTING_OPS=["count","valid","missing","distinct"],H.isCountingAggregateOp=function(W){return W&&j.contains(H.COUNTING_OPS,W)},H.SUM_OPS=["count","sum","distinct","valid","missing"],H.SHARED_DOMAIN_OPS=["mean","average","median","q1","q3","min","max"],H.SHARED_DOMAIN_OP_INDEX=j.toSet(H.SHARED_DOMAIN_OPS)},{"./util":119}],14:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("./util");H.AXIS_PROPERTY_TYPE={grid:"grid",labelOverlap:"main",offset:"main",title:"main"};var W={orient:1,domain:1,format:1,grid:1,labelBound:1,labelFlush:1,labelPadding:1,labels:1,labelOverlap:1,maxExtent:1,minExtent:1,offset:1,position:1,tickCount:1,ticks:1,tickSize:1,title:1,titlePadding:1,values:1,zindex:1},q=j.__assign({},W,{encoding:1,labelAngle:1,titleMaxLength:1}),V=j.__assign({scale:1},W,{gridScale:1,encode:1});H.isAxisProperty=function(Y){return!!q[Y]},H.VG_AXIS_PROPERTIES=B.flagKeys(V),H.AXIS_PROPERTIES=B.flagKeys(q)},{"./util":119,tslib:6}],15:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("./channel"),B=U("./util");H.binToString=function(W){return B.isBoolean(W)?"bin":"bin"+B.keys(W).map(function(q){return("_"+q+"_"+W[q]).replace(",","_")}).join("")},H.autoMaxBins=function(W){return W===j.ROW||W===j.COLUMN||W===j.SIZE||W===j.COLOR||W===j.OPACITY||W===j.SHAPE?6:10}},{"./channel":16,"./util":119}],16:[function(U,z,H){"use strict";function j(J){return J===H.X||J===H.Y||J===H.COLOR||J===H.DETAIL||J===H.TOOLTIP||J===H.ORDER||J===H.OPACITY||J===H.ROW||J===H.COLUMN?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0}:J===H.X2||J===H.Y2?{rule:!0,bar:!0,rect:!0,area:!0}:J===H.SIZE?{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0}:J===H.SHAPE?{point:!0}:J===H.TEXT?{text:!0}:void 0}Object.defineProperty(H,"__esModule",{value:!0});var B,W=U("tslib"),q=U("./util");!function(J){J.ROW="row",J.COLUMN="column",J.X="x",J.Y="y",J.X2="x2",J.Y2="y2",J.COLOR="color",J.SHAPE="shape",J.SIZE="size",J.OPACITY="opacity",J.TEXT="text",J.ORDER="order",J.DETAIL="detail",J.TOOLTIP="tooltip"}(B=H.Channel||(H.Channel={})),H.X=B.X,H.Y=B.Y,H.X2=B.X2,H.Y2=B.Y2,H.ROW=B.ROW,H.COLUMN=B.COLUMN,H.SHAPE=B.SHAPE,H.SIZE=B.SIZE,H.COLOR=B.COLOR,H.TEXT=B.TEXT,H.DETAIL=B.DETAIL,H.ORDER=B.ORDER,H.OPACITY=B.OPACITY,H.TOOLTIP=B.TOOLTIP;var V={x:1,y:1,x2:1,y2:1,size:1,shape:1,color:1,order:1,opacity:1,text:1,detail:1,tooltip:1},Y=W.__assign({},V,{row:1,column:1});H.CHANNELS=q.flagKeys(Y),Y.order,Y.detail;var G=W.__rest(Y,["order","detail"]);H.SINGLE_DEF_CHANNELS=q.flagKeys(G),H.isChannel=function(J){return!!Y[J]},H.UNIT_CHANNELS=q.flagKeys(V);var X=W.__rest(V,["x","y","x2","y2"]);H.NONPOSITION_CHANNELS=q.flagKeys(X);var K={x:1,y:1};H.POSITION_SCALE_CHANNELS=q.flagKeys(K),X.text,X.tooltip,X.detail,X.order;var Q=W.__rest(X,["text","tooltip","detail","order"]);H.NONPOSITION_SCALE_CHANNELS=q.flagKeys(Q);var Z=W.__assign({},K,Q);H.SCALE_CHANNELS=q.flagKeys(Z),H.isScaleChannel=function(J){return!!Z[J]},H.supportMark=function(J,$){return $ in j(J)},H.getSupportedMark=j,H.rangeType=function(J){switch(J){case H.X:case H.Y:case H.SIZE:case H.OPACITY:case H.X2:case H.Y2:return"continuous";case H.ROW:case H.COLUMN:case H.SHAPE:case H.TEXT:case H.TOOLTIP:return"discrete";case H.COLOR:return"flexible";case H.DETAIL:case H.ORDER:return;}throw new Error("getSupportedRole not implemented for "+J)}},{"./util":119,tslib:6}],17:[function(U,z,H){"use strict";function j(q){return function(V,Y){return Y[q]&&V.push(Y[q].combine()),V}}Object.defineProperty(H,"__esModule",{value:!0});var B=j("main"),W=j("grid");H.assembleAxes=function(q){return[].concat(q.x?[].concat(q.x.reduce(B,[]),q.x.reduce(W,[])):[],q.y?[].concat(q.y.reduce(B,[]),q.y.reduce(W,[])):[])}},{}],18:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=function(W){function q(){return null!==W&&W.apply(this,arguments)||this}return j.__extends(q,W),q}(U("../split").Split);H.AxisComponentPart=B},{"../split":90,tslib:6}],19:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.getAxisConfig=function(j,B,W,q,V){void 0===q&&(q="");for(var X,Y=0,G=("band"===V?["axisBand"]:[]).concat(["x"===W?"axisX":"axisY","axis"+q.substr(0,1).toUpperCase()+q.substr(1),"axis"]);Y<G.length;Y++)if(X=G[Y],B[X]&&void 0!==B[X][j])return B[X][j]}},{}],20:[function(U,z,H){"use strict";function j(Z,J,$){return void 0===Z.labelAngle?J===q.X&&X.contains([G.NOMINAL,G.ORDINAL],$.type)?270:void 0:(Z.labelAngle%360+360)%360}function B(Z,J){if(0<Z){if(180<Z%360)return"top"===J?"left":"right";if(180>Z%360)return"top"===J?"right":"left"}else if(0>Z)return B(Z%360+360,J)}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../../channel"),V=U("../../fielddef"),Y=U("../../scale"),G=U("../../type"),X=U("../../util"),K=U("../common"),Q=U("./config");H.labels=function(Z,J,$,ee){var te=Z.fieldDef(J)||("x"===J?Z.fieldDef("x2"):"y"===J?Z.fieldDef("y2"):void 0),ae=Z.axis(J),ne=Z.config,ie={};if(V.isTimeFieldDef(te)){var oe=Z.getScaleComponent(J).get("type")===Y.ScaleType.UTC;ie.text={signal:K.timeFormatExpression("datum.value",te.timeUnit,ae.format,ne.axis.shortTimeLabels,ne.timeFormat,oe)}}var le=Q.getAxisConfig("labelAngle",Z.config,J,ee,Z.getScaleComponent(J).get("type"));if(void 0===le&&(le=j(ae,J,te))&&(ie.angle={value:le}),void 0!==le&&"x"===J){var se=B(le,ee);se&&(ie.align={value:se}),X.contains([90,270],le)&&(ie.baseline={value:"middle"})}return ie=W.__assign({},ie,$),0===X.keys(ie).length?void 0:ie},H.labelAngle=j,H.labelAlign=B},{"../../channel":16,"../../fielddef":101,"../../scale":109,"../../type":118,"../../util":119,"../common":25,"./config":19,tslib:6}],21:[function(U,z,H){"use strict";function j(de,ce){if(!de)return ce.map(function(be){return Q.__assign({},be.main?{main:be.main.clone()}:{},be.grid?{grid:be.grid.clone()}:{})});if(de.length===ce.length){for(var pe=de.length,ue=0;ue<pe;ue++){var me=de[ue].main,ge=ce[ue].main;if(!!me!=!!ge)return;if(me&&ge){var fe=me.getWithExplicit("orient"),he=ge.getWithExplicit("orient");if(fe.explicit&&he.explicit&&fe.value!==he.value)return;de[ue].main=B(me,ge)}var ye=de[ue].grid,_e=ce[ue].grid;if(!!ye!=!!_e)return;ye&&_e&&(de[ue].grid=B(ye,_e))}return de}}function B(de,ce){for(var pe=0,ue=Z.VG_AXIS_PROPERTIES;pe<ue.length;pe++)!function(me){var ge=ae.mergeValuesWithExplicit(de.getWithExplicit(me),ce.getWithExplicit(me),me,"axis",function(fe,he){return"title"===me?ee.titleMerger(fe,he):"gridScale"===me?{explicit:fe.explicit,value:fe.value||he.value}:ae.defaultTieBreaker(fe,he,me,"axis")});de.setWithExplicit(me,ge)}(ue[pe]);return de}function W(de){return!1===de||null===de}function q(de){return $.some(se,function(ce){return V(de,ce)})}function V(de,ce){return"axis"===ce||("grid"===ce||"title"===ce?!!de.get(ce):!W(de.get(ce)))}function Y(de,ce){return X(de,ce,!0)}function G(de,ce){return X(de,ce,!1)}function X(de,ce,pe){var ue=ce.axis(de),me=new ne.AxisComponentPart;Z.VG_AXIS_PROPERTIES.forEach(function(he){var ye=K(he,ue,de,ce,pe);if(void 0!==ye){var _e="values"===he?!!ue.values:"encode"===he?!!ue.encoding||!!ue.labelAngle:ye===ue[he],be=ie.getAxisConfig(he,ce.config,de,me.get("orient"),ce.getScaleComponent(de).get("type"));(_e||void 0===be||pe)&&me.set(he,ye,_e)}});var ge=ue.encoding||{},fe=se.reduce(function(he,ye){if(!V(me,ye))return he;var _e="labels"===ye?oe.labels(ce,de,ge.labels||{},me.get("orient")):ge[ye]||{};return void 0!==_e&&0<$.keys(_e).length&&(he[ye]={update:_e}),he},{});return 0<$.keys(fe).length&&me.set("encode",fe,!!ue.encoding||!!ue.labelAngle),me}function K(de,ce,pe,ue,me){var ge=ue.fieldDef(pe);if((!me||"main"!==Z.AXIS_PROPERTY_TYPE[de])&&(me||"grid"!==Z.AXIS_PROPERTY_TYPE[de])){switch(de){case"scale":return ue.scaleName(pe);case"gridScale":return le.gridScale(ue,pe,me);case"domain":return le.domain(de,ce,me,pe);case"format":return ee.numberFormat(ge,ce.format,ue.config);case"grid":return fe=ue.getScaleComponent(pe).get("type"),ee.getSpecifiedOrDefaultValue(ce.grid,le.grid(fe,ge));case"labels":return!me&&ce.labels;case"labelFlush":return le.labelFlush(ge,pe,ce,me);case"labelOverlap":return fe=ue.getScaleComponent(pe).get("type"),le.labelOverlap(ge,ce,pe,fe);case"minExtent":return le.minMaxExtent(ce.minExtent,me);case"maxExtent":return le.minMaxExtent(ce.maxExtent,me);case"orient":return ee.getSpecifiedOrDefaultValue(ce.orient,le.orient(pe));case"tickCount":var fe=ue.getScaleComponent(pe).get("type"),he="x"===pe?"width":"y"===pe?"height":void 0,ye=he?ue.getSizeSignalRef(he):void 0;return ee.getSpecifiedOrDefaultValue(ce.tickCount,le.tickCount(pe,ge,fe,ye));case"ticks":return le.ticks(de,ce,me,pe);case"title":return ee.getSpecifiedOrDefaultValue(ce.title,le.title(ce.titleMaxLength,ge,ue.config));case"values":return le.values(ce,ue,ge);case"zindex":return ee.getSpecifiedOrDefaultValue(ce.zindex,le.zindex(me));}return Z.isAxisProperty(de)?ce[de]:void 0}}Object.defineProperty(H,"__esModule",{value:!0});var Q=U("tslib"),Z=U("../../axis"),J=U("../../channel"),$=U("../../util"),ee=U("../common"),te=U("../resolve"),ae=U("../split"),ne=U("./component"),ie=U("./config"),oe=U("./encode"),le=U("./properties"),se=["domain","grid","labels","ticks","title"];H.parseUnitAxis=function(de){return J.POSITION_SCALE_CHANNELS.reduce(function(ce,pe){if(de.axis(pe)){var ue={},me=G(pe,de);me&&q(me)&&(ue.main=me);var ge=Y(pe,de);ge&&q(ge)&&(ue.grid=ge),ce[pe]=[ue]}return ce},{})};var re={bottom:"top",top:"bottom",left:"right",right:"left"};H.parseLayerAxis=function(de){for(var ce=de.component,pe=ce.axes,ue=ce.resolve,me={top:0,bottom:0,right:0,left:0},ge=0,fe=de.children;ge<fe.length;ge++)!function(he){he.parseAxisAndHeader(),$.keys(he.component.axes).forEach(function(ye){ue.axis[ye]=te.parseGuideResolve(de.component.resolve,ye),"shared"===ue.axis[ye]&&(pe[ye]=j(pe[ye],he.component.axes[ye]),pe[ye]||(ue.axis[ye]="independent",delete pe[ye]))})}(fe[ge]);["x","y"].forEach(function(he){for(var be,ye=0,_e=de.children;ye<_e.length;ye++)be=_e[ye],be.component.axes[he]&&("independent"===ue.axis[he]&&(pe[he]=(pe[he]||[]).concat(be.component.axes[he]),be.component.axes[he].forEach(function(Se){var ve=Se.main.getWithExplicit("orient"),xe=ve.value,Ee=ve.explicit;if(0<me[xe]&&!Ee){var Ne=re[xe];me[xe]>me[Ne]&&Se.main.set("orient",Ne,!1)}me[xe]++})),delete be.component.axes[he])})},H.parseGridAxis=Y,H.parseMainAxis=G},{"../../axis":14,"../../channel":16,"../../util":119,"../common":25,"../resolve":70,"../split":90,"./component":18,"./config":19,"./encode":20,"./properties":22,tslib:6}],22:[function(U,z,H){"use strict";function j(Q,Z,J){return!J&&Z[Q]}Object.defineProperty(H,"__esModule",{value:!0});var B=U("../../bin"),W=U("../../channel"),q=U("../../datetime"),V=U("../../fielddef"),Y=U("../../log"),G=U("../../scale"),X=U("../../type"),K=U("../../util");H.domainAndTicks=j,H.domain=j,H.ticks=j,H.grid=function(Q,Z){return!G.hasDiscreteDomain(Q)&&!Z.bin},H.gridScale=function(Q,Z,J){if(J){var $="x"===Z?"y":"x";if(Q.getScaleComponent($))return Q.scaleName($)}},H.labelFlush=function(Q,Z,J,$){if(!$)return void 0===J.labelFlush?"x"===Z&&K.contains(["quantitative","temporal"],Q.type)||void 0:J.labelFlush},H.labelOverlap=function(Q,Z,J,$){return void 0===Z.labelOverlap?"nominal"===Q.type?void 0:"log"!==$||"greedy":Z.labelOverlap},H.minMaxExtent=function(Q,Z){return Z?0:Q},H.orient=function(Q){switch(Q){case W.X:return"bottom";case W.Y:return"left";}throw new Error(Y.message.INVALID_CHANNEL_FOR_AXIS)},H.tickCount=function(Q,Z,J,$){if(!G.hasDiscreteDomain(J)&&"log"!==J&&!K.contains(["month","hours","day","quarter"],Z.timeUnit))return Z.bin?{signal:"ceil("+$.signal+"/20)"}:{signal:"ceil("+$.signal+"/40)"}},H.title=function(Q,Z,J){var $=V.title(Z,J);return Q?K.truncate($,Q):$},H.values=function(Q,Z,J){var $=Q.values;if(Q.values&&q.isDateTime($[0]))return $.map(function(te){return{signal:q.dateTimeExpr(te,!0)}});if(!$&&J.bin&&J.type===X.QUANTITATIVE){var ee=Z.getName(B.binToString(J.bin)+"_"+J.field+"_bins");return{signal:"sequence("+ee+".start, "+ee+".stop + "+ee+".step, "+ee+".step)"}}return $},H.zindex=function(Q){return Q?0:1}},{"../../bin":15,"../../channel":16,"../../datetime":98,"../../fielddef":101,"../../log":106,"../../scale":109,"../../type":118,"../../util":119}],23:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../util"),W=U("./data/parse"),q=U("./layoutsize/assemble"),V=function(Y){function G(X,K,Q,Z,J){return Y.call(this,X,K,Q,Z,J)||this}return j.__extends(G,Y),G.prototype.parseData=function(){this.component.data=W.parseData(this),this.children.forEach(function(X){X.parseData()})},G.prototype.parseSelection=function(){var X=this;this.component.selection={};for(var K=0,Q=this.children;K<Q.length;K++)!function(Z){Z.parseSelection(),B.keys(Z.component.selection).forEach(function(J){X.component.selection[J]=Z.component.selection[J]})}(Q[K])},G.prototype.parseMarkGroup=function(){for(var X=0,K=this.children;X<K.length;X++)K[X].parseMarkGroup()},G.prototype.parseAxisAndHeader=function(){for(var X=0,K=this.children;X<K.length;X++)K[X].parseAxisAndHeader()},G.prototype.assembleSelectionTopLevelSignals=function(X){return this.children.reduce(function(K,Q){return Q.assembleSelectionTopLevelSignals(K)},X)},G.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(X){return X.assembleSelectionSignals()}),[]},G.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(X,K){return X.concat(K.assembleLayoutSignals())},q.assembleLayoutSignals(this))},G.prototype.assembleSelectionData=function(){return this.children.reduce(function(K,Q){return Q.assembleSelectionData(K)},[])},G.prototype.assembleMarks=function(){return this.children.map(function(X){var K=X.assembleTitle(),Q=X.assembleGroupStyle(),Z=X.assembleLayoutSize();return j.__assign({type:"group",name:X.getName("group")},K?{title:K}:{},Q?{style:Q}:{},Z?{encode:{update:Z}}:{},X.assembleGroup())})},G}(U("./model").Model);H.BaseConcatModel=V},{"../util":119,"./data/parse":41,"./layoutsize/assemble":48,"./model":67,tslib:6}],24:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../log"),B=U("../spec"),W=U("./concat"),q=U("./facet"),V=U("./layer"),Y=U("./repeat"),G=U("./unit");H.buildModel=function(X,K,Q,Z,J,$,ee){if(B.isFacetSpec(X))return new q.FacetModel(X,K,Q,J,$);if(B.isLayerSpec(X))return new V.LayerModel(X,K,Q,Z,J,$,ee);if(B.isUnitSpec(X))return new G.UnitModel(X,K,Q,Z,J,$,ee);if(B.isRepeatSpec(X))return new Y.RepeatModel(X,K,Q,J,$);if(B.isConcatSpec(X))return new W.ConcatModel(X,K,Q,J,$);throw new Error(j.message.INVALID_SPEC)}},{"../log":106,"../spec":112,"./concat":27,"./facet":45,"./layer":46,"./repeat":68,"./unit":91}],25:[function(U,z,H){"use strict";function j(ee){return[].concat(ee.type,ee.style||[])}function B(ee,te,ae){var ne=ae.mark[ee],ie=ae[te.type];void 0!==ie[ee]&&(ne=ie[ee]);for(var oe=0,le=j(te);oe<le.length;oe++){var se=le[oe],re=ae.style[se],de=ee;re&&void 0!==re[de]&&(ne=re[de])}return ne}function W(ee,te,ae){if(ee.type===J.QUANTITATIVE)return te||ae.numberFormat}function q(ee,te){return"format("+ee+", \""+(te||"")+"\")"}function V(ee,te,ae){return q(ee,te||ae.numberFormat)}function Y(ee,te,ae,ne){return ee+" === null || isNaN("+ee+") ? \"null\" : "+V(ee,ae,ne)+" + \" - \" + "+V(te,ae,ne)}function G(ee,te,ae,ne,ie,oe){if(!te||ae){var le=ae||ie;return oe?"utcFormat("+ee+", '"+le+"')":"timeFormat("+ee+", '"+le+"')"}return Z.formatExpression(te,ee,ne,oe)}Object.defineProperty(H,"__esModule",{value:!0});var X=U("../channel"),K=U("../fielddef"),Q=U("../scale"),Z=U("../timeunit"),J=U("../type"),$=U("../util");H.applyConfig=function(ee,te,ae){for(var ne=0,ie=ae;ne<ie.length;ne++){var oe=ie[ne],le=te[oe];void 0!==le&&(ee[oe]={value:le})}return ee},H.applyMarkConfig=function(ee,te,ae){for(var ne=0,ie=ae;ne<ie.length;ne++){var oe=ie[ne],le=B(oe,te.markDef,te.config);void 0!==le&&(ee[oe]={value:le})}return ee},H.getStyles=j,H.getMarkConfig=B,H.formatSignalRef=function(ee,te,ae,ne){var ie=W(ee,te,ne);if(ee.bin)return{signal:Y(K.field(ee,{expr:ae}),K.field(ee,{expr:ae,binSuffix:"end"}),ie,ne)};if("quantitative"===ee.type)return{signal:""+q(K.field(ee,{expr:ae}),ie)};if(K.isTimeFieldDef(ee)){var oe=K.isScaleFieldDef(ee)&&ee.scale&&ee.scale.type===Q.ScaleType.UTC;return{signal:G(K.field(ee,{expr:ae}),ee.timeUnit,te,ne.text.shortTimeLabels,ne.timeFormat,oe)}}return{signal:"''+"+K.field(ee,{expr:ae})}},H.getSpecifiedOrDefaultValue=function(ee,te){return void 0===ee?te:ee},H.numberFormat=W,H.numberFormatExpr=V,H.binFormatExpression=Y,H.timeFormatExpression=G,H.sortParams=function(ee,te){return($.isArray(ee)?ee:[ee]).reduce(function(ae,ne){return ae.field.push(K.field(ne,te)),ae.order.push(ne.sort||"ascending"),ae},{field:[],order:[]})},H.titleMerger=function(ee,te){return{explicit:ee.explicit,value:ee.value===te.value?ee.value:ee.value+", "+te.value}},H.binRequiresRange=function(ee,te){return ee.bin?X.isScaleChannel(te)&&$.contains(["ordinal","nominal"],ee.type):(console.warn("Only use this method with binned field defs"),!1)}},{"../channel":16,"../fielddef":101,"../scale":109,"../timeunit":114,"../type":118,"../util":119}],26:[function(U,z,H){"use strict";function j($,ee,te){return W.__assign({autosize:1===K.keys(te).length&&te.type?te.type:te},X.extractTopLevelProperties(ee),X.extractTopLevelProperties($))}function B($,ee){var te=$.config?q.stripAndRedirectConfig($.config):void 0,ae=$.assembleTitle(),ne=$.assembleGroupStyle(),ie=$.assembleLayoutSignals();return ie=ie.filter(function(oe){return"width"!==oe.name&&"height"!==oe.name||void 0===oe.value||(ee[oe.name]=+oe.value,!1)}),{spec:W.__assign({$schema:"https://vega.github.io/schema/vega/v3.0.json"},$.description?{description:$.description}:{},ee,ae?{title:ae}:{},ne?{style:ne}:{},{data:[].concat($.assembleSelectionData([]),Z.assembleRootData($.component.data))},$.assembleGroup(ie.concat($.assembleSelectionTopLevelSignals([]))),te?{config:te}:{})}}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../config"),V=U("../fielddef"),Y=U("../log"),G=U("../spec"),X=U("../toplevelprops"),K=U("../util"),Q=U("./buildmodel"),Z=U("./data/assemble"),J=U("./data/optimize");H.compile=function($,ee){void 0===ee&&(ee={}),ee.logger&&Y.set(ee.logger),ee.fieldTitle&&V.setTitleFormatter(ee.fieldTitle);try{var te=q.initConfig(K.mergeDeep({},ee.config,$.config)),ae=G.normalize($,te),ne=X.normalizeAutoSize($.autosize,te.autosize,G.isLayerSpec(ae)||G.isUnitSpec(ae)),ie=Q.buildModel(ae,null,"",void 0,void 0,te,"fit"===ne.type);return ie.parse(),J.optimizeDataflow(ie.component.data),B(ie,j($,te,ne))}finally{ee.logger&&Y.reset(),ee.fieldTitle&&V.resetTitleFormatter()}}},{"../config":96,"../fielddef":101,"../log":106,"../spec":112,"../toplevelprops":116,"../util":119,"./buildmodel":24,"./data/assemble":29,"./data/optimize":39,tslib:6}],27:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../log"),W=U("../spec"),q=U("./baseconcat"),V=U("./buildmodel"),Y=U("./layoutsize/parse"),G=function(X){function K(Q,Z,J,$,ee){var te=X.call(this,Q,Z,J,ee,Q.resolve)||this;return te.type="concat",Q.resolve&&Q.resolve.axis&&("shared"===Q.resolve.axis.x||"shared"===Q.resolve.axis.y)&&B.warn(B.message.CONCAT_CANNOT_SHARE_AXIS),te.isVConcat=W.isVConcatSpec(Q),te.children=(W.isVConcatSpec(Q)?Q.vconcat:Q.hconcat).map(function(ae,ne){return V.buildModel(ae,te,te.getName("concat_"+ne),void 0,$,ee,!1)}),te}return j.__extends(K,X),K.prototype.parseLayoutSize=function(){Y.parseConcatLayoutSize(this)},K.prototype.parseAxisGroup=function(){return null},K.prototype.assembleLayout=function(){return j.__assign({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},K}(q.BaseConcatModel);H.ConcatModel=G},{"../log":106,"../spec":112,"./baseconcat":23,"./buildmodel":24,"./layoutsize/parse":49,tslib:6}],28:[function(U,z,H){"use strict";function j(Q,Z,J){return J.bin?(Q[V.field(J,{})]=!0,Q[V.field(J,{binSuffix:"end"})]=!0,X.binRequiresRange(J,Z)&&(Q[V.field(J,{binSuffix:"range"})]=!0)):Q[V.field(J)]=!0,Q}function B(Q,Z){for(var J in Z)if(Z.hasOwnProperty(J)){var $=Z[J];for(var ee in $)$.hasOwnProperty(ee)&&(J in Q?Q[J][ee]=$[ee]:Q[J]={op:$[ee]})}}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../../channel"),V=U("../../fielddef"),Y=U("../../log"),G=U("../../util"),X=U("../common"),K=function(Q){function Z(J,$){var ee=Q.call(this)||this;return ee.dimensions=J,ee.measures=$,ee}return W.__extends(Z,Q),Z.prototype.clone=function(){return new Z(W.__assign({},this.dimensions),G.duplicate(this.measures))},Z.makeFromEncoding=function(J){var $=!1;J.forEachFieldDef(function(ae){ae.aggregate&&($=!0)});var ee={},te={};return $?(J.forEachFieldDef(function(ae,ne){ae.aggregate?"count"===ae.aggregate?(ee["*"]=ee["*"]||{},ee["*"].count=V.field(ae,{aggregate:"count"})):(ee[ae.field]=ee[ae.field]||{},ee[ae.field][ae.aggregate]=V.field(ae),q.isScaleChannel(ne)&&"unaggregated"===J.scaleDomain(ne)&&(ee[ae.field].min=V.field(ae,{aggregate:"min"}),ee[ae.field].max=V.field(ae,{aggregate:"max"}))):j(te,ne,ae)}),0===G.keys(te).length+G.keys(ee).length?null:new Z(te,ee)):null},Z.makeFromTransform=function(J){for(var $={},ee={},te=0,ae=J.aggregate;te<ae.length;te++)(oe=ae[te]).op&&("count"===oe.op?(ee["*"]=ee["*"]||{},ee["*"].count=oe.as||V.field(oe)):(ee[oe.field]=ee[oe.field]||{},ee[oe.field][oe.op]=oe.as||V.field(oe)));for(var oe,ne=0,ie=J.groupby;ne<ie.length;ne++)oe=ie[ne],$[oe]=!0;return 0===G.keys($).length+G.keys(ee).length?null:new Z($,ee)},Z.prototype.merge=function(J){G.differ(this.dimensions,J.dimensions)?Y.debug("different dimensions, cannot merge"):(B(this.measures,J.measures),J.remove())},Z.prototype.addDimensions=function(J){var $=this;J.forEach(function(ee){return $.dimensions[ee]=!0})},Z.prototype.dependentFields=function(){var J={};return G.keys(this.dimensions).forEach(function($){return J[$]=!0}),G.keys(this.measures).forEach(function($){return J[$]=!0}),J},Z.prototype.producedFields=function(){var J=this,$={};return G.keys(this.measures).forEach(function(ee){G.keys(J.measures[ee]).forEach(function(te){$[te+"_"+ee]=!0})}),$},Z.prototype.assemble=function(){var J=this,$=[],ee=[],te=[];return G.keys(this.measures).forEach(function(ae){G.keys(J.measures[ae]).forEach(function(ne){te.push(J.measures[ae][ne]),$.push(ne),ee.push(ae)})}),{type:"aggregate",groupby:G.keys(this.dimensions),ops:$,fields:ee,as:te}},Z}(U("./dataflow").DataFlowNode);H.AggregateNode=K},{"../../channel":16,"../../fielddef":101,"../../log":106,"../../util":119,"../common":25,"./dataflow":32,tslib:6}],29:[function(U,z,H){"use strict";function j(ie){function oe(se,re){if(se instanceof te.SourceNode&&(W.isUrlData(se.data)||(ie.push(re),re=de={name:null,source:re.name,transform:[]})),se instanceof J.ParseNode&&(se.parent instanceof te.SourceNode&&!re.source?re.format=B.__assign({},re.format||{},{parse:se.assembleFormatParse()}):re.transform=re.transform.concat(se.assembleTransforms())),se instanceof K.FacetNode)return re.name||(re.name="data_"+le++),!re.source||0<re.transform.length?(ie.push(re),se.data=re.name):se.data=re.source,void se.assemble().forEach(function(pe){return ie.push(pe)});if((se instanceof Q.FilterNode||se instanceof G.CalculateNode||se instanceof V.AggregateNode||se instanceof ee.LookupNode||se instanceof $.IdentifierNode)&&re.transform.push(se.assemble()),(se instanceof Z.FilterInvalidNode||se instanceof Y.BinNode||se instanceof ne.TimeUnitNode||se instanceof ae.StackNode)&&(re.transform=re.transform.concat(se.assemble())),se instanceof V.AggregateNode&&(re.name||(re.name="data_"+le++)),se instanceof X.OutputNode)if(re.source&&0===re.transform.length)se.setSource(re.source);else if(se.parent instanceof X.OutputNode)se.setSource(re.name);else if(re.name||(re.name="data_"+le++),se.setSource(re.name),1===se.numChildren()){ie.push(re);var de={name:null,source:re.name,transform:[]};re=de}switch(se.numChildren()){case 0:se instanceof X.OutputNode&&(!re.source||0<re.transform.length)&&ie.push(re);break;case 1:oe(se.children[0],re);break;default:re.name||(re.name="data_"+le++);var ce=re.name;!re.source||0<re.transform.length?ie.push(re):ce=re.source,se.children.forEach(function(pe){oe(pe,{name:null,source:ce,transform:[]})});}}var le=0;return oe}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("../../data"),q=U("../../util"),V=U("./aggregate"),Y=U("./bin"),G=U("./calculate"),X=U("./dataflow"),K=U("./facet"),Q=U("./filter"),Z=U("./filterinvalid"),J=U("./formatparse"),$=U("./indentifier"),ee=U("./lookup"),te=U("./source"),ae=U("./stack"),ne=U("./timeunit");H.assembleFacetData=function(ie){var oe=[],le=j(oe);return ie.children.forEach(function(se){return le(se,{source:ie.name,name:null,transform:[]})}),oe},H.assembleRootData=function(ie){var oe=q.vals(ie.sources),le=[],se=j(le),re=0;oe.forEach(function(ge){ge.hasName()||(ge.dataName="source_"+re++);var fe=ge.assemble();se(ge,fe)}),le.forEach(function(ge){0===ge.transform.length&&delete ge.transform}),le.sort(function(ge,fe){return 0===(ge.transform||[]).length?-1:0===(fe.transform||[]).length?1:0});for(var de=0,ce=le;de<ce.length;de++)for(var me,pe=0,ue=ce[de].transform||[];pe<ue.length;pe++)me=ue[pe],"lookup"===me.type&&(me.from=ie.outputNodes[me.from].getSource());return le}},{"../../data":97,"../../util":119,"./aggregate":28,"./bin":30,"./calculate":31,"./dataflow":32,"./facet":33,"./filter":34,"./filterinvalid":35,"./formatparse":36,"./indentifier":37,"./lookup":38,"./source":42,"./stack":43,"./timeunit":44,tslib:6}],30:[function(U,z,H){"use strict";function j(ee,te,ae,ne){if(Z.binRequiresRange(te,ae)){var ie=J.isUnitModel(ee)?ee.axis(ae)||ee.legend(ae)||{}:{},oe=K.field(te,{expr:"datum"}),le=K.field(te,{expr:"datum",binSuffix:"end"});return{formulaAs:K.field(te,{binSuffix:"range"}),formula:Z.binFormatExpression(oe,le,ie.format,ne)}}return{}}function B(ee,te){return X.binToString(ee)+"_"+te}function W(ee){return!!ee.model}function q(ee,te){if(W(ee)){var ae=ee.model;return{signal:ae.getName(te+"_bins"),extentSignal:ae.getName(te+"_extent")}}return ee}function V(ee){return"as"in ee}function Y(ee,te){var ae=V(ee)?[ee.as,ee.as+"_end"]:[K.field(ee,{}),K.field(ee,{binSuffix:"end"})];var ne=K.normalizeBin(ee.bin,void 0)||{},ie=B(ne,ee.field),oe=q(te,ie),le=oe.signal,se=oe.extentSignal;return{key:ie,binComponent:G.__assign({bin:ne,field:ee.field,as:ae},le?{signal:le}:{},se?{extentSignal:se}:{})}}Object.defineProperty(H,"__esModule",{value:!0});var G=U("tslib"),X=U("../../bin"),K=U("../../fielddef"),Q=U("../../util"),Z=U("../common"),J=U("../model"),$=function(ee){function te(ae){var ne=ee.call(this)||this;return ne.bins=ae,ne}return G.__extends(te,ee),te.prototype.clone=function(){return new te(Q.duplicate(this.bins))},te.makeBinFromEncoding=function(ae){var ne=ae.reduceFieldDef(function(ie,oe,le){if(oe.bin){var se=Y(oe,{model:ae}),re=se.key,de=se.binComponent;ie[re]=G.__assign({},de,ie[re],j(ae,oe,le,ae.config))}return ie},{});return 0===Q.keys(ne).length?null:new te(ne)},te.makeFromTransform=function(ae,ne){var ie=Y(ae,ne),oe=ie.key,le=ie.binComponent;return new te((se={},se[oe]=le,se));var se},te.prototype.merge=function(ae){this.bins=G.__assign({},this.bins,ae.bins),ae.remove()},te.prototype.producedFields=function(){var ae={};return Q.vals(this.bins).forEach(function(ne){ne.as.forEach(function(ie){return ae[ie]=!0})}),ae},te.prototype.dependentFields=function(){var ae={};return Q.vals(this.bins).forEach(function(ne){ae[ne.field]=!0}),ae},te.prototype.assemble=function(){return Q.flatten(Q.vals(this.bins).map(function(ae){var ne=[],ie=G.__assign({type:"bin",field:ae.field,as:ae.as,signal:ae.signal},ae.bin);return!ae.bin.extent&&ae.extentSignal&&(ne.push({type:"extent",field:ae.field,signal:ae.extentSignal}),ie.extent={signal:ae.extentSignal}),ne.push(ie),ae.formula&&ne.push({type:"formula",expr:ae.formula,as:ae.formulaAs}),ne}))},te}(U("./dataflow").DataFlowNode);H.BinNode=$},{"../../bin":15,"../../fielddef":101,"../../util":119,"../common":25,"../model":67,"./dataflow":32,tslib:6}],31:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../util"),W=function(q){function V(Y){var G=q.call(this)||this;return G.transform=Y,G}return j.__extends(V,q),V.prototype.clone=function(){return new V(B.duplicate(this.transform))},V.prototype.producedFields=function(){var Y={};return Y[this.transform.as]=!0,Y},V.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},V}(U("./dataflow").DataFlowNode);H.CalculateNode=W},{"../../util":119,"./dataflow":32,tslib:6}],32:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=function(){function q(V){this.debugName=V,this._children=[],this._parent=null}return q.prototype.clone=function(){throw new Error("Cannot clone node")},q.prototype.producedFields=function(){return{}},q.prototype.dependentFields=function(){return{}},Object.defineProperty(q.prototype,"parent",{get:function(){return this._parent},set:function(Y){this._parent=Y,Y.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(q.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),q.prototype.numChildren=function(){return this._children.length},q.prototype.addChild=function(V){this._children.push(V)},q.prototype.removeChild=function(V){this._children.splice(this._children.indexOf(V),1)},q.prototype.remove=function(){for(var V=0,Y=this._children;V<Y.length;V++)Y[V].parent=this._parent;this._parent.removeChild(this)},q.prototype.insertAsParentOf=function(V){var Y=V.parent;Y.removeChild(this),this.parent=Y,V.parent=this},q.prototype.swapWithParent=function(){for(var V=this._parent,Y=V.parent,G=0,X=this._children;G<X.length;G++)X[G].parent=V;this._children=[],V.removeChild(this),V.parent.removeChild(V),this.parent=Y,V.parent=this},q}();H.DataFlowNode=B;var W=function(q){function V(Y,G,X){var K=q.call(this,Y)||this;return K.type=G,K.refCounts=X,K._source=K._name=Y,!K.refCounts||K._name in K.refCounts||(K.refCounts[K._name]=0),K}return j.__extends(V,q),V.prototype.clone=function(){var Y=new this.constructor;return Y.debugName="clone_"+this.debugName,Y._source=this._source,Y._name="clone_"+this._name,Y.type=this.type,Y.refCounts=this.refCounts,Y.refCounts[Y._name]=0,Y},V.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},V.prototype.isRequired=function(){return!!this.refCounts[this._name]},V.prototype.setSource=function(Y){this._source=Y},V}(B);H.OutputNode=W},{tslib:6}],33:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../channel"),W=U("../../log"),q=U("../../scale"),V=U("../../vega.schema"),Y=U("../scale/domain"),G=function(X){function K(Q,Z,J){var $=X.call(this)||this;return $.model=Q,$.name=Z,$.data=J,Q.facet.column&&($.columnFields=[Q.field(B.COLUMN)],$.columnName=Q.getName("column_domain"),Q.fieldDef(B.COLUMN).bin&&$.columnFields.push(Q.field(B.COLUMN,{binSuffix:"end"}))),Q.facet.row&&($.rowFields=[Q.field(B.ROW)],$.rowName=Q.getName("row_domain"),Q.fieldDef(B.ROW).bin&&$.rowFields.push(Q.field(B.ROW,{binSuffix:"end"}))),$.childModel=Q.child,$}return j.__extends(K,X),Object.defineProperty(K.prototype,"fields",{get:function(){var Z=[];return this.columnFields&&(Z=Z.concat(this.columnFields)),this.rowFields&&(Z=Z.concat(this.rowFields)),Z},enumerable:!0,configurable:!0}),K.prototype.getSource=function(){return this.name},K.prototype.getChildIndependentFieldsWithStep=function(){for(var Q={},Z=0,J=["x","y"];Z<J.length;Z++){var $=J[Z],ee=this.childModel.component.scales[$];if(ee&&!ee.merged){var te=ee.get("type"),ae=ee.get("range");if(q.hasDiscreteDomain(te)&&V.isVgRangeStep(ae)){var ne=Y.assembleDomain(this.childModel,$),ie=Y.getFieldFromDomain(ne);ie?Q[$]=ie:W.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return Q},K.prototype.assembleRowColumnData=function(Q,Z,J){var $={},ee="row"===Q?"y":"x";return J[ee]&&($=Z?{fields:["distinct_"+J[ee]],ops:["max"],as:["distinct_"+J[ee]]}:{fields:[J[ee]],ops:["distinct"]}),{name:"row"===Q?this.rowName:this.columnName,source:Z||this.data,transform:[j.__assign({type:"aggregate",groupby:"row"===Q?this.rowFields:this.columnFields},$)]}},K.prototype.assemble=function(){var Q=[],Z=null,J=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(J.x||J.y)){Z="cross_"+this.columnName+"_"+this.rowName;var $=[].concat(J.x?[J.x]:[],J.y?[J.y]:[]),ee=$.map(function(){return"distinct"});Q.push({name:Z,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:$,ops:ee}]})}return this.columnName&&Q.push(this.assembleRowColumnData("column",Z,J)),this.rowName&&Q.push(this.assembleRowColumnData("row",Z,J)),Q},K}(U("./dataflow").DataFlowNode);H.FacetNode=G},{"../../channel":16,"../../log":106,"../../scale":109,"../../vega.schema":121,"../scale/domain":73,"./dataflow":32,tslib:6}],34:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../filter"),W=U("../../util"),q=function(V){function Y(G,X){var K=V.call(this)||this;return K.model=G,K.filter=X,K.expr=B.expression(K.model,K.filter,K),K}return j.__extends(Y,V),Y.prototype.clone=function(){return new Y(this.model,W.duplicate(this.filter))},Y.prototype.assemble=function(){return{type:"filter",expr:this.expr}},Y}(U("./dataflow").DataFlowNode);H.FilterNode=q},{"../../filter":102,"../../util":119,"./dataflow":32,tslib:6}],35:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../channel"),W=U("../../fielddef"),q=U("../../scale"),V=U("../../util"),Y=function(G){function X(K){var Q=G.call(this)||this;return Q.fieldDefs=K,Q}return j.__extends(X,G),X.prototype.clone=function(){return new X(j.__assign({},this.fieldDefs))},X.make=function(K){if("filter"!==K.config.invalidValues)return null;var Q=K.reduceFieldDef(function(Z,J,$){var ee=B.isScaleChannel($)&&K.getScaleComponent($);if(ee){var te=ee.get("type");q.hasContinuousDomain(te)&&!J.aggregate&&(Z[J.field]=J)}return Z},{});return V.keys(Q).length?new X(Q):null},Object.defineProperty(X.prototype,"filter",{get:function(){return this.fieldDefs},enumerable:!0,configurable:!0}),X.prototype.assemble=function(){var K=this,Q=V.keys(this.filter).reduce(function(Z,J){var $=K.fieldDefs[J],ee=W.field($,{expr:"datum"});return null!==$&&(Z.push(ee+" !== null"),Z.push("!isNaN("+ee+")")),Z},[]);return 0<Q.length?{type:"filter",expr:Q.join(" && ")}:null},X}(U("./dataflow").DataFlowNode);H.FilterInvalidNode=Y},{"../../channel":16,"../../fielddef":101,"../../scale":109,"../../util":119,"./dataflow":32,tslib:6}],36:[function(U,z,H){"use strict";function j(J,$){var ee="datum"+K.accessPath(J);if("number"===$)return"toNumber("+ee+")";if("boolean"===$)return"toBoolean("+ee+")";if("string"===$)return"toString("+ee+")";if("date"===$)return"toDate("+ee+")";if(0===$.indexOf("date:"))return"timeParse("+ee+","+(te=$.slice(5,$.length))+")";if(0===$.indexOf("utc:")){var te=$.slice(4,$.length);return"utcParse("+ee+","+te+")"}return Y.warn(Y.message.unrecognizedParse($)),null}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("../../aggregate"),q=U("../../fielddef"),V=U("../../filter"),Y=U("../../log"),G=U("../../logical"),X=U("../../transform"),K=U("../../util"),Q=U("../model"),Z=function(J){function $(ee){var te=J.call(this)||this;return te._parse={},te._parse=ee,te}return B.__extends($,J),$.prototype.clone=function(){return new $(K.duplicate(this.parse))},$.make=function(ee){var te={},ae={};(ee.transforms||[]).forEach(function(le){X.isCalculate(le)?ae[le.as]=!0:X.isFilter(le)&&G.forEachLeave(le.filter,function(se){(V.isEqualFilter(se)||V.isRangeFilter(se)||V.isOneOfFilter(se))&&se.timeUnit&&(te[se.field]="date")})},{}),(Q.isUnitModel(ee)||Q.isFacetModel(ee))&&ee.forEachFieldDef(function(le){if(q.isTimeFieldDef(le))te[le.field]="date";else if(q.isNumberFieldDef(le)){if(ae[le.field]||W.isCountingAggregateOp(le.aggregate))return;te[le.field]="number"}});var ne=ee.data;if(ne&&ne.format&&ne.format.parse){var ie=ne.format.parse;K.keys(ie).forEach(function(le){te[le]=ie[le]})}var oe=ee.component.data.ancestorParse;return K.keys(oe).forEach(function(le){te[le]===oe[le]?delete te[le]:Y.warn(Y.message.differentParse(le,te[le],oe[le]))}),0===K.keys(te).length?null:new $(te)},Object.defineProperty($.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),$.prototype.merge=function(ee){this._parse=B.__assign({},this._parse,ee.parse),ee.remove()},$.prototype.assembleFormatParse=function(){return this._parse},$.prototype.producedFields=function(){return K.toSet(K.keys(this.parse))},$.prototype.dependentFields=function(){return K.toSet(K.keys(this.parse))},$.prototype.assembleTransforms=function(){var ee=this;return K.keys(this._parse).map(function(te){var ae=j(te,ee._parse[te]);return ae?{type:"formula",expr:ae,as:te}:null}).filter(function(te){return null!==te})},$}(U("./dataflow").DataFlowNode);H.ParseNode=Z},{"../../aggregate":13,"../../fielddef":101,"../../filter":102,"../../log":106,"../../logical":107,"../../transform":117,"../../util":119,"../model":67,"./dataflow":32,tslib:6}],37:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../selection"),W=function(q){function V(){return q.call(this)||this}return j.__extends(V,q),V.prototype.clone=function(){return new V},V.prototype.producedFields=function(){return Y={},Y[B.SELECTION_ID]=!0,Y;var Y},V.prototype.assemble=function(){return{type:"identifier",as:B.SELECTION_ID}},V}(U("./dataflow").DataFlowNode);H.IdentifierNode=W},{"../../selection":110,"./dataflow":32,tslib:6}],38:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("vega-util"),W=U("../../log"),q=U("./dataflow"),V=U("./source"),Y=function(G){function X(K,Q){var Z=G.call(this)||this;return Z.transform=K,Z.secondary=Q,Z}return j.__extends(X,G),X.make=function(K,Q,Z){var J=K.component.data.sources,$=new V.SourceNode(Q.from.data),ee=J[$.hash()];ee||(J[$.hash()]=$,ee=$);var te=K.getName("lookup_"+Z),ae=new q.OutputNode(te,"lookup",K.component.data.outputNodeRefCounts);return ae.parent=ee,K.component.data.outputNodes[te]=ae,new X(Q,ae.getSource())},X.prototype.producedFields=function(){return B.toSet(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},X.prototype.assemble=function(){var K;if(this.transform.from.fields)K=j.__assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var Q=this.transform.as;B.isString(Q)||(W.warn(W.message.NO_FIELDS_NEEDS_AS),Q="_lookup"),K={as:[Q]}}return j.__assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},K,this.transform.default?{default:this.transform.default}:{})},X}(q.DataFlowNode);H.LookupNode=Y},{"../../log":106,"./dataflow":32,"./source":42,tslib:6,"vega-util":11}],39:[function(U,z,H){"use strict";function j(ee){function te(ae){if(!(ae instanceof Q.FacetNode)){var ne=ae.clone();if(ne instanceof K.OutputNode){var ie=H.FACET_SCALE_PREFIX+ne.getSource();ne.setSource(ie),ee.model.component.data.outputNodes[ie]=ne}else(ne instanceof X.AggregateNode||ne instanceof $.StackNode)&&ne.addDimensions(ee.fields);return G.flatten(ae.children.map(te)).forEach(function(oe){return oe.parent=ne}),[ne]}return G.flatten(ae.children.map(te))}return te}function B(ee){if(!(ee instanceof Q.FacetNode))ee.children.forEach(B);else if(1!==ee.numChildren()||ee.children[0]instanceof K.OutputNode)W(ee.model.component.data.main),G.flatten(ee.children.map(j(ee))).forEach(function(ae){return ae.parent=ee.model.component.data.main});else{var te=ee.children[0];(te instanceof X.AggregateNode||te instanceof $.StackNode)&&te.addDimensions(ee.fields),te.swapWithParent(),B(ee)}}function W(ee){if(ee instanceof K.OutputNode&&ee.type===Y.MAIN&&1===ee.numChildren()){var te=ee.children[0];te instanceof Q.FacetNode||(te.swapWithParent(),W(ee))}}function q(ee){ee instanceof Z.FilterInvalidNode&&G.every(G.vals(ee.filter),function(te){return null===te})&&ee.remove(),ee instanceof K.OutputNode&&!ee.isRequired()&&ee.remove(),ee.children.forEach(q)}function V(ee){function te(ne){0===ne.numChildren()?ae.push(ne):ne.children.forEach(te)}var ae=[];return ee.forEach(te),ae}Object.defineProperty(H,"__esModule",{value:!0});var Y=U("../../data"),G=U("../../util"),X=U("./aggregate"),K=U("./dataflow"),Q=U("./facet"),Z=U("./filterinvalid"),J=U("./optimizers"),$=U("./stack");H.FACET_SCALE_PREFIX="scale_",H.optimizeDataflow=function(ee){var te=G.vals(ee.sources);te.forEach(q),V(te=te.filter(function(ae){return 0<ae.numChildren()})).forEach(J.iterateFromLeaves(J.removeUnusedSubtrees)),V(te=te.filter(function(ae){return 0<ae.numChildren()})).forEach(J.iterateFromLeaves(J.moveParseUp)),V(te).forEach(J.removeDuplicateTimeUnits),te.forEach(B),G.keys(ee.sources).forEach(function(ae){0===ee.sources[ae].numChildren()&&delete ee.sources[ae]})}},{"../../data":97,"../../util":119,"./aggregate":28,"./dataflow":32,"./facet":33,"./filterinvalid":35,"./optimizers":40,"./stack":43}],40:[function(U,z,H){"use strict";function j(X){function K(Q){if(!(Q instanceof Y.SourceNode)){var Z=Q.parent;X(Q)&&K(Z)}}return K}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("../../util"),q=U("./dataflow"),V=U("./formatparse"),Y=U("./source"),G=U("./timeunit");H.iterateFromLeaves=j,H.moveParseUp=function(X){var K=X.parent;if(X instanceof V.ParseNode){if(K instanceof Y.SourceNode)return!1;if(1<K.numChildren())return!0;if(K instanceof V.ParseNode)K.merge(X);else{if(W.hasIntersection(K.producedFields(),X.dependentFields()))return!0;X.swapWithParent()}}return!0},H.removeUnusedSubtrees=function(X){return!(X instanceof q.OutputNode||0<X.numChildren()||(X.remove(),0))},H.removeDuplicateTimeUnits=function(X){var K={};return j(function(Q){if(Q instanceof G.TimeUnitNode){var Z=Q.producedFields();W.keys(Z).every(function(J){return!!K[J]})?Q.remove():K=B.__assign({},K,Z)}return!0})(X)}},{"../../util":119,"./dataflow":32,"./formatparse":36,"./source":42,"./timeunit":44,tslib:6}],41:[function(U,z,H){"use strict";function j(ue,me){if(ue.data||!ue.parent){var ge=new de.SourceNode(ue.data),fe=ge.hash();return fe in me?me[fe]:(me[fe]=ge,ge)}return ue.parent.component.data.facetRoot?ue.parent.component.data.facetRoot:ue.parent.component.data.main}function B(ue){function me(_e){he?_e.parent?fe.insertAsParentOf(_e):_e.parent=fe:he=_e.parent||_e,fe=_e}var ge,fe,he=null,ye=0;return ue.transforms.forEach(function(_e){if(K.isCalculate(_e))ge=new te.CalculateNode(_e);else if(K.isFilter(_e)){var be={},Se=_e.filter,ve=null;G.isEqualFilter(Se)?ve=Se.equal:G.isRangeFilter(Se)?ve=Se.range[0]:G.isOneOfFilter(Se)&&(ve=(Se.oneOf||Se.in)[0]),ve&&(Y.isDateTime(ve)?be[Se.field]="date":q.isNumber(ve)?be[Se.field]="number":q.isString(ve)&&(be[Se.field]="string")),0<Q.keys(be).length&&me(new le.ParseNode(be)),ge=new ie.FilterNode(ue,_e.filter)}else if(K.isBin(_e))ge=ee.BinNode.makeFromTransform(_e,{model:ue});else if(K.isTimeUnit(_e))ge=pe.TimeUnitNode.makeFromTransform(_e);else if(K.isAggregate(_e))ge=$.AggregateNode.makeFromTransform(_e),J.requiresSelectionId(ue)&&(me(ge),ge=new se.IdentifierNode);else{if(!K.isLookup(_e))return void X.warn(X.message.invalidTransformIgnored(_e));ge=re.LookupNode.make(ue,_e,ye++)}me(ge)}),{first:he,last:ge}}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("vega-util"),V=U("../../data"),Y=U("../../datetime"),G=U("../../filter"),X=U("../../log"),K=U("../../transform"),Q=U("../../util"),Z=U("../model"),J=U("../selection/selection"),$=U("./aggregate"),ee=U("./bin"),te=U("./calculate"),ae=U("./dataflow"),ne=U("./facet"),ie=U("./filter"),oe=U("./filterinvalid"),le=U("./formatparse"),se=U("./indentifier"),re=U("./lookup"),de=U("./source"),ce=U("./stack"),pe=U("./timeunit");H.parseTransformArray=B,H.parseData=function(ue){var me=j(ue,ue.component.data.sources),ge=ue.component.data.outputNodes,fe=ue.component.data.outputNodeRefCounts,he=me;J.requiresSelectionId(ue)&&!ue.parent&&((De=new se.IdentifierNode).parent=he,he=De);var ye=ue.parent&&Z.isLayerModel(ue.parent);if((Z.isUnitModel(ue)||Z.isFacetModel(ue))&&ye&&(xe=ee.BinNode.makeBinFromEncoding(ue))&&(xe.parent=he,he=xe),0<ue.transforms.length){var _e=B(ue),be=_e.first,Se=_e.last;be.parent=he,he=Se}var ve=le.ParseNode.make(ue);if(ve&&(ve.parent=he,he=ve),Z.isUnitModel(ue)||Z.isFacetModel(ue)){if(!ye){var xe=ee.BinNode.makeBinFromEncoding(ue);xe&&(xe.parent=he,he=xe)}var Ee=pe.TimeUnitNode.makeFromEncoding(ue);Ee&&(Ee.parent=he,he=Ee)}var Ne=ue.getName(V.RAW),Te=new ae.OutputNode(Ne,V.RAW,fe);if(ge[Ne]=Te,Te.parent=he,he=Te,Z.isUnitModel(ue)){var ke=$.AggregateNode.makeFromEncoding(ue);if(ke&&(ke.parent=he,he=ke,J.requiresSelectionId(ue))){var De=new se.IdentifierNode;De.parent=he,he=De}var Oe=ce.StackNode.make(ue);Oe&&(Oe.parent=he,he=Oe)}if(Z.isUnitModel(ue)){var Ce=oe.FilterInvalidNode.make(ue);Ce&&(Ce.parent=he,he=Ce)}var Ae=ue.getName(V.MAIN),Pe=new ae.OutputNode(Ae,V.MAIN,fe);ge[Ae]=Pe,Pe.parent=he,he=Pe;var Me=null;if(Z.isFacetModel(ue)){var Re=ue.getName("facet");Me=new ne.FacetNode(ue,Re,Pe.getSource()),ge[Re]=Me,Me.parent=he,he=Me}var we=W.__assign({},ue.component.data.ancestorParse,ve?ve.parse:{});return W.__assign({},ue.component.data,{outputNodes:ge,outputNodeRefCounts:fe,raw:Te,main:Pe,facetRoot:Me,ancestorParse:we})}},{"../../data":97,"../../datetime":98,"../../filter":102,"../../log":106,"../../transform":117,"../../util":119,"../model":67,"../selection/selection":80,"./aggregate":28,"./bin":30,"./calculate":31,"./dataflow":32,"./facet":33,"./filter":34,"./filterinvalid":35,"./formatparse":36,"./indentifier":37,"./lookup":38,"./source":42,"./stack":43,"./timeunit":44,tslib:6,"vega-util":11}],42:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../data"),W=U("../../util"),q=function(V){function Y(G){var X=V.call(this)||this;if(G=G||{name:"source"},B.isInlineData(G))X._data={values:G.values};else if(!B.isUrlData(G))B.isNamedData(G)&&(X._name=G.name,X._data={});else if(X._data={url:G.url},G.format||(G.format={}),!G.format||!G.format.type){var K=/(?:\.([^.]+))?$/.exec(G.url)[1];W.contains(["json","csv","tsv","topojson"],K)||(K="json"),G.format.type=K}if(!B.isNamedData(G)&&G.format){var Q=G.format,Z=(Q.parse,j.__rest(Q,["parse"]));X._data.format=Z}return X}return j.__extends(Y,V),Object.defineProperty(Y.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Y.prototype.hasName=function(){return!!this._name},Object.defineProperty(Y.prototype,"dataName",{get:function(){return this._name},set:function(X){this._name=X},enumerable:!0,configurable:!0}),Object.defineProperty(Y.prototype,"parent",{set:function(){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),Y.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},Y.prototype.hash=function(){return B.isInlineData(this._data)?(this._hash||(this._hash=W.hash(this._data)),this._hash):B.isUrlData(this._data)?W.hash([this._data.url,this._data.format]):this._name},Y.prototype.assemble=function(){return j.__assign({name:this._name},this._data,{transform:[]})},Y}(U("./dataflow").DataFlowNode);H.SourceNode=q},{"../../data":97,"../../util":119,"./dataflow":32,tslib:6}],43:[function(U,z,H){"use strict";function j(X){return X.stack.stackBy.reduce(function(K,Q){var Z=Q.fieldDef,J=q.field(Z);return J&&K.push(J),K},[])}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("vega-util"),q=U("../../fielddef"),V=U("../../util"),Y=U("../common"),G=function(X){function K(Q){var Z=X.call(this)||this;return Z._stack=Q,Z}return B.__extends(K,X),K.prototype.clone=function(){return new K(V.duplicate(this._stack))},K.make=function(Q){var Z=Q.stack;if(!Z)return null;var J;Z.groupbyChannel&&(J=Q.fieldDef(Z.groupbyChannel));var $,ee=j(Q),te=Q.encoding.order;return $=te?Y.sortParams(te):ee.reduce(function(ae,ne){return ae.field.push(ne),ae.order.push("descending"),ae},{field:[],order:[]}),new K({dimensionFieldDef:J,field:Q.field(Z.fieldChannel),facetby:[],stackby:ee,sort:$,offset:Z.offset,impute:Z.impute})},Object.defineProperty(K.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),K.prototype.addDimensions=function(Q){this._stack.facetby=this._stack.facetby.concat(Q)},K.prototype.dependentFields=function(){var Q={};Q[this._stack.field]=!0,this.getGroupbyFields().forEach(function(J){return Q[J]=!0}),this._stack.facetby.forEach(function(J){return Q[J]=!0});var Z=this._stack.sort.field;return W.isArray(Z)?Z.forEach(function(J){return Q[J]=!0}):Q[Z]=!0,Q},K.prototype.producedFields=function(){var Q={};return Q[this._stack.field+"_start"]=!0,Q[this._stack.field+"_end"]=!0,Q},K.prototype.getGroupbyFields=function(){var Q=this._stack,Z=Q.dimensionFieldDef,J=Q.impute;return Z?Z.bin?J?[q.field(Z,{binSuffix:"mid"})]:[q.field(Z,{}),q.field(Z,{binSuffix:"end"})]:[q.field(Z)]:[]},K.prototype.assemble=function(){var Q=[],Z=this._stack,J=Z.facetby,$=Z.field,ee=Z.dimensionFieldDef,te=Z.impute,ae=Z.offset,ne=Z.sort,ie=Z.stackby;if(te&&ee){var oe=ee?q.field(ee,{binSuffix:"mid"}):void 0;ee.bin&&Q.push({type:"formula",expr:"("+q.field(ee,{expr:"datum"})+"+"+q.field(ee,{expr:"datum",binSuffix:"end"})+")/2",as:oe}),Q.push({type:"impute",field:$,groupby:ie,key:oe,method:"value",value:0})}return Q.push({type:"stack",groupby:this.getGroupbyFields().concat(J),field:$,sort:ne,as:[$+"_start",$+"_end"],offset:ae}),Q},K}(U("./dataflow").DataFlowNode);H.StackNode=G},{"../../fielddef":101,"../../util":119,"../common":25,"./dataflow":32,tslib:6,"vega-util":11}],44:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../fielddef"),W=U("../../timeunit"),q=U("../../util"),V=function(Y){function G(X){var K=Y.call(this)||this;return K.formula=X,K}return j.__extends(G,Y),G.prototype.clone=function(){return new G(q.duplicate(this.formula))},G.makeFromEncoding=function(X){var K=X.reduceFieldDef(function(Q,Z){if(Z.timeUnit){var J=B.field(Z);Q[J]={as:J,timeUnit:Z.timeUnit,field:Z.field}}return Q},{});return 0===q.keys(K).length?null:new G(K)},G.makeFromTransform=function(X){return new G((K={},K[X.field]={as:X.as,timeUnit:X.timeUnit,field:X.field},K));var K},G.prototype.merge=function(X){this.formula=j.__assign({},this.formula,X.formula),X.remove()},G.prototype.producedFields=function(){var X={};return q.vals(this.formula).forEach(function(K){X[K.as]=!0}),X},G.prototype.dependentFields=function(){var X={};return q.vals(this.formula).forEach(function(K){X[K.field]=!0}),X},G.prototype.assemble=function(){return q.vals(this.formula).map(function(X){return{type:"formula",as:X.as,expr:W.fieldExpr(X.timeUnit,X.field)}})},G}(U("./dataflow").DataFlowNode);H.TimeUnitNode=V},{"../../fielddef":101,"../../timeunit":114,"../../util":119,"./dataflow":32,tslib:6}],45:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../channel"),W=U("../encoding"),q=U("../fielddef"),V=U("../log"),Y=U("../scale"),G=U("../util"),X=U("../vega.schema"),K=U("./buildmodel"),Q=U("./data/assemble"),Z=U("./data/parse"),J=U("./layout/header"),$=U("./layoutsize/parse"),ee=U("./model"),te=U("./repeater"),ae=U("./resolve"),ne=U("./scale/domain"),ie=function(oe){function le(se,re,de,ce,pe){var ue=oe.call(this,se,re,de,pe,se.resolve)||this;ue.type="facet",ue.child=K.buildModel(se.spec,ue,ue.getName("child"),void 0,ce,pe,!1),ue.children=[ue.child];var me=te.replaceRepeaterInFacet(se.facet,ce);return ue.facet=ue.initFacet(me),ue}return j.__extends(le,oe),le.prototype.initFacet=function(se){return W.reduce(se,function(re,de,ce){return G.contains([B.ROW,B.COLUMN],ce)?void 0===de.field?(V.warn(V.message.emptyFieldDef(de,ce)),re):(re[ce]=q.normalize(de,ce),re):(V.warn(V.message.incompatibleChannel(ce,"facet")),re)},{})},le.prototype.channelHasField=function(se){return!!this.facet[se]},le.prototype.fieldDef=function(se){return this.facet[se]},le.prototype.parseData=function(){this.component.data=Z.parseData(this),this.child.parseData()},le.prototype.parseLayoutSize=function(){$.parseChildrenLayoutSize(this)},le.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},le.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},le.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},le.prototype.parseHeader=function(se){if(this.channelHasField(se)){var re=this.facet[se],de=re.header||{},ce=void 0===de.title?q.title(re,this.config):de.title;this.child.component.layoutHeaders[se].title&&(ce+=" / "+this.child.component.layoutHeaders[se].title,this.child.component.layoutHeaders[se].title=null),this.component.layoutHeaders[se]={title:ce,facetFieldDef:re,header:[this.makeHeaderComponent(se,!0)]}}},le.prototype.makeHeaderComponent=function(se,re){var de="row"===se?"height":"width";return{labels:re,sizeSignal:this.child.component.layoutSize.get(de)?this.child.getSizeSignalRef(de):void 0,axes:[]}},le.prototype.mergeChildAxis=function(se){var re=this.child;if(re.component.axes[se]){var de=this.component,ce=de.layoutHeaders,pe=de.resolve;if(pe.axis[se]=ae.parseGuideResolve(pe,se),"shared"===pe.axis[se])for(var ue="x"===se?"column":"row",me=ce[ue],ge=0,fe=re.component.axes[se];ge<fe.length;ge++){var he=fe[ge],ye=he.main,_e=J.getHeaderType(ye.get("orient"));me[_e]=me[_e]||[this.makeHeaderComponent(ue,!1)],me[_e][0].axes.push(ye.combine()),delete he.main}}},le.prototype.assembleSelectionTopLevelSignals=function(se){return this.child.assembleSelectionTopLevelSignals(se)},le.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},le.prototype.assembleSelectionData=function(se){return this.child.assembleSelectionData(se)},le.prototype.getLayoutBandMixins=function(se){for(var re={},de="header"===se?"headerBand":"footerBand",ce=0,pe=["row","column"];ce<pe.length;ce++){var ue=pe[ce],me=this.component.layoutHeaders[ue][se];if(me&&me[0]){var ge="row"===ue?"height":"width";this.child.component.layoutSize.get(ge)||(re[de]=re[de]||{},re[de][ue]=.5)}}return re},le.prototype.assembleLayout=function(){var se=this.channelHasField("column")?this.columnDistinctSignal():1;return j.__assign({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:se,bounds:"full",align:"all"})},le.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},le.prototype.columnDistinctSignal=function(){return this.parent&&this.parent instanceof le?void 0:{signal:"length(data('"+this.getName("column_domain")+"'))"}},le.prototype.assembleGroup=function(se){return this.parent&&this.parent instanceof le?j.__assign({},this.channelHasField("column")?{encode:{update:{columns:{field:q.field(this.facet.column,{prefix:"distinct"})}}}}:{},oe.prototype.assembleGroup.call(this,se)):oe.prototype.assembleGroup.call(this,se)},le.prototype.getCardinalityAggregateForChild=function(){var se=[],re=[];if(this.child instanceof le)this.child.channelHasField("column")&&(se.push(q.field(this.child.facet.column)),re.push("distinct"));else for(var de=0,ce=["x","y"];de<ce.length;de++){var pe=ce[de],ue=this.child.component.scales[pe];if(ue&&!ue.merged){var me=ue.get("type"),ge=ue.get("range");if(Y.hasDiscreteDomain(me)&&X.isVgRangeStep(ge)){var fe=ne.assembleDomain(this.child,pe),he=ne.getFieldFromDomain(fe);he?(se.push(he),re.push("distinct")):V.warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return se.length?{fields:se,ops:re}:void 0},le.prototype.assembleMarks=function(){var se=this,re=se.child,de=se.facet,ce=this.component.data.facetRoot,pe=Q.assembleFacetData(ce),ue=this.channelHasField(B.ROW),me=this.channelHasField(B.COLUMN),ge=re.assembleLayoutSize(),fe={};ue&&me&&(fe.aggregate={cross:!0});var he=this.getCardinalityAggregateForChild();he&&(fe.aggregate=j.__assign({},fe.aggregate,he));var ye=re.assembleTitle(),_e=re.assembleGroupStyle();return[j.__assign({name:this.getName("cell"),type:"group"},ye?{title:ye}:{},_e?{style:_e}:{},{from:{facet:j.__assign({name:ce.name,data:ce.data,groupby:[].concat(ue?[this.field(B.ROW)]:[],me?[this.field(B.COLUMN)]:[])},fe)},sort:{field:[].concat(ue?[this.field(B.ROW,{expr:"datum"})]:[],me?[this.field(B.COLUMN,{expr:"datum"})]:[]),order:[].concat(ue?[de.row.sort||"ascending"]:[],me?[de.column.sort||"ascending"]:[])}},0<pe.length?{data:pe}:{},ge?{encode:{update:ge}}:{},re.assembleGroup())]},le.prototype.getMapping=function(){return this.facet},le}(ee.ModelWithField);H.FacetModel=ie},{"../channel":16,"../encoding":99,"../fielddef":101,"../log":106,"../scale":109,"../util":119,"../vega.schema":121,"./buildmodel":24,"./data/assemble":29,"./data/parse":41,"./layout/header":47,"./layoutsize/parse":49,"./model":67,"./repeater":69,"./resolve":70,"./scale/domain":73,tslib:6}],46:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../log"),W=U("../spec"),q=U("../util"),V=U("./axis/parse"),Y=U("./data/parse"),G=U("./layoutsize/assemble"),X=U("./layoutsize/parse"),K=U("./legend/assemble"),Q=U("./model"),Z=U("./selection/selection"),J=U("./unit"),$=function(ee){function te(ae,ne,ie,oe,le,se,re){var de=ee.call(this,ae,ne,ie,se,ae.resolve)||this;de.type="layer";var ce=j.__assign({},oe,ae.width?{width:ae.width}:{},ae.height?{height:ae.height}:{});return de.initSize(ce),de.children=ae.layer.map(function(pe,ue){if(W.isLayerSpec(pe))return new te(pe,de,de.getName("layer_"+ue),ce,le,se,re);if(W.isUnitSpec(pe))return new J.UnitModel(pe,de,de.getName("layer_"+ue),ce,le,se,re);throw new Error(B.message.INVALID_SPEC)}),de}return j.__extends(te,ee),te.prototype.parseData=function(){this.component.data=Y.parseData(this);for(var ae=0,ne=this.children;ae<ne.length;ae++)ne[ae].parseData()},te.prototype.parseLayoutSize=function(){X.parseLayerLayoutSize(this)},te.prototype.parseSelection=function(){var ae=this;this.component.selection={};for(var ne=0,ie=this.children;ne<ie.length;ne++)!function(oe){oe.parseSelection(),q.keys(oe.component.selection).forEach(function(le){ae.component.selection[le]=oe.component.selection[le]})}(ie[ne])},te.prototype.parseMarkGroup=function(){for(var ae=0,ne=this.children;ae<ne.length;ae++)ne[ae].parseMarkGroup()},te.prototype.parseAxisAndHeader=function(){V.parseLayerAxis(this)},te.prototype.assembleSelectionTopLevelSignals=function(ae){return this.children.reduce(function(ne,ie){return ie.assembleSelectionTopLevelSignals(ne)},ae)},te.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(ae,ne){return ae.concat(ne.assembleSelectionSignals())},[])},te.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(ae,ne){return ae.concat(ne.assembleLayoutSignals())},G.assembleLayoutSignals(this))},te.prototype.assembleSelectionData=function(){return this.children.reduce(function(ne,ie){return ie.assembleSelectionData(ne)},[])},te.prototype.assembleTitle=function(){var ae=ee.prototype.assembleTitle.call(this);if(ae)return ae;for(var ne=0,ie=this.children;ne<ie.length;ne++)if(ae=ie[ne].assembleTitle())return ae},te.prototype.assembleLayout=function(){return null},te.prototype.assembleMarks=function(){return Z.assembleLayerSelectionMarks(this,q.flatten(this.children.map(function(ae){return ae.assembleMarks()})))},te.prototype.assembleLegends=function(){return this.children.reduce(function(ae,ne){return ae.concat(ne.assembleLegends())},K.assembleLegends(this))},te}(Q.Model);H.LayerModel=$},{"../log":106,"../spec":112,"../util":119,"./axis/parse":21,"./data/parse":41,"./layoutsize/assemble":48,"./layoutsize/parse":49,"./legend/assemble":50,"./model":67,"./selection/selection":80,"./unit":91,tslib:6}],47:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../../fielddef"),W=U("../common");H.HEADER_CHANNELS=["row","column"],H.HEADER_TYPES=["header","footer"],H.getHeaderType=function(q){return"top"===q||"left"===q?"header":"footer"},H.getTitleGroup=function(q,V){var Y=q.component.layoutHeaders[V].title,G="row"===V?"vertical":void 0;return{name:q.getName(V+"_title"),role:V+"-title",type:"group",marks:[{type:"text",role:V+"-title-text",style:"guide-title",encode:{update:j.__assign({align:{value:"center"},text:{value:Y}},"vertical"===G?{angle:{value:270}}:{})}}]}},H.getHeaderGroup=function(q,V,Y,G,X){if(X){var K=null;if(G.facetFieldDef&&X.labels){var Q=G.facetFieldDef,Z=Q.header?Q.header.format:void 0;K={text:W.formatSignalRef(Q,Z,"parent",q.config),offset:10,orient:"row"===V?"left":"top",style:"guide-label",encode:{update:j.__assign({fontWeight:{value:"normal"},angle:{value:0},fontSize:{value:10}},"row"===V?{align:{value:"right"},baseline:{value:"middle"}}:{})}}}var J=X.axes,$=J&&0<J.length;if(K||$){var ee="row"===V?"height":"width";return j.__assign({name:q.getName(V+"_"+Y),type:"group",role:V+"-"+Y},G.facetFieldDef?{from:{data:q.getName(V+"_domain")},sort:{field:B.field(G.facetFieldDef,{expr:"datum"}),order:G.facetFieldDef.header&&G.facetFieldDef.sort||"ascending"}}:{},K?{title:K}:{},X.sizeSignal?{encode:{update:(te={},te[ee]=X.sizeSignal,te)}}:{},$?{axes:J}:{})}}return null;var te}},{"../../fielddef":101,"../common":25,tslib:6}],48:[function(U,z,H){"use strict";function j(G,X){var K="width"===X?"x":"y",Q=G.component.layoutSize.get(X);if(!Q||"merged"===Q)return[];var Z=G.getSizeSignalRef(X).signal;if("range-step"===Q){var J=G.getScaleComponent(K);if(J){var $=J.get("type"),ee=J.get("range");if(q.hasDiscreteDomain($)&&V.isVgRangeStep(ee)){var te=G.scaleName(K);return Y.isFacetModel(G.parent)&&"independent"===G.parent.component.resolve.scale[K]?[B(te,ee)]:[B(te,ee),{name:Z,update:W(te,J,"domain('"+te+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:Z,value:Q}]}function B(G,X){return{name:G+"_step",value:X.step}}function W(G,X,K){var Q=X.get("type"),Z=X.get("padding"),J=X.get("paddingOuter");J=void 0===J?Z:J;var $=X.get("paddingInner");return $="band"===Q?void 0===$?Z:$:1,"bandspace("+K+", "+$+", "+J+") * "+G+"_step"}Object.defineProperty(H,"__esModule",{value:!0});var q=U("../../scale"),V=U("../../vega.schema"),Y=U("../model");H.assembleLayoutSignals=function(G){return[].concat(j(G,"width"),j(G,"height"))},H.sizeSignals=j,H.sizeExpr=W},{"../../scale":109,"../../vega.schema":121,"../model":67}],49:[function(U,z,H){"use strict";function j(X){B(X);var K=X.component.layoutSize;K.setWithExplicit("width",W(X,"width")),K.setWithExplicit("height",W(X,"height"))}function B(X){for(var K=0,Q=X.children;K<Q.length;K++)Q[K].parseLayoutSize()}function W(X,K){for(var Q,Z="width"===K?"x":"y",J=X.component.resolve,$=0,ee=X.children;$<ee.length;$++){var te=(oe=ee[$]).component.layoutSize.getWithExplicit(K),ae=J.scale[Z];if("independent"===ae&&"range-step"===te.value){Q=void 0;break}if(Q){if("independent"===ae&&Q.value!==te.value){Q=void 0;break}Q=G.mergeValuesWithExplicit(Q,te,K,"",G.defaultTieBreaker)}else Q=te}if(Q){for(var oe,ne=0,ie=X.children;ne<ie.length;ne++)oe=ie[ne],X.renameLayoutSize(oe.getName(K),X.getName(K)),oe.component.layoutSize.set(K,"merged",!1);return Q}return{explicit:!1,value:void 0}}function q(X,K){var Q="width"===K?"x":"y",Z=X.config,J=X.getScaleComponent(Q);if(J){var $=J.get("type"),ee=J.get("range");return V.hasDiscreteDomain($)&&Y.isVgRangeStep(ee)?"range-step":Z.view[K]}return"width"===K&&"text"===X.mark()?Z.scale.textXRangeStep:Z.scale.rangeStep||V.defaultScaleConfig.rangeStep}Object.defineProperty(H,"__esModule",{value:!0});var V=U("../../scale"),Y=U("../../vega.schema"),G=U("../split");H.parseLayerLayoutSize=j,H.parseRepeatLayoutSize=j,H.parseConcatLayoutSize=function(X){B(X);var K=X.component.layoutSize,Q=X.isVConcat?"width":"height";K.setWithExplicit(Q,W(X,Q))},H.parseChildrenLayoutSize=B,H.parseUnitLayoutSize=function(X){var K=X.component.layoutSize;if(!K.explicit.width){var Q=q(X,"width");K.set("width",Q,!1)}if(!K.explicit.height){var Z=q(X,"height");K.set("height",Z,!1)}}},{"../../scale":109,"../../vega.schema":121,"../split":90}],50:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("json-stable-stringify"),B=U("../../util"),W=U("./parse");H.assembleLegends=function(q){var V=q.component.legends,Y={};return B.keys(V).forEach(function(G){var X=q.getScaleComponent(G),K=j(X.domains);if(Y[K])for(var J,Q=0,Z=Y[K];Q<Z.length;Q++)J=Z[Q],W.mergeLegendComponent(J,V[G])||Y[K].push(V[G]);else Y[K]=[V[G].clone()]}),B.flatten(B.vals(Y)).map(function(G){return G.combine()})}},{"../../util":119,"./parse":53,"json-stable-stringify":1}],51:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=function(W){function q(){return null!==W&&W.apply(this,arguments)||this}return j.__extends(q,W),q}(U("../split").Split);H.LegendComponent=B},{"../split":90,tslib:6}],52:[function(U,z,H){"use strict";function j(Z){if(V.isValueDef(Z)){if(V.hasConditionalValueDef(Z)){var J=W.isArray(Z.condition)?Z.condition.map(function($){return $.value}):[Z.condition.value];return Math.max.apply(null,[Z.value].concat(J))}return Z.value}}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("vega-util"),q=U("../../channel"),V=U("../../fielddef"),Y=U("../../mark"),G=U("../../scale"),X=U("../../util"),K=U("../common"),Q=U("../mark/mixins");H.symbols=function(Z,J,$,ee,te){if("gradient"!==te){var ae={},ne=$.mark();switch(ne){case Y.BAR:case Y.TICK:case Y.TEXT:ae.shape={value:"square"};break;case Y.CIRCLE:case Y.SQUARE:ae.shape={value:ne};break;case Y.POINT:case Y.LINE:case Y.AREA:}var ie=$.markDef.filled,oe=ee===q.COLOR?X.without(Y.FILL_STROKE_CONFIG,[ie?"fill":"stroke","strokeDash","strokeDashOffset"]):Y.FILL_STROKE_CONFIG;if(oe=X.without(oe,["strokeDash","strokeDashOffset"]),K.applyMarkConfig(ae,$,oe),ee!==q.COLOR){var le=Q.color($);le.fill&&(le.fill.field||"transparent"===le.fill.value)&&delete le.fill,le.stroke&&(le.stroke.field||"transparent"===le.stroke.value)&&delete le.stroke,ae=B.__assign({},ae,le)}if(ee!==q.SHAPE){var se=$.encoding.shape;V.isValueDef(se)&&(ae.shape={value:se.value})}if(ee!==q.OPACITY){var re=j($.encoding.opacity);re&&(ae.opacity={value:re})}return ae=B.__assign({},ae,J),0<X.keys(ae).length?ae:void 0}},H.gradient=function(Z,J,$,ee,te){var ae={};if("gradient"===te){var ne=j($.encoding.opacity);ne&&(ae.opacity={value:ne})}return ae=B.__assign({},ae,J),0<X.keys(ae).length?ae:void 0},H.labels=function(Z,J,$,ee){var ae=$.legend(ee),ne=$.config,ie={};if(V.isTimeFieldDef(Z)){var oe=$.getScaleComponent(ee).get("type")===G.ScaleType.UTC;J=B.__assign({text:{signal:K.timeFormatExpression("datum.value",Z.timeUnit,ae.format,ne.legend.shortTimeLabels,ne.timeFormat,oe)}},J)}return ie=B.__assign({},ie,J),0<X.keys(ie).length?ie:void 0}},{"../../channel":16,"../../fielddef":101,"../../mark":108,"../../scale":109,"../../util":119,"../common":25,"../mark/mixins":60,tslib:6,"vega-util":11}],53:[function(U,z,H){"use strict";function j(le){le.component.legends=$.isUnitModel(le)?B(le):Y(le)}function B(le){return[X.COLOR,X.SIZE,X.SHAPE,X.OPACITY].reduce(function(se,re){return le.legend(re)&&(se[re]=q(le,re)),se},{})}function W(le,se){switch(se){case X.COLOR:var re=le.scaleName(X.COLOR);return le.markDef.filled?{fill:re}:{stroke:re};case X.SIZE:return{size:le.scaleName(X.SIZE)};case X.SHAPE:return{shape:le.scaleName(X.SHAPE)};case X.OPACITY:return{opacity:le.scaleName(X.OPACITY)};}return null}function q(le,se){var re=le.fieldDef(se),de=le.legend(se),ce=new ne.LegendComponent({},W(le,se));Q.LEGEND_PROPERTIES.forEach(function(me){var ge=V(me,de,se,le);if(void 0!==ge){var fe="values"===me?!!de.values:ge===de[me];(fe||void 0===le.config.legend[me])&&ce.set(me,ge,fe)}});var pe=de.encoding||{},ue=["labels","legend","title","symbols","gradient"].reduce(function(me,ge){var fe=ie[ge]?ie[ge](re,pe[ge],le,se,ce.get("type")):pe[ge];return void 0!==fe&&0<Z.keys(fe).length&&(me[ge]={update:fe}),me},{});return 0<Z.keys(ue).length&&ce.set("encode",ue,!!de.encoding),ce}function V(le,se,re,de){var ce=de.fieldDef(re);return"format"===le?J.numberFormat(ce,se.format,de.config):"title"===le?J.getSpecifiedOrDefaultValue(se.title,K.title(ce,de.config)):"values"===le?oe.values(se):"type"===le?J.getSpecifiedOrDefaultValue(se.type,oe.type(ce.type,re,de.getScaleComponent(re).get("type"))):se[le]}function Y(le){for(var se=le.component,re=se.legends,de=se.resolve,ce=0,pe=le.children;ce<pe.length;ce++)!function(ue){j(ue),Z.keys(ue.component.legends).forEach(function(me){de.legend[me]=ee.parseGuideResolve(le.component.resolve,me),"shared"===de.legend[me]&&(re[me]=G(re[me],ue.component.legends[me]),re[me]||(de.legend[me]="independent",delete re[me]))})}(pe[ce]);return Z.keys(re).forEach(function(ue){for(var fe,me=0,ge=le.children;me<ge.length;me++)fe=ge[me],fe.component.legends[ue]&&"shared"===de.legend[ue]&&delete fe.component.legends[ue]}),re}function G(le,se){if(!le)return se.clone();var re=le.getWithExplicit("orient"),de=se.getWithExplicit("orient");if(!re.explicit||!de.explicit||re.value===de.value){for(var ce=!1,pe=0,ue=Q.VG_LEGEND_PROPERTIES;pe<ue.length;pe++)!function(me){var ge=ae.mergeValuesWithExplicit(le.getWithExplicit(me),se.getWithExplicit(me),me,"legend",function(fe,he){return"title"===me?J.titleMerger(fe,he):"type"===me?(ce=!0,te.makeImplicit("symbol")):ae.defaultTieBreaker(fe,he,me,"legend")});le.setWithExplicit(me,ge)}(ue[pe]);return ce&&(((le.implicit||{}).encode||{}).gradient&&Z.deleteNestedProperty(le.implicit,["encode","gradient"]),((le.explicit||{}).encode||{}).gradient&&Z.deleteNestedProperty(le.explicit,["encode","gradient"])),le}}Object.defineProperty(H,"__esModule",{value:!0});var X=U("../../channel"),K=U("../../fielddef"),Q=U("../../legend"),Z=U("../../util"),J=U("../common"),$=U("../model"),ee=U("../resolve"),te=U("../split"),ae=U("../split"),ne=U("./component"),ie=U("./encode"),oe=U("./properties");H.parseLegend=j,H.parseLegendForChannel=q,H.mergeLegendComponent=G},{"../../channel":16,"../../fielddef":101,"../../legend":105,"../../util":119,"../common":25,"../model":67,"../resolve":70,"../split":90,"./component":51,"./encode":52,"./properties":54}],54:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../channel"),B=U("../../datetime"),W=U("../../scale"),q=U("../../util");H.values=function(V){var Y=V.values;return Y&&B.isDateTime(Y[0])?Y.map(function(G){return{signal:B.dateTimeExpr(G,!0)}}):Y},H.type=function(V,Y,G){if(Y===j.COLOR&&("quantitative"===V&&!W.isBinScale(G)||"temporal"===V&&q.contains(["time","utc"],G)))return"gradient"}},{"../../channel":16,"../../datetime":98,"../../scale":109,"../../util":119}],55:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("./mixins");H.area={vgMark:"area",encodeEntry:function(q){return j.__assign({},B.markDefProperties(q.markDef),B.pointPosition("x",q,"zeroOrMin"),B.pointPosition("y",q,"zeroOrMin"),B.pointPosition2(q,"zeroOrMin"),B.color(q),B.text(q,"tooltip"),B.nonPosition("opacity",q))}}},{"./mixins":60,tslib:6}],56:[function(U,z,H){"use strict";function j($){var te=$.config,ae=$.width,ne=$.markDef.orient,ie=$.encoding.size,oe=$.encoding.x,le=$.scaleName(Y.X),se=$.getScaleComponent(Y.X);if("horizontal"===ne)return q.__assign({},Z.pointPosition("x",$,"zeroOrMin"),Z.pointPosition2($,"zeroOrMin"));if(G.isFieldDef(oe)){var re=se.get("type");if(oe.bin&&!ie&&!K.hasDiscreteDomain(re))return Z.binnedPosition(oe,"x",$.scaleName("x"),te.bar.binSpacing,se.get("reverse"));if(re===K.ScaleType.BAND)return Z.bandPosition(oe,"x",$)}return Z.centeredBandPosition("x",$,q.__assign({},J.mid(ae)),W(le,se,te))}function B($){var te=$.config,ae=$.encoding,ne=$.height,ie=$.markDef.orient,oe=ae.size,le=ae.y,se=$.scaleName(Y.Y),re=$.getScaleComponent(Y.Y);if("vertical"===ie)return q.__assign({},Z.pointPosition("y",$,"zeroOrMin"),Z.pointPosition2($,"zeroOrMin"));if(G.isFieldDef(le)){var de=re.get("type");if(le.bin&&!oe&&!K.hasDiscreteDomain(de))return Z.binnedPosition(le,"y",$.scaleName("y"),te.bar.binSpacing,re.get("reverse"));if(de===K.ScaleType.BAND)return Z.bandPosition(le,"y",$)}return Z.centeredBandPosition("y",$,J.mid(ne),W(se,re,te))}function W($,ee,te){if(te.bar.discreteBandSize)return{value:te.bar.discreteBandSize};if(ee){var ae=ee.get("type");if(ae!==K.ScaleType.POINT)return ae===K.ScaleType.BAND?J.band($):{value:te.bar.continuousBandSize};var ne=ee.get("range");if(Q.isVgRangeStep(ne)&&V.isNumber(ne.step))return{value:ne.step-1};X.warn(X.message.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}return te.scale.rangeStep&&null!==te.scale.rangeStep?{value:te.scale.rangeStep-1}:{value:20}}Object.defineProperty(H,"__esModule",{value:!0});var q=U("tslib"),V=U("vega-util"),Y=U("../../channel"),G=U("../../fielddef"),X=U("../../log"),K=U("../../scale"),Q=U("../../vega.schema"),Z=U("./mixins"),J=U("./valueref");H.bar={vgMark:"rect",encodeEntry:function(ee){return ee.stack,q.__assign({},Z.markDefProperties(ee.markDef,!0),j(ee),B(ee),Z.color(ee),Z.text(ee,"tooltip"),Z.nonPosition("opacity",ee))}}},{"../../channel":16,"../../fielddef":101,"../../log":106,"../../scale":109,"../../vega.schema":121,"./mixins":60,"./valueref":66,tslib:6,"vega-util":11}],57:[function(U,z,H){"use strict";function j(J,$){if(Q.contains([X.POINT,X.TICK,X.CIRCLE,X.SQUARE],J)&&!V.isAggregate($))return .7}function B(J,$){var ee=Z.getMarkConfig("filled",J,$),te=J.type;return void 0===ee?te!==X.POINT&&te!==X.LINE&&te!==X.RULE:ee}function W(J,$,ee){switch(J){case X.POINT:case X.CIRCLE:case X.SQUARE:case X.TEXT:case X.RECT:return;}var te=$.y2,ae=$.x2;switch(J){case X.RULE:case X.BAR:case X.AREA:if(te)return"vertical";if(ae)return"horizontal";if(J===X.RULE){if($.x&&!$.y)return"vertical";if($.y&&!$.x)return"horizontal"}case X.LINE:case X.TICK:var ne=Y.isFieldDef($.x)&&Y.isContinuous($.x),ie=Y.isFieldDef($.y)&&Y.isContinuous($.y);if(ne&&!ie)return"tick"===J?"vertical":"horizontal";if(!ne&&ie)return"tick"===J?"horizontal":"vertical";if(ne&&ie){var oe=$.x,le=$.y,se=oe.type===K.TEMPORAL,re=le.type===K.TEMPORAL;return se&&!re?"tick"===J?"horizontal":"vertical":!se&&re?"tick"===J?"vertical":"horizontal":!oe.aggregate&&le.aggregate?"tick"===J?"horizontal":"vertical":oe.aggregate&&!le.aggregate?"tick"===J?"vertical":"horizontal":ee||(J===X.LINE&&$.order||G.warn(G.message.unclearOrientContinuous(J)),"vertical")}return void G.warn(G.message.unclearOrientDiscreteOrEmpty(J));}return"vertical"}Object.defineProperty(H,"__esModule",{value:!0});var q=U("tslib"),V=U("../../encoding"),Y=U("../../fielddef"),G=U("../../log"),X=U("../../mark"),K=U("../../type"),Q=U("../../util"),Z=U("../common");H.normalizeMarkDef=function(J,$,ee){var te=X.isMarkDef(J)?q.__assign({},J):{type:J},ae=te.orient||Z.getMarkConfig("orient",te,ee);return te.orient=W(te.type,$,ae),void 0!==ae&&ae!==te.orient&&G.warn(G.message.orientOverridden(te.orient,ae)),void 0===te.filled&&(te.filled=B(te,ee)),te},H.initEncoding=function(J,$,ee,te){var ae=Z.getMarkConfig("opacity",J,te);if(!$.opacity&&void 0===ae){var ne=j(J.type,$);void 0!==ne&&($.opacity={value:ne})}return $}},{"../../encoding":99,"../../fielddef":101,"../../log":106,"../../mark":108,"../../type":118,"../../util":119,"../common":25,tslib:6}],58:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("./mixins"),W=U("./valueref");H.line={vgMark:"line",encodeEntry:function(V){var Y=V.width,G=V.height;return j.__assign({},B.markDefProperties(V.markDef,!0),B.pointPosition("x",V,W.mid(Y)),B.pointPosition("y",V,W.mid(G)),B.color(V),B.text(V,"tooltip"),B.nonPosition("opacity",V),B.nonPosition("size",V,{vgChannel:"strokeWidth"}))}}},{"./mixins":60,"./valueref":66,tslib:6}],59:[function(U,z,H){"use strict";function j(ue){var me=ue.mark(),ge=q(ue),fe=void 0===ue.markDef.clip?V(ue):!!ue.markDef.clip,he=te.getStyles(ue.markDef),ye=B(ue),_e=[Y.__assign({name:ue.getName("marks"),type:ce[me].vgMark},fe?{clip:!0}:{},he?{style:he}:{},ye?{sort:ye}:{},{from:{data:(0<ge.length?pe:"")+ue.requestDataName(K.MAIN)},encode:{update:ce[me].encodeEntry(ue)}})];return 0<ge.length?[{name:ue.getName("pathgroup"),type:"group",from:{facet:{name:pe+ue.requestDataName(K.MAIN),data:ue.requestDataName(K.MAIN),groupby:ge}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:_e}]:_e}function B(ue){if("line"===ue.mark()&&ue.channelHasField("order"))return te.sortParams(ue.encoding.order,{expr:"datum"});var me="horizontal"===ue.markDef.orient?"y":"x",ge=ue.sort(me),fe=$.isSortField(ge)?Z.field({aggregate:Q.isAggregate(ue.encoding)?ge.op:void 0,field:ge.field},{expr:"datum"}):ue.field(me,{binSuffix:ue.stack&&ue.stack.impute?"mid":void 0,expr:"datum"});return fe?{field:fe,order:"descending"}:void 0}function W(ue){var me=ue.mark(),ge=te.getStyles(ue.markDef),fe=void 0===ue.markDef.clip?V(ue):!!ue.markDef.clip,he=[];return he.push(Y.__assign({name:ue.getName("marks"),type:ce[me].vgMark},fe?{clip:!0}:{},ge?{style:ge}:{},{from:{data:ue.requestDataName(K.MAIN)},encode:{update:ce[me].encodeEntry(ue)}})),he}function q(ue){return X.NONPOSITION_CHANNELS.reduce(function(me,ge){var fe=ue.encoding;if("order"===ge)return me;if("detail"===ge){var he=fe[ge];he&&(G.isArray(he)?he:[he]).forEach(function(_e){_e.aggregate||me.push(Z.field(_e,{}))})}else{var ye=Z.getFieldDef(fe[ge]);ye&&!ye.aggregate&&me.push(Z.field(ye,{}))}return me},[])}function V(ue){var me=ue.getScaleComponent("x"),ge=ue.getScaleComponent("y");return!!(me&&me.get("domainRaw")||ge&&ge.get("domainRaw"))}Object.defineProperty(H,"__esModule",{value:!0});var Y=U("tslib"),G=U("vega-util"),X=U("../../channel"),K=U("../../data"),Q=U("../../encoding"),Z=U("../../fielddef"),J=U("../../mark"),$=U("../../sort"),ee=U("../../util"),te=U("../common"),ae=U("./area"),ne=U("./bar"),ie=U("./line"),oe=U("./point"),le=U("./rect"),se=U("./rule"),re=U("./text"),de=U("./tick"),ce={area:ae.area,bar:ne.bar,line:ie.line,point:oe.point,text:re.text,tick:de.tick,rect:le.rect,rule:se.rule,circle:oe.circle,square:oe.square};H.parseMarkGroup=function(ue){return ee.contains([J.LINE,J.AREA],ue.mark())?j(ue):W(ue)};var pe="faceted_path_";H.getPathSort=B},{"../../channel":16,"../../data":97,"../../encoding":99,"../../fielddef":101,"../../mark":108,"../../sort":111,"../../util":119,"../common":25,"./area":55,"./bar":56,"./line":58,"./point":61,"./rect":62,"./rule":63,"./text":64,"./tick":65,tslib:6,"vega-util":11}],60:[function(U,z,H){"use strict";function j($,ee,te){void 0===te&&(te={});var ae=te.defaultValue,ne=te.vgChannel,ie=te.defaultRef||(void 0===ae?void 0:{value:ae}),oe=ee.encoding[$];return B(ee,oe,ne||$,function(le){return J.midPoint($,le,ee.scaleName($),ee.getScaleComponent($),null,ie)})}function B($,ee,te,ae){var ne=ee&&ee.condition,ie=ae(ee);if(ne){var oe=(V.isArray(ne)?ne:[ne]).map(function(re){var de=ae(re);return q.__assign({test:Z.predicate($,re.selection)},de)});return le={},le[te]=oe.concat(void 0===ie?[]:[ie]),le}return void 0===ie?{}:(se={},se[te]=ie,se);var le,se}function W($,ee,te,ae){var ne=ee.encoding,ie=ee.stack,oe=J.stackable($,ne[$],ee.scaleName($),ee.getScaleComponent($),ie,te);return le={},le[ae||$]=oe,le;var le}Object.defineProperty(H,"__esModule",{value:!0});var q=U("tslib"),V=U("vega-util"),Y=U("../../fielddef"),G=U("../../log"),X=U("../../util"),K=U("../../vega.schema"),Q=U("../common"),Z=U("../selection/selection"),J=U("./valueref");H.color=function($){var ee=$.config,te=$.markDef.filled?"fill":"stroke",ae=j("color",$,{vgChannel:te,defaultValue:$.markDef[te]||$.markDef.color||Q.getMarkConfig(te,$.markDef,ee)||Q.getMarkConfig("color",$.markDef,ee)});return!ae.fill&&X.contains(["bar","point","circle","square"],$.mark())&&(ae.fill={value:"transparent"}),ae},H.markDefProperties=function($,ee){return K.VG_MARK_CONFIGS.reduce(function(te,ae){return!$[ae]||ee&&"orient"===ae||(te[ae]={value:$[ae]}),te},{})},H.valueIfDefined=function($,ee){return void 0===ee?void 0:(te={},te[$]={value:ee},te);var te},H.nonPosition=j,H.text=function($,ee){void 0===ee&&(ee="text");var te=$.encoding[ee];return B($,te,ee,function(ae){return J.text(ae,$.config)})},H.bandPosition=function($,ee,te){var ae=te.scaleName(ee),ne="x"===ee?"width":"height";if(te.encoding.size)if(te.markDef.orient){var ie=(oe={},oe[ee+"c"]=J.fieldRef($,ae,{},{band:.5}),oe);if(Y.getFieldDef(te.encoding.size))G.warn(G.message.cannotUseSizeFieldWithBandSize(ee));else if(Y.isValueDef(te.encoding.size))return q.__assign({},ie,j("size",te,{vgChannel:ne}))}else G.warn(G.message.cannotApplySizeToNonOrientedMark(te.markDef.type));return le={},le[ee]=J.fieldRef($,ae,{binSuffix:"range"}),le[ne]=J.band(ae),le;var oe,le},H.centeredBandPosition=function($,ee,te,ae){var ne="x"===$?"xc":"yc",ie="x"===$?"width":"height";return q.__assign({},W($,ee,te,ne),j("size",ee,{defaultRef:ae,vgChannel:ie}))},H.binnedPosition=function($,ee,te,ae,ne){return"x"===ee?{x2:J.bin($,te,"start",ne?0:ae),x:J.bin($,te,"end",ne?ae:0)}:{y2:J.bin($,te,"start",ne?ae:0),y:J.bin($,te,"end",ne?0:ae)}},H.pointPosition=W,H.pointPosition2=function($,ee,te){var ae=$.encoding,ne=$.markDef,ie=$.stack,oe="x2"===(te=te||("horizontal"===ne.orient?"x2":"y2"))?"x":"y",le=J.stackable2(te,ae[oe],ae[te],$.scaleName(oe),$.getScaleComponent(oe),ie,ee);return se={},se[te]=le,se;var se}},{"../../fielddef":101,"../../log":106,"../../util":119,"../../vega.schema":121,"../common":25,"../selection/selection":80,"./valueref":66,tslib:6,"vega-util":11}],61:[function(U,z,H){"use strict";function j(G,X){var K=G.config,Q=G.width,Z=G.height;return W.__assign({},V.markDefProperties(G.markDef,!0),V.pointPosition("x",G,Y.mid(Q)),V.pointPosition("y",G,Y.mid(Z)),V.color(G),V.text(G,"tooltip"),V.nonPosition("size",G),B(G,K,X),V.nonPosition("opacity",G))}function B(G,X,K){return K?{shape:{value:K}}:V.nonPosition("shape",G,{defaultValue:q.getMarkConfig("shape",G.markDef,X)})}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../common"),V=U("./mixins"),Y=U("./valueref");H.shapeMixins=B,H.point={vgMark:"symbol",encodeEntry:function(X){return j(X)}},H.circle={vgMark:"symbol",encodeEntry:function(X){return j(X,"circle")}},H.square={vgMark:"symbol",encodeEntry:function(X){return j(X,"square")}}},{"../common":25,"./mixins":60,"./valueref":66,tslib:6}],62:[function(U,z,H){"use strict";function j(Q){var Z=Q.encoding.x,J=Q.encoding.x2,$=Q.getScaleComponent(q.X),ee=$?$.get("type"):void 0;if(V.isFieldDef(Z)&&Z.bin&&!J)return K.binnedPosition(Z,"x",Q.scaleName("x"),0,$.get("reverse"));if(V.isFieldDef(Z)&&$&&X.hasDiscreteDomain(ee)){if(ee===X.ScaleType.BAND)return K.bandPosition(Z,"x",Q);throw new Error(Y.message.scaleTypeNotWorkWithMark(G.RECT,ee))}return W.__assign({},K.pointPosition("x",Q,"zeroOrMax"),K.pointPosition2(Q,"zeroOrMin","x2"))}function B(Q){var Z=Q.encoding.y,J=Q.encoding.y2,$=Q.getScaleComponent(q.Y),ee=$?$.get("type"):void 0;if(V.isFieldDef(Z)&&Z.bin&&!J)return K.binnedPosition(Z,"y",Q.scaleName("y"),0,$.get("reverse"));if(V.isFieldDef(Z)&&$&&X.hasDiscreteDomain(ee)){if(ee===X.ScaleType.BAND)return K.bandPosition(Z,"y",Q);throw new Error(Y.message.scaleTypeNotWorkWithMark(G.RECT,ee))}return W.__assign({},K.pointPosition("y",Q,"zeroOrMax"),K.pointPosition2(Q,"zeroOrMin","y2"))}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../../channel"),V=U("../../fielddef"),Y=U("../../log"),G=U("../../mark"),X=U("../../scale"),K=U("./mixins");H.rect={vgMark:"rect",encodeEntry:function(Z){return W.__assign({},K.markDefProperties(Z.markDef,!0),j(Z),B(Z),K.color(Z),K.text(Z,"tooltip"),K.nonPosition("opacity",Z))}}},{"../../channel":16,"../../fielddef":101,"../../log":106,"../../mark":108,"../../scale":109,"./mixins":60,tslib:6}],63:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("./mixins"),W=U("./valueref");H.rule={vgMark:"rule",encodeEntry:function(V){V.config;var Y=V.markDef,G=V.width,X=V.height,K=Y.orient;return V.encoding.x||V.encoding.y?j.__assign({},B.markDefProperties(V.markDef,!0),B.pointPosition("x",V,"horizontal"===K?"zeroOrMin":W.mid(G)),B.pointPosition("y",V,"vertical"===K?"zeroOrMin":W.mid(X)),B.pointPosition2(V,"zeroOrMax"),B.color(V),B.text(V,"tooltip"),B.nonPosition("opacity",V),B.nonPosition("size",V,{vgChannel:"strokeWidth"})):{}}}},{"./mixins":60,"./valueref":66,tslib:6}],64:[function(U,z,H){"use strict";function j(Z,J){return Y.isFieldDef(J)&&J.type===G.QUANTITATIVE?{field:{group:"width"},offset:-5}:{value:Z.scale.textXRangeStep/2}}function B(Z,J,$){if(void 0===(Z.align||X.getMarkConfig("align",Z,$)))return V.channelHasField(J,q.X)?"center":"right"}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../../channel"),V=U("../../encoding"),Y=U("../../fielddef"),G=U("../../type"),X=U("../common"),K=U("./mixins"),Q=U("./valueref");H.text={vgMark:"text",encodeEntry:function(J){var $=J.config,ee=J.encoding,te=J.height,ae=ee.text;return W.__assign({},K.markDefProperties(J.markDef,!0),K.pointPosition("x",J,j($,ae)),K.pointPosition("y",J,Q.mid(te)),K.text(J),K.color(J),K.text(J,"tooltip"),K.nonPosition("opacity",J),K.nonPosition("size",J,{vgChannel:"fontSize"}),K.valueIfDefined("align",B(J.markDef,ee,$)))}}},{"../../channel":16,"../../encoding":99,"../../fielddef":101,"../../type":118,"../common":25,"./mixins":60,"./valueref":66,tslib:6}],65:[function(U,z,H){"use strict";function j(Y){var G=Y.config,X=Y.markDef.orient,K=Y.getScaleComponent("horizontal"===X?"x":"y");if(void 0!==G.tick.bandSize)return G.tick.bandSize;var Q=K?K.get("range"):void 0,Z=Q&&W.isVgRangeStep(Q)?Q.step:G.scale.rangeStep;if("number"!=typeof Z)throw new Error("Function does not handle non-numeric rangeStep");return Z/1.5}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("../../vega.schema"),q=U("./mixins"),V=U("./valueref");H.tick={vgMark:"rect",encodeEntry:function(G){var X=G.config,K=G.markDef,Q=G.width,Z=G.height,J=K.orient,$="horizontal"===J?"width":"height",ee="horizontal"===J?"height":"width";return B.__assign({},q.markDefProperties(G.markDef,!0),q.pointPosition("x",G,V.mid(Q),"xc"),q.pointPosition("y",G,V.mid(Z),"yc"),q.nonPosition("size",G,{defaultValue:j(G),vgChannel:$}),(te={},te[ee]={value:X.tick.thickness},te),q.color(G),q.nonPosition("opacity",G));var te}}},{"../../vega.schema":121,"./mixins":60,"./valueref":66,tslib:6}],66:[function(U,z,H){"use strict";function j(ee,te,ae,ne){var ie={scale:te,field:Q.field(ee,ae)};return ne?X.__assign({},ie,ne):ie}function B(ee,te){return{signal:"(scale(\""+te+"\", "+Q.field(ee,{expr:"datum"})+") + scale(\""+te+"\", "+Q.field(ee,{binSuffix:"end",expr:"datum"})+"))/2"}}function W(ee,te,ae,ne,ie,oe){if(te){if(Q.isFieldDef(te)){if(te.bin)return J.contains(["x","y"],ee)&&"quantitative"===te.type?ie&&ie.impute?j(te,ae,{binSuffix:"mid"}):B(te,ae):j(te,ae,$.binRequiresRange(te,ee)?{binSuffix:"range"}:{});var le=ne.get("type");return Z.hasDiscreteDomain(le)?"band"===le?j(te,ae,{binSuffix:"range"},{band:.5}):j(te,ae,{binSuffix:"range"}):j(te,ae,{})}if(Q.isValueDef(te))return{value:te.value};throw new Error("A channel definition has neither field nor value.")}if("zeroOrMin"===oe){if(ee===K.X||ee===K.X2)return q(ae,ne);if(ee===K.Y||ee===K.Y2)return Y(ae,ne);throw new Error("Unsupported channel "+ee+" for base function")}if("zeroOrMax"===oe){if(ee===K.X||ee===K.X2)return V(ae,ne);if(ee===K.Y||ee===K.Y2)return G(ae,ne);throw new Error("Unsupported channel "+ee+" for base function")}return oe}function q(ee,te){return ee&&!J.contains([Z.ScaleType.LOG,Z.ScaleType.TIME,Z.ScaleType.UTC],te.get("type"))&&!1!==te.get("zero")?{scale:ee,value:0}:{value:0}}function V(ee,te){return ee&&!J.contains([Z.ScaleType.LOG,Z.ScaleType.TIME,Z.ScaleType.UTC],te.get("type"))&&!1!==te.get("zero")?{scale:ee,value:0}:{field:{group:"width"}}}function Y(ee,te){return ee&&!J.contains([Z.ScaleType.LOG,Z.ScaleType.TIME,Z.ScaleType.UTC],te.get("type"))&&!1!==te.get("zero")?{scale:ee,value:0}:{field:{group:"height"}}}function G(ee,te){return ee&&!J.contains([Z.ScaleType.LOG,Z.ScaleType.TIME,Z.ScaleType.UTC],te.get("type"))&&!1!==te.get("zero")?{scale:ee,value:0}:{value:0}}Object.defineProperty(H,"__esModule",{value:!0});var X=U("tslib"),K=U("../../channel"),Q=U("../../fielddef"),Z=U("../../scale"),J=U("../../util"),$=U("../common");H.stackable=function(ee,te,ae,ne,ie,oe){return Q.isFieldDef(te)&&ie&&ee===ie.fieldChannel?j(te,ae,{suffix:"end"}):W(ee,te,ae,ne,ie,oe)},H.stackable2=function(ee,te,ae,ne,ie,oe,le){return Q.isFieldDef(te)&&oe&&ee.charAt(0)===oe.fieldChannel.charAt(0)?j(te,ne,{suffix:"start"}):W(ee,ae,ne,ie,oe,le)},H.bin=function(ee,te,ae,ne){return j(ee,te,{binSuffix:"start"===ae?void 0:"end"},ne?{offset:ne}:{})},H.fieldRef=j,H.band=function(ee,te){return void 0===te&&(te=!0),{scale:ee,band:te}},H.midPoint=W,H.text=function(ee,te){if(ee){if(Q.isFieldDef(ee))return $.formatSignalRef(ee,ee.format,"datum",te);if(Q.isValueDef(ee))return{value:ee.value}}},H.mid=function(ee){return X.__assign({},ee,{mult:.5})}},{"../../channel":16,"../../fielddef":101,"../../scale":109,"../../util":119,"../common":25,tslib:6}],67:[function(U,z,H){"use strict";function j(ue){return ue&&"unit"===ue.type}function B(ue){return ue&&"facet"===ue.type}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("vega-util"),V=U("../channel"),Y=U("../encoding"),G=U("../fielddef"),X=U("../log"),K=U("../scale"),Q=U("../title"),Z=U("../transform"),J=U("../util"),$=U("../vega.schema"),ee=U("./axis/assemble"),te=U("./layout/header"),ae=U("./layoutsize/assemble"),ne=U("./legend/assemble"),ie=U("./legend/parse"),oe=U("./scale/assemble"),le=U("./scale/domain"),se=U("./scale/parse"),re=U("./split"),de=function(){function ue(){this.nameMap={}}return ue.prototype.rename=function(me,ge){this.nameMap[me]=ge},ue.prototype.has=function(me){return void 0!==this.nameMap[me]},ue.prototype.get=function(me){for(;this.nameMap[me]&&me!==this.nameMap[me];)me=this.nameMap[me];return me},ue}();H.NameMap=de,H.isUnitModel=j,H.isFacetModel=B,H.isRepeatModel=function(ue){return ue&&"repeat"===ue.type},H.isConcatModel=function(ue){return ue&&"concat"===ue.type},H.isLayerModel=function(ue){return ue&&"layer"===ue.type};var ce=function(){function ue(me,ge,fe,he,ye){var _e=this;this.children=[],this.correctDataNames=function(be){return be.from&&be.from.data&&(be.from.data=_e.lookupDataSource(be.from.data)),be.from&&be.from.facet&&be.from.facet.data&&(be.from.facet.data=_e.lookupDataSource(be.from.facet.data)),be},this.parent=ge,this.config=he,this.name=me.name||fe,this.title=q.isString(me.title)?{text:me.title}:me.title,this.scaleNameMap=ge?ge.scaleNameMap:new de,this.layoutSizeNameMap=ge?ge.layoutSizeNameMap:new de,this.data=me.data,this.description=me.description,this.transforms=Z.normalizeTransform(me.transform||[]),this.component={data:{sources:ge?ge.component.data.sources:{},outputNodes:ge?ge.component.data.outputNodes:{},outputNodeRefCounts:ge?ge.component.data.outputNodeRefCounts:{},ancestorParse:ge?W.__assign({},ge.component.data.ancestorParse):{}},layoutSize:new re.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:W.__assign({scale:{},axis:{},legend:{}},ye||{}),selection:null,scales:null,axes:{},legends:{}}}return Object.defineProperty(ue.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(ue.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),ue.prototype.initSize=function(me){var ge=me.width,fe=me.height;ge&&this.component.layoutSize.set("width",ge,!0),fe&&this.component.layoutSize.set("height",fe,!0)},ue.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},ue.prototype.parseScale=function(){se.parseScale(this)},ue.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},ue.prototype.parseLegend=function(){ie.parseLegend(this)},ue.prototype.assembleGroupStyle=function(){if("unit"===this.type||"layer"===this.type)return"cell"},ue.prototype.assembleLayoutSize=function(){if("unit"===this.type||"layer"===this.type)return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},ue.prototype.assembleHeaderMarks=function(){for(var me=this.component.layoutHeaders,ge=[],fe=0,he=te.HEADER_CHANNELS;fe<he.length;fe++)me[be=he[fe]].title&&ge.push(te.getTitleGroup(this,be));for(var ye=0,_e=te.HEADER_CHANNELS;ye<_e.length;ye++)for(var Ee,be=_e[ye],Se=me[be],ve=0,xe=te.HEADER_TYPES;ve<xe.length;ve++)if(Ee=xe[ve],Se[Ee])for(var Ne=0,Te=Se[Ee];Ne<Te.length;Ne++){var ke=Te[Ne],De=te.getHeaderGroup(this,be,Ee,Se,ke);De&&ge.push(De)}return ge},ue.prototype.assembleAxes=function(){return ee.assembleAxes(this.component.axes)},ue.prototype.assembleLegends=function(){return ne.assembleLegends(this)},ue.prototype.assembleTitle=function(){var me=W.__assign({},Q.extractTitleConfig(this.config.title).nonMark,this.title);if(me.text)return J.contains(["unit","layer"],this.type)||(me.anchor&&"start"!==me.anchor&&X.warn(X.message.cannotSetTitleAnchor(this.type)),me.anchor="start"),0<J.keys(me).length?me:void 0},ue.prototype.assembleGroup=function(me){void 0===me&&(me=[]);var ge={};0<(me=me.concat(this.assembleSelectionSignals())).length&&(ge.signals=me);var fe=this.assembleLayout();fe&&(ge.layout=fe),ge.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var he=!this.parent||B(this.parent)?oe.assembleScales(this):[];0<he.length&&(ge.scales=he);var ye=this.assembleAxes();0<ye.length&&(ge.axes=ye);var _e=this.assembleLegends();return 0<_e.length&&(ge.legends=_e),ge},ue.prototype.hasDescendantWithFieldOnChannel=function(me){for(var he,ge=0,fe=this.children;ge<fe.length;ge++)if(he=fe[ge],j(he)){if(he.channelHasField(me))return!0;}else if(he.hasDescendantWithFieldOnChannel(me))return!0;return!1},ue.prototype.getName=function(me){return J.varName((this.name?this.name+"_":"")+me)},ue.prototype.requestDataName=function(me){var ge=this.getName(me),fe=this.component.data.outputNodeRefCounts;return fe[ge]=(fe[ge]||0)+1,ge},ue.prototype.getSizeSignalRef=function(me){if(B(this.parent)){var ge="width"===me?"x":"y",fe=this.component.scales[ge];if(fe&&!fe.merged){var he=fe.get("type"),ye=fe.get("range");if(K.hasDiscreteDomain(he)&&$.isVgRangeStep(ye)){var _e=fe.get("name"),be=le.assembleDomain(this,ge),Se=le.getFieldFromDomain(be);if(Se){var ve=G.field({aggregate:"distinct",field:Se},{expr:"datum"});return{signal:ae.sizeExpr(_e,fe,ve)}}return X.warn("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(me))}},ue.prototype.lookupDataSource=function(me){var ge=this.component.data.outputNodes[me];return ge?ge.getSource():me},ue.prototype.getSizeName=function(me){return this.layoutSizeNameMap.get(me)},ue.prototype.renameLayoutSize=function(me,ge){this.layoutSizeNameMap.rename(me,ge)},ue.prototype.renameScale=function(me,ge){this.scaleNameMap.rename(me,ge)},ue.prototype.scaleName=function(me,ge){return ge?this.getName(me):V.isChannel(me)&&V.isScaleChannel(me)&&this.component.scales[me]||this.scaleNameMap.has(this.getName(me))?this.scaleNameMap.get(this.getName(me)):void 0},ue.prototype.getScaleComponent=function(me){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var ge=this.component.scales[me];return ge&&!ge.merged?ge:this.parent?this.parent.getScaleComponent(me):void 0},ue.prototype.getSelectionComponent=function(me,ge){var fe=this.component.selection[me];if(!fe&&this.parent&&(fe=this.parent.getSelectionComponent(me,ge)),!fe)throw new Error(X.message.selectionNotFound(ge));return fe},ue}();H.Model=ce;var pe=function(ue){function me(){return null!==ue&&ue.apply(this,arguments)||this}return W.__extends(me,ue),me.prototype.field=function(ge,fe){void 0===fe&&(fe={});var he=this.fieldDef(ge);if(he)return G.field(he,fe)},me.prototype.reduceFieldDef=function(ge,fe,he){return Y.reduce(this.getMapping(),function(ye,_e,be){var Se=G.getFieldDef(_e);return Se?ge(ye,Se,be):ye},fe,he)},me.prototype.forEachFieldDef=function(ge,fe){Y.forEach(this.getMapping(),function(he,ye){var _e=G.getFieldDef(he);_e&&ge(_e,ye)},fe)},me}(ce);H.ModelWithField=pe},{"../channel":16,"../encoding":99,"../fielddef":101,"../log":106,"../scale":109,"../title":115,"../transform":117,"../util":119,"../vega.schema":121,"./axis/assemble":17,"./layout/header":47,"./layoutsize/assemble":48,"./legend/assemble":50,"./legend/parse":53,"./scale/assemble":71,"./scale/domain":73,"./scale/parse":74,"./split":90,tslib:6,"vega-util":11}],68:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../log"),W=U("./baseconcat"),q=U("./buildmodel"),V=U("./layoutsize/parse"),Y=function(G){function X(K,Q,Z,J,$){var ee=G.call(this,K,Q,Z,$,K.resolve)||this;return ee.type="repeat",K.resolve&&K.resolve.axis&&("shared"===K.resolve.axis.x||"shared"===K.resolve.axis.y)&&B.warn(B.message.REPEAT_CANNOT_SHARE_AXIS),ee.repeat=K.repeat,ee.children=ee._initChildren(K,ee.repeat,J,$),ee}return j.__extends(X,G),X.prototype._initChildren=function(K,Q,Z,J){for(var $=[],ee=Q.row||[Z?Z.row:null],te=Q.column||[Z?Z.column:null],ae=0,ne=ee;ae<ne.length;ae++)for(var ie=ne[ae],oe=0,le=te;oe<le.length;oe++){var se=le[oe],re=(ie?"_"+ie:"")+(se?"_"+se:"");$.push(q.buildModel(K.spec,this,this.getName("child"+re),void 0,{row:ie,column:se},J,!1))}return $},X.prototype.parseLayoutSize=function(){V.parseRepeatLayoutSize(this)},X.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},X}(W.BaseConcatModel);H.RepeatModel=Y},{"../log":106,"./baseconcat":23,"./buildmodel":24,"./layoutsize/parse":49,tslib:6}],69:[function(U,z,H){"use strict";function j(Q,Z){return Y.isRepeatRef(Q.field)?Q.field.repeat in Z?V.__assign({},Q,{field:Z[Q.field.repeat]}):void G.warn(G.message.noSuchRepeatedValue(Q.field.repeat)):Q}function B(Q,Z){if(void 0!==(Q=j(Q,Z))){if(Q.sort&&X.isSortField(Q.sort)){var J=j(Q.sort,Z);Q=V.__assign({},Q,J?{sort:J}:{})}return Q}}function W(Q,Z){if(!Y.isFieldDef(Q)){if(Y.hasConditionalFieldDef(Q)){var J=B(Q.condition,Z);return J?V.__assign({},Q,{condition:J}):(Q.condition,V.__rest(Q,["condition"]))}return Q}return(J=B(Q,Z))?J:Y.isConditionalDef(Q)?{condition:Q.condition}:void 0}function q(Q,Z){var J={};for(var $ in Q)if(Q.hasOwnProperty($)){var ee=Q[$];if(K.isArray(ee))J[$]=ee.map(function(ae){return W(ae,Z)}).filter(function(ae){return ae});else{var te=W(ee,Z);te&&(J[$]=te)}}return J}Object.defineProperty(H,"__esModule",{value:!0});var V=U("tslib"),Y=U("../fielddef"),G=U("../log"),X=U("../sort"),K=U("../util");H.replaceRepeaterInFacet=function(Q,Z){return q(Q,Z)},H.replaceRepeaterInEncoding=function(Q,Z){return q(Q,Z)}},{"../fielddef":101,"../log":106,"../sort":111,"../util":119,tslib:6}],70:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../channel"),B=U("../log"),W=U("../util"),q=U("./model");H.defaultScaleResolve=function(V,Y){if(q.isLayerModel(Y)||q.isFacetModel(Y))return"shared";if(q.isConcatModel(Y)||q.isRepeatModel(Y))return W.contains(j.POSITION_SCALE_CHANNELS,V)?"independent":"shared";throw new Error("invalid model type for resolve")},H.parseGuideResolve=function(V,Y){var G=V.scale[Y],X=W.contains(j.POSITION_SCALE_CHANNELS,Y)?"axis":"legend";return"independent"===G?("shared"===V[X][Y]&&B.warn(B.message.independentScaleMeansIndependentGuide(Y)),"independent"):V[X][Y]||"shared"}},{"../channel":16,"../log":106,"../util":119,"./model":67}],71:[function(U,z,H){"use strict";function j(Z){return X.isLayerModel(Z)||X.isConcatModel(Z)||X.isRepeatModel(Z)?Z.children.reduce(function(J,$){return J.concat(j($))},B(Z)):B(Z)}function B(Z){return Y.keys(Z.component.scales).reduce(function(J,$){var ee=Z.component.scales[$];if(ee.merged)return J;var te=ee.combine(),ae=te.domainRaw,ne=te.range,ie=te.name,oe=te.type,le=(te.domainRaw,te.range,q.__rest(te,["name","type","domainRaw","range"]));return ne=W(ne,ie,Z,$),ae&&K.isRawSelectionDomain(ae)&&(ae=K.selectionScaleDomain(Z,ae)),J.push(q.__assign({name:ie,type:oe,domain:Q.assembleDomain(Z,$)},ae?{domainRaw:ae}:{},{range:ne},le)),J},[])}function W(Z,J,$,ee){if("x"===ee||"y"===ee){if(G.isVgRangeStep(Z))return{step:{signal:J+"_step"}};if(V.isArray(Z)&&2===Z.length){var te=Z[0],ae=Z[1];if(0===te&&G.isVgSignalRef(ae))return[0,{signal:$.getSizeName(ae.signal)}];if(G.isVgSignalRef(te)&&0===ae)return[{signal:$.getSizeName(te.signal)},0]}}return Z}Object.defineProperty(H,"__esModule",{value:!0});var q=U("tslib"),V=U("vega-util"),Y=U("../../util"),G=U("../../vega.schema"),X=U("../model"),K=U("../selection/selection"),Q=U("./domain");H.assembleScales=j,H.assembleScalesForModel=B,H.assembleScaleRange=W},{"../../util":119,"../../vega.schema":121,"../model":67,"../selection/selection":80,"./domain":73,tslib:6,"vega-util":11}],72:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=function(W){function q(V,Y){var G=W.call(this,{},{name:V})||this;return G.merged=!1,G.domains=[],G.setWithExplicit("type",Y),G}return j.__extends(q,W),q}(U("../split").Split);H.ScaleComponent=B},{"../split":90,tslib:6}],73:[function(U,z,H){"use strict";function j(me){pe.isUnitModel(me)?B(me):W(me)}function B(me){var ge=me.specifiedScales,fe=me.component.scales;le.keys(fe).forEach(function(he){var ye=ge[he],_e=ye?ye.domain:void 0,be=V(me,he),Se=fe[he];Se.domains=be,ie.isSelectionDomain(_e)&&Se.set("domainRaw",{signal:ue.SELECTION_DOMAIN+JSON.stringify(_e)},!0)})}function W(me){for(var ge=0,fe=me.children;ge<fe.length;ge++)j(fe[ge]);var he=me.component.scales;le.keys(he).forEach(function(ye){for(var _e,ve,be=0,Se=me.children;be<Se.length;be++)ve=Se[be].component.scales[ye],ve&&(_e=void 0===_e?ve.domains:_e.concat(ve.domains));pe.isFacetModel(me)&&_e.forEach(function(xe){se.isDataRefDomain(xe)&&(xe.data=ce.FACET_SCALE_PREFIX+xe.data.replace(ce.FACET_SCALE_PREFIX,""))}),he[ye].domains=_e})}function q(me,ge,fe,he){if("unaggregated"===me){var ye=X(ge,fe),_e=ye.valid,be=ye.reason;if(!_e)return void ne.warn(be)}else if(void 0===me&&he.useUnaggregatedDomain&&(_e=X(ge,fe).valid))return"unaggregated";return me}function V(me,ge){var fe=me.getScaleComponent(ge).get("type"),he=q(me.scaleDomain(ge),me.fieldDef(ge),fe,me.config.scale);return he!==me.scaleDomain(ge)&&(me.specifiedScales[ge]=Q.__assign({},me.specifiedScales[ge],{domain:he})),"x"===ge&&me.channelHasField("x2")?me.channelHasField("x")?Y(fe,he,me,"x").concat(Y(fe,he,me,"x2")):Y(fe,he,me,"x2"):"y"===ge&&me.channelHasField("y2")?me.channelHasField("y")?Y(fe,he,me,"y").concat(Y(fe,he,me,"y2")):Y(fe,he,me,"y2"):Y(fe,he,me,ge)}function Y(me,ge,fe,he){var ye=fe.fieldDef(he);if(ge&&"unaggregated"!==ge&&!ie.isSelectionDomain(ge)){if(!ye.bin)return ae.isDateTime(ge[0])?ge.map(function(xe){return{signal:"{data: "+ae.dateTimeExpr(xe,!0)+"}"}}):[ge];ne.warn(ne.message.conflictedDomain(he))}var _e=fe.stack;if(_e&&he===_e.fieldChannel)return"normalize"===_e.offset?[[0,1]]:[{data:ve=fe.requestDataName(te.MAIN),field:fe.field(he,{suffix:"start"})},{data:ve,field:fe.field(he,{suffix:"end"})}];var be=ee.isScaleChannel(he)?G(fe,he,me):void 0;if("unaggregated"===ge)return[{data:ve=fe.requestDataName(te.MAIN),field:fe.field(he,{aggregate:"min"})},{data:ve,field:fe.field(he,{aggregate:"max"})}];if(ye.bin){if(ie.isBinScale(me)){var Se=fe.getName($.binToString(ye.bin)+"_"+ye.field+"_bins");return[{signal:"sequence("+Se+".start, "+Se+".stop + "+Se+".step, "+Se+".step)"}]}if(ie.hasDiscreteDomain(me))return[{data:le.isBoolean(be)?fe.requestDataName(te.MAIN):fe.requestDataName(te.RAW),field:fe.field(he,de.binRequiresRange(ye,he)?{binSuffix:"range"}:{}),sort:!0!==be&&oe.isSortField(be)?be:{field:fe.field(he,{}),op:"min"}}];if("x"===he||"y"===he){var ve=fe.requestDataName(te.MAIN);return[{data:ve,field:fe.field(he,{})},{data:ve,field:fe.field(he,{binSuffix:"end"})}]}return[{data:fe.requestDataName(te.MAIN),field:fe.field(he,{})}]}return be?[{data:le.isBoolean(be)?fe.requestDataName(te.MAIN):fe.requestDataName(te.RAW),field:fe.field(he),sort:be}]:[{data:fe.requestDataName(te.MAIN),field:fe.field(he)}]}function G(me,ge,fe){if(ie.hasDiscreteDomain(fe)){var he=me.sort(ge);return oe.isSortField(he)?he:"descending"===he?{op:"min",field:me.field(ge),order:"descending"}:!!le.contains(["ascending",void 0],he)||void 0}}function X(me,ge){return me.aggregate?J.SHARED_DOMAIN_OP_INDEX[me.aggregate]?"quantitative"===me.type&&"log"===ge?{valid:!1,reason:ne.message.unaggregatedDomainWithLogScale(me)}:{valid:!0}:{valid:!1,reason:ne.message.unaggregateDomainWithNonSharedDomainOp(me.aggregate)}:{valid:!1,reason:ne.message.unaggregateDomainHasNoEffectForRawField(me)}}function K(me){var ge=le.unique(me.map(function(xe){return se.isDataRefDomain(xe)?(xe.sort,Q.__rest(xe,["sort"])):xe}),le.hash),fe=le.unique(me.map(function(xe){if(se.isDataRefDomain(xe)){var Ee=xe.sort;return void 0===Ee||le.isBoolean(Ee)||("count"===Ee.op&&delete Ee.field,"ascending"===Ee.order&&delete Ee.order),Ee}}).filter(function(xe){return void 0!==xe}),le.hash);if(1===ge.length){var he=me[0];if(se.isDataRefDomain(he)&&0<fe.length){var ye=fe[0];return 1<fe.length&&(ne.warn(ne.message.MORE_THAN_ONE_SORT),ye=!0),Q.__assign({},he,{sort:ye})}return he}var _e=fe.filter(function(xe){return!!le.isBoolean(xe)||"count"===xe.op||(ne.warn(ne.message.domainSortDropped(xe)),!1)}),be=!0;if(1===_e.length)be=_e[0];else if(1<_e.length){var Se=_e.filter(function(xe){return!1!==xe});1<Se.length?(ne.warn(ne.message.MORE_THAN_ONE_SORT),be=!0):be=Se[0]}var ve=le.unique(me.map(function(xe){return se.isDataRefDomain(xe)?xe.data:null}),function(xe){return xe});return 1===ve.length&&null!==ve[0]?he={data:ve[0],fields:ge.map(function(xe){return xe.field}),sort:be}:{fields:ge,sort:be}}Object.defineProperty(H,"__esModule",{value:!0});var Q=U("tslib"),Z=U("vega-util"),J=U("../../aggregate"),$=U("../../bin"),ee=U("../../channel"),te=U("../../data"),ae=U("../../datetime"),ne=U("../../log"),ie=U("../../scale"),oe=U("../../sort"),le=U("../../util"),se=U("../../vega.schema"),re=U("../../vega.schema"),de=U("../common"),ce=U("../data/optimize"),pe=U("../model"),ue=U("../selection/selection");H.parseScaleDomain=j,H.parseDomainForChannel=V,H.domainSort=G,H.canUseUnaggregatedDomain=X,H.mergeDomains=K,H.getFieldFromDomain=function(me){if(se.isDataRefDomain(me)&&Z.isString(me.field))return me.field;if(re.isDataRefUnionedDomain(me)){for(var ye,ge=void 0,fe=0,he=me.fields;fe<he.length;fe++)if(ye=he[fe],se.isDataRefDomain(ye)&&Z.isString(ye.field))if(!ge)ge=ye.field;else if(ge!==ye.field)return ne.warn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),ge;return ne.warn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),ge}return re.isFieldRefUnionDomain(me)&&Z.isString?(ne.warn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect."),ge=me.fields[0],Z.isString(ge)?ge:void 0):void 0},H.assembleDomain=function(me,ge){return K(me.component.scales[ge].domains.map(function(fe){return se.isDataRefDomain(fe)&&(fe.data=me.lookupDataSource(fe.data)),fe}))}},{"../../aggregate":13,"../../bin":15,"../../channel":16,"../../data":97,"../../datetime":98,"../../log":106,"../../scale":109,"../../sort":111,"../../util":119,"../../vega.schema":121,"../common":25,"../data/optimize":39,"../model":67,"../selection/selection":80,tslib:6,"vega-util":11}],74:[function(U,z,H){"use strict";function j(ne){ne.component.scales=X.isUnitModel(ne)?B(ne):W(ne)}function B(ne){var ie=ne.encoding,oe=ne.config,le=ne.mark();return q.SCALE_CHANNELS.reduce(function(se,re){var de,ce={},pe=ie[re];if(V.isFieldDef(pe)?(de=pe,ce=pe.scale||{}):V.hasConditionalFieldDef(pe)?(de=pe.condition,ce=pe.condition.scale||{}):"x"===re?de=V.getFieldDef(ie.x2):"y"===re&&(de=V.getFieldDef(ie.y2)),de){var ue=ce.type,me=te.scaleType(ce.type,re,de,le,oe.scale);se[re]=new Z.ScaleComponent(ne.scaleName(re+"",!0),{value:me,explicit:ue===me})}return se},{})}function W(ne){for(var ie=ne.component.scales={},oe={},le=ne.component.resolve,se=0,re=ne.children;se<re.length;se++)!function(de){j(de),G.keys(de.component.scales).forEach(function(ce){if(le.scale[ce]=le.scale[ce]||K.defaultScaleResolve(ce,ne),"shared"===le.scale[ce]){var pe=oe[ce],ue=de.component.scales[ce].getWithExplicit("type");pe?Y.scaleCompatible(pe.value,ue.value)?oe[ce]=Q.mergeValuesWithExplicit(pe,ue,"type","scale",ae):(le.scale[ce]="independent",delete oe[ce]):oe[ce]=ue}})}(re[se]);return G.keys(oe).forEach(function(de){var ce=ne.scaleName(de,!0),pe=oe[de];ie[de]=new Z.ScaleComponent(ce,pe);for(var ue=0,me=ne.children;ue<me.length;ue++){var ge=me[ue],fe=ge.component.scales[de];fe&&(ge.renameScale(fe.get("name"),ce),fe.merged=!0)}}),ie}Object.defineProperty(H,"__esModule",{value:!0});var q=U("../../channel"),V=U("../../fielddef"),Y=U("../../scale"),G=U("../../util"),X=U("../model"),K=U("../resolve"),Q=U("../split"),Z=U("./component"),J=U("./domain"),$=U("./properties"),ee=U("./range"),te=U("./type");H.parseScale=function(ne){j(ne),J.parseScaleDomain(ne);for(var le,ie=0,oe=Y.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES;ie<oe.length;ie++)le=oe[ie],$.parseScaleProperty(ne,le);ee.parseScaleRange(ne)},H.parseScaleCore=j;var ae=Q.tieBreakByComparing(function(ne,ie){return Y.scaleTypePrecedence(ne)-Y.scaleTypePrecedence(ie)})},{"../../channel":16,"../../fielddef":101,"../../scale":109,"../../util":119,"../model":67,"../resolve":70,"../split":90,"./component":72,"./domain":73,"./properties":75,"./range":76,"./type":77}],75:[function(U,z,H){"use strict";function j(oe,le){ae.isUnitModel(oe)?B(oe,le):q(oe,le)}function B(oe,le){var se=oe.component.scales;ee.keys(se).forEach(function(re){var de=oe.specifiedScales[re],ce=se[re],pe=oe.getScaleComponent(re),ue=oe.fieldDef(re),me=oe.sort(re),ge=oe.config,fe=de[le],he=pe.get("type"),ye=$.scaleTypeSupportProperty(he,le),_e=$.channelScalePropertyIncompatability(re,le);if(void 0!==fe&&(ye?_e&&J.warn(_e):J.warn(J.message.scalePropertyNotWorkWithScaleType(he,le,re))),ye&&void 0===_e)if(void 0!==fe)ce.copyKeyFromObject(le,de);else{var be=W(le,re,ue,me,pe.get("type"),pe.get("padding"),pe.get("paddingInner"),de.domain,oe.markDef,ge);void 0!==be&&ce.set(le,be,!1)}})}function W(oe,le,se,re,de,ce,pe,ue,me,ge){var fe=ge.scale;return"nice"===oe?V(de,le,se):"padding"===oe?Y(le,de,fe,se,me,ge.bar):"paddingInner"===oe?G(ce,le,fe):"paddingOuter"===oe?X(ce,le,de,pe,fe):"reverse"===oe?K(de,re):"zero"===oe?Q(le,se,ue):fe[oe]}function q(oe,le){for(var ce,se=oe.component.scales,re=0,de=oe.children;re<de.length;re++)ce=de[re],"range"===le?ie.parseScaleRange(ce):j(ce,le);ee.keys(se).forEach(function(pe){for(var ue,fe,me=0,ge=oe.children;me<ge.length;me++)if(fe=ge[me].component.scales[pe],fe){var he=fe.getWithExplicit(le);ue=ne.mergeValuesWithExplicit(ue,he,le,"scale",ne.tieBreakByComparing(function(ye,_e){return"range"===le?ye.step&&_e.step?ye.step-_e.step:0:0}))}se[pe].setWithExplicit(le,ue)})}function V(oe,le,se){if(!se.bin&&!te.contains([$.ScaleType.TIME,$.ScaleType.UTC],oe))return te.contains([Z.X,Z.Y],le)}function Y(oe,le,se,re,de,ce){if(te.contains([Z.X,Z.Y],oe)){if($.isContinuousToContinuous(le)){if(void 0!==se.continuousPadding)return se.continuousPadding;var pe=de.type,ue=de.orient;if("bar"===pe&&!re.bin&&("vertical"===ue&&"x"===oe||"horizontal"===ue&&"y"===oe))return ce.continuousBandSize}if(le===$.ScaleType.POINT)return se.pointPadding}}function G(oe,le,se){if(void 0===oe)return te.contains([Z.X,Z.Y],le)?se.bandPaddingInner:void 0}function X(oe,le,se,re,de){if(void 0===oe)return te.contains([Z.X,Z.Y],le)&&se===$.ScaleType.BAND?void 0===de.bandPaddingOuter?re/2:de.bandPaddingOuter:void 0}function K(oe,le){if($.hasContinuousDomain(oe)&&"descending"===le)return!0}function Q(oe,le,se){return"size"===oe&&"quantitative"===le.type||(!se||"unaggregated"===se)&&!le.bin&&te.contains([Z.X,Z.Y],oe)}Object.defineProperty(H,"__esModule",{value:!0});var Z=U("../../channel"),J=U("../../log"),$=U("../../scale"),ee=U("../../util"),te=U("../../util"),ae=U("../model"),ne=U("../split"),ie=U("./range");H.parseScaleProperty=j,H.getDefaultValue=W,H.parseNonUnitScaleProperty=q,H.nice=V,H.padding=Y,H.paddingInner=G,H.paddingOuter=X,H.reverse=K,H.zero=Q},{"../../channel":16,"../../log":106,"../../scale":109,"../../util":119,"../model":67,"../split":90,"./range":76}],76:[function(U,z,H){"use strict";function j(oe){var le=oe.component.scales;Q.SCALE_CHANNELS.forEach(function(se){var re=le[se];if(re){var de=oe.getScaleComponent(se),ce=oe.specifiedScales[se],pe=oe.fieldDef(se),ue="x"===se?"width":"y"===se?"height":void 0,me=ue?!!oe.component.layoutSize.get(ue):void 0,ge=de.get("type"),fe=ee.contains(["point","band"],ge)||!!ce.rangeStep;ue&&oe.fit&&!me&&fe&&(Z.warn(Z.message.CANNOT_FIX_RANGE_STEP_WITH_FIT),me=!0);var he=B(oe),ye=W(se,ge,pe.type,ce,oe.config,re.get("zero"),oe.mark(),me,oe.getName(ue),he);re.setWithExplicit("range",ye)}})}function B(oe){var le=[],se=oe.getScaleComponent("x"),re=se&&se.get("range");re&&te.isVgRangeStep(re)&&K.isNumber(re.step)&&le.push(re.step);var de=oe.getScaleComponent("y"),ce=de&&de.get("range");return ce&&te.isVgRangeStep(ce)&&K.isNumber(ce.step)&&le.push(ce.step),le}function W(oe,le,se,re,de,ce,pe,ue,me,ge){for(var _e,fe=ue||null===re.rangeStep,he=0,ye=H.RANGE_PROPERTIES;he<ye.length;he++)if(_e=ye[he],void 0!==re[_e]){var be=J.scaleTypeSupportProperty(le,_e),Se=J.channelScalePropertyIncompatability(oe,_e);if(!be)Z.warn(Z.message.scalePropertyNotWorkWithScaleType(le,_e,oe));else if(Se)Z.warn(Se);else switch(_e){case"range":return ne.makeExplicit(re[_e]);case"scheme":return ne.makeExplicit(q(re[_e]));case"rangeStep":var ve=re[_e];if(null!==ve){if(!ue)return ne.makeExplicit({step:ve});Z.warn(Z.message.rangeStepDropped(oe))}}}return ne.makeImplicit(V(oe,le,se,de,ce,pe,me,ge,fe))}function q(oe){if(J.isExtendedScheme(oe)){var le={scheme:oe.name};return oe.count&&(le.count=oe.count),oe.extent&&(le.extent=oe.extent),le}return{scheme:oe}}function V(oe,le,se,re,de,ce,pe,ue,me){switch(oe){case Q.X:case Q.Y:if(ee.contains(["point","band"],le)&&!me)if(oe===Q.X&&"text"===ce){if(re.scale.textXRangeStep)return{step:re.scale.textXRangeStep};}else if(re.scale.rangeStep)return{step:re.scale.rangeStep};return oe===Q.Y&&$.hasContinuousDomain(le)?[{signal:pe},0]:[0,{signal:pe}];case Q.SIZE:return[Y(ce,de,re),G(ce,ue,re)];case Q.SHAPE:return"symbol";case Q.COLOR:return"ordinal"===le?"nominal"===se?"category":"ordinal":"rect"===ce?"heatmap":"ramp";case Q.OPACITY:return[re.scale.minOpacity,re.scale.maxOpacity];}throw new Error("Scale range undefined for channel "+oe)}function Y(oe,le,se){if(le)return 0;switch(oe){case"bar":case"tick":return se.scale.minBandSize;case"line":case"rule":return se.scale.minStrokeWidth;case"text":return se.scale.minFontSize;case"point":case"square":case"circle":return se.scale.minSize;}throw new Error(Z.message.incompatibleChannel("size",oe))}function G(oe,le,se){var re=se.scale;switch(oe){case"bar":case"tick":return void 0===se.scale.maxBandSize?X(le,se.scale)-1:se.scale.maxBandSize;case"line":case"rule":return se.scale.maxStrokeWidth;case"text":return se.scale.maxFontSize;case"point":case"square":case"circle":if(se.scale.maxSize)return se.scale.maxSize;var de=X(le,re);return(de-2)*(de-2);}throw new Error(Z.message.incompatibleChannel("size",oe))}function X(oe,le){return 0<oe.length?Math.min.apply(null,oe):le.rangeStep?le.rangeStep:21}Object.defineProperty(H,"__esModule",{value:!0});var K=U("vega-util"),Q=U("../../channel"),Z=U("../../log"),J=U("../../scale"),$=U("../../scale"),ee=U("../../util"),te=U("../../vega.schema"),ae=U("../model"),ne=U("../split"),ie=U("./properties");H.RANGE_PROPERTIES=["range","rangeStep","scheme"],H.parseScaleRange=function(oe){ae.isUnitModel(oe)?j(oe):ie.parseNonUnitScaleProperty(oe,"range")},H.parseRangeForChannel=W,H.defaultRange=V},{"../../channel":16,"../../log":106,"../../scale":109,"../../util":119,"../../vega.schema":121,"../model":67,"../split":90,"./properties":75,"vega-util":11}],77:[function(U,z,H){"use strict";function j(Q,Z,J){switch(Z.type){case"nominal":case"ordinal":if("color"===Q||"discrete"===W.rangeType(Q))return"shape"===Q&&"ordinal"===Z.type&&q.warn(q.message.discreteChannelCannotEncode(Q,"ordinal")),"ordinal";if(X.contains(["x","y"],Q)){if("rect"===J)return"band";if("bar"===J)return"band"}return"point";case"temporal":return"color"===Q?"sequential":"discrete"===W.rangeType(Q)?(q.warn(q.message.discreteChannelCannotEncode(Q,"temporal")),"ordinal"):"time";case"quantitative":return"color"===Q?Z.bin?"bin-ordinal":"sequential":"discrete"===W.rangeType(Q)?(q.warn(q.message.discreteChannelCannotEncode(Q,"quantitative")),"ordinal"):Z.bin&&"x"!==Q&&"y"!==Q?"bin-linear":"linear";}throw new Error(q.message.invalidFieldType(Z.type))}function B(Q,Z){var J=Z.type;return K.contains([G.Type.ORDINAL,G.Type.NOMINAL],J)?void 0===Q||Y.hasDiscreteDomain(Q):J===G.Type.TEMPORAL?K.contains([V.ScaleType.TIME,V.ScaleType.UTC,V.ScaleType.SEQUENTIAL,void 0],Q):J!==G.Type.QUANTITATIVE||(Z.bin?K.contains([V.ScaleType.BIN_LINEAR,V.ScaleType.BIN_ORDINAL,V.ScaleType.LINEAR],Q):K.contains([V.ScaleType.LOG,V.ScaleType.POW,V.ScaleType.SQRT,V.ScaleType.QUANTILE,V.ScaleType.QUANTIZE,V.ScaleType.LINEAR,V.ScaleType.SEQUENTIAL,void 0],Q))}Object.defineProperty(H,"__esModule",{value:!0});var W=U("../../channel"),q=U("../../log"),V=U("../../scale"),Y=U("../../scale"),G=U("../../type"),X=U("../../util"),K=U("../../util");H.scaleType=function(Q,Z,J,$){var te=j(Z,J,$);return W.isScaleChannel(Z)?void 0===Q?te:V.channelSupportScaleType(Z,Q)?B(Q,J)?Q:(q.warn(q.message.scaleTypeNotWorkWithFieldDef(Q,te)),te):(q.warn(q.message.scaleTypeNotWorkWithChannel(Z,Q,te)),te):null},H.fieldDefMatchScaleType=B},{"../../channel":16,"../../log":106,"../../scale":109,"../../type":118,"../../util":119}],78:[function(U,z,H){"use strict";function j(Z,J,$){var ee=X.channelSignalName(J,$,"visual"),te=X.channelSignalName(J,$,"data"),ae=K.default.has(J),ne=Z.scaleName($),ie=G.stringValue(ne),oe=Z.getScaleComponent($),le=oe?oe.get("type"):void 0,se=Z.getSizeSignalRef($===q.X?"width":"height").signal,re=$+"(unit)",de=B(J,function(ce,pe){return ce.concat({events:pe.between[0],update:"["+re+", "+re+"]"},{events:pe,update:"["+ee+"[0], clamp("+re+", 0, "+se+")]"})});return de.push({events:{signal:J.name+H.SCALE_TRIGGER},update:Y.hasContinuousDomain(le)&&!Y.isBinScale(le)?"[scale("+ie+", "+te+"[0]), scale("+ie+", "+te+"[1])]":"[0, 0]"}),ae?[{name:te,on:[]}]:[{name:ee,value:[],on:de},{name:te,on:[{events:{signal:ee},update:ee+"[0] === "+ee+"[1] ? null : invert("+ie+", "+ee+")"}]}]}function B(Z,J){return Z.events.reduce(function($,ee){return ee.between?J($,ee):(V.warn(ee+" is not an ordered event stream for interval selections"),$)},[])}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("../../channel"),V=U("../../log"),Y=U("../../scale"),G=U("../../util"),X=U("./selection"),K=U("./transforms/scales");H.BRUSH="_brush",H.SCALE_TRIGGER="_scale_trigger";H.default={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(J,$){var ee=$.name,te=K.default.has($),ae=[],ne=[],ie=[],oe=[];if($.translate&&!te){var le="!event.item || event.item.mark.name !== "+G.stringValue(ee+H.BRUSH);B($,function(se,re){var de=re.between[0].filter||(re.between[0].filter=[]);0>de.indexOf(le)&&de.push(le)})}return $.project.forEach(function(se){var re=se.channel;if(re===q.X||re===q.Y){var de=j(J,$,re),ce=X.channelSignalName($,re,"data"),pe=X.channelSignalName($,re,"visual"),ue=G.stringValue(J.scaleName(re)),me=J.getScaleComponent(re).get("type"),ge=Y.hasContinuousDomain(me)?"+":"";ae.push.apply(ae,de),ie.push(ce),ne.push("{encoding: "+G.stringValue(re)+", field: "+G.stringValue(se.field)+", extent: "+ce+"}"),oe.push({scaleName:J.scaleName(re),expr:"(!isArray("+ce+") || ("+ge+"invert("+ue+", "+pe+")[0] === "+ge+ce+"[0] && "+ge+"invert("+ue+", "+pe+")[1] === "+ge+ce+"[1]))"})}else V.warn("Interval selections only support x and y encoding channels.")}),te||ae.push({name:ee+H.SCALE_TRIGGER,update:oe.map(function(se){return se.expr}).join(" && ")+" ? "+(ee+H.SCALE_TRIGGER)+" : {}"}),ae.concat({name:ee+X.TUPLE,on:[{events:ie.map(function(se){return{signal:se}}),update:ie.join(" && ")+" ? {unit: "+X.unitName(J)+", intervals: ["+ne.join(", ")+"]} : null"}]})},modifyExpr:function(J,$){return $.name+X.TUPLE+", "+("global"===$.resolve?"true":"{unit: "+X.unitName(J)+"}")},marks:function(J,$,ee){var te=$.name,ae=X.positionalProjections($),ne=ae.xi,ie=ae.yi,oe="data("+G.stringValue($.name+X.STORE)+")";if(K.default.has($))return ee;var le={x:null===ne?{value:0}:{signal:te+"_x[0]"},y:null===ie?{value:0}:{signal:te+"_y[0]"},x2:null===ne?{field:{group:"width"}}:{signal:te+"_x[1]"},y2:null===ie?{field:{group:"height"}}:{signal:te+"_y[1]"}};"global"===$.resolve&&G.keys(le).forEach(function(ue){le[ue]=[W.__assign({test:oe+".length && "+oe+"[0].unit === "+X.unitName(J)},le[ue]),{value:0}]});var se=$.mark,re=se.fill,de=se.fillOpacity,ce=W.__rest(se,["fill","fillOpacity"]),pe=G.keys(ce).reduce(function(ue,me){return ue[me]={value:ce[me]},ue},{});return[{name:te+H.BRUSH+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:re},fillOpacity:{value:de}},update:le}}].concat(ee,{name:te+H.BRUSH,type:"rect",clip:!0,encode:{enter:W.__assign({fill:{value:"transparent"}},pe),update:le}})}}},{"../../channel":16,"../../log":106,"../../scale":109,"../../util":119,"./selection":80,"./transforms/scales":85,tslib:6}],79:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../util"),B=U("./selection"),W=U("./transforms/nearest");H.default={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:function(Y,G){var X=G.project,K=W.default.has(G)?"(item().isVoronoi ? datum.datum : datum)":"datum",Q=[],Z=X.map(function(ee){return j.stringValue(ee.channel)}).filter(function(ee){return ee}).join(", "),J=X.map(function(ee){return j.stringValue(ee.field)}).join(", "),$=X.map(function(ee){var te=ee.channel,ae=Y.fieldDef(te);return ae&&ae.bin?(Q.push(ee.field),"["+K+j.accessPath(Y.field(te,{}))+", "+K+j.accessPath(Y.field(te,{binSuffix:"end"}))+"]"):""+K+j.accessPath(ee.field)}).join(", ");return[{name:G.name+B.TUPLE,value:{},on:[{events:G.events,update:"datum && item().mark.marktype !== 'group' ? {unit: "+B.unitName(Y)+", encodings: ["+Z+"], fields: ["+J+"], values: ["+$+"]"+(Q.length?", "+Q.map(function(ee){return j.stringValue("bin_"+ee)+": 1"}).join(", "):"")+"} : null",force:!0}]}]},modifyExpr:function(Y,G){return G.name+B.TUPLE+", "+("global"===G.resolve?"null":"{unit: "+B.unitName(Y)+"}")}}},{"../../util":119,"./selection":80,"./transforms/nearest":83}],80:[function(U,z,H){"use strict";function j(ae,ne){return B(ae,function(ie,oe){ne=oe.marks?oe.marks(ae,ie,ne):ne,te.forEachTransform(ie,function(le){le.marks&&(ne=le.marks(ae,ie,ne))})}),ne}function B(ae,ne){var ie=ae.component.selection;for(var oe in ie)if(ie.hasOwnProperty(oe)){var le=ie[oe];ne(le,W(le.type))}}function W(ae){return"single"===ae?ee.default:"multi"===ae?$.default:"interval"===ae?J.default:null}function q(ae){for(var ne=ae.parent;ne&&!Z.isFacetModel(ne);)ne=ne.parent;return ne}Object.defineProperty(H,"__esModule",{value:!0});var V=U("tslib"),Y=U("vega-event-selector"),G=U("../../channel"),X=U("../../log"),K=U("../../selection"),Q=U("../../util"),Z=U("../model"),J=U("./interval"),$=U("./multi"),ee=U("./single"),te=U("./transforms/transforms");H.STORE="_store",H.TUPLE="_tuple",H.MODIFY="_modify",H.SELECTION_DOMAIN="_selection_domain_",H.parseUnitSelection=function(ae,ne){var ie={},oe=ae.config.selection;for(var le in ne)!function(se){if(!ne.hasOwnProperty(se))return"continue";var re=ne[se],de=oe[re.type];for(var ce in de)"encodings"===ce&&re.fields||"fields"===ce&&re.encodings||("mark"===ce&&(re[ce]=V.__assign({},de[ce],re[ce])),void 0!==re[ce]&&!0!==re[ce]||(re[ce]=de[ce]||re[ce]));se=Q.varName(se);var pe=ie[se]=V.__assign({},re,{name:se,events:Q.isString(re.on)?Y.selector(re.on,"scope"):re.on});te.forEachTransform(pe,function(ue){ue.parse&&ue.parse(ae,re,pe)})}(le);return ie},H.assembleUnitSelectionSignals=function(ae,ne){B(ae,function(le,se){var re=le.name,de=se.modifyExpr(ae,le);ne.push.apply(ne,se.signals(ae,le)),te.forEachTransform(le,function(ce){ce.signals&&(ne=ce.signals(ae,le,ne)),ce.modifyExpr&&(de=ce.modifyExpr(ae,le,de))}),ne.push({name:re+H.MODIFY,on:[{events:{signal:re+H.TUPLE},update:"modify("+Q.stringValue(le.name+H.STORE)+", "+de+")"}]})});var ie=q(ae);if(ne.length&&ie){var oe=Q.stringValue(ie.getName("cell"));ne.unshift({name:"facet",value:{},on:[{events:Y.selector("mousemove","scope"),update:"isTuple(facet) ? facet : group("+oe+").datum"}]})}return ne},H.assembleTopLevelSignals=function(ae,ne){var ie=!1;return B(ae,function(oe,le){le.topLevelSignals&&(ne=le.topLevelSignals(ae,oe,ne)),te.forEachTransform(oe,function(se){se.topLevelSignals&&(ne=se.topLevelSignals(ae,oe,ne))}),ie=!0}),ie&&(ne.filter(function(oe){return"unit"===oe.name}).length||ne.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),ne},H.assembleUnitSelectionData=function(ae,ne){return B(ae,function(ie){ne.filter(function(oe){return oe.name===ie.name+H.STORE}).length||ne.push({name:ie.name+H.STORE})}),ne},H.assembleUnitSelectionMarks=j,H.assembleLayerSelectionMarks=function(ae,ne){return ae.children.forEach(function(ie){Z.isUnitModel(ie)&&(ne=j(ie,ne))}),ne},H.predicate=function(ae,ne,ie){var oe=[],le=Q.logicalExpr(ne,function(se){var re=Q.varName(se),de=ae.getSelectionComponent(re,se),ce=Q.stringValue(re+H.STORE);if(de.timeUnit){var pe=ie||ae.component.data.raw,ue=de.timeUnit.clone();pe.parent?ue.insertAsParentOf(pe):pe.parent=ue}return"none"!==de.empty&&oe.push(ce),W(de.type).predicate+"("+ce+", datum"+("global"===de.resolve?")":", "+Q.stringValue(de.resolve)+")")});return(oe.length?"!("+oe.map(function(se){return"length(data("+se+"))"}).join(" || ")+") || ":"")+"("+le+")"},H.isRawSelectionDomain=function(ae){return 0<=ae.signal.indexOf(H.SELECTION_DOMAIN)},H.selectionScaleDomain=function(ae,ne){var ie=JSON.parse(ne.signal.replace(H.SELECTION_DOMAIN,"")),oe=Q.varName(ie.selection),le=ae.component.selection&&ae.component.selection[oe];return le?(X.warn("Use \"bind\": \"scales\" to setup a binding for scales and selections within the same view."),{signal:"null"}):(le=ae.getSelectionComponent(oe,ie.selection),ie.encoding||ie.field||(ie.field=le.project[0].field,1<le.project.length&&X.warn("A \"field\" or \"encoding\" must be specified when using a selection as a scale domain. Using \"field\": "+Q.stringValue(ie.field)+".")),{signal:W(le.type).scaleDomain+"("+Q.stringValue(oe+H.STORE)+", "+Q.stringValue(ie.encoding||null)+", "+Q.stringValue(ie.field||null)+("global"===le.resolve?")":", "+Q.stringValue(le.resolve)+")")})},H.unitName=function(ae){var ne=Q.stringValue(ae.name),ie=q(ae);return ie&&(ne+=(ie.facet.row?" + '_' + facet"+Q.accessPath(ie.field("row")):"")+(ie.facet.column?" + '_' + facet"+Q.accessPath(ie.field("column")):"")),ne},H.requiresSelectionId=function(ae){var ne=!1;return B(ae,function(ie){ne=ne||ie.project.some(function(oe){return oe.field===K.SELECTION_ID})}),ne},H.channelSignalName=function(ae,ne,ie){return Q.varName(ae.name+"_"+("visual"===ie?ne:ae.fields[ne]))},H.positionalProjections=function(ae){var ne=null,ie=null,oe=null,le=null;return ae.project.forEach(function(se,re){se.channel===G.X?(ne=se,ie=re):se.channel===G.Y&&(oe=se,le=re)}),{x:ne,xi:ie,y:oe,yi:le}}},{"../../channel":16,"../../log":106,"../../selection":110,"../../util":119,"../model":67,"./interval":78,"./multi":79,"./single":81,"./transforms/transforms":87,tslib:6,"vega-event-selector":10}],81:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../util"),B=U("./multi"),W=U("./selection"),q={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:B.default.signals,topLevelSignals:function(Y,G,X){var K=X.filter(function(J){return J.name===G.name}),Q="data("+j.stringValue(G.name+W.STORE)+")";return K.length?X:X.concat({name:G.name,update:Q+".length && {"+G.project.map(function(J,$){return J.field+": "+(Q+"[0].values")+"["+$+"]"}).join(", ")+"}"})},modifyExpr:function(Y,G){return G.name+W.TUPLE+", "+("global"===G.resolve?"true":"{unit: "+W.unitName(Y)+"}")}};H.default=q},{"../../util":119,"./multi":79,"./selection":80}],82:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../../util"),B=U("../selection"),W=U("./nearest");H.default={has:function(Y){return"single"===Y.type&&"global"===Y.resolve&&Y.bind&&"scales"!==Y.bind},topLevelSignals:function(Y,G,X){var K=G.name,Q=G.project,Z=G.bind,J=W.default.has(G)?"(item().isVoronoi ? datum.datum : datum)":"datum";return Q.forEach(function($){var ee=j.varName(K+"_"+$.field);X.filter(function(te){return te.name===ee}).length||X.unshift({name:ee,value:"",on:[{events:G.events,update:"datum && item().mark.marktype !== 'group' ? "+J+j.accessPath($.field)+" : null"}],bind:Z[$.field]||Z[$.channel]||Z})}),X},signals:function(Y,G,X){var K=G.name,Q=G.project,Z=X.filter(function(ee){return ee.name===K+B.TUPLE})[0],J=Q.map(function(ee){return j.stringValue(ee.field)}).join(", "),$=Q.map(function(ee){return j.varName(K+"_"+ee.field)});return Z.update=$.join(" && ")+" ? {fields: ["+J+"], values: ["+$.join(", ")+"]} : null",delete Z.value,delete Z.on,X}}},{"../../../util":119,"../selection":80,"./nearest":83}],83:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../../log"),B=U("../selection");H.default={has:function(V){return"interval"!==V.type&&V.nearest},marks:function(V,Y,G){var X=B.positionalProjections(Y),K=X.x,Q=X.y,Z=V.mark();if("line"===Z||"area"===Z)return j.warn(j.message.nearestNotSupportForContinuous(Z)),G;var J={name:V.getName("voronoi"),type:"path",from:{data:V.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:!K&&(K||Q)?{expr:"0"}:"datum.x",y:!Q&&(K||Q)?{expr:"0"}:"datum.y",size:[V.getSizeSignalRef("width"),V.getSizeSignalRef("height")]}]},$=0,ee=!1;return G.forEach(function(te,ae){var ne=te.name||"";ne===V.component.mark[0].name?$=ae:0<=ne.indexOf("voronoi")&&(ee=!0)}),ee||G.splice($+1,0,J),G}}},{"../../../log":106,"../selection":80}],84:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../../log"),B=U("../../../util"),W=U("../../data/timeunit");H.default={has:function(Y){return void 0!==Y.fields||void 0!==Y.encodings},parse:function(Y,G,X){var K={},Q={};(G.fields||[]).forEach(function(ee){return K[ee]=null}),(G.encodings||[]).forEach(function(ee){var te=Y.fieldDef(ee);if(!te)j.warn(j.message.cannotProjectOnChannelWithoutField(ee));else if(te.timeUnit){var ae=Y.field(ee);K[ae]=ee,Q[ae]={as:ae,field:te.field,timeUnit:te.timeUnit}}else K[te.field]=ee});var Z=X.project||(X.project=[]);for(var J in K)K.hasOwnProperty(J)&&Z.push({field:J,channel:K[J]});var $=X.fields||(X.fields={});Z.filter(function(ee){return ee.channel}).forEach(function(ee){return $[ee.channel]=ee.field}),B.keys(Q).length&&(X.timeUnit=new W.TimeUnitNode(Q))}}},{"../../../log":106,"../../../util":119,"../../data/timeunit":44}],85:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../../../log"),B=U("../../../scale"),W=U("../../../util"),q=U("../selection");H.default={has:function(G){return"interval"===G.type&&"global"===G.resolve&&G.bind&&"scales"===G.bind},parse:function(G,X,K){var Q=K.scales=[];K.project.forEach(function(Z){var J=Z.channel,$=G.getScaleComponent(J),ee=$?$.get("type"):void 0;$&&B.hasContinuousDomain(ee)&&!B.isBinScale(ee)?($.set("domainRaw",{signal:q.channelSignalName(K,J,"data")},!0),Q.push(J)):j.warn(j.message.SCALE_BINDINGS_CONTINUOUS)})},topLevelSignals:function(G,X,K){if(!G.parent)return K;var Q=X.scales.filter(function(Z){return!K.filter(function(J){return J.name===q.channelSignalName(X,Z,"data")}).length});return K.concat(Q.map(function(Z){return{name:q.channelSignalName(X,Z,"data")}}))},signals:function(G,X,K){return G.parent&&X.scales.forEach(function(Q){var Z=K.filter(function(J){return J.name===q.channelSignalName(X,Q,"data")})[0];Z.push="outer",delete Z.value,delete Z.update}),K}},H.domain=function(Y,G){return"domain("+W.stringValue(Y.scaleName(G))+")"}},{"../../../log":106,"../../../scale":109,"../../../util":119,"../selection":80}],86:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("../selection");H.default={has:function(q){return"multi"===q.type&&q.toggle},signals:function(q,V,Y){return Y.concat({name:V.name+"_toggle",value:!1,on:[{events:V.events,update:V.toggle}]})},modifyExpr:function(q,V){var G=V.name+j.TUPLE,X=V.name+"_toggle";return X+" ? null : "+G+", "+("global"===V.resolve?X+" ? null : true, ":X+" ? null : {unit: "+j.unitName(q)+"}, ")+X+" ? "+G+" : null"}}},{"../selection":80}],87:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("./inputs"),B=U("./nearest"),W=U("./project"),q=U("./scales"),V=U("./toggle"),Y=U("./translate"),G=U("./zoom"),X={project:W.default,toggle:V.default,scales:q.default,translate:Y.default,zoom:G.default,inputs:j.default,nearest:B.default};H.forEachTransform=function(K,Q){for(var Z in X)X[Z].has(K)&&Q(X[Z])}},{"./inputs":82,"./nearest":83,"./project":84,"./scales":85,"./toggle":86,"./translate":88,"./zoom":89}],88:[function(U,z,H){"use strict";function j(Q,Z,J,$,ee){var te=Z.name,ae=Y.default.has(Z),ne=ee.filter(function(ue){return ue.name===V.channelSignalName(Z,J,ae?"data":"visual")})[0],oe=te+X,le=Q.getSizeSignalRef($).signal,se=Q.getScaleComponent(J),re=se.get("type"),de=ae&&J===W.X?"-":"",ce=te+G+".extent_"+J,pe=(ae?"log"===re?"panLog":"pow"===re?"panPow":"panLinear":"panLinear")+"("+ce+", "+(""+de+oe+"."+J+" / "+(ae?""+le:"span("+ce+")"))+(ae&&"pow"===re?", "+(se.get("exponent")||1):"")+")";ne.on.push({events:{signal:oe},update:ae?pe:"clampRange("+pe+", 0, "+le+")"})}Object.defineProperty(H,"__esModule",{value:!0});var B=U("vega-event-selector"),W=U("../../../channel"),q=U("../interval"),V=U("../selection"),Y=U("./scales"),G="_translate_anchor",X="_translate_delta";H.default={has:function(Z){return"interval"===Z.type&&Z.translate},signals:function(Z,J,$){var ee=J.name,te=Y.default.has(J),ae=ee+G,ne=V.positionalProjections(J),ie=ne.x,oe=ne.y,le=B.selector(J.translate,"scope");return te||(le=le.map(function(se){return se.between[0].markname=ee+q.BRUSH,se})),$.push({name:ae,value:{},on:[{events:le.map(function(se){return se.between[0]}),update:"{x: x(unit), y: y(unit)"+(null===ie?"":", extent_x: "+(te?Y.domain(Z,W.X):"slice("+V.channelSignalName(J,"x","visual")+")"))+(null===oe?"":", extent_y: "+(te?Y.domain(Z,W.Y):"slice("+V.channelSignalName(J,"y","visual")+")"))+"}"}]},{name:ee+X,value:{},on:[{events:le,update:"{x: "+ae+".x - x(unit), y: "+ae+".y - y(unit)}"}]}),null!==ie&&j(Z,J,W.X,"width",$),null!==oe&&j(Z,J,W.Y,"height",$),$}}},{"../../../channel":16,"../interval":78,"../selection":80,"./scales":85,"vega-event-selector":10}],89:[function(U,z,H){"use strict";function j(Z,J,$,ee,te){var ae=J.name,ne=G.default.has(J),ie=te.filter(function(pe){return pe.name===Y.channelSignalName(J,$,ne?"data":"visual")})[0],oe=Z.getSizeSignalRef(ee).signal,le=Z.getScaleComponent($),se=le.get("type"),re=ne?G.domain(Z,$):ie.name,de=ae+K,ce=(ne?"log"===se?"zoomLog":"pow"===se?"zoomPow":"zoomLinear":"zoomLinear")+"("+re+", "+(""+ae+X+"."+$)+", "+de+(ne&&"pow"===se?", "+(le.get("exponent")||1):"")+")";ie.on.push({events:{signal:de},update:ne?ce:"clampRange("+ce+", 0, "+oe+")"})}Object.defineProperty(H,"__esModule",{value:!0});var B=U("vega-event-selector"),W=U("../../../channel"),q=U("../../../util"),V=U("../interval"),Y=U("../selection"),G=U("./scales"),X="_zoom_anchor",K="_zoom_delta";H.default={has:function(J){return"interval"===J.type&&J.zoom},signals:function(J,$,ee){var te=$.name,ae=G.default.has($),ie=Y.positionalProjections($),oe=ie.x,le=ie.y,se=q.stringValue(J.scaleName(W.X)),re=q.stringValue(J.scaleName(W.Y)),de=B.selector($.zoom,"scope");return ae||(de=de.map(function(ce){return ce.markname=te+V.BRUSH,ce})),ee.push({name:te+X,on:[{events:de,update:ae?"{"+[se?"x: invert("+se+", x(unit))":"",re?"y: invert("+re+", y(unit))":""].filter(function(ce){return!!ce}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:te+K,on:[{events:de,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==oe&&j(J,$,"x","width",ee),null!==le&&j(J,$,"y","height",ee),ee}}},{"../../../channel":16,"../../../util":119,"../interval":78,"../selection":80,"./scales":85,"vega-event-selector":10}],90:[function(U,z,H){"use strict";function j(Y,G,X,K){return Y.explicit&&G.explicit&&W.warn(W.message.mergeConflictingProperty(X,K,Y.value,G.value)),Y}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("../log"),q=U("../util"),V=function(){function Y(G,X){void 0===G&&(G={}),void 0===X&&(X={}),this.explicit=G,this.implicit=X}return Y.prototype.clone=function(){return new Y(q.duplicate(this.explicit),q.duplicate(this.implicit))},Y.prototype.combine=function(){return B.__assign({},this.explicit,this.implicit)},Y.prototype.get=function(G){return void 0===this.explicit[G]?this.implicit[G]:this.explicit[G]},Y.prototype.getWithExplicit=function(G){return void 0===this.explicit[G]?void 0===this.implicit[G]?{explicit:!1,value:void 0}:{explicit:!1,value:this.implicit[G]}:{explicit:!0,value:this.explicit[G]}},Y.prototype.setWithExplicit=function(G,X){void 0!==X.value&&this.set(G,X.value,X.explicit)},Y.prototype.set=function(G,X,K){return delete this[K?"implicit":"explicit"][G],this[K?"explicit":"implicit"][G]=X,this},Y.prototype.copyKeyFromSplit=function(G,X){void 0===X.explicit[G]?void 0!==X.implicit[G]&&this.set(G,X.implicit[G],!1):this.set(G,X.explicit[G],!0)},Y.prototype.copyKeyFromObject=function(G,X){void 0!==X[G]&&this.set(G,X[G],!0)},Y}();H.Split=V,H.makeExplicit=function(Y){return{explicit:!0,value:Y}},H.makeImplicit=function(Y){return{explicit:!1,value:Y}},H.tieBreakByComparing=function(Y){return function(G,X,K,Q){var Z=Y(G.value,X.value);return 0<Z?G:0>Z?X:j(G,X,K,Q)}},H.defaultTieBreaker=j,H.mergeValuesWithExplicit=function(Y,G,X,K,Q){return void 0===Q&&(Q=j),void 0===Y||void 0===Y.value?G:Y.explicit&&!G.explicit?Y:G.explicit&&!Y.explicit?G:Y.value===G.value?Y:Q(Y,G,X,K)}},{"../log":106,"../util":119,tslib:6}],91:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("../channel"),W=U("../encoding"),q=U("../encoding"),V=U("../fielddef"),Y=U("../mark"),G=U("../stack"),X=U("../util"),K=U("./axis/parse"),Q=U("./data/parse"),Z=U("./layoutsize/assemble"),J=U("./layoutsize/parse"),$=U("./mark/init"),ee=U("./mark/mark"),te=U("./model"),ae=U("./repeater"),ne=U("./selection/selection"),ie=function(oe){function le(se,re,de,ce,pe,ue,me){void 0===ce&&(ce={});var ge=oe.call(this,se,re,de,ue,void 0)||this;ge.fit=me,ge.type="unit",ge.specifiedScales={},ge.specifiedAxes={},ge.specifiedLegends={},ge.selection={},ge.children=[],ge.initSize(j.__assign({},ce,se.width?{width:se.width}:{},se.height?{height:se.height}:{}));var fe=Y.isMarkDef(se.mark)?se.mark.type:se.mark,he=ge.encoding=q.normalizeEncoding(ae.replaceRepeaterInEncoding(se.encoding||{},pe),fe);return ge.markDef=$.normalizeMarkDef(se.mark,he,ue),ge.stack=G.stack(fe,he,ge.config.stack),ge.specifiedScales=ge.initScales(fe,he),ge.encoding=$.initEncoding(ge.markDef,he,ge.stack,ge.config),ge.specifiedAxes=ge.initAxes(he),ge.specifiedLegends=ge.initLegend(he),ge.selection=se.selection,ge}return j.__extends(le,oe),le.prototype.scaleDomain=function(se){var re=this.specifiedScales[se];return re?re.domain:void 0},le.prototype.sort=function(se){return(this.getMapping()[se]||{}).sort},le.prototype.axis=function(se){return this.specifiedAxes[se]},le.prototype.legend=function(se){return this.specifiedLegends[se]},le.prototype.initScales=function(se,re){return B.SCALE_CHANNELS.reduce(function(de,ce){var pe,ue,me=re[ce];return V.isFieldDef(me)?(pe=me,ue=me.scale):V.hasConditionalFieldDef(me)?(pe=me.condition,ue=me.condition.scale):"x"===ce?pe=V.getFieldDef(re.x2):"y"===ce&&(pe=V.getFieldDef(re.y2)),pe&&(de[ce]=ue||{}),de},{})},le.prototype.initAxes=function(se){return[B.X,B.Y].reduce(function(re,de){var ce=se[de];if(V.isFieldDef(ce)||de===B.X&&V.isFieldDef(se.x2)||de===B.Y&&V.isFieldDef(se.y2)){var pe=V.isFieldDef(ce)?ce.axis:null;null!==pe&&!1!==pe&&(re[de]=j.__assign({},pe))}return re},{})},le.prototype.initLegend=function(se){return B.NONPOSITION_SCALE_CHANNELS.reduce(function(re,de){var ce=se[de];if(ce){var pe=V.isFieldDef(ce)?ce.legend:V.hasConditionalFieldDef(ce)?ce.condition.legend:null;null!==pe&&!1!==pe&&(re[de]=j.__assign({},pe))}return re},{})},le.prototype.parseData=function(){this.component.data=Q.parseData(this)},le.prototype.parseLayoutSize=function(){J.parseUnitLayoutSize(this)},le.prototype.parseSelection=function(){this.component.selection=ne.parseUnitSelection(this,this.selection)},le.prototype.parseMarkGroup=function(){this.component.mark=ee.parseMarkGroup(this)},le.prototype.parseAxisAndHeader=function(){this.component.axes=K.parseUnitAxis(this)},le.prototype.assembleSelectionTopLevelSignals=function(se){return ne.assembleTopLevelSignals(this,se)},le.prototype.assembleSelectionSignals=function(){return ne.assembleUnitSelectionSignals(this,[])},le.prototype.assembleSelectionData=function(se){return ne.assembleUnitSelectionData(this,se)},le.prototype.assembleLayout=function(){return null},le.prototype.assembleLayoutSignals=function(){return Z.assembleLayoutSignals(this)},le.prototype.assembleMarks=function(){var se=this.component.mark||[];return this.parent&&te.isLayerModel(this.parent)||(se=ne.assembleUnitSelectionMarks(this,se)),se.map(this.correctDataNames)},le.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},le.prototype.getMapping=function(){return this.encoding},le.prototype.toSpec=function(se,re){var de,ce=X.duplicate(this.encoding);return de={mark:this.markDef,encoding:ce},se||(de.config=X.duplicate(this.config)),re||(de.data=X.duplicate(this.data)),de},le.prototype.mark=function(){return this.markDef.type},le.prototype.channelHasField=function(se){return W.channelHasField(this.encoding,se)},le.prototype.fieldDef=function(se){var re=this.encoding[se];return V.getFieldDef(re)},le}(te.ModelWithField);H.UnitModel=ie},{"../channel":16,"../encoding":99,"../fielddef":101,"../mark":108,"../stack":113,"../util":119,"./axis/parse":21,"./data/parse":41,"./layoutsize/assemble":48,"./layoutsize/parse":49,"./mark/init":57,"./mark/mark":59,"./model":67,"./repeater":69,"./selection/selection":80,tslib:6}],92:[function(U,z,H){"use strict";function j(ee){return!!ee.type}function B(ee){return Y.__assign({},ee,{encoding:X.reduce(ee.encoding,function(te,ae,ne){return-1<$.indexOf(ne)?te[ne]=ae:Z.warn(Z.message.incompatibleChannel(ne,H.BOXPLOT)),te},{})})}function W(ee){var te=ee.mark,ae=ee.encoding;if(Y.__rest(ee,["mark","encoding"]),Q.isFieldDef(ae.x)&&Q.isContinuous(ae.x)){if(Q.isFieldDef(ae.y)&&Q.isContinuous(ae.y)){if(void 0===ae.x.aggregate&&ae.y.aggregate===H.BOXPLOT)return"vertical";if(void 0===ae.y.aggregate&&ae.x.aggregate===H.BOXPLOT)return"horizontal";if(ae.x.aggregate===H.BOXPLOT&&ae.y.aggregate===H.BOXPLOT)throw new Error("Both x and y cannot have aggregate");return j(te)&&te.orient?te.orient:"vertical"}return"horizontal"}if(Q.isFieldDef(ae.y)&&Q.isContinuous(ae.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}function q(ee,te){ee.mark;var ae,ne,ie=ee.encoding;if(Y.__rest(ee,["mark","encoding"]),"vertical"===te?(ne="y",ae=ie.y):(ne="x",ae=ie.x),ae&&ae.aggregate){var oe=ae.aggregate,le=Y.__rest(ae,["aggregate"]);oe!==H.BOXPLOT&&Z.warn("Continuous axis should not have customized aggregation function "+oe),ae=le}return{continuousAxisChannelDef:ae,continuousAxis:ne}}function V(ee,te,ae){var ne=q(ee,te),ie=ne.continuousAxisChannelDef,oe=ne.continuousAxis,le=ee.encoding,re=[{op:"q1",field:ie.field,as:"lowerBox"},{op:"q3",field:ie.field,as:"upperBox"},{op:"median",field:ie.field,as:"midBox"}],de=[];void 0===ae?(re.push({op:"min",field:ie.field,as:"lowerWhisker"}),re.push({op:"max",field:ie.field,as:"upperWhisker"})):de=[{calculate:"datum.upperBox - datum.lowerBox",as:"IQR"},{calculate:"datum.lowerBox - datum.IQR * "+ae,as:"lowerWhisker"},{calculate:"datum.upperBox + datum.IQR * "+ae,as:"upperWhisker"}];var ce=[],pe=[],ue=[],me={};return K.forEach(le,function(ge,fe){if(fe!==oe)if(Q.isFieldDef(ge)){if(ge.aggregate&&ge.aggregate!==H.BOXPLOT)re.push({op:ge.aggregate,field:ge.field,as:Q.field(ge)});else if(void 0===ge.aggregate){var he=Q.field(ge),ye=ge.bin;if(ye){var _e=ge.field;pe.push({bin:ye,field:_e,as:he})}else if(ge.timeUnit){var be=ge.timeUnit,Se=ge.field;ue.push({timeUnit:be,field:Se,as:he})}ce.push(he)}me[fe]={field:Q.field(ge),type:ge.type}}else me[fe]=le[fe]}),{transform:[].concat(pe,ue,[{aggregate:re,groupby:ce}],de),continuousAxisChannelDef:ie,continuousAxis:oe,encodingWithoutContinuousAxis:me}}Object.defineProperty(H,"__esModule",{value:!0});var Y=U("tslib"),G=U("vega-util"),X=U("../encoding"),K=U("./../encoding"),Q=U("./../fielddef"),Z=U("./../log"),J=U("./common");H.BOXPLOT="box-plot",H.isBoxPlotDef=j,H.BOXPLOT_STYLES=["boxWhisker","box","boxMid"],H.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:["size","color"],boxWhisker:["color"],boxMid:["color"]};var $=["x","y","color","detail","opacity","size"];H.filterUnsupportedChannels=B,H.normalizeBoxPlot=function(ee,te){var ae=(ee=B(ee)).mark,ne=(ee.encoding,ee.selection),ie=Y.__rest(ee,["mark","encoding","selection"]),oe;j(ae)&&ae.extent&&G.isNumber(ae.extent)&&(oe=ae.extent);var le=V(ee,W(ee),oe),se=le.transform,re=le.continuousAxisChannelDef,de=le.continuousAxis,ce=le.encodingWithoutContinuousAxis,pe=(ce.color,ce.size),ue=Y.__rest(ce,["color","size"]),me=pe?{size:pe}:J.getMarkSpecificConfigMixins(te.box,"size"),ge={};return re.scale&&(ge.scale=re.scale),re.axis&&(ge.axis=re.axis),Y.__assign({},ie,{transform:se,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:Y.__assign((fe={},fe[de]=Y.__assign({field:"lowerWhisker",type:re.type},ge),fe[de+"2"]={field:"lowerBox",type:re.type},fe),ue,J.getMarkSpecificConfigMixins(te.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:Y.__assign((he={},he[de]={field:"upperBox",type:re.type},he[de+"2"]={field:"upperWhisker",type:re.type},he),ue,J.getMarkSpecificConfigMixins(te.boxWhisker,"color"))},Y.__assign({},ne?{selection:ne}:{},{mark:{type:"bar",style:"box"},encoding:Y.__assign((ye={},ye[de]={field:"lowerBox",type:re.type},ye[de+"2"]={field:"upperBox",type:re.type},ye),ce,ce.color?{}:J.getMarkSpecificConfigMixins(te.box,"color"),me)}),{mark:{type:"tick",style:"boxMid"},encoding:Y.__assign((_e={},_e[de]={field:"midBox",type:re.type},_e),ue,J.getMarkSpecificConfigMixins(te.boxMid,"color"),me)}]});var fe,he,ye,_e}},{"../encoding":99,"./../encoding":99,"./../fielddef":101,"./../log":106,"./common":93,tslib:6,"vega-util":11}],93:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.getMarkSpecificConfigMixins=function(j,B){var W=j[B];return void 0===W?{}:(q={},q[B]={value:W},q);var q}},{}],94:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib");H.ERRORBAR="error-bar",H.normalizeErrorBar=function(B){B.mark,B.selection;var W=B.encoding,q=j.__rest(B,["mark","selection","encoding"]),V=(W.size,j.__rest(W,["size"])),Y=(W.x2,W.y2,j.__rest(W,["x2","y2"])),G=(Y.x,Y.y,j.__rest(Y,["x","y"]));if(!W.x2&&!W.y2)throw new Error("Neither x2 or y2 provided");return j.__assign({},q,{layer:[{mark:"rule",encoding:V},{mark:"tick",encoding:Y},{mark:"tick",encoding:W.x2?j.__assign({x:W.x2,y:W.y},G):j.__assign({x:W.x,y:W.y2},G)}]})}},{tslib:6}],95:[function(U,z,H){"use strict";function j(G,X){Y[G]=X}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("./../mark"),q=U("./boxplot"),V=U("./errorbar"),Y={};H.add=j,H.remove=function(G){delete Y[G]},H.COMPOSITE_MARK_STYLES=q.BOXPLOT_STYLES,H.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=B.__assign({},q.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),j(q.BOXPLOT,q.normalizeBoxPlot),j(V.ERRORBAR,V.normalizeErrorBar),H.normalize=function(G,X){var K=W.isMarkDef(G.mark)?G.mark.type:G.mark,Q=Y[K];if(Q)return Q(G,X);throw new Error("Unregistered composite mark "+K)}},{"./../mark":108,"./boxplot":92,"./errorbar":94,tslib:6}],96:[function(U,z,H){"use strict";function j(ae,ne,ie){var oe="title"===ne?Z.extractTitleConfig(ae.title).mark:ae[ne];"view"===ne&&(ie="cell");var le=B.__assign({},oe,ae.style[ne]);0<J.keys(le).length&&(ae.style[ie||ne]=le),delete ae[ne]}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("./compositemark"),q=U("./compositemark/index"),V=U("./guide"),Y=U("./legend"),G=U("./mark"),X=U("./mark"),K=U("./scale"),Q=U("./selection"),Z=U("./title"),J=U("./util");H.defaultViewConfig={width:200,height:200},H.defaultConfig={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:H.defaultViewConfig,mark:X.defaultMarkConfig,area:{},bar:X.defaultBarConfig,circle:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:X.defaultTickConfig,box:{size:14},boxWhisker:{},boxMid:{color:"white"},scale:K.defaultScaleConfig,axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:Y.defaultLegendConfig,selection:Q.defaultConfig,style:{},title:{}},H.initConfig=function(ae){return J.mergeDeep(J.duplicate(H.defaultConfig),ae)};var $=["view"].concat(G.PRIMITIVE_MARKS,W.COMPOSITE_MARK_STYLES),ee=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],te=B.__assign({view:["width","height"]},G.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX,q.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);H.stripAndRedirectConfig=function(ae){ae=J.duplicate(ae);for(var ne=0,ie=ee;ne<ie.length;ne++)delete ae[be=ie[ne]];if(ae.axis)for(var oe=0,le=V.VL_ONLY_GUIDE_CONFIG;oe<le.length;oe++)be=le[oe],delete ae.axis[be];if(ae.legend)for(var se=0,re=V.VL_ONLY_GUIDE_CONFIG;se<re.length;se++)be=re[se],delete ae.legend[be];if(ae.mark)for(var de=0,ce=G.VL_ONLY_MARK_CONFIG_PROPERTIES;de<ce.length;de++)be=ce[de],delete ae.mark[be];for(var pe=0,ue=$;pe<ue.length;pe++){for(var me=ue[pe],ge=0,fe=G.VL_ONLY_MARK_CONFIG_PROPERTIES;ge<fe.length;ge++)be=fe[ge],delete ae[me][be];var he=te[me];if(he)for(var ye=0,_e=he;ye<_e.length;ye++)be=_e[ye],delete ae[me][be];j(ae,me)}for(var be in j(ae,"title","group-title"),ae)J.isObject(ae[be])&&0===J.keys(ae[be]).length&&delete ae[be];return 0<J.keys(ae).length?ae:void 0}},{"./compositemark":95,"./compositemark/index":95,"./guide":103,"./legend":105,"./mark":108,"./scale":109,"./selection":110,"./title":115,"./util":119,tslib:6}],97:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.isUrlData=function(j){return!!j.url},H.isInlineData=function(j){return!!j.values},H.isNamedData=function(j){return!!j.name},H.MAIN="main",H.RAW="raw"},{}],98:[function(U,z,H){"use strict";function j(G){if(V.isNumber(G))return 4<G&&q.warn(q.message.invalidTimeUnit("quarter",G)),G-1+"";throw new Error(q.message.invalidTimeUnit("quarter",G))}function B(G){if(V.isNumber(G))return G-1+"";var X=G.toLowerCase(),K=H.MONTHS.indexOf(X);if(-1!==K)return K+"";var Q=X.substr(0,3),Z=H.SHORT_MONTHS.indexOf(Q);if(-1!==Z)return Z+"";throw new Error(q.message.invalidTimeUnit("month",G))}function W(G){if(V.isNumber(G))return G%7+"";var X=G.toLowerCase(),K=H.DAYS.indexOf(X);if(-1!==K)return K+"";var Q=X.substr(0,3),Z=H.SHORT_DAYS.indexOf(Q);if(-1!==Z)return Z+"";throw new Error(q.message.invalidTimeUnit("day",G))}Object.defineProperty(H,"__esModule",{value:!0});var q=U("./log"),V=U("./util");H.isDateTime=function(G){return G&&(G.year||G.quarter||G.month||G.date||G.day||G.hours||G.minutes||G.seconds||G.milliseconds)},H.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],H.SHORT_MONTHS=H.MONTHS.map(function(G){return G.substr(0,3)}),H.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],H.SHORT_DAYS=H.DAYS.map(function(G){return G.substr(0,3)}),H.dateTimeExpr=function(G,X){void 0===X&&(X=!1);var K=[];if(X&&void 0!==G.day&&1<V.keys(G).length&&(q.warn(q.message.droppedDay(G)),delete(G=V.duplicate(G)).day),void 0===G.year?void 0===G.day?K.push(0):K.push(2006):K.push(G.year),void 0!==G.month){var Q=X?B(G.month):G.month;K.push(Q)}else if(void 0!==G.quarter){var Z=X?j(G.quarter):G.quarter;K.push(Z+"*3")}else K.push(0);if(void 0!==G.date)K.push(G.date);else if(void 0!==G.day){var J=X?W(G.day):G.day;K.push(J+"+1")}else K.push(1);for(var te,$=0,ee=["hours","minutes","seconds","milliseconds"];$<ee.length;$++)te=ee[$],void 0===G[te]?K.push(0):K.push(G[te]);return G.utc?"utc("+K.join(", ")+")":"datetime("+K.join(", ")+")"}},{"./log":106,"./util":119}],99:[function(U,z,H){"use strict";function j(Y,G){var X=Y&&Y[G];return!!X&&(V.isArray(X)?V.some(X,function(K){return!!K.field}):W.isFieldDef(X)||W.hasConditionalFieldDef(X))}Object.defineProperty(H,"__esModule",{value:!0});var B=U("./channel"),W=U("./fielddef"),q=U("./log"),V=U("./util");H.channelHasField=j,H.isAggregate=function(Y){return V.some(B.CHANNELS,function(G){if(j(Y,G)){var X=Y[G];if(V.isArray(X))return V.some(X,function(Q){return!!Q.aggregate});var K=W.getFieldDef(X);return K&&!!K.aggregate}return!1})},H.normalizeEncoding=function(Y,G){return V.keys(Y).reduce(function(X,K){if(!B.supportMark(K,G))return q.warn(q.message.incompatibleChannel(K,G)),X;if("size"===K&&"line"===G){var Q=W.getFieldDef(Y[K]);if(Q&&Q.aggregate)return q.warn(q.message.incompatibleChannel(K,G,"when the field is aggregated.")),X}if("detail"===K||"order"===K)(Z=Y[K])&&(X[K]=(V.isArray(Z)?Z:[Z]).reduce(function(J,$){return W.isFieldDef($)?J.push(W.normalizeFieldDef($,K)):q.warn(q.message.emptyFieldDef($,K)),J},[]));else{var Z=Y[K];if(!W.isFieldDef(Z)&&!W.isValueDef(Z)&&!W.isConditionalDef(Z))return q.warn(q.message.emptyFieldDef(Z,K)),X;X[K]=W.normalize(Z,K)}return X},{})},H.isRanged=function(Y){return Y&&(!!Y.x&&!!Y.x2||!!Y.y&&!!Y.y2)},H.fieldDefs=function(Y){var G=[];return B.CHANNELS.forEach(function(X){if(j(Y,X)){var K=Y[X];(V.isArray(K)?K:[K]).forEach(function(Q){W.isFieldDef(Q)?G.push(Q):W.hasConditionalFieldDef(Q)&&G.push(Q.condition)})}}),G},H.forEach=function(Y,G,X){Y&&V.keys(Y).forEach(function(K){V.isArray(Y[K])?Y[K].forEach(function(Q){G.call(X,Q,K)}):G.call(X,Y[K],K)})},H.reduce=function(Y,G,X,K){return Y?V.keys(Y).reduce(function(Q,Z){return V.isArray(Y[Z])?Y[Z].reduce(function(J,$){return G.call(K,J,$,Z)},Q):G.call(K,Q,Y[Z],Z)},X):X}},{"./channel":16,"./fielddef":101,"./log":106,"./util":119}],100:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0})},{}],101:[function(U,z,H){"use strict";function j(ce){return!!ce&&!!ce.condition&&!se.isArray(ce.condition)&&B(ce.condition)}function B(ce){return ce&&(ce.field||"count"===ce.aggregate)}function W(ce){return ce&&"value"in ce&&void 0!==ce.value}function q(ce){switch(ce.type){case"nominal":case"ordinal":return!0;case"quantitative":return!!ce.bin;case"temporal":return!1;}throw new Error(ie.message.invalidFieldType(ce.type))}function V(ce){return!q(ce)}function Y(ce){return"count"===ce.aggregate}function G(ce,pe){var ue=ce.field,me=ce.bin,ge=ce.timeUnit,fe=ce.aggregate;return"count"===fe?pe.countTitle:me?ue+" (binned)":ge?ue+" ("+oe.getTimeUnitParts(ge).join("-")+")":fe?se.titlecase(fe)+" of "+ue:ue}function X(ce){var ue=ce.aggregate||ce.timeUnit||ce.bin&&"bin";return ue?ue.toUpperCase()+"("+ce.field+")":ce.field}function K(ce){re=ce}function Q(ce,pe){if(ce.timeUnit)return"temporal";if(ce.bin)return"quantitative";switch(ne.rangeType(pe)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative";}}function Z(ce,pe){if(ce.aggregate&&!te.isAggregateOp(ce.aggregate)){ce.aggregate;var ue=ee.__rest(ce,["aggregate"]);ie.warn(ie.message.invalidAggregate(ce.aggregate)),ce=ue}if(ce.timeUnit&&(ce=ee.__assign({},ce,{timeUnit:oe.normalizeTimeUnit(ce.timeUnit)})),ce.bin&&(ce=ee.__assign({},ce,{bin:J(ce.bin,pe)})),ce.type){var me=le.getFullName(ce.type);ce.type!==me&&(ce=ee.__assign({},ce,{type:me})),"quantitative"!==ce.type&&te.isCountingAggregateOp(ce.aggregate)&&(ie.warn(ie.message.invalidFieldTypeForCountAggregate(ce.type,ce.aggregate)),ce=ee.__assign({},ce,{type:"quantitative"}))}else{var ge=Q(ce,pe);ie.warn(ie.message.emptyOrInvalidFieldType(ce.type,pe,ge)),ce=ee.__assign({},ce,{type:ge})}var fe=$(ce,pe),he=fe.compatible,ye=fe.warning;return he||ie.warn(ye),ce}function J(ce,pe){return se.isBoolean(ce)?{maxbins:ae.autoMaxBins(pe)}:ce.maxbins||ce.step?ce:ee.__assign({},ce,{maxbins:ae.autoMaxBins(pe)})}function $(ce,pe){switch(pe){case"row":case"column":return V(ce)&&!ce.timeUnit?{compatible:!1,warning:ie.message.facetChannelShouldBeDiscrete(pe)}:de;case"x":case"y":case"color":case"text":case"detail":case"tooltip":return de;case"opacity":case"size":case"x2":case"y2":return q(ce)&&!ce.bin?{compatible:!1,warning:"Channel "+pe+" should not be used with discrete field."}:de;case"shape":return"nominal"===ce.type?de:{compatible:!1,warning:"Shape channel should be used with nominal data only"};case"order":return"nominal"===ce.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:de;}throw new Error("channelCompatability not implemented for channel "+pe)}Object.defineProperty(H,"__esModule",{value:!0});var ee=U("tslib"),te=U("./aggregate"),ae=U("./bin"),ne=U("./channel"),ie=U("./log"),oe=U("./timeunit"),le=U("./type"),se=U("./util");H.isRepeatRef=function(ce){return ce&&!se.isString(ce)&&"repeat"in ce},H.isConditionalDef=function(ce){return!!ce&&!!ce.condition},H.hasConditionalFieldDef=j,H.hasConditionalValueDef=function(ce){return!!ce&&!!ce.condition&&(se.isArray(ce.condition)||W(ce.condition))},H.isFieldDef=B,H.isStringFieldDef=function(ce){return B(ce)&&se.isString(ce.field)},H.isValueDef=W,H.isScaleFieldDef=function(ce){return ce&&(ce.scale||ce.sort)},H.field=function(ce,pe){void 0===pe&&(pe={});var ue=ce.field,me=pe.prefix,ge=pe.suffix;if(Y(ce))ue="count_*";else{var fe;pe.nofn||(ce.bin?(fe=ae.binToString(ce.bin),ge=pe.binSuffix||""):ce.aggregate?fe=(pe.aggregate||ce.aggregate)+"":ce.timeUnit&&(fe=ce.timeUnit+"")),fe&&(ue=fe+"_"+ue)}return ge&&(ue=ue+"_"+ge),me&&(ue=me+"_"+ue),pe.expr&&(ue=""+pe.expr+se.accessPath(ue)),ue},H.isDiscrete=q,H.isContinuous=V,H.isCount=Y,H.verbalTitleFormatter=G,H.functionalTitleFormatter=X,H.defaultTitleFormatter=function(ce,pe){switch(pe.fieldTitle){case"plain":return ce.field;case"functional":return X(ce);default:return G(ce,pe);}};var re=H.defaultTitleFormatter;H.setTitleFormatter=K,H.resetTitleFormatter=function(){K(H.defaultTitleFormatter)},H.title=function(ce,pe){return re(ce,pe)},H.defaultType=Q,H.getFieldDef=function(ce){return B(ce)?ce:j(ce)?ce.condition:void 0},H.normalize=function(ce,pe){if(se.isString(ce)||se.isNumber(ce)||se.isBoolean(ce)){var ue=se.isString(ce)?"string":se.isNumber(ce)?"number":"boolean";return ie.warn(ie.message.primitiveChannelDef(pe,ue,ce)),{value:ce}}return B(ce)?Z(ce,pe):j(ce)?ee.__assign({},ce,{condition:Z(ce.condition,pe)}):ce},H.normalizeFieldDef=Z,H.normalizeBin=J;var de={compatible:!0};H.channelCompatibility=$,H.isNumberFieldDef=function(ce){return"quantitative"===ce.type||!!ce.bin},H.isTimeFieldDef=function(ce){return"temporal"===ce.type||!!ce.timeUnit}},{"./aggregate":13,"./bin":15,"./channel":16,"./log":106,"./timeunit":114,"./type":118,"./util":119,tslib:6}],102:[function(U,z,H){"use strict";function j(ee){return ee&&ee.selection}function B(ee){return ee&&!!ee.field&&void 0!==ee.equal}function W(ee){return!!(ee&&ee.field&&$.isArray(ee.range)&&2===ee.range.length)}function q(ee){return ee&&!!ee.field&&($.isArray(ee.oneOf)||$.isArray(ee.in))}function V(ee){return q(ee)||B(ee)||W(ee)}function Y(ee,te){void 0===te&&(te=!0);var ae=ee.timeUnit?"time("+J.fieldExpr(ee.timeUnit,ee.field)+")":Z.field(ee,{expr:"datum"});if(B(ee))return ae+"==="+G(ee.equal,ee.timeUnit);if(q(ee))return"indexof(["+(ee.oneOf||ee.in).map(function(le){return G(le,ee.timeUnit)}).join(",")+"], "+ae+") !== -1";if(W(ee)){var ne=ee.range[0],ie=ee.range[1];if(null!==ne&&null!==ie&&te)return"inrange("+ae+", ["+G(ne,ee.timeUnit)+", "+G(ie,ee.timeUnit)+"])";var oe=[];return null!==ne&&oe.push(ae+" >= "+G(ne,ee.timeUnit)),null!==ie&&oe.push(ae+" <= "+G(ie,ee.timeUnit)),0<oe.length?oe.join(" && "):"true"}throw new Error("Invalid field filter: "+JSON.stringify(ee))}function G(ee,te){if(Q.isDateTime(ee))return"time("+(ne=Q.dateTimeExpr(ee,!0))+")";if(J.isLocalSingleTimeUnit(te)){var ae={};ae[te]=ee;var ne=Q.dateTimeExpr(ae,!0);return"time("+ne+")"}return J.isUtcSingleTimeUnit(te)?G(ee,J.getLocalTimeUnit(te)):JSON.stringify(ee)}Object.defineProperty(H,"__esModule",{value:!0});var X=U("tslib"),K=U("./compile/selection/selection"),Q=U("./datetime"),Z=U("./fielddef"),J=U("./timeunit"),$=U("./util");H.isSelectionFilter=j,H.isEqualFilter=B,H.isRangeFilter=W,H.isOneOfFilter=q,H.isFieldFilter=V,H.expression=function(ee,te,ae){return $.logicalExpr(te,function(ne){return $.isString(ne)?ne:j(ne)?K.predicate(ee,ne.selection,ae):Y(ne)})},H.fieldFilterExpression=Y,H.normalizeFilter=function(ee){return V(ee)&&ee.timeUnit?X.__assign({},ee,{timeUnit:J.normalizeTimeUnit(ee.timeUnit)}):ee}},{"./compile/selection/selection":80,"./datetime":98,"./fielddef":101,"./timeunit":114,"./util":119,tslib:6}],103:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.VL_ONLY_GUIDE_CONFIG=["shortTimeLabels"]},{}],104:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.axis=U("./axis"),H.aggregate=U("./aggregate"),H.bin=U("./bin"),H.channel=U("./channel"),H.compositeMark=U("./compositemark");var j=U("./compile/compile");H.compile=j.compile,H.config=U("./config"),H.data=U("./data"),H.datetime=U("./datetime"),H.encoding=U("./encoding"),H.facet=U("./facet"),H.fieldDef=U("./fielddef"),H.legend=U("./legend"),H.mark=U("./mark"),H.scale=U("./scale"),H.sort=U("./sort"),H.spec=U("./spec"),H.stack=U("./stack"),H.timeUnit=U("./timeunit"),H.transform=U("./transform"),H.type=U("./type"),H.util=U("./util"),H.validate=U("./validate"),H.version=U("../package.json").version},{"../package.json":12,"./aggregate":13,"./axis":14,"./bin":15,"./channel":16,"./compile/compile":26,"./compositemark":95,"./config":96,"./data":97,"./datetime":98,"./encoding":99,"./facet":100,"./fielddef":101,"./legend":105,"./mark":108,"./scale":109,"./sort":111,"./spec":112,"./stack":113,"./timeunit":114,"./transform":117,"./type":118,"./util":119,"./validate":120}],105:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib"),B=U("./util");H.defaultLegendConfig={};var W={entryPadding:1,format:1,offset:1,orient:1,padding:1,tickCount:1,title:1,type:1,values:1,zindex:1},q=j.__assign({},W,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1});H.LEGEND_PROPERTIES=B.flagKeys(W),H.VG_LEGEND_PROPERTIES=B.flagKeys(q)},{"./util":119,tslib:6}],106:[function(U,z,H){"use strict";function j(){return q=W}Object.defineProperty(H,"__esModule",{value:!0});var B=U("vega-util"),W=B.logger(B.Warn),q=W,V=function(){function Y(){this.warns=[],this.infos=[],this.debugs=[]}return Y.prototype.level=function(){return this},Y.prototype.warn=function(){for(var G=[],X=0;X<arguments.length;X++)G[X]=arguments[X];return(K=this.warns).push.apply(K,G),this;var K},Y.prototype.info=function(){for(var G=[],X=0;X<arguments.length;X++)G[X]=arguments[X];return(K=this.infos).push.apply(K,G),this;var K},Y.prototype.debug=function(){for(var G=[],X=0;X<arguments.length;X++)G[X]=arguments[X];return(K=this.debugs).push.apply(K,G),this;var K},Y}();H.LocalLogger=V,H.wrap=function(Y){return function(){var G=q=new V;Y(G),j()}},H.set=function(Y){return q=Y},H.reset=j,H.warn=function(){for(var Y=[],G=0;G<arguments.length;G++)Y[G]=arguments[G];q.warn.apply(q,arguments)},H.info=function(){for(var Y=[],G=0;G<arguments.length;G++)Y[G]=arguments[G];q.info.apply(q,arguments)},H.debug=function(){for(var Y=[],G=0;G<arguments.length;G++)Y[G]=arguments[G];q.debug.apply(q,arguments)},!function(Y){Y.INVALID_SPEC="Invalid spec",Y.FIT_NON_SINGLE="Autosize \"fit\" only works for single views and layered views.",Y.CANNOT_FIX_RANGE_STEP_WITH_FIT="Cannot use a fixed value of \"rangeStep\" when \"autosize\" is \"fit\".",Y.cannotProjectOnChannelWithoutField=function(G){return"Cannot project a selection on encoding channel \""+G+"\", which has no field."},Y.nearestNotSupportForContinuous=function(G){return"The \"nearest\" transform is not supported for "+G+" marks."},Y.selectionNotFound=function(G){return"Cannot find a selection named \""+G+"\""},Y.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Y.noSuchRepeatedValue=function(G){return"Unknown repeated value \""+G+"\"."},Y.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",Y.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",Y.cannotSetTitleAnchor=function(G){return"Cannot set title \"anchor\" for a "+G+" spec"},Y.unrecognizedParse=function(G){return"Unrecognized parse \""+G+"\"."},Y.differentParse=function(G,X,K){return"An ancestor parsed field \""+G+"\" as "+K+" but a child wants to parse the field as "+X+"."},Y.invalidTransformIgnored=function(G){return"Ignoring an invalid transform: "+JSON.stringify(G)+"."},Y.NO_FIELDS_NEEDS_AS="If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the the data from the secondary source.",Y.primitiveChannelDef=function(G,X,K){return"Channel "+G+" is a "+X+". Converted to {value: "+K+"}."},Y.invalidFieldType=function(G){return"Invalid field type \""+G+"\""},Y.invalidFieldTypeForCountAggregate=function(G,X){return"Invalid field type \""+G+"\" for aggregate: \""+X+"\", using \"quantitative\" instead."},Y.invalidAggregate=function(G){return"Invalid aggregation operator \""+G+"\""},Y.emptyOrInvalidFieldType=function(G,X,K){return"Invalid field type \""+G+"\" for channel \""+X+"\", using \""+K+"\" instead."},Y.emptyFieldDef=function(G,X){return"Dropping "+JSON.stringify(G)+" from channel \""+X+"\" since it does not contain data field or value."},Y.incompatibleChannel=function(G,X,K){return G+" dropped as it is incompatible with \""+X+"\""+(K?" when "+K:"")+"."},Y.facetChannelShouldBeDiscrete=function(G){return G+" encoding should be discrete (ordinal / nominal / binned)."},Y.discreteChannelCannotEncode=function(G,X){return"Using discrete channel \""+G+"\" to encode \""+X+"\" field can be misleading as it does not encode "+("ordinal"===X?"order":"magnitude")+"."},Y.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",Y.unclearOrientContinuous=function(G){return"Cannot clearly determine orientation for \""+G+"\" since both x and y channel encode continous fields. In this case, we use vertical by default"},Y.unclearOrientDiscreteOrEmpty=function(G){return"Cannot clearly determine orientation for \""+G+"\" since both x and y channel encode discrete or empty fields."},Y.orientOverridden=function(G,X){return"Specified orient \""+G+"\" overridden with \""+X+"\""},Y.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",Y.cannotUseScalePropertyWithNonColor=function(G){return"Cannot use the scale property \""+G+"\" with non-color channel."},Y.unaggregateDomainHasNoEffectForRawField=function(G){return"Using unaggregated domain with raw field has no effect ("+JSON.stringify(G)+")."},Y.unaggregateDomainWithNonSharedDomainOp=function(G){return"Unaggregated domain not applicable for \""+G+"\" since it produces values outside the origin domain of the source data."},Y.unaggregatedDomainWithLogScale=function(G){return"Unaggregated domain is currently unsupported for log scale ("+JSON.stringify(G)+")."},Y.cannotUseSizeFieldWithBandSize=function(G){return"Using size field when "+G+"-channel has a band scale is not supported."},Y.cannotApplySizeToNonOrientedMark=function(G){return"Cannot apply size to non-oriented mark \""+G+"\"."},Y.rangeStepDropped=function(G){return"rangeStep for \""+G+"\" is dropped as top-level "+("x"===G?"width":"height")+" is provided."},Y.scaleTypeNotWorkWithChannel=function(G,X,K){return"Channel \""+G+"\" does not work with \""+X+"\" scale. We are using \""+K+"\" scale instead."},Y.scaleTypeNotWorkWithFieldDef=function(G,X){return"FieldDef does not work with \""+G+"\" scale. We are using \""+X+"\" scale instead."},Y.scalePropertyNotWorkWithScaleType=function(G,X,K){return K+"-scale's \""+X+"\" is dropped as it does not work with "+G+" scale."},Y.scaleTypeNotWorkWithMark=function(G,X){return"Scale type \""+X+"\" does not work with mark \""+G+"\"."},Y.mergeConflictingProperty=function(G,X,K,Q){return"Conflicting "+X+" property \""+G+"\" (\""+K+"\" and \""+Q+"\").  Using \""+K+"\"."},Y.independentScaleMeansIndependentGuide=function(G){return"Setting the scale to be independent for \""+G+"\" means we also have to set the guide (axis or legend) to be independent."},Y.conflictedDomain=function(G){return"Cannot set "+G+"-scale's \"domain\" as it is binned. Please use \"bin\"'s \"extent\" instead."},Y.domainSortDropped=function(G){return"Dropping sort property \""+JSON.stringify(G)+"\" as unioned domains only support boolean or op 'count'."},Y.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",Y.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Y.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",Y.cannotStackRangedMark=function(G){return"Cannot stack \""+G+"\" if there is already \""+G+"2\""},Y.cannotStackNonLinearScale=function(G){return"Cannot stack non-linear scale ("+G+")"},Y.stackNonSummativeAggregate=function(G){return"Stacking is applied even though the aggregate function is non-summative (\""+G+"\")"},Y.invalidTimeUnit=function(G,X){return"Invalid "+G+": \""+X+"\""},Y.dayReplacedWithDate=function(G){return"Time unit \""+G+"\" is not supported. We are replacing it with "+G.replace("day","date")+"."},Y.droppedDay=function(G){return"Dropping day from datetime "+JSON.stringify(G)+" as day cannot be combined with other units."}}(H.message||(H.message={}))},{"vega-util":11}],107:[function(U,z,H){"use strict";function j(Y){return!!Y.or}function B(Y){return!!Y.and}function W(Y){return!!Y.not}function q(Y,G){if(W(Y))q(Y.not,G);else if(B(Y))for(var X=0,K=Y.and;X<K.length;X++)q(J=K[X],G);else if(j(Y))for(var J,Q=0,Z=Y.or;Q<Z.length;Q++)J=Z[Q],q(J,G);else G(Y)}function V(Y,G){return W(Y)?{not:V(Y.not,G)}:B(Y)?{and:Y.and.map(function(X){return V(X,G)})}:j(Y)?{or:Y.or.map(function(X){return V(X,G)})}:G(Y)}Object.defineProperty(H,"__esModule",{value:!0}),H.isLogicalOr=j,H.isLogicalAnd=B,H.isLogicalNot=W,H.forEachLeave=q,H.normalizeLogicalOperand=V},{}],108:[function(U,z,H){"use strict";function j(Y){return Y.type}Object.defineProperty(H,"__esModule",{value:!0});var B,W=U("./util");!function(Y){Y.AREA="area",Y.BAR="bar",Y.LINE="line",Y.POINT="point",Y.RECT="rect",Y.RULE="rule",Y.TEXT="text",Y.TICK="tick",Y.CIRCLE="circle",Y.SQUARE="square"}(B=H.Mark||(H.Mark={})),H.AREA=B.AREA,H.BAR=B.BAR,H.LINE=B.LINE,H.POINT=B.POINT,H.TEXT=B.TEXT,H.TICK=B.TICK,H.RECT=B.RECT,H.RULE=B.RULE,H.CIRCLE=B.CIRCLE,H.SQUARE=B.SQUARE;var q={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,rule:1,circle:1,square:1};H.isMark=function(Y){return!!q[Y]},H.PRIMITIVE_MARKS=W.flagKeys(q),H.isMarkDef=j;var V=W.toSet(H.PRIMITIVE_MARKS);H.isPrimitiveMark=function(Y){return(j(Y)?Y.type:Y)in V},H.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],H.FILL_CONFIG=["fill","fillOpacity"],H.FILL_STROKE_CONFIG=[].concat(H.STROKE_CONFIG,H.FILL_CONFIG),H.VL_ONLY_MARK_CONFIG_PROPERTIES=["filled","color"],H.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:["binSpacing","continuousBandSize","discreteBandSize"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},H.defaultMarkConfig={color:"#4c78a8"},H.defaultBarConfig={binSpacing:1,continuousBandSize:5},H.defaultTickConfig={thickness:1}},{"./util":119}],109:[function(U,z,H){"use strict";function j(te){return te in Q}function B(te){return te in K}Object.defineProperty(H,"__esModule",{value:!0});var W=U("tslib"),q=U("./channel"),V=U("./log"),Y=U("./util");!function(te){te.LINEAR="linear",te.BIN_LINEAR="bin-linear",te.LOG="log",te.POW="pow",te.SQRT="sqrt",te.TIME="time",te.UTC="utc",te.SEQUENTIAL="sequential",te.QUANTILE="quantile",te.QUANTIZE="quantize",te.THRESHOLD="threshold",te.ORDINAL="ordinal",te.BIN_ORDINAL="bin-ordinal",te.POINT="point",te.BAND="band"}(H.ScaleType||(H.ScaleType={}));var G={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"};H.SCALE_TYPES=Y.keys(G),H.scaleCompatible=function(te,ae){var ne=G[te],ie=G[ae];return ne===ie||"ordinal-position"===ne&&"time"===ie||"ordinal-position"===ie&&"time"===ne};var X={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0};H.scaleTypePrecedence=function(te){return X[te]},H.CONTINUOUS_TO_CONTINUOUS_SCALES=["linear","bin-linear","log","pow","sqrt","time","utc"];var K=Y.toSet(H.CONTINUOUS_TO_CONTINUOUS_SCALES);H.CONTINUOUS_DOMAIN_SCALES=H.CONTINUOUS_TO_CONTINUOUS_SCALES.concat(["sequential"]);var Q=Y.toSet(H.CONTINUOUS_DOMAIN_SCALES);H.DISCRETE_DOMAIN_SCALES=["ordinal","bin-ordinal","point","band"];var Z=Y.toSet(H.DISCRETE_DOMAIN_SCALES),J=Y.toSet(["bin-linear","bin-ordinal"]);H.TIME_SCALE_TYPES=["time","utc"],H.hasDiscreteDomain=function(te){return te in Z},H.isBinScale=function(te){return te in J},H.hasContinuousDomain=j,H.isContinuousToContinuous=B,H.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},H.isExtendedScheme=function(te){return te&&!!te.name},H.isSelectionDomain=function(te){return te&&te.selection};var $={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};H.SCALE_PROPERTIES=Y.flagKeys($);var ee=W.__rest($,["type","domain","range","rangeStep","scheme"]);H.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=Y.flagKeys(ee),H.scaleTypeSupportProperty=function(te,ae){switch(ae){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return Y.contains(["sequential","ordinal","bin-ordinal","quantile","quantize"],te);case"interpolate":return Y.contains(["linear","bin-linear","pow","log","sqrt","utc","time"],te);case"round":return B(te)||"band"===te||"point"===te;case"padding":return B(te)||Y.contains(["point","band"],te);case"paddingOuter":case"rangeStep":return Y.contains(["point","band"],te);case"paddingInner":return"band"===te;case"clamp":return B(te)||"sequential"===te;case"nice":return B(te)||"sequential"===te||"quantize"===te;case"exponent":return"pow"===te;case"base":return"log"===te;case"zero":return j(te)&&!Y.contains(["log","time","utc","bin-linear","threshold","quantile"],te);}throw new Error("Invalid scale property "+ae+".")},H.channelScalePropertyIncompatability=function(te,ae){switch(ae){case"interpolate":case"scheme":return"color"===te?void 0:V.message.cannotUseScalePropertyWithNonColor(te);case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return;}throw new Error("Invalid scale property \""+ae+"\".")},H.channelSupportScaleType=function(te,ae){return te===q.Channel.X||te===q.Channel.Y||te===q.Channel.SIZE||te===q.Channel.OPACITY?B(ae)||Y.contains(["band","point"],ae):te===q.Channel.COLOR?"band"!==ae:!(te!==q.Channel.SHAPE)&&"ordinal"===ae}},{"./channel":16,"./log":106,"./util":119,tslib:6}],110:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SELECTION_ID="_vgsid_",H.defaultConfig={single:{on:"click",fields:[H.SELECTION_ID],resolve:"global",empty:"all"},multi:{on:"click",fields:[H.SELECTION_ID],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global"}}},{}],111:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.isSortField=function(j){return j&&("count"===j.op||j.field)&&j.op}},{}],112:[function(U,z,H){"use strict";function j(he){return void 0!==he.facet}function B(he){return!!he.mark}function W(he){return void 0!==he.layer}function q(he){return void 0!==he.repeat}function V(he){return Y(he)||G(he)}function Y(he){return void 0!==he.vconcat}function G(he){return void 0!==he.hconcat}function X(he,ye){if(j(he))return K(he,ye);if(W(he))return Q(he,ye);if(q(he))return Z(he,ye);if(Y(he))return J(he,ye);if(G(he))return $(he,ye);if(B(he)){var _e=ce.channelHasField(he.encoding,re.ROW),be=ce.channelHasField(he.encoding,re.COLUMN);return _e||be?ee(he,ye):ae(he,ye)}throw new Error(ue.message.INVALID_SPEC)}function K(he,ye){var _e=he.spec,be=se.__rest(he,["spec"]);return se.__assign({},be,{spec:X(_e,ye)})}function Q(he,ye){var _e=he.layer,be=se.__rest(he,["layer"]);return se.__assign({},be,{layer:_e.map(function(Se){return W(Se)?Q(Se,ye):ae(Se,ye)})})}function Z(he,ye){var _e=he.spec,be=se.__rest(he,["spec"]);return se.__assign({},be,{spec:X(_e,ye)})}function J(he,ye){var _e=he.vconcat,be=se.__rest(he,["vconcat"]);return se.__assign({},be,{vconcat:_e.map(function(Se){return X(Se,ye)})})}function $(he,ye){var _e=he.hconcat,be=se.__rest(he,["hconcat"]);return se.__assign({},be,{hconcat:_e.map(function(Se){return X(Se,ye)})})}function ee(he,ye){var _e=he.encoding,be=_e.row,Se=_e.column,ve=se.__rest(_e,["row","column"]),xe=he.mark,Ee=he.width,Ne=he.height,Te=he.selection,ke=(he.encoding,se.__rest(he,["mark","width","height","selection","encoding"]));return se.__assign({},ke,{facet:se.__assign({},be?{row:be}:{},Se?{column:Se}:{}),spec:ae(se.__assign({mark:xe},Ee?{width:Ee}:{},Ne?{height:Ne}:{},{encoding:ve},Te?{selection:Te}:{}),ye)})}function te(he){return me.isPrimitiveMark(he.mark)}function ae(he,ye){if(te(he)){if(ce.isRanged(he.encoding))return ne(he);var _e=ye&&ye.overlay,be=_e&&he.mark===me.AREA&&fe.contains(["linepoint","line"],_e.area),Se=_e&&(_e.line&&he.mark===me.LINE||"linepoint"===_e.area&&he.mark===me.AREA);return Se||be?ie(he,Se,be,ye):he}return de.normalize(he,ye)}function ne(he){var ye=ce.channelHasField(he.encoding,re.X),_e=ce.channelHasField(he.encoding,re.Y),be=ce.channelHasField(he.encoding,re.X2),Se=ce.channelHasField(he.encoding,re.Y2);if(be&&!ye||Se&&!_e){var ve=fe.duplicate(he);return be&&!ye&&(ve.encoding.x=ve.encoding.x2,delete ve.encoding.x2),Se&&!_e&&(ve.encoding.y=ve.encoding.y2,delete ve.encoding.y2),ve}return he}function ie(he,ye,_e,be){var Se=he.mark,ve=he.selection,xe=he.encoding,Ee=se.__rest(he,["mark","selection","encoding"]),Ne=[{mark:Se,encoding:xe}],Te=ge.stack(Se,xe,be?be.stack:void 0),ke=xe;if(Te){var De=Te.fieldChannel,Oe=Te.offset;ke=se.__assign({},xe,(Ce={},Ce[De]=se.__assign({},xe[De],Oe?{stack:Oe}:{}),Ce))}return _e&&Ne.push(se.__assign({mark:{type:"line",style:"lineOverlay"}},ve?{selection:ve}:{},{encoding:ke})),ye&&Ne.push(se.__assign({mark:{type:"point",filled:!0,style:"pointOverlay"}},ve?{selection:ve}:{},{encoding:ke})),se.__assign({},Ee,{layer:Ne});var Ce}function oe(he,ye){return ye.forEach(function(_e){var be=["field","type","value","timeUnit","bin","aggregate"].reduce(function(ve,xe){return void 0!==_e[xe]&&(ve[xe]=_e[xe]),ve},{}),Se=fe.hash(be);he[Se]=he[Se]||_e}),he}function le(he,ye){return void 0===ye&&(ye={}),W(he)?he.layer.forEach(function(_e){B(_e)?oe(ye,pe.fieldDefs(_e.encoding)):le(_e,ye)}):j(he)?(oe(ye,pe.fieldDefs(he.facet)),le(he.spec,ye)):q(he)?le(he.spec,ye):V(he)?(Y(he)?he.vconcat:he.hconcat).forEach(function(_e){return le(_e,ye)}):oe(ye,pe.fieldDefs(he.encoding)),ye}Object.defineProperty(H,"__esModule",{value:!0});var se=U("tslib"),re=U("./channel"),de=U("./compositemark"),ce=U("./encoding"),pe=U("./encoding"),ue=U("./log"),me=U("./mark"),ge=U("./stack"),fe=U("./util");H.isFacetSpec=j,H.isUnitSpec=B,H.isLayerSpec=W,H.isRepeatSpec=q,H.isConcatSpec=V,H.isVConcatSpec=Y,H.isHConcatSpec=G,H.normalize=X,H.fieldDefs=function(he){return fe.vals(le(he))},H.isStacked=function(he,ye){return ye=ye||he.config,!!me.isPrimitiveMark(he.mark)&&null!==ge.stack(he.mark,he.encoding,ye?ye.stack:void 0)}},{"./channel":16,"./compositemark":95,"./encoding":99,"./log":106,"./mark":108,"./stack":113,"./util":119,tslib:6}],113:[function(U,z,H){"use strict";function j(J){return!!Z[J]}function B(J){var $=J.x,ee=J.y;if(!(Y.isFieldDef($)&&Y.isFieldDef(ee))){if(Y.isFieldDef($)&&"quantitative"===$.type)return"x";if(Y.isFieldDef(ee)&&"quantitative"===ee.type)return"y"}else if("quantitative"===$.type&&"quantitative"===ee.type){if($.stack)return"x";if(ee.stack)return"y";if(!!$.aggregate!=!!ee.aggregate)return $.aggregate?"x":"y"}else{if("quantitative"===$.type)return"x";if("quantitative"===ee.type)return"y"}}Object.defineProperty(H,"__esModule",{value:!0});var W=U("./aggregate"),q=U("./channel"),V=U("./encoding"),Y=U("./fielddef"),G=U("./log"),X=U("./mark"),K=U("./scale"),Q=U("./util"),Z={zero:1,center:1,normalize:1};H.isStackOffset=j,H.STACKABLE_MARKS=[X.BAR,X.AREA,X.RULE,X.POINT,X.CIRCLE,X.SQUARE,X.LINE,X.TEXT,X.TICK],H.STACK_BY_DEFAULT_MARKS=[X.BAR,X.AREA],H.stack=function(J,$,ee){var te=X.isMarkDef(J)?J.type:J;if(!Q.contains(H.STACKABLE_MARKS,te))return null;var ae=B($);if(!ae)return null;var ne=$[ae],ie=Y.isStringFieldDef(ne)?Y.field(ne,{}):void 0,oe="x"===ae?"y":"x",le=$[oe],se=Y.isStringFieldDef(le)?Y.field(le,{}):void 0,re=q.NONPOSITION_CHANNELS.reduce(function(ce,pe){if(V.channelHasField($,pe)){var ue=$[pe];(Q.isArray(ue)?ue:[ue]).forEach(function(me){var ge=Y.getFieldDef(me);if(!ge.aggregate){var fe=Y.isStringFieldDef(ge)?Y.field(ge,{}):void 0;fe&&(fe===se||fe===ie)||ce.push({channel:pe,fieldDef:ge})}})}return ce},[]);if(0===re.length)return null;var de;return(de=void 0===ne.stack?Q.contains(H.STACK_BY_DEFAULT_MARKS,te)&&void 0===ee?"zero":ee:ne.stack)&&j(de)?ne.scale&&ne.scale.type&&ne.scale.type!==K.ScaleType.LINEAR?(G.warn(G.message.cannotStackNonLinearScale(ne.scale.type)),null):V.channelHasField($,ae===q.X?q.X2:q.Y2)?(G.warn(G.message.cannotStackRangedMark(ae)),null):(ne.aggregate&&!Q.contains(W.SUM_OPS,ne.aggregate)&&G.warn(G.message.stackNonSummativeAggregate(ne.aggregate)),{groupbyChannel:le?oe:void 0,fieldChannel:ae,impute:Q.contains(["area","line"],te),stackBy:re,offset:de}):null}},{"./aggregate":13,"./channel":16,"./encoding":99,"./fielddef":101,"./log":106,"./mark":108,"./scale":109,"./util":119}],114:[function(U,z,H){"use strict";function j(te){return!!J[te]}function B(te,ae){var ne=ee[te];return{setDateMethod:ae?"setUTC"+ne.substr(3):ne,getDateMethod:"get"+(ae?"UTC":"")+ne.substr(3)}}function W(te,ae){var ne=te.indexOf(ae);return-1<ne&&(ae!==q.SECONDS||0===ne||"i"!==te.charAt(ne-1))}Object.defineProperty(H,"__esModule",{value:!0});var q,V=U("tslib"),Y=U("./datetime"),G=U("./log"),X=U("./util");!function(te){te.YEAR="year",te.MONTH="month",te.DAY="day",te.DATE="date",te.HOURS="hours",te.MINUTES="minutes",te.SECONDS="seconds",te.MILLISECONDS="milliseconds",te.YEARMONTH="yearmonth",te.YEARMONTHDATE="yearmonthdate",te.YEARMONTHDATEHOURS="yearmonthdatehours",te.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",te.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",te.MONTHDATE="monthdate",te.HOURSMINUTES="hoursminutes",te.HOURSMINUTESSECONDS="hoursminutesseconds",te.MINUTESSECONDS="minutesseconds",te.SECONDSMILLISECONDS="secondsmilliseconds",te.QUARTER="quarter",te.YEARQUARTER="yearquarter",te.QUARTERMONTH="quartermonth",te.YEARQUARTERMONTH="yearquartermonth",te.UTCYEAR="utcyear",te.UTCMONTH="utcmonth",te.UTCDAY="utcday",te.UTCDATE="utcdate",te.UTCHOURS="utchours",te.UTCMINUTES="utcminutes",te.UTCSECONDS="utcseconds",te.UTCMILLISECONDS="utcmilliseconds",te.UTCYEARMONTH="utcyearmonth",te.UTCYEARMONTHDATE="utcyearmonthdate",te.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",te.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",te.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",te.UTCMONTHDATE="utcmonthdate",te.UTCHOURSMINUTES="utchoursminutes",te.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",te.UTCMINUTESSECONDS="utcminutesseconds",te.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",te.UTCQUARTER="utcquarter",te.UTCYEARQUARTER="utcyearquarter",te.UTCQUARTERMONTH="utcquartermonth",te.UTCYEARQUARTERMONTH="utcyearquartermonth"}(q=H.TimeUnit||(H.TimeUnit={}));var K={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};H.TIMEUNIT_PARTS=X.flagKeys(K),H.isLocalSingleTimeUnit=function(te){return!!K[te]};var Q={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};H.isUtcSingleTimeUnit=function(te){return!!Q[te]};var Z={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},J=V.__assign({},Q,Z);H.isUTCTimeUnit=j,H.getLocalTimeUnit=function(te){return te.substr(3)};var $=V.__assign({},K,Q,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},Z);H.TIMEUNITS=X.flagKeys($),H.isTimeUnit=function(te){return!!$[te]};var ee={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null};H.convert=function(te,ae){var ne=j(te),ie=ne?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0);return H.TIMEUNIT_PARTS.forEach(function(oe){if(W(te,oe))switch(oe){case q.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case q.QUARTER:var le=B("month",ne),se=le.getDateMethod,re=le.setDateMethod;ie[re](3*Math.floor(ae[se]()/3));break;default:var de=B(oe,ne),ce=de.getDateMethod,pe=de.setDateMethod;ie[pe](ae[ce]());}}),ie},H.getTimeUnitParts=function(te){return H.TIMEUNIT_PARTS.reduce(function(ae,ne){return W(te,ne)?ae.concat(ne):ae},[])},H.containsTimeUnit=W,H.fieldExpr=function(te,ae){function ne(se){return se===q.QUARTER?"("+oe+"quarter("+ie+")-1)":""+oe+se+"("+ie+")"}var ie="datum"+X.accessPath(ae),oe=j(te)?"utc":"",le=H.TIMEUNIT_PARTS.reduce(function(se,re){return W(te,re)&&(se[re]=ne(re)),se},{});return Y.dateTimeExpr(le)},H.formatExpression=function(te,ae,ne,ie){if(te){var oe=[],le="",se=W(te,q.YEAR);W(te,q.QUARTER)&&(le="'Q' + quarter("+ae+")"),W(te,q.MONTH)&&oe.push(!1===ne?"%B":"%b"),W(te,q.DAY)?oe.push(ne?"%a":"%A"):W(te,q.DATE)&&oe.push("%d"+(se?",":"")),se&&oe.push(ne?"%y":"%Y");var re=[];W(te,q.HOURS)&&re.push("%H"),W(te,q.MINUTES)&&re.push("%M"),W(te,q.SECONDS)&&re.push("%S"),W(te,q.MILLISECONDS)&&re.push("%L");var de=[];return 0<oe.length&&de.push(oe.join(" ")),0<re.length&&de.push(re.join(":")),0<de.length&&(le&&(le+=" + ' ' + "),le+=ie?"utcFormat("+ae+", '"+de.join(" ")+"')":"timeFormat("+ae+", '"+de.join(" ")+"')"),le||void 0}},H.normalizeTimeUnit=function(te){return"day"!==te&&0<=te.indexOf("day")?(G.warn(G.message.dayReplacedWithDate(te)),te.replace("day","date")):te}},{"./datetime":98,"./log":106,"./util":119,tslib:6}],115:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("tslib");H.extractTitleConfig=function(B){var W=B.anchor,q=B.offset,V=B.orient,Y=B.color,G=j.__rest(B,["anchor","offset","orient","color"]);return{mark:j.__assign({},G,Y?{fill:Y}:{}),nonMark:j.__assign({},W?{anchor:W}:{},q?{offset:q}:{},V?{orient:V}:{})}}},{tslib:6}],116:[function(U,z,H){"use strict";function j(Y){return W.isString(Y)?{type:Y}:Y||{}}Object.defineProperty(H,"__esModule",{value:!0});var B=U("tslib"),W=U("util"),q=U("./log");H.normalizeAutoSize=function(Y,G,X){void 0===X&&(X=!0);var K=B.__assign({type:"pad"},j(G),j(Y));return"fit"===K.type&&(X||(q.warn(q.message.FIT_NON_SINGLE),K.type="pad")),K};var V=["background","padding"];H.extractTopLevelProperties=function(Y){return V.reduce(function(G,X){return Y&&void 0!==Y[X]&&(G[X]=Y[X]),G},{})}},{"./log":106,tslib:6,util:9}],117:[function(U,z,H){"use strict";function j(q){return void 0!==q.filter}Object.defineProperty(H,"__esModule",{value:!0});var B=U("./filter"),W=U("./logical");H.isFilter=j,H.isLookup=function(q){return void 0!==q.lookup},H.isCalculate=function(q){return void 0!==q.calculate},H.isBin=function(q){return!!q.bin},H.isTimeUnit=function(q){return void 0!==q.timeUnit},H.isAggregate=function(q){return void 0!==q.aggregate},H.normalizeTransform=function(q){return q.map(function(V){return j(V)?{filter:W.normalizeLogicalOperand(V.filter,B.normalizeFilter)}:V})}},{"./filter":102,"./logical":107}],118:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j;!function(W){W.QUANTITATIVE="quantitative",W.ORDINAL="ordinal",W.TEMPORAL="temporal",W.NOMINAL="nominal"}(j=H.Type||(H.Type={}));var B={quantitative:1,ordinal:1,temporal:1,nominal:1};H.isType=function(W){return!!B[W]},H.QUANTITATIVE=j.QUANTITATIVE,H.ORDINAL=j.ORDINAL,H.TEMPORAL=j.TEMPORAL,H.NOMINAL=j.NOMINAL,H.getFullName=function(W){if(W)switch(W=W.toLowerCase()){case"q":case H.QUANTITATIVE:return"quantitative";case"t":case H.TEMPORAL:return"temporal";case"o":case H.ORDINAL:return"ordinal";case"n":case H.NOMINAL:return"nominal";}}},{}],119:[function(U,z,H){"use strict";function j(J,$){return-1<J.indexOf($)}function B(J,$){return J.filter(function(ee){return!j($,ee)})}function W(J){for(var $=[],ee=1;ee<arguments.length;ee++)$[ee-1]=arguments[ee];for(var te=0,ae=$;te<ae.length;te++)J=q(J,ae[te]);return J}function q(J,$){if("object"!=("undefined"===typeof $?"undefined":babelHelpers.typeof($))||null===$)return J;for(var ee in $)$.hasOwnProperty(ee)&&void 0!==$[ee]&&("object"!=babelHelpers.typeof($[ee])||K.isArray($[ee])||null===$[ee]?J[ee]=$[ee]:"object"!=babelHelpers.typeof(J[ee])||null===J[ee]?J[ee]=W(K.isArray($[ee].constructor)?[]:{},$[ee]):W(J[ee],$[ee]));return J}function V(J){return JSON.parse(JSON.stringify(J))}function Y(J){return!0===J||!1===J}function G(J,$){return Q.isLogicalNot(J)?"!("+G(J.not,$)+")":Q.isLogicalAnd(J)?"("+J.and.map(function(ee){return G(ee,$)}).join(") && (")+")":Q.isLogicalOr(J)?"("+J.or.map(function(ee){return G(ee,$)}).join(") || (")+")":$(J)}Object.defineProperty(H,"__esModule",{value:!0});var X=U("json-stable-stringify"),K=U("vega-util"),Q=U("./logical"),Z=U("vega-util");H.isArray=Z.isArray,H.isObject=Z.isObject,H.isNumber=Z.isNumber,H.isString=Z.isString,H.truncate=Z.truncate,H.toSet=Z.toSet,H.stringValue=Z.stringValue,H.splitAccessPath=Z.splitAccessPath,H.pick=function(J,$){var ee={};return $.forEach(function(te){J.hasOwnProperty(te)&&(ee[te]=J[te])}),ee},H.omit=function(J,$){var ee=V(J);return $.forEach(function(te){delete ee[te]}),ee},H.hash=function(J){if(K.isString(J)||K.isNumber(J)||Y(J))return J+"";var $=X(J);if(100>$.length)return $;for(var ee=0,te=0;te<$.length;te++)ee=(ee<<5)-ee+$.charCodeAt(te),ee&=ee;return ee},H.contains=j,H.without=B,H.union=function(J,$){return J.concat(B($,J))},H.some=function(J,$){for(var ee=0,te=0;te<J.length;te++)if($(J[te],te,ee++))return!0;return!1},H.every=function(J,$){for(var ee=0,te=0;te<J.length;te++)if(!$(J[te],te,ee++))return!1;return!0},H.flatten=function(J){return[].concat.apply([],J)},H.mergeDeep=W,H.unique=function(J,$){for(var ee,oe,te=[],ae={},ne=0,ie=J;ne<ie.length;ne++)oe=ie[ne],(ee=$(oe))in ae||(ae[ee]=1,te.push(oe));return te},H.differ=function(J,$){for(var ee in J)if(J.hasOwnProperty(ee)&&$[ee]&&J[ee]&&$[ee]!==J[ee])return!0;return!1},H.hasIntersection=function(J,$){for(var ee in J)if(ee in $)return!0;return!1},H.isNumeric=function(J){return!isNaN(J)},H.differArray=function(J,$){if(J.length!==$.length)return!0;J.sort(),$.sort();for(var ee=0;ee<J.length;ee++)if($[ee]!==J[ee])return!0;return!1},H.keys=Object.keys,H.vals=function(J){var $=[];for(var ee in J)J.hasOwnProperty(ee)&&$.push(J[ee]);return $},H.flagKeys=function(J){return H.keys(J)},H.duplicate=V,H.isBoolean=Y,H.varName=function(J){var $=J.replace(/\W/g,"_");return(J.match(/^\d+/)?"_":"")+$},H.logicalExpr=G,H.deleteNestedProperty=function(J,$){for(var ee=!0;0<$.length&&ee;){for(var te=J,ae=0;ae<$.length-1;ae++)te=te[$[ae]];delete te[$.pop()],0!==H.keys(te).length&&(ee=!1)}},H.titlecase=function(J){return J.charAt(0).toUpperCase()+J.substr(1)},H.accessPath=function(J){return"["+K.splitAccessPath(J).map(K.stringValue).join("][")+"]"}},{"./logical":107,"json-stable-stringify":1,"vega-util":11}],120:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("./mark"),B=U("./mark"),W=U("./util");H.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},H.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:W.toSet(["row","column","x","y","size","color","detail"]),line:W.toSet(["row","column","x","y","color","detail"]),area:W.toSet(["row","column","x","y","color","detail"]),tick:W.toSet(["row","column","x","y","color","detail"]),circle:W.toSet(["row","column","x","y","color","size","detail"]),square:W.toSet(["row","column","x","y","color","size","detail"]),point:W.toSet(["row","column","x","y","color","size","detail","shape"]),text:W.toSet(["row","column","size","color","text"])},H.getEncodingMappingError=function(q,V,Y){void 0===V&&(V=H.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===Y&&(Y=H.DEFAULT_SUPPORTED_CHANNEL_TYPE);var G=j.isMarkDef(q.mark)?q.mark.type:q.mark,X=q.encoding,K=V[G],Q=Y[G];for(var Z in K)if(!(K[Z]in X))return"Missing encoding channel \""+K[Z]+"\" for mark \""+G+"\"";for(var J in X)if(!Q[J])return"Encoding channel \""+J+"\" is not supported by mark type \""+G+"\"";return G!==B.BAR||X.x||X.y?null:"Missing both x and y for bar"}},{"./mark":108,"./util":119}],121:[function(U,z,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var j=U("./util");H.isVgSignalRef=function(B){return!!B.signal},H.isVgRangeStep=function(B){return!!B.step},H.isDataRefUnionedDomain=function(B){return!j.isArray(B)&&"fields"in B&&!("data"in B)},H.isFieldRefUnionDomain=function(B){return!j.isArray(B)&&"fields"in B&&"data"in B},H.isDataRefDomain=function(B){return!j.isArray(B)&&"field"in B&&"data"in B},H.isSignalRefDomain=function(B){return!j.isArray(B)&&"signal"in B},H.VG_MARK_CONFIGS=j.flagKeys({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,limit:1,dx:1,dy:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1})},{"./util":119}]},{},[104])(104)});</script><style>.vg-tooltip{visibility:hidden;padding:6px;border-radius:3px;position:fixed;z-index:2000;font-family:sans-serif;font-size:11px;background-color:rgba(255,255,255,0.9);border:1px solid #d9d9d9;color:black;}.vg-tooltip td.key,.vg-tooltip td.value{overflow:hidden;text-overflow:ellipsis;}.vg-tooltip td.key{color:gray;max-width:150px;text-align:right;padding-right:1px;}.vg-tooltip td.value{max-width:200px;text-align:left;}.vg-tooltip.dark-theme{background-color:rgba(64,64,64,0.9);border:0;color:white;}.vg-tooltip.dark-theme td.key{color:#bfbfbf;}.vg-tooltip.light-theme{background-color:rgba(255,255,255,0.9);border:1px solid #d9d9d9;color:black;}.vg-tooltip.light-theme td.key{color:gray;}</style><script>!function(aa){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?module.exports=aa():"function"==typeof define&&define.amd?define([],aa):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).vegaTooltip=aa()}(function(){return function aa(ba,ca,da){function ea(ha,ia){if(!ca[ha]){if(!ba[ha]){var ja="function"==typeof require&&require;if(!ia&&ja)return ja(ha,!0);if(fa)return fa(ha,!0);var ka=new Error("Cannot find module '"+ha+"'");throw ka.code="MODULE_NOT_FOUND",ka}var la=ca[ha]={exports:{}};ba[ha][0].call(la.exports,function(ma){var na=ba[ha][1][ma];return ea(na||ma)},la,la.exports,aa,ba,ca,da)}return ca[ha].exports}for(var fa="function"==typeof require&&require,ga=0;ga<da.length;ga++)ea(da[ga]);return ea}({1:[function(aa,ba,ca){!function(da,ea){ea("object"==("undefined"===typeof ca?"undefined":babelHelpers.typeof(ca))&&void 0!==ba?ca:da.d3=da.d3||{})}(this,function(da){"use strict";function ea(wa){return new fa(wa)}function fa(wa){if(!(xa=oa.exec(wa)))throw new Error("invalid format: "+wa);var xa,ya=xa[1]||" ",za=xa[2]||">",Aa=xa[3]||"-",Ba=xa[4]||"",Ca=!!xa[5],Da=xa[6]&&+xa[6],Ea=!!xa[7],Fa=xa[8]&&+xa[8].slice(1),Ga=xa[9]||"";"n"===Ga?(Ea=!0,Ga="g"):na[Ga]||(Ga=""),(Ca||"0"===ya&&"="===za)&&(Ca=!0,ya="0",za="="),this.fill=ya,this.align=za,this.sign=Aa,this.symbol=Ba,this.zero=Ca,this.width=Da,this.comma=Ea,this.precision=Fa,this.type=Ga}function ga(wa){return pa=sa(wa),da.format=pa.format,da.formatPrefix=pa.formatPrefix,pa}var ha,ia=function(xa,ya){if(0>(za=(xa=ya?xa.toExponential(ya-1):xa.toExponential()).indexOf("e")))return null;var za,Aa=xa.slice(0,za);return[1<Aa.length?Aa[0]+Aa.slice(2):Aa,+xa.slice(za+1)]},ja=function(xa){return xa=ia(Math.abs(xa)),xa?xa[1]:NaN},ka=function(xa,ya){return function(za,Aa){for(var Ba=za.length,Ca=[],Da=0,Ea=xa[0],Fa=0;0<Ba&&0<Ea&&(Fa+Ea+1>Aa&&(Ea=Math.max(1,Aa-Fa)),Ca.push(za.substring(Ba-=Ea,Ba+Ea)),!((Fa+=Ea+1)>Aa));)Ea=xa[Da=(Da+1)%xa.length];return Ca.reverse().join(ya)}},la=function(xa){return function(ya){return ya.replace(/[0-9]/g,function(za){return xa[+za]})}},ma=function(xa,ya){var za=ia(xa,ya);if(!za)return xa+"";var Aa=za[0],Ba=za[1];return 0>Ba?"0."+Array(-Ba).join("0")+Aa:Aa.length>Ba+1?Aa.slice(0,Ba+1)+"."+Aa.slice(Ba+1):Aa+Array(Ba-Aa.length+2).join("0")},na={"":function(xa,ya){t:for(var za,Aa=(xa=xa.toPrecision(ya)).length,Ba=1,Ca=-1;Ba<Aa;++Ba)switch(xa[Ba]){case".":Ca=za=Ba;break;case"0":0===Ca&&(Ca=Ba),za=Ba;break;case"e":break t;default:0<Ca&&(Ca=0);}return 0<Ca?xa.slice(0,Ca)+xa.slice(za+1):xa},"%":function(xa,ya){return(100*xa).toFixed(ya)},b:function(xa){return Math.round(xa).toString(2)},c:function(xa){return xa+""},d:function(xa){return Math.round(xa).toString(10)},e:function(xa,ya){return xa.toExponential(ya)},f:function(xa,ya){return xa.toFixed(ya)},g:function(xa,ya){return xa.toPrecision(ya)},o:function(xa){return Math.round(xa).toString(8)},p:function(xa,ya){return ma(100*xa,ya)},r:ma,s:function(xa,ya){var za=ia(xa,ya);if(!za)return xa+"";var Aa=za[0],Ba=za[1],Ca=Ba-(ha=3*Math.max(-8,Math.min(8,Math.floor(Ba/3))))+1,Da=Aa.length;return Ca===Da?Aa:Ca>Da?Aa+Array(Ca-Da+1).join("0"):0<Ca?Aa.slice(0,Ca)+"."+Aa.slice(Ca):"0."+Array(1-Ca).join("0")+ia(xa,Math.max(0,ya+Ca-1))[0]},X:function(xa){return Math.round(xa).toString(16).toUpperCase()},x:function(xa){return Math.round(xa).toString(16)}},oa=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;ea.prototype=fa.prototype,fa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var pa,qa=function(xa){return xa},ra=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],sa=function(xa){function ya(Ea){function Fa(Ta){var Ua,Va,Wa,Xa=Pa,Ya=Qa;if("c"===Oa)Ya=Ra(Ta)+Ya,Ta="";else{var Za=0>(Ta=+Ta);if(Ta=Ra(Math.abs(Ta),Na),Za&&0==+Ta&&(Za=!1),Xa=(Za?"("===Ia?Ia:"-":"-"===Ia||"("===Ia?"":Ia)+Xa,Ya=Ya+("s"===Oa?ra[8+ha/3]:"")+(Za&&"("===Ia?")":""),Sa)for(Ua=-1,Va=Ta.length;++Ua<Va;)if(48>(Wa=Ta.charCodeAt(Ua))||57<Wa){Ya=(46===Wa?Ca+Ta.slice(Ua+1):Ta.slice(Ua))+Ya,Ta=Ta.slice(0,Ua);break}}Ma&&!Ka&&(Ta=Aa(Ta,1/0));var $a=Xa.length+Ta.length+Ya.length,_a=$a<La?Array(La-$a+1).join(Ga):"";switch(Ma&&Ka&&(Ta=Aa(_a+Ta,_a.length?La-Ya.length:1/0),_a=""),Ha){case"<":Ta=Xa+Ta+Ya+_a;break;case"=":Ta=Xa+_a+Ta+Ya;break;case"^":Ta=_a.slice(0,$a=_a.length>>1)+Xa+Ta+Ya+_a.slice($a);break;default:Ta=_a+Xa+Ta+Ya;}return Da(Ta)}var Ga=(Ea=ea(Ea)).fill,Ha=Ea.align,Ia=Ea.sign,Ja=Ea.symbol,Ka=Ea.zero,La=Ea.width,Ma=Ea.comma,Na=Ea.precision,Oa=Ea.type,Pa="$"===Ja?Ba[0]:"#"===Ja&&/[boxX]/.test(Oa)?"0"+Oa.toLowerCase():"",Qa="$"===Ja?Ba[1]:/[%p]/.test(Oa)?wa:"",Ra=na[Oa],Sa=!Oa||/[defgprs%]/.test(Oa);return Na=null==Na?Oa?6:12:/[gprs]/.test(Oa)?Math.max(1,Math.min(21,Na)):Math.max(0,Math.min(20,Na)),Fa.toString=function(){return Ea+""},Fa}var Aa=xa.grouping&&xa.thousands?ka(xa.grouping,xa.thousands):qa,Ba=xa.currency,Ca=xa.decimal,Da=xa.numerals?la(xa.numerals):qa,wa=xa.percent||"%";return{format:ya,formatPrefix:function(Ea,Fa){var Ga=ya((Ea=ea(Ea),Ea.type="f",Ea)),Ha=3*Math.max(-8,Math.min(8,Math.floor(ja(Fa)/3))),Ia=Math.pow(10,-Ha),Ja=ra[8+Ha/3];return function(Ka){return Ga(Ia*Ka)+Ja}}}};ga({decimal:".",thousands:",",grouping:[3],currency:["$",""]});da.formatDefaultLocale=ga,da.formatLocale=sa,da.formatSpecifier=ea,da.precisionFixed=function(xa){return Math.max(0,-ja(Math.abs(xa)))},da.precisionPrefix=function(xa,ya){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ja(ya)/3)))-ja(Math.abs(xa)))},da.precisionRound=function(xa,ya){return xa=Math.abs(xa),ya=Math.abs(ya)-xa,Math.max(0,ja(ya)-ja(xa))+1},Object.defineProperty(da,"__esModule",{value:!0})})},{}],2:[function(aa,ba,ca){!function(da,ea){ea("object"==("undefined"===typeof ca?"undefined":babelHelpers.typeof(ca))&&void 0!==ba?ca:da.d3=da.d3||{})}(this,function(da){"use strict";function ea(bc){return function(){var cc=this.ownerDocument,dc=this.namespaceURI;return dc===cb&&cc.documentElement.namespaceURI===cb?cc.createElement(bc):cc.createElementNS(dc,bc)}}function fa(bc){return function(){return this.ownerDocument.createElementNS(bc.space,bc.local)}}function ga(){return new ha}function ha(){this._="@"+(++gb).toString(36)}function ia(bc,cc,dc){return bc=ja(bc,cc,dc),function(ec){var fc=ec.relatedTarget;fc&&(fc===this||8&fc.compareDocumentPosition(this))||bc.call(this,ec)}}function ja(bc,cc,dc){return function(ec){var fc=da.event;da.event=ec;try{bc.call(this,this.__data__,cc,dc)}finally{da.event=fc}}}function ka(bc){return bc.trim().split(/^|\s+/).map(function(cc){var dc="",ec=cc.indexOf(".");return 0<=ec&&(dc=cc.slice(ec+1),cc=cc.slice(0,ec)),{type:cc,name:dc}})}function la(bc){return function(){var cc=this.__on;if(cc){for(var dc,ec=0,fc=-1,gc=cc.length;ec<gc;++ec)dc=cc[ec],bc.type&&dc.type!==bc.type||dc.name!==bc.name?cc[++fc]=dc:this.removeEventListener(dc.type,dc.listener,dc.capture);++fc?cc.length=fc:delete this.__on}}}function ma(bc,cc,dc){var ec=lb.hasOwnProperty(bc.type)?ia:ja;return function(fc,gc,hc){var ic,jc=this.__on,kc=ec(cc,gc,hc);if(jc)for(var lc=0,mc=jc.length;lc<mc;++lc)if((ic=jc[lc]).type===bc.type&&ic.name===bc.name)return this.removeEventListener(ic.type,ic.listener,ic.capture),this.addEventListener(ic.type,ic.listener=kc,ic.capture=dc),void(ic.value=cc);this.addEventListener(bc.type,kc,dc),ic={type:bc.type,name:bc.name,value:cc,listener:kc,capture:dc},jc?jc.push(ic):this.__on=[ic]}}function oa(){}function pa(){return[]}function qa(bc,cc){this.ownerDocument=bc.ownerDocument,this.namespaceURI=bc.namespaceURI,this._next=null,this._parent=bc,this.__data__=cc}function ra(bc,cc,dc,ec,fc,gc){for(var hc,ic=0,jc=cc.length,kc=gc.length;ic<kc;++ic)(hc=cc[ic])?(hc.__data__=gc[ic],ec[ic]=hc):dc[ic]=new qa(bc,gc[ic]);for(;ic<jc;++ic)(hc=cc[ic])&&(fc[ic]=hc)}function sa(bc,cc,dc,ec,fc,gc,hc){var ic,jc,kc,lc={},mc=cc.length,nc=gc.length,oc=Array(mc);for(ic=0;ic<mc;++ic)(jc=cc[ic])&&(oc[ic]=kc=yb+hc.call(jc,jc.__data__,ic,cc),kc in lc?fc[ic]=jc:lc[kc]=jc);for(ic=0;ic<nc;++ic)(jc=lc[kc=yb+hc.call(bc,gc[ic],ic,gc)])?(ec[ic]=jc,jc.__data__=gc[ic],lc[kc]=null):dc[ic]=new qa(bc,gc[ic]);for(ic=0;ic<mc;++ic)(jc=cc[ic])&&lc[oc[ic]]===jc&&(fc[ic]=jc)}function ta(bc,cc){return bc<cc?-1:bc>cc?1:bc>=cc?0:NaN}function ua(bc){return function(){this.removeAttribute(bc)}}function va(bc){return function(){this.removeAttributeNS(bc.space,bc.local)}}function wa(bc,cc){return function(){this.setAttribute(bc,cc)}}function xa(bc,cc){return function(){this.setAttributeNS(bc.space,bc.local,cc)}}function ya(bc,cc){return function(){var dc=cc.apply(this,arguments);null==dc?this.removeAttribute(bc):this.setAttribute(bc,dc)}}function za(bc,cc){return function(){var dc=cc.apply(this,arguments);null==dc?this.removeAttributeNS(bc.space,bc.local):this.setAttributeNS(bc.space,bc.local,dc)}}function Aa(bc){return function(){this.style.removeProperty(bc)}}function Ba(bc,cc,dc){return function(){this.style.setProperty(bc,cc,dc)}}function Ca(bc,cc,dc){return function(){var ec=cc.apply(this,arguments);null==ec?this.style.removeProperty(bc):this.style.setProperty(bc,ec,dc)}}function Da(bc,cc){return bc.style.getPropertyValue(cc)||Lb(bc).getComputedStyle(bc,null).getPropertyValue(cc)}function Ea(bc){return function(){delete this[bc]}}function Fa(bc,cc){return function(){this[bc]=cc}}function Ga(bc,cc){return function(){var dc=cc.apply(this,arguments);null==dc?delete this[bc]:this[bc]=dc}}function Ha(bc){return bc.trim().split(/^|\s+/)}function Ia(bc){return bc.classList||new Ja(bc)}function Ja(bc){this._node=bc,this._names=Ha(bc.getAttribute("class")||"")}function Ka(bc,cc){for(var dc=Ia(bc),ec=-1,fc=cc.length;++ec<fc;)dc.add(cc[ec])}function La(bc,cc){for(var dc=Ia(bc),ec=-1,fc=cc.length;++ec<fc;)dc.remove(cc[ec])}function Ma(bc){return function(){Ka(this,bc)}}function Na(bc){return function(){La(this,bc)}}function Oa(bc,cc){return function(){(cc.apply(this,arguments)?Ka:La)(this,bc)}}function Pa(){this.textContent=""}function Qa(bc){return function(){this.textContent=bc}}function Ra(bc){return function(){var cc=bc.apply(this,arguments);this.textContent=null==cc?"":cc}}function Sa(){this.innerHTML=""}function Ta(bc){return function(){this.innerHTML=bc}}function Ua(bc){return function(){var cc=bc.apply(this,arguments);this.innerHTML=null==cc?"":cc}}function Va(){this.nextSibling&&this.parentNode.appendChild(this)}function Wa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xa(){return null}function Ya(){var bc=this.parentNode;bc&&bc.removeChild(this)}function Za(bc,cc,dc){var ec=Lb(bc),fc=ec.CustomEvent;"function"==typeof fc?fc=new fc(cc,dc):(fc=ec.document.createEvent("Event"),dc?(fc.initEvent(cc,dc.bubbles,dc.cancelable),fc.detail=dc.detail):fc.initEvent(cc,!1,!1)),bc.dispatchEvent(fc)}function $a(bc,cc){return function(){return Za(this,bc,cc)}}function _a(bc,cc){return function(){return Za(this,bc,cc.apply(this,arguments))}}function ab(bc,cc){this._groups=bc,this._parents=cc}function bb(){return new ab([[document.documentElement]],Yb)}var cb="http://www.w3.org/1999/xhtml",db={svg:"http://www.w3.org/2000/svg",xhtml:cb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},eb=function(cc){var dc=cc+="",ec=dc.indexOf(":");return 0<=ec&&"xmlns"!==(dc=cc.slice(0,ec))&&(cc=cc.slice(ec+1)),db.hasOwnProperty(dc)?{space:db[dc],local:cc}:cc},fb=function(cc){var dc=eb(cc);return(dc.local?fa:ea)(dc)},gb=0;ha.prototype=ga.prototype={constructor:ha,get:function(cc){for(var dc=this._;!(dc in cc);)if(!(cc=cc.parentNode))return;return cc[dc]},set:function(cc,dc){return cc[this._]=dc},remove:function(cc){return this._ in cc&&delete cc[this._]},toString:function(){return this._}};var hb=function(cc){return function(){return this.matches(cc)}};if("undefined"!=typeof document){var ib=document.documentElement;if(!ib.matches){var jb=ib.webkitMatchesSelector||ib.msMatchesSelector||ib.mozMatchesSelector||ib.oMatchesSelector;hb=function(cc){return function(){return jb.call(this,cc)}}}}var kb=hb,lb={};da.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(lb={mouseenter:"mouseover",mouseleave:"mouseout"}));var nb=function(){for(var cc,dc=da.event;cc=dc.sourceEvent;)dc=cc;return dc},ob=function(cc,dc){var ec=cc.ownerSVGElement||cc;if(ec.createSVGPoint){var fc=ec.createSVGPoint();return fc.x=dc.clientX,fc.y=dc.clientY,fc=fc.matrixTransform(cc.getScreenCTM().inverse()),[fc.x,fc.y]}var gc=cc.getBoundingClientRect();return[dc.clientX-gc.left-cc.clientLeft,dc.clientY-gc.top-cc.clientTop]},qb=function(cc){return null==cc?oa:function(){return this.querySelector(cc)}},sb=function(cc){return null==cc?pa:function(){return this.querySelectorAll(cc)}},vb=function(cc){return Array(cc.length)};qa.prototype={constructor:qa,appendChild:function(cc){return this._parent.insertBefore(cc,this._next)},insertBefore:function(cc,dc){return this._parent.insertBefore(cc,dc)},querySelector:function(cc){return this._parent.querySelector(cc)},querySelectorAll:function(cc){return this._parent.querySelectorAll(cc)}};var xb=function(cc){return function(){return cc}},yb="$",Lb=function(cc){return cc.ownerDocument&&cc.ownerDocument.defaultView||cc.document&&cc||cc.defaultView};Ja.prototype={add:function(cc){0>this._names.indexOf(cc)&&(this._names.push(cc),this._node.setAttribute("class",this._names.join(" ")))},remove:function(cc){var dc=this._names.indexOf(cc);0<=dc&&(this._names.splice(dc,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(cc){return 0<=this._names.indexOf(cc)}};var Yb=[null];ab.prototype=bb.prototype={constructor:ab,select:function(cc){"function"!=typeof cc&&(cc=qb(cc));for(var dc=this._groups,ec=dc.length,fc=Array(ec),gc=0;gc<ec;++gc)for(var hc,ic,jc=dc[gc],kc=jc.length,lc=fc[gc]=Array(kc),mc=0;mc<kc;++mc)(hc=jc[mc])&&(ic=cc.call(hc,hc.__data__,mc,jc))&&("__data__"in hc&&(ic.__data__=hc.__data__),lc[mc]=ic);return new ab(fc,this._parents)},selectAll:function(cc){"function"!=typeof cc&&(cc=sb(cc));for(var dc=this._groups,ec=dc.length,fc=[],gc=[],hc=0;hc<ec;++hc)for(var ic,jc=dc[hc],kc=jc.length,lc=0;lc<kc;++lc)(ic=jc[lc])&&(fc.push(cc.call(ic,ic.__data__,lc,jc)),gc.push(ic));return new ab(fc,gc)},filter:function(cc){"function"!=typeof cc&&(cc=kb(cc));for(var dc=this._groups,ec=dc.length,fc=Array(ec),gc=0;gc<ec;++gc)for(var hc,ic=dc[gc],jc=ic.length,kc=fc[gc]=[],lc=0;lc<jc;++lc)(hc=ic[lc])&&cc.call(hc,hc.__data__,lc,ic)&&kc.push(hc);return new ab(fc,this._parents)},data:function(cc,dc){if(!cc)return pc=Array(this.size()),lc=-1,this.each(function(xc){pc[++lc]=xc}),pc;var ec=dc?sa:ra,fc=this._parents,gc=this._groups;"function"!=typeof cc&&(cc=xb(cc));for(var hc=gc.length,ic=Array(hc),jc=Array(hc),kc=Array(hc),lc=0;lc<hc;++lc){var mc=fc[lc],nc=gc[lc],oc=nc.length,pc=cc.call(mc,mc&&mc.__data__,lc,fc),qc=pc.length,rc=jc[lc]=Array(qc),sc=ic[lc]=Array(qc);ec(mc,nc,rc,sc,kc[lc]=Array(oc),pc,dc);for(var tc,uc,vc=0,wc=0;vc<qc;++vc)if(tc=rc[vc]){for(vc>=wc&&(wc=vc+1);!(uc=sc[wc])&&++wc<qc;);tc._next=uc||null}}return ic=new ab(ic,fc),ic._enter=jc,ic._exit=kc,ic},enter:function(){return new ab(this._enter||this._groups.map(vb),this._parents)},exit:function(){return new ab(this._exit||this._groups.map(vb),this._parents)},merge:function(cc){for(var dc=this._groups,ec=cc._groups,fc=dc.length,gc=ec.length,hc=Math.min(fc,gc),ic=Array(fc),jc=0;jc<hc;++jc)for(var kc,lc=dc[jc],mc=ec[jc],nc=lc.length,oc=ic[jc]=Array(nc),pc=0;pc<nc;++pc)(kc=lc[pc]||mc[pc])&&(oc[pc]=kc);for(;jc<fc;++jc)ic[jc]=dc[jc];return new ab(ic,this._parents)},order:function(){for(var cc=this._groups,dc=-1,ec=cc.length;++dc<ec;)for(var fc,gc=cc[dc],hc=gc.length-1,ic=gc[hc];0<=--hc;)(fc=gc[hc])&&(ic&&ic!==fc.nextSibling&&ic.parentNode.insertBefore(fc,ic),ic=fc);return this},sort:function(cc){function dc(nc,oc){return nc&&oc?cc(nc.__data__,oc.__data__):!nc-!oc}cc||(cc=ta);for(var ec=this._groups,fc=ec.length,gc=Array(fc),hc=0;hc<fc;++hc){for(var ic,jc=ec[hc],kc=jc.length,lc=gc[hc]=Array(kc),mc=0;mc<kc;++mc)(ic=jc[mc])&&(lc[mc]=ic);lc.sort(dc)}return new ab(gc,this._parents).order()},call:function(){var cc=arguments[0];return arguments[0]=this,cc.apply(null,arguments),this},nodes:function(){var cc=Array(this.size()),dc=-1;return this.each(function(){cc[++dc]=this}),cc},node:function(){for(var cc=this._groups,dc=0,ec=cc.length;dc<ec;++dc)for(var ic,fc=cc[dc],gc=0,hc=fc.length;gc<hc;++gc)if(ic=fc[gc],ic)return ic;return null},size:function(){var cc=0;return this.each(function(){++cc}),cc},empty:function(){return!this.node()},each:function(cc){for(var dc=this._groups,ec=0,fc=dc.length;ec<fc;++ec)for(var gc,hc=dc[ec],ic=0,jc=hc.length;ic<jc;++ic)(gc=hc[ic])&&cc.call(gc,gc.__data__,ic,hc);return this},attr:function(cc,dc){var ec=eb(cc);if(2>arguments.length){var fc=this.node();return ec.local?fc.getAttributeNS(ec.space,ec.local):fc.getAttribute(ec)}return this.each((null==dc?ec.local?va:ua:"function"==typeof dc?ec.local?za:ya:ec.local?xa:wa)(ec,dc))},style:function(cc,dc,ec){return 1<arguments.length?this.each((null==dc?Aa:"function"==typeof dc?Ca:Ba)(cc,dc,null==ec?"":ec)):Da(this.node(),cc)},property:function(cc,dc){return 1<arguments.length?this.each((null==dc?Ea:"function"==typeof dc?Ga:Fa)(cc,dc)):this.node()[cc]},classed:function(cc,dc){var ec=Ha(cc+"");if(2>arguments.length){for(var fc=Ia(this.node()),gc=-1,hc=ec.length;++gc<hc;)if(!fc.contains(ec[gc]))return!1;return!0}return this.each(("function"==typeof dc?Oa:dc?Ma:Na)(ec,dc))},text:function(cc){return arguments.length?this.each(null==cc?Pa:("function"==typeof cc?Ra:Qa)(cc)):this.node().textContent},html:function(cc){return arguments.length?this.each(null==cc?Sa:("function"==typeof cc?Ua:Ta)(cc)):this.node().innerHTML},raise:function(){return this.each(Va)},lower:function(){return this.each(Wa)},append:function(cc){var dc="function"==typeof cc?cc:fb(cc);return this.select(function(){return this.appendChild(dc.apply(this,arguments))})},insert:function(cc,dc){var ec="function"==typeof cc?cc:fb(cc),fc=null==dc?Xa:"function"==typeof dc?dc:qb(dc);return this.select(function(){return this.insertBefore(ec.apply(this,arguments),fc.apply(this,arguments)||null)})},remove:function(){return this.each(Ya)},datum:function(cc){return arguments.length?this.property("__data__",cc):this.node().__data__},on:function(cc,dc,ec){var fc,gc,hc=ka(cc+""),ic=hc.length;{if(!(2>arguments.length)){for(jc=dc?ma:la,null==ec&&(ec=!1),fc=0;fc<ic;++fc)this.each(jc(hc[fc],dc,ec));return this}var jc=this.node().__on;if(jc)for(var kc,lc=0,mc=jc.length;lc<mc;++lc)for(fc=0,kc=jc[lc];fc<ic;++fc)if((gc=hc[fc]).type===kc.type&&gc.name===kc.name)return kc.value}},dispatch:function(cc,dc){return this.each(("function"==typeof dc?_a:$a)(cc,dc))}};da.creator=fb,da.local=ga,da.matcher=kb,da.mouse=function(cc){var dc=nb();return dc.changedTouches&&(dc=dc.changedTouches[0]),ob(cc,dc)},da.namespace=eb,da.namespaces=db,da.select=function(cc){return"string"==typeof cc?new ab([[document.querySelector(cc)]],[document.documentElement]):new ab([[cc]],Yb)},da.selectAll=function(cc){return"string"==typeof cc?new ab([document.querySelectorAll(cc)],[document.documentElement]):new ab([null==cc?[]:cc],Yb)},da.selection=bb,da.selector=qb,da.selectorAll=sb,da.style=Da,da.touch=function(cc,dc,ec){3>arguments.length&&(ec=dc,dc=nb().changedTouches);for(var fc,gc=0,hc=dc?dc.length:0;gc<hc;++gc)if((fc=dc[gc]).identifier===ec)return ob(cc,fc);return null},da.touches=function(cc,dc){null==dc&&(dc=nb().touches);for(var ec=0,fc=dc?dc.length:0,gc=Array(fc);ec<fc;++ec)gc[ec]=ob(cc,dc[ec]);return gc},da.window=Lb,da.customEvent=function(bc,cc,dc,ec){var fc=da.event;bc.sourceEvent=da.event,da.event=bc;try{return cc.apply(dc,ec)}finally{da.event=fc}},Object.defineProperty(da,"__esModule",{value:!0})})},{}],3:[function(aa,ba,ca){!function(da,ea){"object"==("undefined"===typeof ca?"undefined":babelHelpers.typeof(ca))&&void 0!==ba?ea(ca,aa("d3-time")):ea(da.d3=da.d3||{},da.d3)}(this,function(da,ea){"use strict";function fa(mb){if(0<=mb.y&&100>mb.y){var nb=new Date(-1,mb.m,mb.d,mb.H,mb.M,mb.S,mb.L);return nb.setFullYear(mb.y),nb}return new Date(mb.y,mb.m,mb.d,mb.H,mb.M,mb.S,mb.L)}function ga(mb){if(0<=mb.y&&100>mb.y){var nb=new Date(Date.UTC(-1,mb.m,mb.d,mb.H,mb.M,mb.S,mb.L));return nb.setUTCFullYear(mb.y),nb}return new Date(Date.UTC(mb.y,mb.m,mb.d,mb.H,mb.M,mb.S,mb.L))}function ha(mb){return{y:mb,m:0,d:1,H:0,M:0,S:0,L:0}}function ia(mb){function nb(bc,cc){return function(dc){var ec,fc,gc,hc=[],ic=-1,jc=0,kc=bc.length;for(dc instanceof Date||(dc=new Date(+dc));++ic<kc;)37===bc.charCodeAt(ic)&&(hc.push(bc.slice(jc,ic)),null==(fc=gb[ec=bc.charAt(++ic)])?fc="e"===ec?" ":"0":ec=bc.charAt(++ic),(gc=cc[ec])&&(ec=gc(dc,fc)),hc.push(ec),jc=ic+1);return hc.push(bc.slice(jc,ic)),hc.join("")}}function ob(bc,cc){return function(dc){var ec=ha(1900);if(pb(ec,bc,dc+="",0)!=dc.length)return null;if("p"in ec&&(ec.H=ec.H%12+12*ec.p),"W"in ec||"U"in ec){"w"in ec||(ec.w="W"in ec?1:0);var fc="Z"in ec?ga(ha(ec.y)).getUTCDay():cc(ha(ec.y)).getDay();ec.m=0,ec.d="W"in ec?(ec.w+6)%7+7*ec.W-(fc+5)%7:ec.w+7*ec.U-(fc+6)%7}return"Z"in ec?(ec.H+=0|ec.Z/100,ec.M+=ec.Z%100,ga(ec)):cc(ec)}}function pb(bc,cc,dc,ec){for(var fc,gc,hc=0,ic=cc.length,jc=dc.length;hc<ic;){if(ec>=jc)return-1;if(37===(fc=cc.charCodeAt(hc++))){if(fc=cc.charAt(hc++),!(gc=ac[fc in gb?cc.charAt(hc++):fc])||0>(ec=gc(bc,dc,ec)))return-1;}else if(fc!=dc.charCodeAt(ec++))return-1}return ec}var Ib=mb.dateTime,Jb=mb.date,Kb=mb.time,Lb=mb.periods,Mb=mb.days,Nb=mb.shortDays,Ob=mb.months,Pb=mb.shortMonths,Qb=la(Lb),Rb=ma(Lb),Sb=la(Mb),Tb=ma(Mb),Ub=la(Nb),Vb=ma(Nb),Wb=la(Ob),Xb=ma(Ob),Yb=la(Pb),Zb=ma(Pb),$b={a:function(bc){return Nb[bc.getDay()]},A:function(bc){return Mb[bc.getDay()]},b:function(bc){return Pb[bc.getMonth()]},B:function(bc){return Ob[bc.getMonth()]},c:null,d:Ba,e:Ba,H:Ca,I:Da,j:Ea,L:Fa,m:Ga,M:Ha,p:function(bc){return Lb[+(12<=bc.getHours())]},S:Ia,U:Ja,w:Ka,W:La,x:null,X:null,y:Ma,Y:Na,Z:Oa,"%":bb},_b={a:function(bc){return Nb[bc.getUTCDay()]},A:function(bc){return Mb[bc.getUTCDay()]},b:function(bc){return Pb[bc.getUTCMonth()]},B:function(bc){return Ob[bc.getUTCMonth()]},c:null,d:Pa,e:Pa,H:Qa,I:Ra,j:Sa,L:Ta,m:Ua,M:Va,p:function(bc){return Lb[+(12<=bc.getUTCHours())]},S:Wa,U:Xa,w:Ya,W:Za,x:null,X:null,y:$a,Y:_a,Z:ab,"%":bb},ac={a:function(bc,cc,dc){var ec=Ub.exec(cc.slice(dc));return ec?(bc.w=Vb[ec[0].toLowerCase()],dc+ec[0].length):-1},A:function(bc,cc,dc){var ec=Sb.exec(cc.slice(dc));return ec?(bc.w=Tb[ec[0].toLowerCase()],dc+ec[0].length):-1},b:function(bc,cc,dc){var ec=Yb.exec(cc.slice(dc));return ec?(bc.m=Zb[ec[0].toLowerCase()],dc+ec[0].length):-1},B:function(bc,cc,dc){var ec=Wb.exec(cc.slice(dc));return ec?(bc.m=Xb[ec[0].toLowerCase()],dc+ec[0].length):-1},c:function(bc,cc,dc){return pb(bc,Ib,cc,dc)},d:ua,e:ua,H:wa,I:wa,j:va,L:za,m:ta,M:xa,p:function(bc,cc,dc){var ec=Qb.exec(cc.slice(dc));return ec?(bc.p=Rb[ec[0].toLowerCase()],dc+ec[0].length):-1},S:ya,U:oa,w:na,W:pa,x:function(bc,cc,dc){return pb(bc,Jb,cc,dc)},X:function(bc,cc,dc){return pb(bc,Kb,cc,dc)},y:ra,Y:qa,Z:sa,"%":Aa};return $b.x=nb(Jb,$b),$b.X=nb(Kb,$b),$b.c=nb(Ib,$b),_b.x=nb(Jb,_b),_b.X=nb(Kb,_b),_b.c=nb(Ib,_b),{format:function(cc){var dc=nb(cc+="",$b);return dc.toString=function(){return cc},dc},parse:function(cc){var dc=ob(cc+="",fa);return dc.toString=function(){return cc},dc},utcFormat:function(cc){var dc=nb(cc+="",_b);return dc.toString=function(){return cc},dc},utcParse:function(cc){var dc=ob(cc,ga);return dc.toString=function(){return cc},dc}}}function ja(mb,nb,ob){var pb=0>mb?"-":"",qb=(pb?-mb:mb)+"",rb=qb.length;return pb+(rb<ob?Array(ob-rb+1).join(nb)+qb:qb)}function ka(mb){return mb.replace(jb,"\\$&")}function la(mb){return new RegExp("^(?:"+mb.map(ka).join("|")+")","i")}function ma(mb){for(var nb={},ob=-1,pb=mb.length;++ob<pb;)nb[mb[ob].toLowerCase()]=ob;return nb}function na(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+1));return pb?(mb.w=+pb[0],ob+pb[0].length):-1}function oa(mb,nb,ob){var pb=hb.exec(nb.slice(ob));return pb?(mb.U=+pb[0],ob+pb[0].length):-1}function pa(mb,nb,ob){var pb=hb.exec(nb.slice(ob));return pb?(mb.W=+pb[0],ob+pb[0].length):-1}function qa(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+4));return pb?(mb.y=+pb[0],ob+pb[0].length):-1}function ra(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+2));return pb?(mb.y=+pb[0]+(68<+pb[0]?1900:2e3),ob+pb[0].length):-1}function sa(mb,nb,ob){var pb=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(nb.slice(ob,ob+6));return pb?(mb.Z=pb[1]?0:-(pb[2]+(pb[3]||"00")),ob+pb[0].length):-1}function ta(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+2));return pb?(mb.m=pb[0]-1,ob+pb[0].length):-1}function ua(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+2));return pb?(mb.d=+pb[0],ob+pb[0].length):-1}function va(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+3));return pb?(mb.m=0,mb.d=+pb[0],ob+pb[0].length):-1}function wa(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+2));return pb?(mb.H=+pb[0],ob+pb[0].length):-1}function xa(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+2));return pb?(mb.M=+pb[0],ob+pb[0].length):-1}function ya(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+2));return pb?(mb.S=+pb[0],ob+pb[0].length):-1}function za(mb,nb,ob){var pb=hb.exec(nb.slice(ob,ob+3));return pb?(mb.L=+pb[0],ob+pb[0].length):-1}function Aa(mb,nb,ob){var pb=ib.exec(nb.slice(ob,ob+1));return pb?ob+pb[0].length:-1}function Ba(mb,nb){return ja(mb.getDate(),nb,2)}function Ca(mb,nb){return ja(mb.getHours(),nb,2)}function Da(mb,nb){return ja(mb.getHours()%12||12,nb,2)}function Ea(mb,nb){return ja(1+ea.timeDay.count(ea.timeYear(mb),mb),nb,3)}function Fa(mb,nb){return ja(mb.getMilliseconds(),nb,3)}function Ga(mb,nb){return ja(mb.getMonth()+1,nb,2)}function Ha(mb,nb){return ja(mb.getMinutes(),nb,2)}function Ia(mb,nb){return ja(mb.getSeconds(),nb,2)}function Ja(mb,nb){return ja(ea.timeSunday.count(ea.timeYear(mb),mb),nb,2)}function Ka(mb){return mb.getDay()}function La(mb,nb){return ja(ea.timeMonday.count(ea.timeYear(mb),mb),nb,2)}function Ma(mb,nb){return ja(mb.getFullYear()%100,nb,2)}function Na(mb,nb){return ja(mb.getFullYear()%1e4,nb,4)}function Oa(mb){var nb=mb.getTimezoneOffset();return(0<nb?"-":(nb*=-1,"+"))+ja(0|nb/60,"0",2)+ja(nb%60,"0",2)}function Pa(mb,nb){return ja(mb.getUTCDate(),nb,2)}function Qa(mb,nb){return ja(mb.getUTCHours(),nb,2)}function Ra(mb,nb){return ja(mb.getUTCHours()%12||12,nb,2)}function Sa(mb,nb){return ja(1+ea.utcDay.count(ea.utcYear(mb),mb),nb,3)}function Ta(mb,nb){return ja(mb.getUTCMilliseconds(),nb,3)}function Ua(mb,nb){return ja(mb.getUTCMonth()+1,nb,2)}function Va(mb,nb){return ja(mb.getUTCMinutes(),nb,2)}function Wa(mb,nb){return ja(mb.getUTCSeconds(),nb,2)}function Xa(mb,nb){return ja(ea.utcSunday.count(ea.utcYear(mb),mb),nb,2)}function Ya(mb){return mb.getUTCDay()}function Za(mb,nb){return ja(ea.utcMonday.count(ea.utcYear(mb),mb),nb,2)}function $a(mb,nb){return ja(mb.getUTCFullYear()%100,nb,2)}function _a(mb,nb){return ja(mb.getUTCFullYear()%1e4,nb,4)}function ab(){return"+0000"}function bb(){return"%"}function cb(mb){return fb=ia(mb),da.timeFormat=fb.format,da.timeParse=fb.parse,da.utcFormat=fb.utcFormat,da.utcParse=fb.utcParse,fb}var fb,gb={"-":"",_:" ",0:"0"},hb=/^\s*\d+/,ib=/^%/,jb=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;cb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var kb=Date.prototype.toISOString?function(mb){return mb.toISOString()}:da.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),lb=+new Date("2000-01-01T00:00:00.000Z")?function(mb){var nb=new Date(mb);return isNaN(nb)?null:nb}:da.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");da.timeFormatDefaultLocale=cb,da.timeFormatLocale=ia,da.isoFormat=kb,da.isoParse=lb,Object.defineProperty(da,"__esModule",{value:!0})})},{"d3-time":4}],4:[function(aa,ba,ca){!function(da,ea){ea("object"==("undefined"===typeof ca?"undefined":babelHelpers.typeof(ca))&&void 0!==ba?ca:da.d3=da.d3||{})}(this,function(da){"use strict";function ea(jb,kb,lb,mb){function nb(ob){return jb(ob=new Date(+ob)),ob}return nb.floor=nb,nb.ceil=function(ob){return jb(ob=new Date(ob-1)),kb(ob,1),jb(ob),ob},nb.round=function(ob){var pb=nb(ob),qb=nb.ceil(ob);return ob-pb<qb-ob?pb:qb},nb.offset=function(ob,pb){return kb(ob=new Date(+ob),null==pb?1:Math.floor(pb)),ob},nb.range=function(ob,pb,qb){var rb=[];if(ob=nb.ceil(ob),qb=null==qb?1:Math.floor(qb),!(ob<pb&&0<qb))return rb;do rb.push(new Date(+ob));while((kb(ob,qb),jb(ob),ob<pb));return rb},nb.filter=function(ob){return ea(function(pb){if(pb>=pb)for(;jb(pb),!ob(pb);)pb.setTime(pb-1)},function(pb,qb){if(pb>=pb)for(;0<=--qb;)for(;kb(pb,1),!ob(pb););})},lb&&(nb.count=function(ob,pb){return ha.setTime(+ob),ia.setTime(+pb),jb(ha),jb(ia),Math.floor(lb(ha,ia))},nb.every=function(ob){return ob=Math.floor(ob),isFinite(ob)&&0<ob?1<ob?nb.filter(mb?function(pb){return 0==mb(pb)%ob}:function(pb){return 0==nb.count(0,pb)%ob}):nb:null}),nb}function fa(jb){return ea(function(kb){kb.setDate(kb.getDate()-(kb.getDay()+7-jb)%7),kb.setHours(0,0,0,0)},function(kb,lb){kb.setDate(kb.getDate()+7*lb)},function(kb,lb){return(lb-kb-(lb.getTimezoneOffset()-kb.getTimezoneOffset())*la)/ma})}function ga(jb){return ea(function(kb){kb.setUTCDate(kb.getUTCDate()-(kb.getUTCDay()+7-jb)%7),kb.setUTCHours(0,0,0,0)},function(kb,lb){kb.setUTCDate(kb.getUTCDate()+7*lb)},function(kb,lb){return(lb-kb)/ma})}var ha=new Date,ia=new Date,ja=ea(function(){},function(jb,kb){jb.setTime(+jb+kb)},function(jb,kb){return kb-jb});ja.every=function(jb){return jb=Math.floor(jb),isFinite(jb)&&0<jb?1<jb?ea(function(kb){kb.setTime(Math.floor(kb/jb)*jb)},function(kb,lb){kb.setTime(+kb+lb*jb)},function(kb,lb){return(lb-kb)/jb}):ja:null};var ka=ja.range,la=6e4,ma=6048e5,na=ea(function(jb){jb.setTime(1e3*Math.floor(jb/1e3))},function(jb,kb){jb.setTime(+jb+1e3*kb)},function(jb,kb){return(kb-jb)/1e3},function(jb){return jb.getUTCSeconds()}),oa=na.range,pa=ea(function(jb){jb.setTime(Math.floor(jb/la)*la)},function(jb,kb){jb.setTime(+jb+kb*la)},function(jb,kb){return(kb-jb)/la},function(jb){return jb.getMinutes()}),qa=pa.range,ra=ea(function(jb){var kb=jb.getTimezoneOffset()*la%36e5;0>kb&&(kb+=36e5),jb.setTime(36e5*Math.floor((+jb-kb)/36e5)+kb)},function(jb,kb){jb.setTime(+jb+36e5*kb)},function(jb,kb){return(kb-jb)/36e5},function(jb){return jb.getHours()}),sa=ra.range,ta=ea(function(jb){jb.setHours(0,0,0,0)},function(jb,kb){jb.setDate(jb.getDate()+kb)},function(jb,kb){return(kb-jb-(kb.getTimezoneOffset()-jb.getTimezoneOffset())*la)/864e5},function(jb){return jb.getDate()-1}),ua=ta.range,va=fa(0),wa=fa(1),xa=fa(2),ya=fa(3),za=fa(4),Aa=fa(5),Ba=fa(6),Ca=va.range,Da=wa.range,Ea=xa.range,Fa=ya.range,Ga=za.range,Ha=Aa.range,Ia=Ba.range,Ja=ea(function(jb){jb.setDate(1),jb.setHours(0,0,0,0)},function(jb,kb){jb.setMonth(jb.getMonth()+kb)},function(jb,kb){return kb.getMonth()-jb.getMonth()+12*(kb.getFullYear()-jb.getFullYear())},function(jb){return jb.getMonth()}),Ka=Ja.range,La=ea(function(jb){jb.setMonth(0,1),jb.setHours(0,0,0,0)},function(jb,kb){jb.setFullYear(jb.getFullYear()+kb)},function(jb,kb){return kb.getFullYear()-jb.getFullYear()},function(jb){return jb.getFullYear()});La.every=function(jb){return isFinite(jb=Math.floor(jb))&&0<jb?ea(function(kb){kb.setFullYear(Math.floor(kb.getFullYear()/jb)*jb),kb.setMonth(0,1),kb.setHours(0,0,0,0)},function(kb,lb){kb.setFullYear(kb.getFullYear()+lb*jb)}):null};var Ma=La.range,Na=ea(function(jb){jb.setUTCSeconds(0,0)},function(jb,kb){jb.setTime(+jb+kb*la)},function(jb,kb){return(kb-jb)/la},function(jb){return jb.getUTCMinutes()}),Oa=Na.range,Pa=ea(function(jb){jb.setUTCMinutes(0,0,0)},function(jb,kb){jb.setTime(+jb+36e5*kb)},function(jb,kb){return(kb-jb)/36e5},function(jb){return jb.getUTCHours()}),Qa=Pa.range,Ra=ea(function(jb){jb.setUTCHours(0,0,0,0)},function(jb,kb){jb.setUTCDate(jb.getUTCDate()+kb)},function(jb,kb){return(kb-jb)/864e5},function(jb){return jb.getUTCDate()-1}),Sa=Ra.range,Ta=ga(0),Ua=ga(1),Va=ga(2),Wa=ga(3),Xa=ga(4),Ya=ga(5),Za=ga(6),$a=Ta.range,_a=Ua.range,ab=Va.range,bb=Wa.range,cb=Xa.range,db=Ya.range,eb=Za.range,fb=ea(function(jb){jb.setUTCDate(1),jb.setUTCHours(0,0,0,0)},function(jb,kb){jb.setUTCMonth(jb.getUTCMonth()+kb)},function(jb,kb){return kb.getUTCMonth()-jb.getUTCMonth()+12*(kb.getUTCFullYear()-jb.getUTCFullYear())},function(jb){return jb.getUTCMonth()}),gb=fb.range,hb=ea(function(jb){jb.setUTCMonth(0,1),jb.setUTCHours(0,0,0,0)},function(jb,kb){jb.setUTCFullYear(jb.getUTCFullYear()+kb)},function(jb,kb){return kb.getUTCFullYear()-jb.getUTCFullYear()},function(jb){return jb.getUTCFullYear()});hb.every=function(jb){return isFinite(jb=Math.floor(jb))&&0<jb?ea(function(kb){kb.setUTCFullYear(Math.floor(kb.getUTCFullYear()/jb)*jb),kb.setUTCMonth(0,1),kb.setUTCHours(0,0,0,0)},function(kb,lb){kb.setUTCFullYear(kb.getUTCFullYear()+lb*jb)}):null};var ib=hb.range;da.timeInterval=ea,da.timeMillisecond=ja,da.timeMilliseconds=ka,da.utcMillisecond=ja,da.utcMilliseconds=ka,da.timeSecond=na,da.timeSeconds=oa,da.utcSecond=na,da.utcSeconds=oa,da.timeMinute=pa,da.timeMinutes=qa,da.timeHour=ra,da.timeHours=sa,da.timeDay=ta,da.timeDays=ua,da.timeWeek=va,da.timeWeeks=Ca,da.timeSunday=va,da.timeSundays=Ca,da.timeMonday=wa,da.timeMondays=Da,da.timeTuesday=xa,da.timeTuesdays=Ea,da.timeWednesday=ya,da.timeWednesdays=Fa,da.timeThursday=za,da.timeThursdays=Ga,da.timeFriday=Aa,da.timeFridays=Ha,da.timeSaturday=Ba,da.timeSaturdays=Ia,da.timeMonth=Ja,da.timeMonths=Ka,da.timeYear=La,da.timeYears=Ma,da.utcMinute=Na,da.utcMinutes=Oa,da.utcHour=Pa,da.utcHours=Qa,da.utcDay=Ra,da.utcDays=Sa,da.utcWeek=Ta,da.utcWeeks=$a,da.utcSunday=Ta,da.utcSundays=$a,da.utcMonday=Ua,da.utcMondays=_a,da.utcTuesday=Va,da.utcTuesdays=ab,da.utcWednesday=Wa,da.utcWednesdays=bb,da.utcThursday=Xa,da.utcThursdays=cb,da.utcFriday=Ya,da.utcFridays=db,da.utcSaturday=Za,da.utcSaturdays=eb,da.utcMonth=fb,da.utcMonths=gb,da.utcYear=hb,da.utcYears=ib,Object.defineProperty(da,"__esModule",{value:!0})})},{}],5:[function(aa,ba,ca){"use strict";Object.defineProperty(ca,"__esModule",{value:!0});var ea;!function(fa){fa.QUANTITATIVE="quantitative",fa.ORDINAL="ordinal",fa.TEMPORAL="temporal",fa.NOMINAL="nominal"}(ea=ca.Type||(ca.Type={})),ca.QUANTITATIVE=ea.QUANTITATIVE,ca.ORDINAL=ea.ORDINAL,ca.TEMPORAL=ea.TEMPORAL,ca.NOMINAL=ea.NOMINAL,ca.getFullName=function(fa){if(fa)switch(fa=fa.toLowerCase()){case"q":case ca.QUANTITATIVE:return"quantitative";case"t":case ca.TEMPORAL:return"temporal";case"o":case ca.ORDINAL:return"ordinal";case"n":case ca.NOMINAL:return"nominal";}}},{}],6:[function(aa,ba,ca){"use strict";function fa(ka){return 0==ka%1?ha.format(",")(ka):ha.format(",.2f")(ka)}function ga(ka){var la=ja.timeFormat(".%L"),ma=ja.timeFormat(":%S"),na=ja.timeFormat("%I:%M"),oa=ja.timeFormat("%I %p"),pa=ja.timeFormat("%a %d"),qa=ja.timeFormat("%b %d"),ra=ja.timeFormat("%B"),sa=ja.timeFormat("%Y");return(ia.timeSecond(ka)<ka?la:ia.timeMinute(ka)<ka?ma:ia.timeHour(ka)<ka?na:ia.timeDay(ka)<ka?oa:ia.timeMonth(ka)<ka?ia.timeWeek(ka)<ka?pa:qa:ia.timeYear(ka)<ka?ra:sa)(ka)}Object.defineProperty(ca,"__esModule",{value:!0});var ha=aa("d3-format"),ia=aa("d3-time"),ja=aa("d3-time-format");ca.customFormat=function(ka,la,ma){if(void 0!==ka&&null!==ka&&la)switch(la){case"time":return ma?ja.timeFormat(ma)(ka):ga(ka);case"number":return ma?ha.format(ma)(ka):fa(ka);case"string":default:return ka;}},ca.autoFormat=function(ka){return"number"==typeof ka?fa(ka):ka instanceof Date?ga(ka):ka},ca.autoNumberFormat=fa,ca.autoTimeFormat=ga},{"d3-format":1,"d3-time":4,"d3-time-format":3}],7:[function(aa,ba,ca){"use strict";function fa(ta,ua){ta.addEventListener("mouseover.tooltipInit",function(va,wa){ka(wa)&&(ga(),ra=window.setTimeout(function(){ha(va,wa,ua)},ua.delay||na.DELAY))}),ta.addEventListener("mousemove.tooltipUpdate",function(va,wa){ka(wa)&&sa&&ia(va,wa,ua)}),ta.addEventListener("mouseout.tooltipRemove",function(va,wa){ka(wa)&&(ga(),sa&&ja(va,wa,ua))})}function ga(){window.clearTimeout(ra),ra=void 0}function ha(ta,ua,va){var wa=qa.getTooltipPlaceholder(),xa=oa.getTooltipData(ua,va);xa&&0!==xa.length&&(qa.bindData(wa,xa),qa.updatePosition(ta,va),qa.updateColorTheme(va),ma.select("#vis-tooltip").style("visibility","visible"),sa=!0,va.onAppear&&va.onAppear(ta,ua))}function ia(ta,ua,va){ka(ua)&&(qa.updatePosition(ta,va),va.onMove&&va.onMove(ta,ua))}function ja(ta,ua,va){ka(ua)&&(ma.select("#vis-tooltip").style("visibility","hidden"),sa=!1,qa.clearData(),qa.clearColorTheme(),qa.clearPosition(),va.onDisappear&&va.onDisappear(ta,ua))}function ka(ta){return ta&&ta.datum&&!ta.datum._facetID}function la(ta){var ua={};for(var va in ta)ta.hasOwnProperty(va)&&(ua[va]=ta[va]);return ua}Object.defineProperty(ca,"__esModule",{value:!0});var ma=aa("d3-selection"),na=aa("./options"),oa=aa("./parseOption"),pa=aa("./supplementField"),qa=aa("./tooltipDisplay"),ra=void 0,sa=!1;ca.vega=function(ta,ua){return void 0===ua&&(ua={showAllFields:!0}),fa(ta,la(ua)),{destroy:function(){ta.removeEventListener("mouseover.tooltipInit"),ta.removeEventListener("mousemove.tooltipUpdate"),ta.removeEventListener("mouseout.tooltipRemove"),ga()}}},ca.vegaLite=function(ta,ua,va){return void 0===va&&(va={showAllFields:!0}),va=pa.supplementOptions(la(va),ua),fa(ta,va),{destroy:function(){ta.removeEventListener("mouseover.tooltipInit"),ta.removeEventListener("mousemove.tooltipUpdate"),ta.removeEventListener("mouseout.tooltipRemove"),ga()}}}},{"./options":8,"./parseOption":9,"./supplementField":10,"./tooltipDisplay":11,"d3-selection":2}],8:[function(aa,ba,ca){"use strict";Object.defineProperty(ca,"__esModule",{value:!0}),ca.DELAY=100},{}],9:[function(aa,ba,ca){"use strict";function ea(ma,na){var oa=[];return na.fields.forEach(function(pa){var qa=pa.title?pa.title:pa.field,ra=fa(ma,pa.field);if(void 0!==ra){var sa=la.customFormat(ra,pa.formatType,pa.format)||la.autoFormat(ra);oa.push({title:qa,value:sa})}}),oa}function fa(ma,na){var oa,pa=na.split("."),qa=pa[0];return pa.shift(),ma[qa]&&(oa=ma[qa],pa.forEach(function(ra){oa[ra]&&(oa=oa[ra])})),void 0===oa?void console.warn("[Tooltip] Cannot find field "+na+" in data."):oa}function ga(ma,na){var oa=[],pa={};if(na&&na.fields)for(var sa,qa=0,ra=na.fields;qa<ra.length;qa++)sa=ra[qa],pa[sa.field]=sa;for(var ta in ma)if(ma.hasOwnProperty(ta)){var ua=ma[ta],va=void 0;va=pa[ta]&&pa[ta].title?pa[ta].title:ta;var wa=void 0,xa=void 0;pa[ta]&&(wa=pa[ta].formatType,xa=pa[ta].format);var ya=la.customFormat(ua,wa,xa)||la.autoFormat(ua);oa.push({title:va,value:ya})}return oa}function ha(ma,na){na.forEach(function(oa){delete ma[oa]})}function ia(ma,na){na&&na.forEach(function(oa){oa.removeOriginalTemporalField&&ha(ma,[oa.removeOriginalTemporalField])})}function ja(ma,na){if(na)return na.forEach(function(oa){if(!0===oa.bin){var pa=oa.field,qa=pa.concat("_start"),ra=pa.concat("_mid"),sa=pa.concat("_end"),ta=ma[qa],ua=ma[sa];if(void 0!==ta&&void 0!==ua){ma[pa]=ta+"-"+ua}var wa=[];wa.push(qa,ra,sa),ha(ma,wa)}}),ma}function ka(ma,na){if("line"===ma||"area"===ma){var oa=[];for(var pa in na)na.hasOwnProperty(pa)&&na[pa]instanceof Date&&oa.push(pa);ha(na,oa)}}Object.defineProperty(ca,"__esModule",{value:!0});var la=aa("./formatFieldValue");ca.getTooltipData=function(ma,na){if("group"!==ma.mark.marktype||"nested_main_group"!==ma.mark.name){var oa={};for(var pa in ma.datum)ma.datum.hasOwnProperty(pa)&&(oa[pa]=ma.datum[pa]);return ha(oa,["_id","_prev","width","height","count_start","count_end","layout_start","layout_mid","layout_end","layout_path","layout_x","layout_y"]),ia(oa,na.fields),ja(oa,na.fields),ka(ma.mark.marktype,oa),!0===na.showAllFields?ga(oa,na):ea(oa,na)}},ca.prepareCustomFieldsData=ea,ca.getValue=fa,ca.prepareAllFieldsData=ga,ca.removeFields=ha,ca.removeDuplicateTimeFields=ia,ca.combineBinFields=ja,ca.dropFieldsForLineArea=ka},{"./formatFieldValue":6}],10:[function(aa,ba,ca){(function(da){"use strict";function fa(la,ma){if(ma&&la&&!(0>=la.length))if(ma.aggregate){for(var na=0,oa=la;na<oa.length;na++)if((ta=oa[na]).field===ma.field&&ta.aggregate===ma.aggregate)return ta;for(var pa=0,qa=la;pa<qa.length;pa++)if((ta=qa[pa]).field===ma.field&&!ta.aggregate)return ta}else for(var ta,ra=0,sa=la;ra<sa.length;ra++)if(ta=sa[ra],ta.field===ma.field)return ta}function ga(la,ma){if(ma&&ma.field&&la)for(var pa,na=0,oa=la;na<oa.length;na++)if(pa=oa[na],pa.field===ma.field){if(!pa.aggregate)return pa;if(pa.aggregate===ma.aggregate||!ma.aggregate)return pa}}function ha(la,ma,na){var oa=ia.util.extend({},na.config);{if(la||ma){!la&&ma&&(la={}),la&&!ma&&(ma={});var pa={};if(pa.field=ma.field?ia.fieldDef.field(ma):la.field,ma.type===ja.TEMPORAL&&ma.timeUnit){var qa=ma.field;pa.removeOriginalTemporalField=qa;for(var ta,ra=0,sa=ia.spec.fieldDefs(na);ra<sa.length;ra++)if(ta=sa[ra],ta.field===qa&&!ta.timeUnit){pa.removeOriginalTemporalField=void 0;break}}if(oa.countTitle||(oa.countTitle=ia.config.defaultConfig.countTitle),pa.title=la.title?la.title:ia.fieldDef.title(ma,oa),pa.formatType=la.formatType?la.formatType:ka[ma.type],la.format)pa.format=la.format;else switch(pa.formatType){case"time":pa.format=ma.timeUnit?ia.timeUnit.formatExpression(ma.timeUnit,"",!1,!1).split("'")[1]:oa.timeFormat||ia.config.defaultConfig.timeFormat;break;case"number":pa.format=oa.numberFormat;}return ma.bin&&(pa.field=pa.field.replace("_start","_range"),pa.bin=!0,pa.formatType="string"),pa}console.error("[Tooltip] Cannot supplement a field when field and fieldDef are both empty.")}}Object.defineProperty(ca,"__esModule",{value:!0});var ia="undefined"==typeof window?void 0===da?null:da.vl:window.vl,ja=aa("vega-lite/build/src/type"),ka={quantitative:"number",temporal:"time",ordinal:void 0,nominal:void 0};ca.supplementOptions=function(la,ma){var na=[];return!1===la.showAllFields?la.fields&&la.fields.forEach(function(oa){var pa=ha(oa,ga(ia.spec.fieldDefs(ma),oa),ma);na.push(pa)}):ia.spec.fieldDefs(ma).forEach(function(oa){var pa=ha(fa(la.fields,oa),oa,ma);na.push(pa)}),la.fields=na,la},ca.getFieldOption=fa,ca.getFieldDef=ga,ca.supplementFieldOption=ha}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"vega-lite/build/src/type":5}],11:[function(aa,ba,ca){"use strict";function ja(){ka.select("#vis-tooltip").classed("dark-theme light-theme",!1)}Object.defineProperty(ca,"__esModule",{value:!0});var ka=aa("d3-selection");ca.getTooltipPlaceholder=function(){return ka.select("#vis-tooltip").empty()?ka.select("body").append("div").attr("id","vis-tooltip").attr("class","vg-tooltip"):ka.select("#vis-tooltip")},ca.bindData=function(la,ma){la.selectAll("table").remove();var na=la.append("table").selectAll(".tooltip-row").data(ma);na.exit().remove();var oa=na.enter().append("tr").attr("class","tooltip-row");oa.append("td").attr("class","key").text(function(pa){return pa.title+":"}),oa.append("td").attr("class","value").text(function(pa){return pa.value})},ca.clearData=function(){ka.select("#vis-tooltip").selectAll(".tooltip-row").data([]).exit().remove()},ca.updatePosition=function(la,ma){var na=10,oa=10;ma&&ma.offset&&void 0!==ma.offset.x&&null!==ma.offset.x&&(na=ma.offset.x),ma&&ma.offset&&void 0!==ma.offset.y&&null!==ma.offset.y&&(oa=ma.offset.y),ka.select("#vis-tooltip").style("top",function(){var pa=this.getBoundingClientRect().height;return la.clientY+pa+oa<window.innerHeight?la.clientY+oa+"px":la.clientY-pa-oa+"px"}).style("left",function(){var pa=this.getBoundingClientRect().width;return la.clientX+pa+na<window.innerWidth?la.clientX+na+"px":la.clientX-pa-na+"px"})},ca.clearPosition=function(){ka.select("#vis-tooltip").style("top","-9999px").style("left","-9999px")},ca.updateColorTheme=function(la){ja(),la&&"dark"===la.colorTheme?ka.select("#vis-tooltip").classed("dark-theme",!0):ka.select("#vis-tooltip").classed("light-theme",!0)},ca.clearColorTheme=ja},{"d3-selection":2}]},{},[7])(7)});</script><script>(function(a){a.loadScript=function(b,c,d){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,f=document.createElement('script');return f.src=b,f.async=e,c&&(f.onload=c),d&&(f.onerror=d),document.body.appendChild(f),f},a.loadStylesheet=function(b,c,d){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,f=document.createElement('link');return f.href=b,f.rel='stylesheet',f.async=e,c&&(f.onload=c),d&&(f.onerror=d),document.body.appendChild(f),f}})(window.PolymerVis=window.PolymerVis||{});</script><dom-module id="vega-element" assetpath="../../bower_components/vega-element/"><template><style>:host{display:block;}</style><div id="vegaElement"></div><slot id="slot"></slot></template><script>var VegaElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;if(babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this._vegaReady=window.vega,!window.d3&&!window.vega)return void PolymerVis.loadScript(this.vegaSrc,function(){if(d._vegaReady=window.vega&&!0,'3'!==window.vega.version[0])throw new Error('vega version must be at least 3.0.0')});if(window.d3&&!window.vega){if('4'!==window.d3.version[0])throw new Error('d3 version must be at least 4.0.0');PolymerVis.loadScript(this.vegaCorSrc,function(){if(d._vegaReady=window.vega&&!0,'3'!==window.vega.version[0])throw new Error('vega version must be at least 3.0.0')})}}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._connected=!0,this._observeSlot()}},{key:'disconnectedCallback',value:function(){this._connected=!1,this._observer&&this._observer.disconnect()}},{key:'run',value:function(d){if(this.view)return this.view=this.view.run(d||this.customEncode),this.rendered=!0,this.view}},{key:'parse',value:function(d,e){if(this._vegaReady&&d)try{return vega.parse(d,e)}catch(f){this.dispatchEvent(new CustomEvent('error',{detail:f})),console.warn(f)}}},{key:'compile',value:function(){var e=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'none';return this.vegaLiteSpec?new Promise(function(g,h){e.__loadVegaLite(function(){var i=vega[f||e.logLevel]||vega.None;try{var j=window.vl.compile(e.vegaLiteSpec,i).spec;e.vegaSpec=j,g(j)}catch(k){e.dispatchEvent(new CustomEvent('error',{detail:k})),h(k)}})}).catch(function(g){e.dispatchEvent(new CustomEvent('error',{detail:g})),console.warn(g)}):void 0}},{key:'resize',value:function(){return this.view?this.view.resize():void 0}},{key:'debounceRun',value:function(){var d=this;this._debounceJob=Polymer.Debouncer.debounce(this._debounceJob,Polymer.Async.microTask,function(){d.run()})}},{key:'loadJSON',value:function(d){var e=this;if(!this._vegaReady||!d)return Promise.reject('url or vega not ready!');var f=vega.loader();return f.load(d).then(function(g){return JSON.parse(g)}).catch(function(g){e.dispatchEvent(new CustomEvent('error',{detail:g}))})}},{key:'downloadImage',value:function(){var d=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'png';this.view&&this.view.toImageURL(e).then(function(f){var g=document.createElement('a');g.setAttribute('href',f),g.setAttribute('target','_blank'),g.setAttribute('download','vega-export.'+e),g.dispatchEvent(new MouseEvent('click'))}).catch(function(f){d.dispatchEvent(new CustomEvent('error',{detail:f}))})}},{key:'_loadTooltipPlugin',value:function(d,e){this.tooltip&&this._tooltipReady&&this.rendered&&d&&window.vegaTooltip.vega(d,e)}},{key:'_loadTooltip',value:function(d){var e=this;this._tooltipReady=window.vegaTooltip&&!0,!this._tooltipReady&&d&&this._vegaReady&&(PolymerVis.loadScript(this.tooltipPluginSrc,function(){e._tooltipReady=window.vegaTooltip&&!0}),PolymerVis.loadStylesheet(this.tooltipPluginCssSrc))}},{key:'_vegaSpecUrlChanged',value:function(d){var e=this;d&&this.loadJSON(d).then(function(f){e.vegaSpec=f}).catch(function(){})}},{key:'_vegaLiteSpecUrlChanged',value:function(d){var e=this;d&&this.loadJSON(d).then(function(f){e.vegaLiteSpec=f}).catch(function(f){e.dispatchEvent(new CustomEvent('error',{detail:f}))})}},{key:'_observeSlot',value:function(){return this._observer?void this._observer.connect():void(this._observer=new Polymer.FlattenedNodesObserver(this.$.slot,this._slotChanged.bind(this)))}},{key:'_bindSlots',value:function(d){var e=this;if(this.view&&d&&this.vegaSpec&&this.rendered){var f=0;d.forEach(function(g){'VEGA-DATA'===g.nodeName&&e.vegaSpec&&(g.name=g.name||e.vegaSpec.data[f].name,f+=1),g.view=e.view,g.rendered=e.rendered})}}},{key:'_slotChanged',value:function(){this.slots=this.shadowRoot.querySelector('slot').assignedNodes({flatten:!0}).filter(function(d){return 0<=d.nodeName.indexOf('VEGA')})}},{key:'_computeView',value:function(d,e){if(this._vegaReady&&d&&this._connected){this.view&&this.view.finalize();var f=vega[f]||vega.None,g=new vega.View(d,{logLevel:f,renderer:this.renderer}).initialize(e?null:this.$.vegaElement);return this.rendered=!1,this.dispatchEvent(new CustomEvent('view-ready',{detail:g})),g}}},{key:'_setLogLevel',value:function(d){if(this.view&&vega[d])return this.view=this.view.logLevel(vega[d]),this.rendered||this.debounceRun(),this.view}},{key:'_setHover',value:function(d,e){if(this.view&&this.hover)return this.view=this.view.hover(d,e),this.rendered||this.debounceRun(),this.view}},{key:'_setRenderer',value:function(d){if(this.view&&d)return this.view=this.view.renderer(d),this.rendered||this.debounceRun(),this.view}},{key:'_updateBackground',value:function(d){this.view&&d&&(this.view.background(d),this.rendered&&this.debounceRun())}},{key:'_updateWidth',value:function(d){this.view&&d&&(this.view.width(d),this.rendered&&this.debounceRun())}},{key:'_updateHeight',value:function(d){this.view&&d&&(this.view.height(d),this.rendered&&this.debounceRun())}},{key:'_updatePadding',value:function(d){this.view&&d&&(this.view.padding(d),this.rendered&&this.debounceRun())}},{key:'__loadVegaLite',value:function(d){var e=this;this._vegaLiteReady=window.vl,window.vl?d():PolymerVis.loadScript(this.vegaLiteSrc,function(){if(e._vegaLiteReady=window.vl&&!0,'3'!==window.vega.version[0])throw new Error('vega version must be at least 3.0.0');d()})}}],[{key:'is',get:function(){return'vega-element'}},{key:'properties',get:function(){return{headless:{type:Boolean},tooltip:{type:Boolean},tooltipOptions:{type:Object,value:void 0},tooltipPluginSrc:{type:String,value:'https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.3.0/vega-tooltip.min.js'},tooltipPluginCssSrc:{type:String,value:'https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.3.0/vega-tooltip.min.css'},vegaSrc:{type:String,value:'https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.2/vega.min.js'},vegaCoreSrc:{type:String,value:'https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.2/vega-core.min.js'},vegaLiteSrc:{type:String,value:'https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.0-rc3/vega-lite.js'},logLevel:{type:String,value:'None'},renderer:{type:String,value:'canvas'},hover:{type:Boolean},hoverSet:{type:String,value:'hover'},updateSet:{type:String,value:'update'},background:{type:String},view:{type:Object,notify:!0,readOnly:!0,computed:'_computeView(_runtime, headless, _vegaReady, _connected)'},width:{type:Number,notify:!0,reflectToAttribute:!0},height:{type:Number,notify:!0,reflectToAttribute:!0},padding:{type:Object},vegaSpec:{type:Object,notify:!0},vegaLiteSpec:{type:Object,notify:!0},vegaSpecUrl:{type:String},vegaLiteSpecUrl:{type:String},config:{type:Object,value:function(){return{}}},customEncode:{type:String},rendered:{type:Boolean,notify:!0},slots:{type:Array,notify:!0},_runtime:{type:Object,computed:'parse(vegaSpec, config, _vegaReady)'},_vegaReady:{type:Boolean},_tooltipReady:{type:Boolean,value:!1},_connected:{type:Boolean},_debounceJob:{type:Object},_observer:{type:Object}}}},{key:'observers',get:function(){return['_vegaLiteSpecUrlChanged(vegaLiteSpecUrl, _vegaReady)','_vegaSpecUrlChanged(vegaSpecUrl, _vegaReady)','_setLogLevel(logLevel, view)','_setRenderer(renderer, view)','_setHover(hoverSet, updateSet, hover, view)','_updateWidth(width, view)','_updateHeight(height, view)','_updateBackground(background, view)','_updatePadding(padding, view)','_loadTooltip(tooltip, _vegaReady)','_loadTooltipPlugin(view, tooltipOptions, _tooltipReady, rendered)','compile(vegaLiteSpec, logLevel)','_bindSlots(slots, view, rendered, vegaSpec)']}}]),b}(Polymer.Element);window.customElements.define(VegaElement.is,VegaElement);</script></dom-module></div><custom-style><style is="custom-style" include="iron-flex iron-flex-alignment">body{padding:5px;margin:0px;font-family:verdana;}monaco-editor{height:90vh;width:100%;min-width:520px;min-height:400px;}.error{font-size:0.7em;color:#E91E63;}button{background-color:#4CAF50;border:none;color:white;margin:3px;padding:5px 15px;text-align:center;text-decoration:none;display:inline-block;font-size:12px;}button.off{background-color:#888;}</style></custom-style><dom-bind id="demo"><template><monaco-schemas keys="[[mode]]" schemas="{{schemas}}"></monaco-schemas><section class="layout horizontal"><div class="flex"><h2>Monaco Editor for Vega-Lite</h2><button id="readOnly" class="off" onclick="toggle('readOnly')">Read only</button> <button id="minimap" class="off" onclick="toggle('minimap')">Show minimap</button> <button id="autoparse" onclick="parse(true)">Auto parse</button><div class="error">[[error]]</div><monaco-editor id="editor" json-validate="" folding="" language="json" read-only="[[readOnly]]" minimap="[[minimap]]" value="[[value]]" json-schemas="[[schemas]]" on-value-changed="onValueChanged"></monaco-editor></div><div class="layout vertical center center-justified flex"><vega-element id="chart" hover="" tooltip="" enderer="svg" log-level="info"></vega-element></div></section></template></dom-bind><script>var demo=document.querySelector('dom-bind#demo');demo.mode='vega-lite',demo.error='',demo.autoParse=!0,demo.onValueChanged=function(a,b){b.value;demo.autoParse&&parse()},demo.value='{\n  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",\n  "description": "A simple bar chart with embedded data.",\n  "data": {\n    "values": [\n      {"a": "A","b": 28}, {"a": "B","b": 55}, {"a": "C","b": 43},\n      {"a": "D","b": 91}, {"a": "E","b": 81}, {"a": "F","b": 53},\n      {"a": "G","b": 19}, {"a": "H","b": 87}, {"a": "I","b": 52}\n    ]\n  },\n  "mark": "bar",\n  "encoding": {\n    "x": {"field": "a", "type": "ordinal"},\n    "y": {"field": "b", "type": "quantitative"}\n  }\n}';function toggle(a){demo[a]=!demo[a],document.querySelector('#'+a).classList.toggle('off',!demo[a])}function parse(a){a&&(demo.autoParse=!demo.autoParse,document.querySelector('#autoparse').classList.toggle('off',!demo.autoParse));try{demo.error='',demo.$.chart.set('vegaLiteSpec',JSON.parse(demo.$.editor.value))}catch(b){demo.error=b}}</script></body></html>