{
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "width": 500,
  "description": "A horizontal box plot showing median, min, and max in the US population distribution of age groups in 2000.",
  "data": {
    "url": "data/population.json"
  },
  "layer": [
    {
      "transform": [
        {
          "aggregate": [
            {
              "op": "q1",
              "field": "people",
              "as": "lowerBox"
            },
            {
              "op": "q3",
              "field": "people",
              "as": "upperBox"
            },
            {
              "op": "median",
              "field": "people",
              "as": "midBox"
            },
            {
              "op": "min",
              "field": "people",
              "as": "lowerWhisker"
            },
            {
              "op": "max",
              "field": "people",
              "as": "upperWhisker"
            }
          ],
          "groupby": [
            "age"
          ]
        }
      ],
      "layer": [
        {
          "mark": {
            "type": "rule",
            "style": "boxWhisker"
          },
          "encoding": {
            "x": {
              "field": "lowerWhisker",
              "type": "quantitative",
              "axis": {
                "title": "population"
              }
            },
            "x2": {
              "field": "lowerBox",
              "type": "quantitative"
            },
            "y": {
              "field": "age",
              "type": "ordinal"
            }
          }
        },
        {
          "mark": {
            "type": "rule",
            "style": "boxWhisker"
          },
          "encoding": {
            "x": {
              "field": "upperBox",
              "type": "quantitative"
            },
            "x2": {
              "field": "upperWhisker",
              "type": "quantitative"
            },
            "y": {
              "field": "age",
              "type": "ordinal"
            }
          }
        },
        {
          "mark": {
            "type": "bar",
            "style": "box"
          },
          "encoding": {
            "x": {
              "field": "lowerBox",
              "type": "quantitative"
            },
            "x2": {
              "field": "upperBox",
              "type": "quantitative"
            },
            "y": {
              "field": "age",
              "type": "ordinal"
            },
            "size": {
              "value": 14
            }
          }
        },
        {
          "mark": {
            "type": "tick",
            "style": "boxMid"
          },
          "encoding": {
            "x": {
              "field": "midBox",
              "type": "quantitative"
            },
            "y": {
              "field": "age",
              "type": "ordinal"
            },
            "color": {
              "value": "white"
            },
            "size": {
              "value": 14
            }
          }
        }
      ]
    },
    {
      "mark": "circle",
      "encoding": {
        "y": {
          "field": "age",
          "type": "ordinal"
        },
        "x": {
          "field": "people",
          "type": "quantitative",
          "axis": {
            "title": "population"
          }
        },
        "color": {
          "value": "black"
        },
        "opacity": {
          "value": 0.1
        }
      }
    }
  ]
}